(()=>{var P5=Object.defineProperty,R5=Object.defineProperties,M5=Object.getOwnPropertyDescriptors,If=Object.getOwnPropertySymbols,C5=Object.prototype.hasOwnProperty,O5=Object.prototype.propertyIsEnumerable,Gf=(a,e,t)=>e in a?P5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Bf=(a,e)=>{for(var t in e||(e={}))C5.call(e,t)&&Gf(a,t,e[t]);if(If)for(var t of If(e))O5.call(e,t)&&Gf(a,t,e[t]);return a},I5=(a,e)=>R5(a,M5(e)),G=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(G||{}),Sd=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){let e=typeof a.extension!="object"?{type:a.extension}:a.extension;a=I5(Bf({},e),{ref:a})}if(typeof a=="object")a=Bf({},a);else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},dr=(a,e)=>{var t;return(t=Sd(a).priority)!=null?t:e},be={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(Sd).forEach(e=>{e.type.forEach(t=>{var i,s;return(s=(i=this._removeHandlers)[t])==null?void 0:s.call(i,e)})}),this},add(...a){return a.map(Sd).forEach(e=>{e.type.forEach(t=>{var i,s;let r=this._addHandlers,o=this._queue;r[t]?(s=r[t])==null||s.call(r,e):(o[t]=o[t]||[],(i=o[t])==null||i.push(e))})}),this},handle(a,e,t){var i;let s=this._addHandlers,r=this._removeHandlers;s[a]=e,r[a]=t;let o=this._queue;return o[a]&&((i=o[a])==null||i.forEach(d=>e(d)),delete o[a]),this},handleByMap(a,e){return this.handle(a,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(a,e,t=-1){return this.handle(a,i=>{e.findIndex(s=>s.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((s,r)=>dr(r.value,t)-dr(s.value,t)))},i=>{let s=e.findIndex(r=>r.name===i.name);s!==-1&&e.splice(s,1)})},handleByList(a,e,t=-1){return this.handle(a,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,r)=>dr(r,t)-dr(s,t)))},i=>{let s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}};function fl(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ul={exports:{}},aS=ul.exports;(function(a){"use strict";var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function r(h,l,u,p,y){if(typeof u!="function")throw new TypeError("The listener must be a function");var _=new s(u,p||h,y),v=t?t+l:l;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],_]:h._events[v].push(_):(h._events[v]=_,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],l,u;if(this._eventsCount===0)return h;for(u in l=this._events)e.call(l,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},d.prototype.listeners=function(h){var l=t?t+h:h,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,y=u.length,_=new Array(y);p<y;p++)_[p]=u[p].fn;return _},d.prototype.listenerCount=function(h){var l=t?t+h:h,u=this._events[l];return u?u.fn?1:u.length:0},d.prototype.emit=function(h,l,u,p,y,_){var v=t?t+h:h;if(!this._events[v])return!1;var T=this._events[v],A=arguments.length,P,C;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),A){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,l),!0;case 3:return T.fn.call(T.context,l,u),!0;case 4:return T.fn.call(T.context,l,u,p),!0;case 5:return T.fn.call(T.context,l,u,p,y),!0;case 6:return T.fn.call(T.context,l,u,p,y,_),!0}for(C=1,P=new Array(A-1);C<A;C++)P[C-1]=arguments[C];T.fn.apply(T.context,P)}else{var F=T.length,D;for(C=0;C<F;C++)switch(T[C].once&&this.removeListener(h,T[C].fn,void 0,!0),A){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,l);break;case 3:T[C].fn.call(T[C].context,l,u);break;case 4:T[C].fn.call(T[C].context,l,u,p);break;default:if(!P)for(D=1,P=new Array(A-1);D<A;D++)P[D-1]=arguments[D];T[C].fn.apply(T[C].context,P)}}return!0},d.prototype.on=function(h,l,u){return r(this,h,l,u,!1)},d.prototype.once=function(h,l,u){return r(this,h,l,u,!0)},d.prototype.removeListener=function(h,l,u,p){var y=t?t+h:h;if(!this._events[y])return this;if(!l)return o(this,y),this;var _=this._events[y];if(_.fn)_.fn===l&&(!p||_.once)&&(!u||_.context===u)&&o(this,y);else{for(var v=0,T=[],A=_.length;v<A;v++)(_[v].fn!==l||p&&!_[v].once||u&&_[v].context!==u)&&T.push(_[v]);T.length?this._events[y]=T.length===1?T[0]:T:o(this,y)}return this},d.prototype.removeAllListeners=function(h){var l;return h?(l=t?t+h:h,this._events[l]&&o(this,l)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,a.exports=d})(ul);var G5=ul.exports,xt=fl(G5),B5={grad:.9,turn:360,rad:360/(2*Math.PI)},sa=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},qe=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*a)/t+0},Et=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),a>t?t:a>e?a:e},rp=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Ff=function(a){return{r:Et(a.r,0,255),g:Et(a.g,0,255),b:Et(a.b,0,255),a:Et(a.a)}},Sc=function(a){return{r:qe(a.r),g:qe(a.g),b:qe(a.b),a:qe(a.a,3)}},F5=/^#([0-9a-f]{3,8})$/i,hr=function(a){var e=a.toString(16);return e.length<2?"0"+e:e},np=function(a){var e=a.r,t=a.g,i=a.b,s=a.a,r=Math.max(e,t,i),o=r-Math.min(e,t,i),d=o?r===e?(t-i)/o:r===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(d<0?d+6:d),s:r?o/r*100:0,v:r/255*100,a:s}},op=function(a){var e=a.h,t=a.s,i=a.v,s=a.a;e=e/360*6,t/=100,i/=100;var r=Math.floor(e),o=i*(1-t),d=i*(1-(e-r)*t),h=i*(1-(1-e+r)*t),l=r%6;return{r:255*[i,d,o,o,h,i][l],g:255*[h,i,i,d,o,o][l],b:255*[o,o,h,i,i,d][l],a:s}},Df=function(a){return{h:rp(a.h),s:Et(a.s,0,100),l:Et(a.l,0,100),a:Et(a.a)}},kf=function(a){return{h:qe(a.h),s:qe(a.s),l:qe(a.l),a:qe(a.a,3)}},Uf=function(a){return op((t=(e=a).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},ms=function(a){return{h:(e=np(a)).h,s:(s=(200-(t=e.s))*(i=e.v)/100)>0&&s<200?t*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,i,s},D5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,L5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wd={string:[[function(a){var e=F5.exec(a);return e?(a=e[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?qe(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?qe(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var e=U5.exec(a)||L5.exec(a);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ff({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(a){var e=D5.exec(a)||k5.exec(a);if(!e)return null;var t,i,s=Df({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(B5[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Uf(s)},"hsl"]],object:[[function(a){var e=a.r,t=a.g,i=a.b,s=a.a,r=s===void 0?1:s;return sa(e)&&sa(t)&&sa(i)?Ff({r:Number(e),g:Number(t),b:Number(i),a:Number(r)}):null},"rgb"],[function(a){var e=a.h,t=a.s,i=a.l,s=a.a,r=s===void 0?1:s;if(!sa(e)||!sa(t)||!sa(i))return null;var o=Df({h:Number(e),s:Number(t),l:Number(i),a:Number(r)});return Uf(o)},"hsl"],[function(a){var e=a.h,t=a.s,i=a.v,s=a.a,r=s===void 0?1:s;if(!sa(e)||!sa(t)||!sa(i))return null;var o=function(d){return{h:rp(d.h),s:Et(d.s,0,100),v:Et(d.v,0,100),a:Et(d.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(r)});return op(o)},"hsv"]]},Lf=function(a,e){for(var t=0;t<e.length;t++){var i=e[t][0](a);if(i)return[i,e[t][1]]}return[null,void 0]},N5=function(a){return typeof a=="string"?Lf(a.trim(),wd.string):typeof a=="object"&&a!==null?Lf(a,wd.object):[null,void 0]};var wc=function(a,e){var t=ms(a);return{h:t.h,s:Et(t.s+100*e,0,100),l:t.l,a:t.a}},Ac=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},Nf=function(a,e){var t=ms(a);return{h:t.h,s:t.s,l:Et(t.l+100*e,0,100),a:t.a}},Ad=function(){function a(e){this.parsed=N5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return qe(Ac(this.rgba),2)},a.prototype.isDark=function(){return Ac(this.rgba)<.5},a.prototype.isLight=function(){return Ac(this.rgba)>=.5},a.prototype.toHex=function(){return e=Sc(this.rgba),t=e.r,i=e.g,s=e.b,o=(r=e.a)<1?hr(qe(255*r)):"","#"+hr(t)+hr(i)+hr(s)+o;var e,t,i,s,r,o},a.prototype.toRgb=function(){return Sc(this.rgba)},a.prototype.toRgbString=function(){return e=Sc(this.rgba),t=e.r,i=e.g,s=e.b,(r=e.a)<1?"rgba("+t+", "+i+", "+s+", "+r+")":"rgb("+t+", "+i+", "+s+")";var e,t,i,s,r},a.prototype.toHsl=function(){return kf(ms(this.rgba))},a.prototype.toHslString=function(){return e=kf(ms(this.rgba)),t=e.h,i=e.s,s=e.l,(r=e.a)<1?"hsla("+t+", "+i+"%, "+s+"%, "+r+")":"hsl("+t+", "+i+"%, "+s+"%)";var e,t,i,s,r},a.prototype.toHsv=function(){return e=np(this.rgba),{h:qe(e.h),s:qe(e.s),v:qe(e.v),a:qe(e.a,3)};var e},a.prototype.invert=function(){return Yt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},a.prototype.saturate=function(e){return e===void 0&&(e=.1),Yt(wc(this.rgba,e))},a.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yt(wc(this.rgba,-e))},a.prototype.grayscale=function(){return Yt(wc(this.rgba,-1))},a.prototype.lighten=function(e){return e===void 0&&(e=.1),Yt(Nf(this.rgba,e))},a.prototype.darken=function(e){return e===void 0&&(e=.1),Yt(Nf(this.rgba,-e))},a.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},a.prototype.alpha=function(e){return typeof e=="number"?Yt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):qe(this.rgba.a,3);var t},a.prototype.hue=function(e){var t=ms(this.rgba);return typeof e=="number"?Yt({h:e,s:t.s,l:t.l,a:t.a}):qe(t.h)},a.prototype.isEqual=function(e){return this.toHex()===Yt(e).toHex()},a}(),Yt=function(a){return a instanceof Ad?a:new Ad(a)},jf=[],j5=function(a){a.forEach(function(e){jf.indexOf(e)<0&&(e(Ad,wd),jf.push(e))})};function X5(a,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in t)i[t[s]]=s;var r={};a.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var d,h,l=i[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),p=1/0,y="black";if(!r.length)for(var _ in t)r[_]=new a(t[_]).toRgb();for(var v in t){var T=(d=u,h=r[v],Math.pow(d.r-h.r,2)+Math.pow(d.g-h.g,2)+Math.pow(d.b-h.b,2));T<p&&(p=T,y=v)}return y}},e.string.push([function(o){var d=o.toLowerCase(),h=d==="transparent"?"#0000":t[d];return h?new a(h).toRgb():null},"name"])}var H5=Object.defineProperty,Xf=Object.getOwnPropertySymbols,z5=Object.prototype.hasOwnProperty,V5=Object.prototype.propertyIsEnumerable,Hf=(a,e,t)=>e in a?H5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W5=(a,e)=>{for(var t in e||(e={}))z5.call(e,t)&&Hf(a,t,e[t]);if(Xf)for(var t of Xf(e))V5.call(e,t)&&Hf(a,t,e[t]);return a};j5([X5]);var gi=class bs{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof bs)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?W5({},e):e}_isSourceEqual(e,t){let i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,r)=>s===t[r]);if(e!==null&&t!==null){let s=Object.keys(e),r=Object.keys(t);return s.length!==r.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[t,i,s,r]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=r,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,i,s,r]=bs._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,r=r*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+r}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,s,r;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,r=255]=e,t/=255,i/=255,s/=255,r/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let d=bs.HEX_PATTERN.exec(e);d&&(e=`#${d[2]}`)}let o=Yt(e);o.isValid()&&({r:t,g:i,b:s,a:r}=o.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,r)=>{e[r]=Math.min(Math.max(s,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof bs||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};gi.shared=new gi,gi._temp=new gi,gi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var we=gi,Y5={cullArea:null,cullable:!1,cullableChildren:!0},$5=Math.PI*2,K5=180/Math.PI,q5=Math.PI/180,Me=class a{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new a(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}static get shared(){return Ec.x=0,Ec.y=0,Ec}},Ec=new Me,ie=class a{constructor(e=1,t=0,i=0,s=1,r=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=s,this.tx=r,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,s,r,o){return this.a=e,this.b=t,this.c=i,this.d=s,this.tx=r,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Me;let i=e.x,s=e.y;return t.x=this.a*i+this.c*s+this.tx,t.y=this.b*i+this.d*s+this.ty,t}applyInverse(e,t){t=t||new Me;let i=this.a,s=this.b,r=this.c,o=this.d,d=this.tx,h=this.ty,l=1/(i*o+r*-s),u=e.x,p=e.y;return t.x=o*l*u+-r*l*p+(h*r-d*o)*l,t.y=i*l*p+-s*l*u+(-h*i+d*s)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),s=this.a,r=this.c,o=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){let t=this.a,i=this.b,s=this.c,r=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this}appendFrom(e,t){let i=e.a,s=e.b,r=e.c,o=e.d,d=e.tx,h=e.ty,l=t.a,u=t.b,p=t.c,y=t.d;return this.a=i*l+s*p,this.b=i*u+s*y,this.c=r*l+o*p,this.d=r*u+o*y,this.tx=d*l+h*p+t.tx,this.ty=d*u+h*y+t.ty,this}setTransform(e,t,i,s,r,o,d,h,l){return this.a=Math.cos(d+l)*r,this.b=Math.sin(d+l)*r,this.c=-Math.sin(d-h)*o,this.d=Math.cos(d-h)*o,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,i=this.b,s=this.c,r=this.d,o=e.pivot,d=-Math.atan2(-s,r),h=Math.atan2(i,t),l=Math.abs(d+h);return l<1e-5||Math.abs($5-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=h),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(s*s+r*r),e.position.x=this.tx+(o.x*t+o.y*s),e.position.y=this.ty+(o.x*i+o.y*r),e}invert(){let e=this.a,t=this.b,i=this.c,s=this.d,r=this.tx,o=e*s-t*i;return this.a=s/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-s*r)/o,this.ty=-(e*this.ty-t*r)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}static get IDENTITY(){return Q5.identity()}static get shared(){return Z5.identity()}},Z5=new ie,Q5=new ie,We=class a{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new a(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}},Pc={default:-1};function Ge(a="default"){return Pc[a]===void 0&&(Pc[a]=-1),++Pc[a]}var Es=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var t;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(t=i.init)==null||t.call(i,e),i}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}},Ed=class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Es(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}},ye=new Ed,J5={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){this.cacheAsTexture(a)}};function cp(a,e,t){let i=a.length,s;if(e>=i||t===0)return;t=e+t>i?i-e:t;let r=i-t;for(s=e;s<r;++s)a[s]=a[s+t];a.length=r}var e8={allowChildren:!0,removeChildren(a=0,e){let t=e??this.children.length,i=t-a,s=[];if(i>0&&i<=t){for(let o=t-1;o>=a;o--){let d=this.children[o];d&&(s.push(d),d.parent=null)}cp(this.children,a,t);let r=this.renderGroup||this.parentRenderGroup;r&&r.removeChildren(s);for(let o=0;o<s.length;++o)this.emit("childRemoved",s[o],this,o),s[o].emit("removed",this);return s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){let e=this.getChildAt(a);return this.removeChild(e)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,e)},getChildIndex(a){let e=this.children.indexOf(a);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(a,e){let{children:t}=this;if(e<0||e>t.length)throw new Error(`${a}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(a.parent){let s=a.parent.children.indexOf(a);if(a.parent===this&&s===e)return a;s!==-1&&a.parent.children.splice(s,1)}e===t.length?t.push(a):t.splice(e,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;let i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,e),a.emit("added",this),a},swapChildren(a,e){if(a===e)return;let t=this.getChildIndex(a),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=a;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(e=>this.reparentChildAt(e,this.children.length)),a[0])},reparentChildAt(a,e){if(a.parent===this)return this.setChildIndex(a,e),a;let t=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,e);let i=this.worldTransform.clone();return i.invert(),t.prepend(i),a.setFromMatrix(t),a}},t8={collectRenderables(a,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,e,t))},collectRenderablesSimple(a,e,t){let i=this.children,s=i.length;for(let r=0;r<s;r++)i[r].collectRenderables(a,e,t)},collectRenderablesWithEffects(a,e,t){let{renderPipes:i}=e;for(let s=0;s<this.effects.length;s++){let r=this.effects[s];i[r.pipe].push(r,this,a)}this.collectRenderablesSimple(a,e,t);for(let s=this.effects.length-1;s>=0;s--){let r=this.effects[s];i[r.pipe].pop(r,this,a)}}},Si=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}},Pd=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let i=this._tests[t];if(i.test(e))return ye.get(i.maskClass,e)}return e}returnMaskEffect(e){ye.return(e)}},Rd=new Pd;be.handleByList(G.MaskEffect,Rd._effectClasses);var a8=Object.defineProperty,zf=Object.getOwnPropertySymbols,i8=Object.prototype.hasOwnProperty,s8=Object.prototype.propertyIsEnumerable,Vf=(a,e,t)=>e in a?a8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Wf=(a,e)=>{for(var t in e||(e={}))i8.call(e,t)&&Vf(a,t,e[t]);if(zf)for(var t of zf(e))s8.call(e,t)&&Vf(a,t,e[t]);return a},r8={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){let e=this.effects.indexOf(a);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){let e=this._maskEffect;e?.mask!==a&&(e&&(this.removeEffect(e),Rd.returnMaskEffect(e),this._maskEffect=null),a!=null&&(this._maskEffect=Rd.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions=Wf(Wf({},this._maskOptions),a),a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var e;!Array.isArray(a)&&a&&(a=[a]);let t=this._filterEffect||(this._filterEffect=new Si);a=a;let i=a?.length>0,s=((e=t.filters)==null?void 0:e.length)>0,r=i!==s;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),r&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new Si),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},n8={label:null,get name(){return this.label},set name(a){this.label=a},getChildByName(a,e=!1){return this.getChildByLabel(a,e)},getChildByLabel(a,e=!1){let t=this.children;for(let i=0;i<t.length;i++){let s=t[i];if(s.label===a||a instanceof RegExp&&a.test(s.label))return s}if(e)for(let i=0;i<t.length;i++){let s=t[i].getChildByLabel(a,!0);if(s)return s}return null},getChildrenByLabel(a,e=!1,t=[]){let i=this.children;for(let s=0;s<i.length;s++){let r=i[s];(r.label===a||a instanceof RegExp&&a.test(r.label))&&t.push(r)}if(e)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(a,!0,t);return t}},lr=[new Me,new Me,new Me,new Me],Ae=class a{constructor(e=0,t=0,i=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new a(0,0,0,0)}clone(){return new a(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i,s=.5){let{width:r,height:o}=this;if(r<=0||o<=0)return!1;let d=this.x,h=this.y,l=i*(1-s),u=i-l,p=d-l,y=d+r+l,_=h-l,v=h+o+l,T=d+u,A=d+r-u,P=h+u,C=h+o-u;return e>=p&&e<=y&&t>=_&&t<=v&&!(e>T&&e<A&&t>P&&t<C)}intersects(e,t){if(!t){let se=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=se)return!1;let ce=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>ce}let i=this.left,s=this.right,r=this.top,o=this.bottom;if(s<=i||o<=r)return!1;let d=lr[0].set(e.left,e.top),h=lr[1].set(e.left,e.bottom),l=lr[2].set(e.right,e.top),u=lr[3].set(e.right,e.bottom);if(l.x<=d.x||h.y<=d.y)return!1;let p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(d,d),t.apply(h,h),t.apply(l,l),t.apply(u,u),Math.max(d.x,h.x,l.x,u.x)<=i||Math.min(d.x,h.x,l.x,u.x)>=s||Math.max(d.y,h.y,l.y,u.y)<=r||Math.min(d.y,h.y,l.y,u.y)>=o))return!1;let y=p*(h.y-d.y),_=p*(d.x-h.x),v=y*i+_*r,T=y*s+_*r,A=y*i+_*o,P=y*s+_*o;if(Math.max(v,T,A,P)<=y*d.x+_*d.y||Math.min(v,T,A,P)>=y*u.x+_*u.y)return!1;let C=p*(d.y-l.y),F=p*(l.x-d.x),D=C*i+F*r,H=C*s+F*r,U=C*i+F*o,j=C*s+F*o;return!(Math.max(D,H,U,j)<=C*d.x+F*d.y||Math.min(D,H,U,j)>=C*u.x+F*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=s,this.height=Math.max(r-s,0),this}ceil(e=1,t=.001){let i=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=s,this.height=r-s,this}getBounds(e){return e||(e=new a),e.copyFrom(this),e}},Yf=new ie,Ze=class a{constructor(e=1/0,t=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yf,this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ae);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yf,this}set(e,t,i,s){this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}addFrame(e,t,i,s,r){r||(r=this.matrix);let o=r.a,d=r.b,h=r.c,l=r.d,u=r.tx,p=r.ty,y=this.minX,_=this.minY,v=this.maxX,T=this.maxY,A=o*e+h*t+u,P=d*e+l*t+p;A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*t+u,P=d*i+l*t+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*e+h*s+u,P=d*e+l*s+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*s+u,P=d*i+l*s+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),this.minX=y,this.minY=_,this.maxX=v,this.maxY=T}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,i=this.minY,s=this.maxX,r=this.maxY,{a:o,b:d,c:h,d:l,tx:u,ty:p}=e,y=o*t+h*i+u,_=d*t+l*i+p;this.minX=y,this.minY=_,this.maxX=y,this.maxY=_,y=o*s+h*i+u,_=d*s+l*i+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*t+h*r+u,_=d*t+l*r+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*s+h*r+u,_=d*s+l*r+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,s){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,s){let r=this.minX,o=this.minY,d=this.maxX,h=this.maxY;s||(s=this.matrix);let l=s.a,u=s.b,p=s.c,y=s.d,_=s.tx,v=s.ty;for(let T=t;T<i;T+=2){let A=e[T],P=e[T+1],C=l*A+p*P+_,F=u*A+y*P+v;r=C<r?C:r,o=F<o?F:o,d=C>d?C:d,h=F>h?F:h}this.minX=r,this.minY=o,this.maxX=d,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}},st=new Es(ie),oa=new Es(Ze),o8=new ie,c8={getFastGlobalBounds(a,e){e||(e=new Ze),e.clear(),this._getGlobalBoundsRecursive(!!a,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(a,e,t){let i=e;if(a&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;let s=!!this.effects.length;if((this.renderGroup||s)&&(i=oa.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let o=this.bounds;i.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}let r=this.children;for(let o=0;o<r.length;o++)r[o]._getGlobalBoundsRecursive(a,i,t)}if(s){let r=!1,o=this.renderGroup||this.parentRenderGroup;for(let d=0;d<this.effects.length;d++)this.effects[d].addBounds&&(r||(r=!0,i.applyMatrix(o.worldTransform)),this.effects[d].addBounds(i,!0));r&&(i.applyMatrix(o.worldTransform.copyTo(o8).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),oa.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),oa.return(i))}};function Oo(a,e,t){t.clear();let i,s;return a.parent?e?i=a.parent.worldTransform:(s=st.get().identity(),i=bl(a,s)):i=ie.IDENTITY,dp(a,t,i,e),s&&st.return(s),t.isValid||t.set(0,0,0,0),t}function dp(a,e,t,i){var s,r;if(!a.visible||!a.measurable)return;let o;i?o=a.worldTransform:(a.updateLocalTransform(),o=st.get(),o.appendFrom(a.localTransform,t));let d=e,h=!!a.effects.length;if(h&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,o);else{a.bounds&&(e.matrix=o,e.addBounds(a.bounds));for(let l=0;l<a.children.length;l++)dp(a.children[l],e,o,i)}if(h){for(let l=0;l<a.effects.length;l++)(r=(s=a.effects[l]).addBounds)==null||r.call(s,e);d.addBounds(e,ie.IDENTITY),oa.return(e)}i||st.return(o)}function bl(a,e){let t=a.parent;return t&&(bl(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function hp(a,e){if(a===16777215||!e)return e;if(e===16777215||!a)return a;let t=a>>16&255,i=a>>8&255,s=a&255,r=e>>16&255,o=e>>8&255,d=e&255,h=t*r/255|0,l=i*o/255|0,u=s*d/255|0;return(h<<16)+(l<<8)+u}var $f=16777215;function Nr(a,e){return a===$f?e:e===$f?a:hp(a,e)}function _s(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}var d8={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(a,e){if(e)return a.copyFrom(this.worldTransform);this.updateLocalTransform();let t=bl(this,st.get().identity());return a.appendFrom(this.localTransform,t),st.return(t),a},getGlobalTint(a){if(a)return this.renderGroup?_s(this.renderGroup.worldColor):this.parentRenderGroup?_s(Nr(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Nr(e,t.localColor),t=t.parent;return _s(e)}};function pl(a,e,t){return e.clear(),t||(t=ie.IDENTITY),lp(a,e,t,a,!0),e.isValid||e.set(0,0,0,0),e}function lp(a,e,t,i,s){var r,o;let d;if(s)d=st.get(),d=t.copyTo(d);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();let u=a.localTransform;d=st.get(),d.appendFrom(u,t)}let h=e,l=!!a.effects.length;if(l&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,d);else{a.renderPipeId&&(e.matrix=d,e.addBounds(a.bounds));let u=a.children;for(let p=0;p<u.length;p++)lp(u[p],e,d,i,!1)}if(l){for(let u=0;u<a.effects.length;u++)(o=(r=a.effects[u]).addLocalBounds)==null||o.call(r,e,i);h.addBounds(e,ie.IDENTITY),oa.return(e)}st.return(d)}function fp(a,e){let t=a.children;for(let i=0;i<t.length;i++){let s=t[i],r=s.uid,o=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,d=e.index;(e.data[d]!==r||e.data[d+1]!==o)&&(e.data[e.index]=r,e.data[e.index+1]=o,e.didChange=!0),e.index=d+2,s.children.length&&fp(s,e)}return e.didChange}var h8=new ie,l8={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,e){let t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=a/e*t:this.scale.x=t},_setHeight(a,e){let t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=a/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ze});let a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),fp(this,a),a.didChange&&pl(this,a.localBounds,h8),a.localBounds},getBounds(a,e){return Oo(this,a,e||new Ze)}},f8={_onRender:null,set onRender(a){let e=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},u8={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(b8))}};function b8(a,e){return a._zIndex-e._zIndex}var p8={getGlobalPosition(a=new Me,e=!1){return this.parent?this.parent.toGlobal(this._position,a,e):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,e,t=!1){let i=this.getGlobalTransform(st.get(),t);return e=i.apply(a,e),st.return(i),e},toLocal(a,e,t,i){e&&(a=e.toGlobal(a,t,i));let s=this.getGlobalTransform(st.get(),i);return t=s.applyInverse(a,t),st.return(s),t}},jr=class{constructor(){this.uid=Ge("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}};function wi(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function Kf(a){return!(a&a-1)&&!!a}function Ps(a){let e={};for(let t in a)a[t]!==void 0&&(e[t]=a[t]);return e}var g8=Object.defineProperty,qf=Object.getOwnPropertySymbols,m8=Object.prototype.hasOwnProperty,_8=Object.prototype.propertyIsEnumerable,Zf=(a,e,t)=>e in a?g8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qf=(a,e)=>{for(var t in e||(e={}))m8.call(e,t)&&Zf(a,t,e[t]);if(qf)for(var t of qf(e))_8.call(e,t)&&Zf(a,t,e[t]);return a},Jf=Object.create(null);function y8(a){let e=Jf[a];return e===void 0&&(Jf[a]=Ge("resource")),e}var up=class bp extends xt{constructor(e={}){var t,i,s,r,o,d,h;super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e=Qf(Qf({},bp.defaultOptions),e),this.addressMode=e.addressMode,this.addressModeU=(t=e.addressModeU)!=null?t:this.addressModeU,this.addressModeV=(i=e.addressModeV)!=null?i:this.addressModeV,this.addressModeW=(s=e.addressModeW)!=null?s:this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=(r=e.magFilter)!=null?r:this.magFilter,this.minFilter=(o=e.minFilter)!=null?o:this.minFilter,this.mipmapFilter=(d=e.mipmapFilter)!=null?d:this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=(h=e.maxAnisotropy)!=null?h:1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=y8(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};up.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var pp=up,x8=Object.defineProperty,eu=Object.getOwnPropertySymbols,v8=Object.prototype.hasOwnProperty,T8=Object.prototype.propertyIsEnumerable,tu=(a,e,t)=>e in a?x8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,au=(a,e)=>{for(var t in e||(e={}))v8.call(e,t)&&tu(a,t,e[t]);if(eu)for(var t of eu(e))T8.call(e,t)&&tu(a,t,e[t]);return a},gp=class mp extends xt{constructor(e={}){var t,i,s;super(),this.options=e,this.uid=Ge("textureSource"),this._resourceType="textureSource",this._resourceId=Ge("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e=au(au({},mp.defaultOptions),e),this.label=(t=e.label)!=null?t:"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource&&(i=this.resourceWidth)!=null?i:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource&&(s=this.resourceHeight)!=null?s:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new pp(Ps(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,i;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Ge("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);let s=Math.round(e*i),r=Math.round(t*i);return this.width=s/i,this.height=r/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this._resourceId=Ge("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Kf(this.pixelWidth)&&Kf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};gp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var Be=gp,Na=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ja=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xa=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ha=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Md=[],_p=[],fr=Math.sign;function S8(){for(let a=0;a<16;a++){let e=[];Md.push(e);for(let t=0;t<16;t++){let i=fr(Na[a]*Na[t]+Xa[a]*ja[t]),s=fr(ja[a]*Na[t]+Ha[a]*ja[t]),r=fr(Na[a]*Xa[t]+Xa[a]*Ha[t]),o=fr(ja[a]*Xa[t]+Ha[a]*Ha[t]);for(let d=0;d<16;d++)if(Na[d]===i&&ja[d]===s&&Xa[d]===r&&Ha[d]===o){e.push(d);break}}}for(let a=0;a<16;a++){let e=new ie;e.set(Na[a],ja[a],Xa[a],Ha[a],0,0),_p.push(e)}}S8();var Fe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>Na[a],uY:a=>ja[a],vX:a=>Xa[a],vY:a=>Ha[a],inv:a=>a&8?a&15:-a&7,add:(a,e)=>Md[a][e],sub:(a,e)=>Md[a][Fe.inv(e)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,e)=>Math.abs(a)*2<=Math.abs(e)?e>=0?Fe.S:Fe.N:Math.abs(e)*2<=Math.abs(a)?a>0?Fe.E:Fe.W:e>0?a>0?Fe.SE:Fe.SW:a>0?Fe.NE:Fe.NW,matrixAppendRotationInv:(a,e,t=0,i=0)=>{let s=_p[Fe.inv(e)];s.tx=t,s.ty=i,a.append(s)}},iu=()=>{},w8=Object.defineProperty,A8=Object.defineProperties,E8=Object.getOwnPropertyDescriptors,su=Object.getOwnPropertySymbols,P8=Object.prototype.hasOwnProperty,R8=Object.prototype.propertyIsEnumerable,ru=(a,e,t)=>e in a?w8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,M8=(a,e)=>{for(var t in e||(e={}))P8.call(e,t)&&ru(a,t,e[t]);if(su)for(var t of su(e))R8.call(e,t)&&ru(a,t,e[t]);return a},C8=(a,e)=>A8(a,E8(e)),Rs=class extends Be{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super(C8(M8({},e),{resource:t,format:i})),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};Rs.extension=G.TextureSource;var nu=new ie,Xr=class{constructor(e,t){this.mapCoord=new ie,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);let i=this.mapCoord;for(let s=0;s<e.length;s+=2){let r=e[s],o=e[s+1];t[s]=r*i.a+o*i.c+i.tx,t[s+1]=r*i.b+o*i.d+i.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let i=e.orig,s=e.trim;s&&(nu.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(nu));let r=e.source,o=this.uClampFrame,d=this.clampMargin/r._resolution,h=this.clampOffset/r._resolution;return o[0]=(e.frame.x+d+h)/r.width,o[1]=(e.frame.y+d+h)/r.height,o[2]=(e.frame.x+e.frame.width-d+h)/r.width,o[3]=(e.frame.y+e.frame.height-d+h)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=e.frame.width===r.width&&e.frame.height===r.height&&e.rotate===0,!0}},K=class extends xt{constructor({source:e,label:t,frame:i,orig:s,trim:r,defaultAnchor:o,defaultBorders:d,rotate:h,dynamic:l}={}){var u;if(super(),this.uid=Ge("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ae,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(u=e?.source)!=null?u:new Be,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:p,height:y}=this._source;this.frame.width=p,this.frame.height=y}this.orig=s||this.frame,this.trim=r,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=d,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Xr(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:i,height:s}=this._source,r=t.x/i,o=t.y/s,d=t.width/i,h=t.height/s,l=this.rotate;if(l){let u=d/2,p=h/2,y=r+u,_=o+p;l=Fe.add(l,Fe.NW),e.x0=y+u*Fe.uX(l),e.y0=_+p*Fe.uY(l),l=Fe.add(l,2),e.x1=y+u*Fe.uX(l),e.y1=_+p*Fe.uY(l),l=Fe.add(l,2),e.x2=y+u*Fe.uX(l),e.y2=_+p*Fe.uY(l),l=Fe.add(l,2),e.x3=y+u*Fe.uX(l),e.y3=_+p*Fe.uY(l)}else e.x0=r,e.y0=o,e.x1=r+d,e.y1=o,e.x2=r+d,e.y2=o+h,e.x3=r,e.y3=o+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return this._source}};K.EMPTY=new K({label:"EMPTY",source:new Be({label:"EMPTY"})}),K.EMPTY.destroy=iu,K.WHITE=new K({source:new Rs({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),K.WHITE.destroy=iu;var O8=Object.defineProperty,I8=Object.defineProperties,G8=Object.getOwnPropertyDescriptors,ou=Object.getOwnPropertySymbols,B8=Object.prototype.hasOwnProperty,F8=Object.prototype.propertyIsEnumerable,cu=(a,e,t)=>e in a?O8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,D8=(a,e)=>{for(var t in e||(e={}))B8.call(e,t)&&cu(a,t,e[t]);if(ou)for(var t of ou(e))F8.call(e,t)&&cu(a,t,e[t]);return a},k8=(a,e)=>I8(a,G8(e)),U8=0,Cd=class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,i){let s=new Be(k8(D8({},this.textureOptions),{width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1}));return new K({source:s,label:`texturePool_${U8++}`})}getOptimalTexture(e,t,i=1,s){let r=Math.ceil(e*i-1e-6),o=Math.ceil(t*i-1e-6);r=wi(r),o=wi(o);let d=(r<<17)+(o<<1)+(s?1:0);this._texturePool[d]||(this._texturePool[d]=[]);let h=this._texturePool[d].pop();return h||(h=this.createTexture(r,o,s)),h.source._resolution=i,h.source.width=r/i,h.source.height=o/i,h.source.pixelWidth=r,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=d,h}getSameSizeTexture(e,t=!1){let i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e){let t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(let t in this._texturePool){let i=this._texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}},Ve=new Cd,Od=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ie,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new jr,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let i=0;i<t.length;i++){let s=t[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Ve.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let e in this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);let t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}let t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let i=e.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ie),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ie),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ie),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}};function Id(a,e,t={}){for(let i in e)!t[i]&&e[i]!==void 0&&(a[i]=e[i])}var Rc=new We(null),Mc=new We(null),Cc=new We(null,1,1),Hr=1,gl=2,ys=4;var he=class a extends xt{constructor(e={}){var t,i;super(),this.uid=Ge("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ie,this.relativeGroupTransform=new ie,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new We(this,0,0),this._scale=Cc,this._pivot=Mc,this._skew=Rc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Id(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(s=>this.addChild(s)),(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}let t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}let t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=ye.get(Od,this),this.groupTransform=ie.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),ye.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ie),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*K5}set angle(e){this.rotation=e*q5}get pivot(){return this._pivot===Mc&&(this._pivot=new We(this,0,0)),this._pivot}set pivot(e){this._pivot===Mc&&(this._pivot=new We(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Rc&&(this._skew=new We(this,0,0)),this._skew}set skew(e){this._skew===Rc&&(this._skew=new We(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Cc&&(this._scale=new We(this,1,1)),this._scale}set scale(e){this._scale===Cc&&(this._scale=new We(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){var i;let s=this.getLocalBounds();typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,i=this._scale,s=this._pivot,r=this._position,o=i._x,d=i._y,h=s._x,l=s._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*d,t.d=this._sy*d,t.tx=r._x-(h*t.a+l*t.c),t.ty=r._y-(h*t.b+l*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Hr,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=we.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=Hr,this._onUpdate())}get tint(){return _s(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=gl,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ys,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ys,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=ys,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var t;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let s=0;s<i.length;++s)i[s].destroy(e);(t=this.renderGroup)==null||t.destroy(),this.renderGroup=null}};he.mixin(e8),he.mixin(c8),he.mixin(p8),he.mixin(f8),he.mixin(l8),he.mixin(r8),he.mixin(n8),he.mixin(u8),he.mixin(Y5),he.mixin(J5),he.mixin(d8),he.mixin(t8);var Ms=class a{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=a.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Me,this.page=new Me,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,s,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},Oc=/iPhone/i,du=/iPod/i,hu=/iPad/i,lu=/\biOS-universal(?:.+)Mac\b/i,Ic=/\bAndroid(?:.+)Mobile\b/i,fu=/Android/i,di=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ur=/Silk/i,ra=/Windows Phone/i,uu=/\bWindows(?:.+)ARM\b/i,bu=/BlackBerry/i,pu=/BB10/i,gu=/Opera Mini/i,mu=/\b(CriOS|Chrome)(?:.+)Mobile/i,_u=/Mobile(?:.+)Firefox\b/i,yu=function(a){return typeof a<"u"&&a.platform==="MacIntel"&&typeof a.maxTouchPoints=="number"&&a.maxTouchPoints>1&&typeof MSStream>"u"};function L8(a){return function(e){return e.test(a)}}function xu(a){var e={userAgent:"",platform:"",maxTouchPoints:0};!a&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof a=="string"?e.userAgent=a:a&&a.userAgent&&(e={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var s=L8(t),r={apple:{phone:s(Oc)&&!s(ra),ipod:s(du),tablet:!s(Oc)&&(s(hu)||yu(e))&&!s(ra),universal:s(lu),device:(s(Oc)||s(du)||s(hu)||s(lu)||yu(e))&&!s(ra)},amazon:{phone:s(di),tablet:!s(di)&&s(ur),device:s(di)||s(ur)},android:{phone:!s(ra)&&s(di)||!s(ra)&&s(Ic),tablet:!s(ra)&&!s(di)&&!s(Ic)&&(s(ur)||s(fu)),device:!s(ra)&&(s(di)||s(ur)||s(Ic)||s(fu))||s(/\bokhttp\b/i)},windows:{phone:s(ra),tablet:s(uu),device:s(ra)||s(uu)},other:{blackberry:s(bu),blackberry10:s(pu),opera:s(gu),firefox:s(_u),chrome:s(mu),device:s(bu)||s(pu)||s(gu)||s(_u)||s(mu)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}var vu,N8=(vu=xu.default)!=null?vu:xu,qa=N8(globalThis.navigator),j8=Object.defineProperty,Tu=Object.getOwnPropertySymbols,X8=Object.prototype.hasOwnProperty,H8=Object.prototype.propertyIsEnumerable,Su=(a,e,t)=>e in a?j8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,wu=(a,e)=>{for(var t in e||(e={}))X8.call(e,t)&&Su(a,t,e[t]);if(Tu)for(var t of Tu(e))H8.call(e,t)&&Su(a,t,e[t]);return a},z8=9,br=100,V8=0,W8=0,Au=2,Eu=1,Y8=-1e3,$8=-1e3,K8=2,Gd=class yp{constructor(e,t=qa){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let e=document.createElement("button");e.style.width=`${Eu}px`,e.style.height=`${Eu}px`,e.style.position="absolute",e.style.top=`${Y8}px`,e.style.left=`${$8}px`,e.style.zIndex=K8.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${br}px`,this._div.style.height=`${br}px`,this._div.style.position="absolute",this._div.style.top=`${V8}px`,this._div.style.left=`${W8}px`,this._div.style.zIndex=Au.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));let e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{let t=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),t.disconnect(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let t=e.children;if(t)for(let i=0;i<t.length;i++)this._updateAccessibleObjects(t[i])}init(e){let t=yp.defaultOptions,i={accessibilityOptions:wu(wu({},t),e?.accessibilityOptions||{})};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;let t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let i of this._children)i._renderId===this._renderId&&t.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){let s=this._children[i];t.has(i)||(s._accessibleDiv&&s._accessibleDiv.parentNode&&(s._accessibleDiv.parentNode.removeChild(s._accessibleDiv),this._pool.push(s._accessibleDiv),s._accessibleDiv=null),s._accessibleActive=!1,cp(this._children,i,1))}if(this._renderer.renderingToScreen){let{x:i,y:s,width:r,height:o}=this._renderer.screen,d=this._div;d.style.left=`${i}px`,d.style.top=`${s}px`,d.style.width=`${r}px`,d.style.height=`${o}px`}for(let i=0;i<this._children.length;i++){let s=this._children[i];if(!s._accessibleActive||!s._accessibleDiv)continue;let r=s._accessibleDiv,o=s.hitArea||s.getBounds().rectangle;if(s.hitArea){let d=s.worldTransform,h=this._renderer.resolution,l=this._renderer.resolution;r.style.left=`${(d.tx+o.x*d.a)*h}px`,r.style.top=`${(d.ty+o.y*d.d)*l}px`,r.style.width=`${o.width*d.a*h}px`,r.style.height=`${o.height*d.d*l}px`}else{this._capHitArea(o);let d=this._renderer.resolution,h=this._renderer.resolution;r.style.left=`${o.x*d}px`,r.style.top=`${o.y*h}px`,r.style.width=`${o.width*d}px`,r.style.height=`${o.height*h}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._pool.pop();t||(e.accessibleType==="button"?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText=`
    color: transparent;
    pointer-events: none;
    padding: 0;
    margin: 0;
    border: 0;
    outline: 0;
    background: transparent;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
`,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${br}px`,t.style.height=`${br}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Au.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){let{container:i}=e.target,s=this._renderer.events.rootBoundary,r=Object.assign(new Ms(s),{target:i});s.rootTarget=this._renderer.lastObjectRendered,t.forEach(o=>s.dispatchEvent(r,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==z8||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};Gd.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"accessibility"},Gd.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};var q8=Gd,Z8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1};be.add(q8),he.mixin(Z8);var zr=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:s,clientHeight:r}=this._resizeTo;t=s,i=r}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};zr.extension=G.Application;var Ra=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(Ra||{}),xs=class{constructor(e,t=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=s}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}},xp=class ft{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xs(null,null,1/0),this.deltaMS=1/ft.targetFPMS,this.elapsedMS=1/ft.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Ra.NORMAL){return this._addListener(new xs(e,t,i))}addOnce(e,t,i=Ra.NORMAL){return this._addListener(new xs(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ft.targetFPMS;let i=this._head,s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,ft.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!ft._shared){let e=ft._shared=new ft;e.autoStart=!0,e._protected=!0}return ft._shared}static get system(){if(!ft._system){let e=ft._system=new ft;e.autoStart=!0,e._protected=!0}return ft._system}};xp.targetFPMS=.06;var at=xp,Vr=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ra.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?at.shared:new at,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};Vr.extension=G.Application,be.add(zr),be.add(Vr);var Q8=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(a){this.removeTickerListener(),this.events=a,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(a){this._pauseUpdate=a}addTickerListener(){this._tickerAdded||!this.domElement||(at.system.add(this._tickerUpdate,this,Ra.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(at.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let a=this.events._rootPointerEvent;this.events.supportsTouchEvents&&a.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:a.clientX,clientY:a.clientY,pointerType:a.pointerType,pointerId:a.pointerId}))}_tickerUpdate(a){this._deltaTime+=a.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},Aa=new Q8,Ai=class extends Ms{constructor(){super(...arguments),this.client=new Me,this.movement=new Me,this.offset=new Me,this.global=new Me,this.screen=new Me}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,s,r,o,d,h,l,u,p,y,_,v,T){throw new Error("Method not implemented.")}},gt=class extends Ai{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},Pa=class extends Ai{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Pa.DOM_DELTA_PIXEL=0,Pa.DOM_DELTA_LINE=1,Pa.DOM_DELTA_PAGE=2;var J8=2048,e4=new Me,as=new Me,Bd=class{constructor(e){this.dispatch=new xt,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let i=0,s=t.length;i<s;i++)t[i].fn(e)}hitTest(e,t){Aa.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,e4.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;let i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,r=i.length-1;s<r;s++)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let s=Array.isArray(t)?t:[t];for(let r=i.length-1;r>=0;r--)s.forEach(o=>{e.currentTarget=i[r],this.notifyTarget(e,o)})}propagationPath(e){let t=[e];for(let i=0;i<J8&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,s,r,o=!1){let d=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let u=e.children;for(let p=u.length-1;p>=0;p--){let y=u[p],_=this.hitTestMoveRecursive(y,this._isInteractive(t)?t:y.eventMode,i,s,r,o||r(e,i));if(_){if(_.length>0&&!_[_.length-1].parent)continue;let v=e.isInteractive();(_.length>0||v)&&(v&&this._allInteractiveElements.push(e),_.push(e)),this._hitElements.length===0&&(this._hitElements=_),d=!0}}}let h=this._isInteractive(t),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:d?this._hitElements:h&&!r(e,i)&&s(e,i)?l?[e]:[]:null}hitTestRecursive(e,t,i,s,r){if(this._interactivePrune(e)||r(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let h=e.children,l=i;for(let u=h.length-1;u>=0;u--){let p=h[u],y=this.hitTestRecursive(p,this._isInteractive(t)?t:p.eventMode,l,s,r);if(y){if(y.length>0&&!y[y.length-1].parent)continue;let _=e.isInteractive();return(y.length>0||_)&&y.push(e),y}}}let o=this._isInteractive(t),d=e.isInteractive();return o&&s(e,i)?d?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,as),!e.hitArea.contains(as.x,as.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){let s=e.effects[i];if(s.containsPoint&&!s.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,as),e.containsPoint(as)):!1}notifyTarget(e,t){var i,s;if(!e.currentTarget.isInteractive())return;t!=null||(t=e.type);let r=`on${t}`;(s=(i=e.currentTarget)[r])==null||s.call(i,e);let o=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,o),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gt))return;let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}let i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var t,i,s;if(!(e instanceof gt))return;this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let o=r.pointerType==="mouse"||r.pointerType==="pen",d=this.trackingData(e.pointerId),h=this.findMountedTarget(d.overTargets);if(((t=d.overTargets)==null?void 0:t.length)>0&&h!==r.target){let p=e.type==="mousemove"?"mouseout":"pointerout",y=this.createPointerEvent(e,p,h);if(this.dispatchEvent(y,"pointerout"),o&&this.dispatchEvent(y,"mouseout"),!r.composedPath().includes(h)){let _=this.createPointerEvent(e,"pointerleave",h);for(_.eventPhase=_.AT_TARGET;_.target&&!r.composedPath().includes(_.target);)_.currentTarget=_.target,this.notifyTarget(_),o&&this.notifyTarget(_,"mouseleave"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(y)}if(h!==r.target){let p=e.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(r,p);this.dispatchEvent(y,"pointerover"),o&&this.dispatchEvent(y,"mouseover");let _=h?.parent;for(;_&&_!==this.rootTarget.parent&&_!==r.target;)_=_.parent;if(!_||_===this.rootTarget.parent){let v=this.clonePointerEvent(r,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==h&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),o&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(y)}let l=[],u=(i=this.enableGlobalMoveEvents)!=null?i:!0;this.moveOnAll?l.push("pointermove"):this.dispatchEvent(r,"pointermove"),u&&l.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?l.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),u&&l.push("globaltouchmove")),o&&(this.moveOnAll?l.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),u&&l.push("globalmousemove"),this.cursor=(s=r.target)==null?void 0:s.cursor),l.length>0&&this.all(r,l),this._allInteractiveElements.length=0,this._hitElements.length=0,d.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var t;if(!(e instanceof gt))return;let i=this.trackingData(e.pointerId),s=this.createPointerEvent(e),r=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(t=s.target)==null?void 0:t.cursor);let o=this.clonePointerEvent(s,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId);if(t.overTargets){let i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),r=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(r),i&&this.dispatchEvent(r,"mouseout");let o=this.createPointerEvent(e,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gt))return;let t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let d=i.button===2;this.dispatchEvent(i,d?"rightup":"mouseup")}let s=this.trackingData(e.pointerId),r=this.findMountedTarget(s.pressTargetsByButton[e.button]),o=r;if(r&&!i.composedPath().includes(r)){let d=r;for(;d&&!i.composedPath().includes(d);){if(i.currentTarget=d,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}d=d.parent}delete s.pressTargetsByButton[e.button],o=d}if(o){let d=this.clonePointerEvent(i,"click");d.target=o,d.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});let h=s.clicksByButton[e.button];if(h.target===d.target&&t-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=d.target,h.timeStamp=t,d.detail=h.clickCount,d.pointerType==="mouse"){let l=d.button===2;this.dispatchEvent(d,l?"rightclick":"click")}else d.pointerType==="touch"&&this.dispatchEvent(d,"tap");this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let r=i;for(;r;)s.currentTarget=r,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Pa))return;let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var s;let r=this.allocateEvent(gt);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=(s=i??this.hitTest(r.global.x,r.global.y))!=null?s:this._hitElements[0],typeof t=="string"&&(r.type=t),r}createWheelEvent(e){let t=this.allocateEvent(Pa);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let i=this.allocateEvent(gt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gt&&t instanceof gt&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ai&&t instanceof Ai&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){let i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,r=i.length;s<r&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(t,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}},t4=Object.defineProperty,Pu=Object.getOwnPropertySymbols,a4=Object.prototype.hasOwnProperty,i4=Object.prototype.propertyIsEnumerable,Ru=(a,e,t)=>e in a?t4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,s4=(a,e)=>{for(var t in e||(e={}))a4.call(e,t)&&Ru(a,t,e[t]);if(Pu)for(var t of Pu(e))i4.call(e,t)&&Ru(a,t,e[t]);return a},r4=1,n4={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Fd=class Dd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Bd(null),Aa.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gt(null),this._rootWheelEvent=new Pa(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(s4({},Dd.defaultEventFeatures),{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){var t,i;let{canvas:s,resolution:r}=this.renderer;this.setTargetElement(s),this.resolution=r,Dd._defaultEventMode=(t=e.eventMode)!=null?t:"passive",Object.assign(this.features,(i=e.eventFeatures)!=null?i:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;let i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){let r=t[i],o=this._bootstrapEvent(this._rootPointerEvent,r);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Aa.pointerMoved();let t=this._normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){let r=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let i=t!==this.domElement?"outside":"",s=this._normalizeToPointerData(e);for(let r=0,o=s.length;r<o;r++){let d=this._bootstrapEvent(this._rootPointerEvent,s[r]);d.type+=i,this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){let r=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Aa.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Aa.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Aa.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){let s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},r=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*r,e.y=(i-s.top)*(this.domElement.height/s.height)*r}_normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){let r=e.changedTouches[i];typeof r.button>"u"&&(r.button=0),typeof r.buttons>"u"&&(r.buttons=1),typeof r.isPrimary>"u"&&(r.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof r.width>"u"&&(r.width=r.radiusX||1),typeof r.height>"u"&&(r.height=r.radiusY||1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="touch"),typeof r.pointerId>"u"&&(r.pointerId=r.identifier||0),typeof r.pressure>"u"&&(r.pressure=r.force||.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),typeof r.layerX>"u"&&(r.layerX=r.offsetX=r.clientX),typeof r.layerY>"u"&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=r4),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){let t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n4[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Fd.extension={name:"events",type:[G.WebGLSystem,G.CanvasSystem,G.WebGPUSystem],priority:-1},Fd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var vp=Fd,o4={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(a){this.eventMode=a?"static":"passive"},_internalEventMode:void 0,get eventMode(){var a;return(a=this._internalEventMode)!=null?a:vp.defaultEventMode},set eventMode(a){this._internalEventMode=a},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,r=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;a=i?`${a}capture`:a;let d=typeof e=="function"?e:e.handleEvent,h=this;s&&s.addEventListener("abort",()=>{h.off(a,d,o)}),r?h.once(a,d,o):h.on(a,d,o)},removeEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;a=i?`${a}capture`:a,e=typeof e=="function"?e:e.handleEvent,this.off(a,e,s)},dispatchEvent(a){if(!(a instanceof Ms))throw new Error("Container cannot propagate events outside of the Federated Events API");return a.defaultPrevented=!1,a.path=null,a.target=this,a.manager.dispatchEvent(a),!a.defaultPrevented}};be.add(vp),he.mixin(o4);var Mt=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(Mt||{}),c4={createCanvas:(a,e)=>{let t=document.createElement("canvas");return t.width=a,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var a;return(a=document.baseURI)!=null?a:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(a,e)=>fetch(a,e),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")},Mu=c4,xe={get(){return Mu},set(a){Mu=a}};function Nt(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function is(a){return a.split("?")[0].split("#")[0]}function d4(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h4(a,e,t){return a.replace(new RegExp(d4(e),"g"),t)}function l4(a,e){let t="",i=0,s=-1,r=0,o=-1;for(let d=0;d<=a.length;++d){if(d<a.length)o=a.charCodeAt(d);else{if(o===47)break;o=47}if(o===47){if(!(s===d-1||r===1))if(s!==d-1&&r===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",i=0):(t=t.slice(0,h),i=t.length-1-t.lastIndexOf("/")),s=d,r=0;continue}}else if(t.length===2||t.length===1){t="",i=0,s=d,r=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${a.slice(s+1,d)}`:t=a.slice(s+1,d),i=d-s-1;s=d,r=0}else o===46&&r!==-1?++r:r=-1}return t}var _t={toPosix(a){return h4(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){Nt(a),a=this.toPosix(a);let e=/^file:\/\/\//.exec(a);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(a);return t?t[0]:""},toAbsolute(a,e,t){if(Nt(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;let i=is(this.toPosix(e??xe.get().getBaseUrl())),s=is(this.toPosix(t??this.rootname(i)));return a=this.toPosix(a),a.startsWith("/")?_t.join(s,a.slice(1)):this.isAbsolute(a)?a:this.join(i,a)},normalize(a){if(Nt(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let e="",t=a.startsWith("/");this.hasProtocol(a)&&(e=this.rootname(a),a=a.slice(e.length));let i=a.endsWith("/");return a=l4(a,!1),a.length>0&&i&&(a+="/"),t?`/${a}`:e+a},isAbsolute(a){return Nt(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){var e;if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){let s=a[i];if(Nt(s),s.length>0)if(t===void 0)t=s;else{let r=(e=a[i-1])!=null?e:"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(Nt(a),a.length===0)return".";a=this.toPosix(a);let e=a.charCodeAt(0),t=e===47,i=-1,s=!0,r=this.getProtocol(a),o=a;a=a.slice(r.length);for(let d=a.length-1;d>=1;--d)if(e=a.charCodeAt(d),e===47){if(!s){i=d;break}}else s=!1;return i===-1?t?"/":this.isUrl(o)?r+a:r:t&&i===1?"//":r+a.slice(0,i)},rootname(a){Nt(a),a=this.toPosix(a);let e="";if(a.startsWith("/")?e="/":e=this.getProtocol(a),this.isUrl(a)){let t=a.indexOf("/",e.length);t!==-1?e=a.slice(0,t):e=a,e.endsWith("/")||(e+="/")}return e},basename(a,e){Nt(a),e&&Nt(e),a=is(this.toPosix(a));let t=0,i=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=a.length){if(e.length===a.length&&e===a)return"";let o=e.length-1,d=-1;for(r=a.length-1;r>=0;--r){let h=a.charCodeAt(r);if(h===47){if(!s){t=r+1;break}}else d===-1&&(s=!1,d=r+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=d))}return t===i?i=d:i===-1&&(i=a.length),a.slice(t,i)}for(r=a.length-1;r>=0;--r)if(a.charCodeAt(r)===47){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":a.slice(t,i)},extname(a){Nt(a),a=is(this.toPosix(a));let e=-1,t=0,i=-1,s=!0,r=0;for(let o=a.length-1;o>=0;--o){let d=a.charCodeAt(o);if(d===47){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),d===46?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":a.slice(e,i)},parse(a){Nt(a);let e={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return e;a=is(this.toPosix(a));let t=a.charCodeAt(0),i=this.isAbsolute(a),s,r="";e.root=this.rootname(a),i||this.hasProtocol(a)?s=1:s=0;let o=-1,d=0,h=-1,l=!0,u=a.length-1,p=0;for(;u>=s;--u){if(t=a.charCodeAt(u),t===47){if(!l){d=u+1;break}continue}h===-1&&(l=!1,h=u+1),t===46?o===-1?o=u:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||h===-1||p===0||p===1&&o===h-1&&o===d+1?h!==-1&&(d===0&&i?e.base=e.name=a.slice(1,h):e.base=e.name=a.slice(d,h)):(d===0&&i?(e.name=a.slice(1,o),e.base=a.slice(1,h)):(e.name=a.slice(d,o),e.base=a.slice(d,h)),e.ext=a.slice(o,h)),e.dir=this.dirname(a),r&&(e.dir=r+e.dir),e},sep:"/",delimiter:":",joinExtensions:[".html"]},Xt=(a,e,t=!1)=>(Array.isArray(a)||(a=[a]),e?a.map(i=>typeof i=="string"||t?e(i):i):a);function Tp(a,e,t,i,s){let r=e[t];for(let o=0;o<r.length;o++){let d=r[o];t<e.length-1?Tp(a.replace(i[t],d),e,t+1,i,s):s.push(a.replace(i[t],d))}}function f4(a){let e=/\{(.*?)\}/g,t=a.match(e),i=[];if(t){let s=[];t.forEach(r=>{let o=r.substring(1,r.length-1).split(",");s.push(o)}),Tp(a,s,0,t,i)}else i.push(a);return i}var Wr=a=>!Array.isArray(a),u4=Object.defineProperty,b4=Object.defineProperties,p4=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,g4=Object.prototype.hasOwnProperty,m4=Object.prototype.propertyIsEnumerable,Ou=(a,e,t)=>e in a?u4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hi=(a,e)=>{for(var t in e||(e={}))g4.call(e,t)&&Ou(a,t,e[t]);if(Cu)for(var t of Cu(e))m4.call(e,t)&&Ou(a,t,e[t]);return a},_4=(a,e)=>b4(a,p4(e)),da=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){var t,i,s;if(this._bundleIdConnector=(t=e.connector)!=null?t:this._bundleIdConnector,this._createBundleAssetId=(i=e.createBundleAssetId)!=null?i:this._createBundleAssetId,this._extractAssetIdFromBundle=(s=e.extractAssetIdFromBundle)!=null?s:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){let{alias:t,src:i}=e;return Xt(t||i,s=>typeof s=="string"?s:Array.isArray(s)?s.map(r=>{var o;return(o=r?.src)!=null?o:r}):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest,this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let i=[],s=t;Array.isArray(t)||(s=Object.entries(t).map(([r,o])=>typeof o=="string"||Array.isArray(o)?{alias:r,src:o}:hi({alias:r},o))),s.forEach(r=>{let o=r.src,d=r.alias,h;if(typeof d=="string"){let l=this._createBundleAssetId(e,d);i.push(l),h=[d,l]}else{let l=d.map(u=>this._createBundleAssetId(e,u));i.push(...l),h=[...d,...l]}this.add(_4(hi({},r),{alias:h,src:o}))}),this._bundles[e]=i}add(e){let t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;Xt(t).forEach(s=>{let{src:r}=s,{data:o,format:d,loadParser:h}=s,l=Xt(r).map(y=>typeof y=="string"?f4(y):Array.isArray(y)?y:[y]),u=this.getAlias(s),p=[];l.forEach(y=>{y.forEach(_=>{var v,T,A;let P={};if(typeof _!="object"){P.src=_;for(let C=0;C<this._parsers.length;C++){let F=this._parsers[C];if(F.test(_)){P=F.parse(_);break}}}else o=(v=_.data)!=null?v:o,d=(T=_.format)!=null?T:d,h=(A=_.loadParser)!=null?A:h,P=hi(hi({},P),_);if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:u,data:o,format:d,loadParser:h}),p.push(P)})}),u.forEach(y=>{this._assetMap[y]=p})})}resolveBundle(e){let t=Wr(e);e=Xt(e);let i={};return e.forEach(s=>{let r=this._bundles[s];if(r){let o=this.resolve(r),d={};for(let h in o){let l=o[h];d[this._extractAssetIdFromBundle(s,h)]=l}i[s]=d}}),t?i[e[0]]:i}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let i={};for(let s in t)i[s]=t[s].src;return i}return t.src}resolve(e){let t=Wr(e);e=Xt(e);let i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let r=this._assetMap[s],o=this._getPreferredOrder(r);o?.priority.forEach(d=>{o.params[d].forEach(h=>{let l=r.filter(u=>u[d]?u[d]===h:!1);l.length&&(r=l)})}),this._resolverHash[s]=r[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let i=e[t],s=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){var i,s;let{aliases:r,data:o,loadParser:d,format:h}=t;return(this._basePath||this._rootPath)&&(e.src=_t.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(i=r??e.alias)!=null?i:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=hi(hi({},o||{}),e.data),e.loadParser=d??e.loadParser,e.format=(s=h??e.format)!=null?s:y4(e.src),e}};da.RETINA_PREFIX=/@([0-9\.]+)x/;function y4(a){return a.split(".").pop().split("?").shift().split("#").shift()}var kd=(a,e)=>{let t=e.split("?")[1];return t&&(a+=`?${t}`),a},Sp=class ps{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof K?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;let i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ps.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,i=ps.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){let s=this._frameKeys[t],r=this._frames[s],o=r.frame;if(o){let d=null,h=null,l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,u=new Ae(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?d=new Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):d=new Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(h=new Ae(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new K({source:this.textureSource,frame:d,orig:u,trim:h,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:s.toString()})}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){let s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ps.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ps.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Sp.BATCH_SIZE=1e3;var Iu=Sp,x4=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function wp(a,e,t){let i={};if(a.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[s]=e.textures[s]}),!t){let s=_t.dirname(a[0]);e.linkedSheets.forEach((r,o)=>{let d=wp([`${s}/${e.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(i,d)})}return i}var v4={extension:G.Asset,cache:{test:a=>a instanceof Iu,getCacheableAssets:(a,e)=>wp(a,e,!1)},resolver:{extension:{type:G.ResolveParser,name:"resolveSpritesheet"},test:a=>{let e=a.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&x4.includes(i)},parse:a=>{var e,t;let i=a.split(".");return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i[i.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:G.LoadParser,priority:Mt.Normal,name:"spritesheetLoader"},async testParse(a,e){return _t.extname(e.src).toLowerCase()===".json"&&!!a.frames},async parse(a,e,t){var i,s,r;let{texture:o,imageFilename:d,textureOptions:h}=(i=e?.data)!=null?i:{},l=_t.dirname(e.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let u;if(o instanceof K)u=o;else{let _=kd(l+(d??a.meta.image),e.src);u=(await t.load([{src:_,data:h}]))[_]}let p=new Iu(u.source,a);await p.parse();let y=(s=a?.meta)==null?void 0:s.related_multi_packs;if(Array.isArray(y)){let _=[];for(let T of y){if(typeof T!="string")continue;let A=l+T;(r=e.data)!=null&&r.ignoreMultiPack||(A=kd(A,e.src),_.push(t.load({src:A,data:{ignoreMultiPack:!0}})))}let v=await Promise.all(_);p.linkedSheets=v,v.forEach(T=>{T.linkedSheets=[p].concat(p.linkedSheets.filter(A=>A!==T))})}return p},async unload(a,e,t){await t.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};be.add(v4);function Ap(a,e,t){let{width:i,height:s}=t.orig,r=t.trim;if(r){let o=r.width,d=r.height;a.minX=r.x-e._x*i,a.maxX=a.minX+o,a.minY=r.y-e._y*s,a.maxY=a.minY+d}else a.minX=-e._x*i,a.maxX=a.minX+i,a.minY=-e._y*s,a.maxY=a.minY+s}var ha=class extends he{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ze(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){let t=this.bounds,{x:i,y:s}=e;return i>=t.minX&&i<=t.maxX&&s>=t.minY&&s<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){let{renderPipes:s,renderableGC:r}=t;s.blendMode.setBlendMode(this,this.groupBlendMode,e),s[this.renderPipeId].addRenderable(this,e),r.addRenderable(this),this.didViewUpdate=!1;let o=this.children,d=o.length;for(let h=0;h<d;h++)o[h].collectRenderables(e,t,i)}},T4=Object.defineProperty,Yr=Object.getOwnPropertySymbols,Ep=Object.prototype.hasOwnProperty,Pp=Object.prototype.propertyIsEnumerable,Gu=(a,e,t)=>e in a?T4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,S4=(a,e)=>{for(var t in e||(e={}))Ep.call(e,t)&&Gu(a,t,e[t]);if(Yr)for(var t of Yr(e))Pp.call(e,t)&&Gu(a,t,e[t]);return a},w4=(a,e)=>{var t={};for(var i in a)Ep.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Yr)for(var i of Yr(a))e.indexOf(i)<0&&Pp.call(a,i)&&(t[i]=a[i]);return t},Pe=class a extends ha{constructor(e=K.EMPTY){e instanceof K&&(e={texture:e});let t=e,{texture:i=K.EMPTY,anchor:s,roundPixels:r,width:o,height:d}=t,h=w4(t,["texture","anchor","roundPixels","width","height"]);super(S4({label:"Sprite"},h)),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=r??!1,o!==void 0&&(this.width=o),d!==void 0&&(this.height=d)}static from(e,t=!1){return e instanceof K?new a(e):new a(K.from(e,t))}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Ap(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,i=this._bounds,{width:s,height:r}=t.orig;i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*r,i.maxY=i.minY+r}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}},A4=new Ze;function Rp(a,e,t){let i=A4;a.measurable=!0,Oo(a,t,i),e.addBoundsMask(i),a.measurable=!1}function Mp(a,e,t){let i=oa.get();a.measurable=!0;let s=st.get().identity(),r=Cp(a,t,s);pl(a,i,r),a.measurable=!1,e.addBoundsMask(i),st.return(s),oa.return(i)}function Cp(a,e,t){return a&&a!==e&&(Cp(a.parent,e,t),a.updateLocalTransform(),t.append(a.localTransform)),t}var $r=class{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Pe),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||Rp(this.mask,e,t)}addLocalBounds(e,t){Mp(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof Pe}};$r.extension=G.MaskEffect;var Kr=class{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}};Kr.extension=G.MaskEffect;var qr=class{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){Rp(this.mask,e,t)}addLocalBounds(e,t){Mp(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof he}};qr.extension=G.MaskEffect;var Kt=class extends Be{constructor(e){e.resource||(e.resource=xe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){let s=super.resize(e,t,i);return s&&this.resizeCanvas(),s}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};Kt.extension=G.TextureSource;var Ma=class extends Be{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){let t=xe.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}};Ma.extension=G.TextureSource;var Gc;async function Op(){return Gc!=null||(Gc=(async()=>{var a;let e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";let t=await new Promise(o=>{let d=document.createElement("video");d.onloadeddata=()=>o(d),d.onerror=()=>o(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(s),e.deleteTexture(i),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Gc}var E4=Object.defineProperty,P4=Object.defineProperties,R4=Object.getOwnPropertyDescriptors,Bu=Object.getOwnPropertySymbols,M4=Object.prototype.hasOwnProperty,C4=Object.prototype.propertyIsEnumerable,Fu=(a,e,t)=>e in a?E4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ud=(a,e)=>{for(var t in e||(e={}))M4.call(e,t)&&Fu(a,t,e[t]);if(Bu)for(var t of Bu(e))C4.call(e,t)&&Fu(a,t,e[t]);return a},O4=(a,e)=>P4(a,R4(e)),Br=class Ip extends Be{constructor(e){var t;super(e),this.isReady=!1,this.uploadMethodId="video",e=Ud(Ud({},Ip.defaultOptions),e),this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=(t=e.alphaMode)!=null?t:"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=at.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Op(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(at.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(at.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(at.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Br.extension=G.TextureSource,Br.defaultOptions=O4(Ud({},Be.defaultOptions),{autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1}),Br.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Fr=Br,I4=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(a){return this._cache.has(a)}get(a){return this._cache.get(a)}set(a,e){let t=Xt(a),i;for(let d=0;d<this.parsers.length;d++){let h=this.parsers[d];if(h.test(e)){i=h.getCacheableAssets(t,e);break}}let s=new Map(Object.entries(i||{}));i||t.forEach(d=>{s.set(d,e)});let r=[...s.keys()],o={cacheKeys:r,keys:t};t.forEach(d=>{this._cacheMap.set(d,o)}),r.forEach(d=>{let h=i?i[d]:e;this._cache.has(d)&&this._cache.get(d),this._cache.set(d,s.get(d))})}remove(a){if(!this._cacheMap.has(a))return;let e=this._cacheMap.get(a);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}},Ce=new I4,Ld=[];be.handleByList(G.TextureSource,Ld);function Gp(a={}){let e=a&&a.resource,t=e?a.resource:a,i=e?a:{resource:a};for(let s=0;s<Ld.length;s++){let r=Ld[s];if(r.test(t))return new r(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function G4(a={},e=!1){let t=a&&a.resource,i=t?a.resource:a,s=t?a:{resource:a};if(!e&&Ce.has(i))return Ce.get(i);let r=new K({source:Gp(s)});return r.on("destroy",()=>{Ce.has(i)&&Ce.remove(i)}),e||Ce.set(i,r),r}function B4(a,e=!1){return typeof a=="string"?Ce.get(a):a instanceof Be?new K({source:a}):G4(a,e)}K.from=B4,Be.from=Gp,be.add($r,Kr,qr,Fr,Ma,Kt,Rs);var Ht=class{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let i in e){let s=e[i];this.setResource(s,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){var i,s;let r=this.resources[t];e!==r&&(r&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){let t=this.resources;for(let i in t)t[i]._touched=e}destroy(){var e;let t=this.resources;for(let i in t){let s=t[i];(e=s.off)==null||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}},ss;function Bp(){return(!ss||ss!=null&&ss.isContextLost())&&(ss=xe.get().createCanvas().getContext("webgl",{})),ss}var F4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function D4(a){let e="";for(let t=0;t<a;++t)t>0&&(e+=`
else `),t<a-1&&(e+=`if(test == ${t}.0){}`);return e}function k4(a,e){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let i=F4.replace(/%forloop%/gi,D4(a));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))a=a/2|0;else break}}finally{e.deleteShader(t)}return a}var li=null;function Ci(){var a;if(li)return li;let e=Bp();return li=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),li=k4(li,e),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),li}var Fp={};function ml(a,e){let t=2166136261;for(let i=0;i<e;i++)t^=a[i].uid,t=Math.imul(t,16777619),t>>>=0;return Fp[t]||U4(a,e,t)}var Bc=0;function U4(a,e,t){let i={},s=0;Bc||(Bc=Ci());for(let o=0;o<Bc;o++){let d=o<e?a[o]:K.EMPTY.source;i[s++]=d.source,i[s++]=d.style}let r=new Ht(i);return Fp[t]=r,r}var Ea=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function Nd(a,e){let t=a.byteLength/8|0,i=new Float64Array(a,0,t);new Float64Array(e,0,t).set(i);let s=a.byteLength-t*8;if(s>0){let r=new Uint8Array(a,t*8,s);new Uint8Array(e,t*8,s).set(r)}}var L4={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Le=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(Le||{});function Cs(a,e){return e.alphaMode==="no-premultiply-alpha"&&L4[a]||a}var jd=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}},N4=Object.defineProperty,Du=Object.getOwnPropertySymbols,j4=Object.prototype.hasOwnProperty,X4=Object.prototype.propertyIsEnumerable,ku=(a,e,t)=>e in a?N4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Uu=(a,e)=>{for(var t in e||(e={}))j4.call(e,t)&&ku(a,t,e[t]);if(Du)for(var t of Du(e))X4.call(e,t)&&ku(a,t,e[t]);return a},Xd=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new jd,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},Dp=[],Hd=0;function Lu(){return Hd>0?Dp[--Hd]:new Xd}function Nu(a){Dp[Hd++]=a}var rs=0,kp=class Dr{constructor(e={}){this.uid=Ge("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[];var t;Dr.defaultOptions.maxTextures=(t=Dr.defaultOptions.maxTextures)!=null?t:Ci(),e=Uu(Uu({},Dr.defaultOptions),e);let{maxTextures:i,attributesInitialSize:s,indicesInitialSize:r}=e;this.attributeBuffer=new Ea(s*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)Nu(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){let i=e._batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;let t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){let t=this._elements;if(!t[this.elementStart])return;let i=Lu(),s=i.textures;s.clear();let r=t[this.elementStart],o=Cs(r.blendMode,r.texture._source),d=r.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let h=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer,p=this._batchIndexSize,y=this._batchIndexStart,_="startBatch",v=this.maxTextures;for(let T=this.elementStart;T<this.elementSize;++T){let A=t[T];t[T]=null;let P=A.texture._source,C=Cs(A.blendMode,P),F=o!==C||d!==A.topology;if(P._batchTick===rs&&!F){A._textureId=P._textureBindLocation,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,l,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,l,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize)),A._batch=i;continue}P._batchTick=rs,(s.count>=v||F)&&(this._finishBatch(i,y,p-y,s,o,d,e,_),_="renderBatch",y=p,o=C,d=A.topology,i=Lu(),s=i.textures,s.clear(),++rs),A._textureId=P._textureBindLocation=s.count,s.ids[P.uid]=s.count,s.textures[s.count++]=P,A._batch=i,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,l,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,l,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,y,p-y,s,o,d,e,_),y=p,++rs),this.elementStart=this.elementSize,this._batchIndexStart=y,this._batchIndexSize=p}_finishBatch(e,t,i,s,r,o,d,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=s,e.blendMode=r,e.topology=o,e.start=t,e.size=i,++rs,this.batches[this.batchIndex++]=e,d.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=Math.max(e,this.attributeBuffer.size*2),i=new Ea(t);Nd(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){let t=this.indexBuffer,i=Math.max(e,t.length*1.5);i+=i%2;let s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let r=0;r<t.length;r++)s[r]=t[r];else Nd(t.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,s){let r=e.indices,o=e.indexSize,d=e.indexOffset,h=e.attributeOffset;for(let l=0;l<o;l++)t[i++]=s+r[l+d]-h}destroy(){for(let e=0;e<this.batches.length;e++)Nu(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};kp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};var H4=kp,ve=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(ve||{}),rt=class extends xt{constructor(e){let{data:t,size:i}=e,{usage:s,label:r,shrinkToFit:o}=e;super(),this.uid=Ge("buffer"),this._resourceType="buffer",this._resourceId=Ge("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i!=null||(i=t?.byteLength);let d=!!t;this.descriptor={size:i,usage:s,mappedAtCreation:d,label:r},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ve.STATIC)}set static(e){e?this.descriptor.usage|=ve.STATIC:this.descriptor.usage&=~ve.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}let s=this._data;if(this._data=e,this._dataInt32=null,!s||s.length!==e.length){!this.shrinkToFit&&s&&e.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Ge("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Up(a,e){if(!(a instanceof rt)){let t=e?ve.INDEX:ve.VERTEX;a instanceof Array&&(e?(a=new Uint32Array(a),t=ve.INDEX|ve.COPY_DST):(a=new Float32Array(a),t=ve.VERTEX|ve.COPY_DST)),a=new rt({data:a,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return a}function z4(a,e,t){let i=a.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;let s=i.buffer.data,r=1/0,o=1/0,d=-1/0,h=-1/0,l=s.BYTES_PER_ELEMENT,u=(i.offset||0)/l,p=(i.stride||2*4)/l;for(let y=u;y<s.length;y+=p){let _=s[y],v=s[y+1];_>d&&(d=_),v>h&&(h=v),_<r&&(r=_),v<o&&(o=v)}return t.minX=r,t.minY=o,t.maxX=d,t.maxY=h,t}function V4(a){return(a instanceof rt||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=Up(a.buffer,!1),a}var qt=class extends xt{constructor(e={}){var t;super(),this.uid=Ge("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ze,this._boundsDirty=!0;let{attributes:i,indexBuffer:s,topology:r}=e;if(this.buffers=[],this.attributes={},i)for(let o in i)this.addAttribute(o,i[o]);this.instanceCount=(t=e.instanceCount)!=null?t:1,s&&this.addIndex(s),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){let i=V4(t);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=Up(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,z4(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}},W4=new Float32Array(1),Y4=new Uint32Array(1),zd=class extends qt{constructor(){let e=new rt({data:W4,label:"attribute-batch-buffer",usage:ve.VERTEX|ve.COPY_DST,shrinkToFit:!1}),t=new rt({data:Y4,label:"index-batch-buffer",usage:ve.INDEX|ve.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:i,offset:0},aUV:{buffer:e,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:t})}},Fc=Object.create(null),ju=Object.create(null);function Os(a,e){let t=ju[a];return t===void 0&&(Fc[e]===void 0&&(Fc[e]=1),ju[a]=t=Fc[e]++),t}var pr;function $4(){if(!pr){pr="mediump";let a=Bp();a&&a.getShaderPrecisionFormat&&(pr=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return pr}function K4(a,e,t){return e?a:t?(a=a.replace("out vec4 finalColor;",""),`

#ifdef GL_ES // This checks if it is WebGL1
#define in varying
#define finalColor gl_FragColor
#define texture texture2D
#endif
${a}
`):`

#ifdef GL_ES // This checks if it is WebGL1
#define in attribute
#define out varying
#endif
${a}
`}function q4(a,e,t){let i=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let s=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${a}`}else if(i!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function Z4(a,e){return e?`#version 300 es
${a}`:a}var Q4={},J4={};function e6(a,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";let i=t?Q4:J4;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${e}`}
${a}`}function t6(a,e){return e?a.replace("#version 300 es",""):a}var a6=Object.defineProperty,Xu=Object.getOwnPropertySymbols,i6=Object.prototype.hasOwnProperty,s6=Object.prototype.propertyIsEnumerable,Hu=(a,e,t)=>e in a?a6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,zu=(a,e)=>{for(var t in e||(e={}))i6.call(e,t)&&Hu(a,t,e[t]);if(Xu)for(var t of Xu(e))s6.call(e,t)&&Hu(a,t,e[t]);return a},Dc={stripVersion:t6,ensurePrecision:q4,addProgramDefines:K4,setProgramName:e6,insertVersion:Z4},kc=Object.create(null),Lp=class Vd{constructor(e){e=zu(zu({},Vd.defaultOptions),e);let t=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:$4()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t},s=e.fragment,r=e.vertex;Object.keys(Dc).forEach(o=>{let d=i[o];s=Dc[o](s,d,!0),r=Dc[o](r,d,!1)}),this.fragment=s,this.vertex=r,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Os(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){let t=`${e.vertex}:${e.fragment}`;return kc[t]||(kc[t]=new Vd(e)),kc[t]}};Lp.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};var fa=Lp,Vu={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Ca(a){var e;return(e=Vu[a])!=null?e:Vu.float32}var r6={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function n6({source:a,entryPoint:e}){var t;let i={},s=a.indexOf(`fn ${e}`);if(s!==-1){let r=a.indexOf("->",s);if(r!==-1){let o=a.substring(s,r),d=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,h;for(;(h=d.exec(o))!==null;){let l=(t=r6[h[3]])!=null?t:"float32";i[h[2]]={location:parseInt(h[1],10),format:l,stride:Ca(l).stride,offset:0,instance:!1,start:0}}}}return i}function Uc(a){var e,t,i;let s=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,o=/@binding\((\d+)\)/,d=/var(<[^>]+>)? (\w+)/,h=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,y=(e=a.match(s))==null?void 0:e.map(v=>({group:parseInt(v.match(r)[1],10),binding:parseInt(v.match(o)[1],10),name:v.match(d)[2],isUniform:v.match(d)[1]==="<uniform>",type:v.match(h)[1]}));if(!y)return{groups:[],structs:[]};let _=(i=(t=a.match(l))==null?void 0:t.map(v=>{let T=v.match(p)[1],A=v.match(u).reduce((P,C)=>{let[F,D]=C.split(":");return P[F.trim()]=D.trim(),P},{});return A?{name:T,members:A}:null}).filter(({name:v})=>y.some(T=>T.type===v)))!=null?i:[];return{groups:y,structs:_}}var gs=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(gs||{});function o6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:gs.VERTEX|gs.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:gs.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:gs.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function c6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function d6(a,e){let t=new Set,i=new Set,s=[...a.structs,...e.structs].filter(o=>t.has(o.name)?!1:(t.add(o.name),!0)),r=[...a.groups,...e.groups].filter(o=>{let d=`${o.name}-${o.binding}`;return i.has(d)?!1:(i.add(d),!0)});return{structs:s,groups:r}}var Lc=Object.create(null),Zt=class a{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;var t,i;let{fragment:s,vertex:r,layout:o,gpuLayout:d,name:h}=e;if(this.name=h,this.fragment=s,this.vertex=r,s.source===r.source){let l=Uc(s.source);this.structsAndGroups=l}else{let l=Uc(r.source),u=Uc(s.source);this.structsAndGroups=d6(l,u)}this.layout=o??c6(this.structsAndGroups),this.gpuLayout=d??o6(this.structsAndGroups),this.autoAssignGlobalUniforms=((t=this.layout[0])==null?void 0:t.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((i=this.layout[1])==null?void 0:i.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Os(i,"program")}get attributeData(){var e;return(e=this._attributeData)!=null||(this._attributeData=n6(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){let t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Lc[t]||(Lc[t]=new a(e)),Lc[t]}};function Wu(a,e,t){if(a)for(let i in a){let s=i.toLocaleLowerCase(),r=e[s];if(r){let o=a[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&r.push(`//----${t}----//`),r.push(o)}}}var h6=/\{\{(.*?)\}\}/g;function Yu(a){var e,t;let i={};return((t=(e=a.match(h6))==null?void 0:e.map(s=>s.replace(/[{()}]/g,"")))!=null?t:[]).forEach(s=>{i[s]=[]}),i}function $u(a,e){let t,i=/@in\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function Ku(a,e,t=!1){let i=[];$u(e,i),a.forEach(d=>{d.header&&$u(d.header,i)});let s=i;t&&s.sort();let r=s.map((d,h)=>`       @location(${h}) ${d},`).join(`
`),o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${r}
`),o}function qu(a,e){let t,i=/@out\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function l6(a){let e=/\b(\w+)\s*:/g.exec(a);return e?e[1]:""}function f6(a){let e=/@.*?\s+/g;return a.replace(e,"")}function u6(a,e){let t=[];qu(e,t),a.forEach(h=>{h.header&&qu(h.header,t)});let i=0,s=t.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${i++}) ${h}`).join(`,
`),r=t.sort().map(h=>`       var ${f6(h)};`).join(`
`),o=`return VSOutput(
${t.sort().map(h=>` ${l6(h)}`).join(`,
`)});`,d=e.replace(/@out\s+[^;]+;\s*/g,"");return d=d.replace("{{struct}}",`
${s}
`),d=d.replace("{{start}}",`
${r}
`),d=d.replace("{{return}}",`
${o}
`),d}function Zu(a,e){let t=a;for(let i in e){let s=e[i];s.join(`
`).length?t=t.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):t=t.replace(`{{${i}}}`,"")}return t}var Va=Object.create(null),Nc=new Map,b6=0;function p6({template:a,bits:e}){let t=Np(a,e);if(Va[t])return Va[t];let{vertex:i,fragment:s}=m6(a,e);return Va[t]=jp(i,s,e),Va[t]}function g6({template:a,bits:e}){let t=Np(a,e);return Va[t]||(Va[t]=jp(a.vertex,a.fragment,e)),Va[t]}function m6(a,e){let t=e.map(o=>o.vertex).filter(o=>!!o),i=e.map(o=>o.fragment).filter(o=>!!o),s=Ku(t,a.vertex,!0);s=u6(t,s);let r=Ku(i,a.fragment,!0);return{vertex:s,fragment:r}}function Np(a,e){return e.map(t=>(Nc.has(t)||Nc.set(t,b6++),Nc.get(t))).sort((t,i)=>t-i).join("-")+a.vertex+a.fragment}function jp(a,e,t){let i=Yu(a),s=Yu(e);return t.forEach(r=>{Wu(r.vertex,i,r.name),Wu(r.fragment,s,r.name)}),{vertex:Zu(a,i),fragment:Zu(e,s)}}var _6=`
@in aPosition: vec2<f32>;
@in aUV: vec2<f32>;

@out @builtin(position) vPosition: vec4<f32>;
@out vUV : vec2<f32>;
@out vColor : vec4<f32>;

{{header}}

struct VSOutput {
{{struct}}
};

@vertex
fn main( {{in}} ) -> VSOutput {

var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
var modelMatrix = mat3x3<f32>(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
var position = aPosition;
var uv = aUV;

{{start}}

vColor = vec4<f32>(1., 1., 1., 1.);

{{main}}

vUV = uv;

var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

vColor *= globalUniforms.uWorldColorAlpha;

{{end}}

{{return}}
};
`,y6=`
@in vUV : vec2<f32>;
@in vColor : vec4<f32>;

{{header}}

@fragment
fn main(
{{in}}
) -> @location(0) vec4<f32> {

{{start}}

var outColor:vec4<f32>;

{{main}}

var finalColor:vec4<f32> = outColor * vColor;

{{end}}

return finalColor;
};
`,x6=`
in vec2 aPosition;
in vec2 aUV;

out vec4 vColor;
out vec2 vUV;

{{header}}

void main(void){

mat3 worldTransformMatrix = uWorldTransformMatrix;
mat3 modelMatrix = mat3(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
vec2 position = aPosition;
vec2 uv = aUV;

{{start}}

vColor = vec4(1.);

{{main}}

vUV = uv;

mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

vColor *= uWorldColorAlpha;

{{end}}
}
`,v6=`

in vec4 vColor;
in vec2 vUV;

out vec4 finalColor;

{{header}}

void main(void) {

{{start}}

vec4 outColor;

{{main}}

finalColor = outColor * vColor;

{{end}}
}
`,T6={name:"global-uniforms-bit",vertex:{header:`
struct GlobalUniforms {
uProjectionMatrix:mat3x3<f32>,
uWorldTransformMatrix:mat3x3<f32>,
uWorldColorAlpha: vec4<f32>,
uResolution: vec2<f32>,
}

@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
`}};var S6={name:"global-uniforms-bit",vertex:{header:`
uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;
uniform vec4 uWorldColorAlpha;
uniform vec2 uResolution;
`}},w6=Object.defineProperty,Qu=Object.getOwnPropertySymbols,A6=Object.prototype.hasOwnProperty,E6=Object.prototype.propertyIsEnumerable,Ju=(a,e,t)=>e in a?w6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,P6=(a,e)=>{for(var t in e||(e={}))A6.call(e,t)&&Ju(a,t,e[t]);if(Qu)for(var t of Qu(e))E6.call(e,t)&&Ju(a,t,e[t]);return a};function Hs({bits:a,name:e}){let t=p6({template:{fragment:y6,vertex:_6},bits:[T6,...a]});return Zt.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function zs({bits:a,name:e}){return new fa(P6({name:e},g6({template:{vertex:x6,fragment:v6},bits:[S6,...a]})))}var _l={name:"color-bit",vertex:{header:`
@in aColor: vec4<f32>;
`,main:`
vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
`}},yl={name:"color-bit",vertex:{header:`
in vec4 aColor;
`,main:`
vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
`}},jc={};function R6(a){let e=[];if(a===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let i=0;i<a;i++)e.push(`@group(1) @binding(${t++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function M6(a){let e=[];if(a===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<a;t++)t===a-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function xl(a){return jc[a]||(jc[a]={name:"texture-batch-bit",vertex:{header:`
@in aTextureIdAndRound: vec2<u32>;
@out @interpolate(flat) vTextureId : u32;
`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1)
{
vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
@in @interpolate(flat) vTextureId: u32;

${R6(a)}
`,main:`
var uvDx = dpdx(vUV);
var uvDy = dpdy(vUV);

${M6(a)}
`}}),jc[a]}var Xc={};function C6(a){let e=[];for(let t=0;t<a;t++)t>0&&e.push("else"),t<a-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function vl(a){return Xc[a]||(Xc[a]={name:"texture-batch-bit",vertex:{header:`
in vec2 aTextureIdAndRound;
out float vTextureId;

`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
in float vTextureId;

uniform sampler2D uTextures[${a}];

`,main:`

${C6(a)}
`}}),Xc[a]}var Vs={name:"round-pixels-bit",vertex:{header:`
fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
{
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},Ws={name:"round-pixels-bit",vertex:{header:`   
vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},Xp=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],O6=Xp.reduce((a,e)=>(a[e]=!0,a),{});function I6(a,e){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var G6=Object.defineProperty,eb=Object.getOwnPropertySymbols,B6=Object.prototype.hasOwnProperty,F6=Object.prototype.propertyIsEnumerable,tb=(a,e,t)=>e in a?G6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ab=(a,e)=>{for(var t in e||(e={}))B6.call(e,t)&&tb(a,t,e[t]);if(eb)for(var t of eb(e))F6.call(e,t)&&tb(a,t,e[t]);return a},Hp=class zp{constructor(e,t){this._touched=0,this.uid=Ge("uniform"),this._resourceType="uniformGroup",this._resourceId=Ge("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1;var i,s;t=ab(ab({},zp.defaultOptions),t),this.uniformStructures=e;let r={};for(let o in e){let d=e[o];if(d.name=o,d.size=(i=d.size)!=null?i:1,!O6[d.type])throw new Error(`Uniform type ${d.type} is not supported. Supported uniform types are: ${Xp.join(", ")}`);(s=d.value)!=null||(d.value=I6(d.type,d.size)),r[o]=d.value}this.uniforms=r,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Os(Object.keys(r).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Hp.defaultOptions={ubo:!1,isStatic:!1};var et=Hp,ib={};function Tl(a){let e=ib[a];if(e)return e;let t=new Int32Array(a);for(let i=0;i<a;i++)t[i]=i;return e=ib[a]=new et({uTextures:{value:t,type:"i32",size:a}},{isStatic:!0}),e}var yt=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(yt||{}),D6=Object.defineProperty,Zr=Object.getOwnPropertySymbols,Vp=Object.prototype.hasOwnProperty,Wp=Object.prototype.propertyIsEnumerable,sb=(a,e,t)=>e in a?D6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k6=(a,e)=>{for(var t in e||(e={}))Vp.call(e,t)&&sb(a,t,e[t]);if(Zr)for(var t of Zr(e))Wp.call(e,t)&&sb(a,t,e[t]);return a},U6=(a,e)=>{var t={};for(var i in a)Vp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Zr)for(var i of Zr(a))e.indexOf(i)<0&&Wp.call(a,i)&&(t[i]=a[i]);return t},ht=class a extends xt{constructor(e){super(),this.uid=Ge("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:i,groups:s,resources:r,compatibleRenderers:o,groupMap:d}=e;this.gpuProgram=t,this.glProgram=i,o===void 0&&(o=0,t&&(o|=yt.WEBGPU),i&&(o|=yt.WEBGL)),this.compatibleRenderers=o;let h={};if(!r&&!s&&(r={}),r&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&s&&!d)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&s&&d)for(let l in d)for(let u in d[l]){let p=d[l][u];h[p]={group:l,binding:u,name:p}}else if(t&&s&&!d){let l=t.structsAndGroups.groups;d={},l.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u})}else if(r){s={},d={},t&&t.structsAndGroups.groups.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u});let l=0;for(let u in r)h[u]||(s[99]||(s[99]=new Ht,this._ownedBindGroups.push(s[99])),h[u]={group:99,binding:l,name:u},d[99]=d[99]||{},d[99][l]=u,l++);for(let u in r){let p=u,y=r[u];!y.source&&!y._resourceType&&(y=new et(y));let _=h[p];_&&(s[_.group]||(s[_.group]=new Ht,this._ownedBindGroups.push(s[_.group])),s[_.group].setResource(y,_.binding))}}this.groups=s,this._uniformBindMap=d,this.resources=this._buildResourceAccessor(s,h)}addResource(e,t,i){var s,r;(s=this._uniformBindMap)[t]||(s[t]={}),(r=this._uniformBindMap[t])[i]||(r[i]=e),this.groups[t]||(this.groups[t]=new Ht,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){let i={};for(let s in t){let r=t[s];Object.defineProperty(i,r.name,{get(){return e[r.group].getResource(r.binding)},set(o){e[r.group].setResource(o,r.binding)}})}return i}destroy(e=!1){var t,i;this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let t=e,{gpu:i,gl:s}=t,r=U6(t,["gpu","gl"]),o,d;return i&&(o=Zt.from(i)),s&&(d=fa.from(s)),new a(k6({gpuProgram:o,glProgram:d},r))}},Wd=class extends ht{constructor(e){let t=zs({name:"batch",bits:[yl,vl(e),Ws]}),i=Hs({name:"batch",bits:[_l,xl(e),Vs]});super({glProgram:t,gpuProgram:i,resources:{batchSamplers:Tl(e)}})}},rb=null,Yp=class $p extends H4{constructor(){super(...arguments),this.geometry=new zd,this.shader=rb||(rb=new Wd(this.maxTextures)),this.name=$p.extension.name,this.vertexSize=6}packAttributes(e,t,i,s,r){let o=r<<16|e.roundPixels&65535,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,{positions:v,uvs:T}=e,A=e.color,P=e.attributeOffset,C=P+e.attributeSize;for(let F=P;F<C;F++){let D=F*2,H=v[D],U=v[D+1];t[s++]=h*H+u*U+y,t[s++]=p*U+l*H+_,t[s++]=T[D],t[s++]=T[D+1],i[s++]=A,i[s++]=o}}packQuadAttributes(e,t,i,s,r){let o=e.texture,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,v=e.bounds,T=v.maxX,A=v.minX,P=v.maxY,C=v.minY,F=o.uvs,D=e.color,H=r<<16|e.roundPixels&65535;t[s+0]=h*A+u*C+y,t[s+1]=p*C+l*A+_,t[s+2]=F.x0,t[s+3]=F.y0,i[s+4]=D,i[s+5]=H,t[s+6]=h*T+u*C+y,t[s+7]=p*C+l*T+_,t[s+8]=F.x1,t[s+9]=F.y1,i[s+10]=D,i[s+11]=H,t[s+12]=h*T+u*P+y,t[s+13]=p*P+l*T+_,t[s+14]=F.x2,t[s+15]=F.y2,i[s+16]=D,i[s+17]=H,t[s+18]=h*A+u*P+y,t[s+19]=p*P+l*A+_,t[s+20]=F.x3,t[s+21]=F.y3,i[s+22]=D,i[s+23]=H}};Yp.extension={type:[G.Batcher],name:"default"};var Sl=Yp;function L6(a,e,t,i,s,r,o,d=null){let h=0;t*=e,s*=r;let l=d.a,u=d.b,p=d.c,y=d.d,_=d.tx,v=d.ty;for(;h<o;){let T=a[t],A=a[t+1];i[s]=l*T+p*A+_,i[s+1]=u*T+y*A+v,s+=r,t+=e,h++}}function N6(a,e,t,i){let s=0;for(e*=t;s<i;)a[e]=0,a[e+1]=0,e+=t,s++}function Kp(a,e,t,i,s){let r=e.a,o=e.b,d=e.c,h=e.d,l=e.tx,u=e.ty;t||(t=0),i||(i=2),s||(s=a.length/i-t);let p=t*i;for(let y=0;y<s;y++){let _=a[p],v=a[p+1];a[p]=r*_+d*v+l,a[p+1]=o*_+h*v+u,p+=i}}var j6=new ie,Is=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?hp(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||j6}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}},X6=Object.defineProperty,H6=Object.defineProperties,z6=Object.getOwnPropertyDescriptors,nb=Object.getOwnPropertySymbols,V6=Object.prototype.hasOwnProperty,W6=Object.prototype.propertyIsEnumerable,ob=(a,e,t)=>e in a?X6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qr=(a,e)=>{for(var t in e||(e={}))V6.call(e,t)&&ob(a,t,e[t]);if(nb)for(var t of nb(e))W6.call(e,t)&&ob(a,t,e[t]);return a},Jr=(a,e)=>H6(a,z6(e)),Gs={extension:{type:G.ShapeBuilder,name:"circle"},build(a,e){let t,i,s,r,o,d;if(a.type==="circle"){let D=a;t=D.x,i=D.y,o=d=D.radius,s=r=0}else if(a.type==="ellipse"){let D=a;t=D.x,i=D.y,o=D.halfWidth,d=D.halfHeight,s=r=0}else{let D=a,H=D.width/2,U=D.height/2;t=D.x+H,i=D.y+U,o=d=Math.max(0,Math.min(D.radius,Math.min(H,U))),s=H-o,r=U-d}if(!(o>=0&&d>=0&&s>=0&&r>=0))return e;let h=Math.ceil(2.3*Math.sqrt(o+d)),l=h*8+(s?4:0)+(r?4:0);if(l===0)return e;if(h===0)return e[0]=e[6]=t+s,e[1]=e[3]=i+r,e[2]=e[4]=t-s,e[5]=e[7]=i-r,e;let u=0,p=h*4+(s?2:0)+2,y=p,_=l,v=s+o,T=r,A=t+v,P=t-v,C=i+T;if(e[u++]=A,e[u++]=C,e[--p]=C,e[--p]=P,r){let D=i-T;e[y++]=P,e[y++]=D,e[--_]=D,e[--_]=A}for(let D=1;D<h;D++){let H=Math.PI/2*(D/h),U=s+Math.cos(H)*o,j=r+Math.sin(H)*d,se=t+U,ce=t-U,Z=i+j,q=i-j;e[u++]=se,e[u++]=Z,e[--p]=Z,e[--p]=ce,e[y++]=ce,e[y++]=q,e[--_]=q,e[--_]=se}v=s,T=r+d,A=t+v,P=t-v,C=i+T;let F=i-T;return e[u++]=A,e[u++]=C,e[--_]=F,e[--_]=A,s&&(e[u++]=P,e[u++]=C,e[--_]=F,e[--_]=P),e},triangulate(a,e,t,i,s,r){if(a.length===0)return;let o=0,d=0;for(let u=0;u<a.length;u+=2)o+=a[u],d+=a[u+1];o/=a.length/2,d/=a.length/2;let h=i;e[h*t]=o,e[h*t+1]=d;let l=h++;for(let u=0;u<a.length;u+=2)e[h*t]=a[u],e[h*t+1]=a[u+1],u>0&&(s[r++]=h,s[r++]=l,s[r++]=h-1),h++;s[r++]=l+1,s[r++]=l,s[r++]=h-1}},Y6=Jr(Qr({},Gs),{extension:Jr(Qr({},Gs.extension),{name:"ellipse"})}),$6=Jr(Qr({},Gs),{extension:Jr(Qr({},Gs.extension),{name:"roundedRectangle"})}),qp=1e-4,cb=1e-4;function K6(a){let e=a.length;if(e<6)return 1;let t=0;for(let i=0,s=a[e-2],r=a[e-1];i<e;i+=2){let o=a[i],d=a[i+1];t+=(o-s)*(d+r),s=o,r=d}return t<0?-1:1}function db(a,e,t,i,s,r,o,d){let h=a-t*s,l=e-i*s,u=a+t*r,p=e+i*r,y,_;o?(y=i,_=-t):(y=-i,_=t);let v=h+y,T=l+_,A=u+y,P=p+_;return d.push(v,T),d.push(A,P),2}function ka(a,e,t,i,s,r,o,d){let h=t-a,l=i-e,u=Math.atan2(h,l),p=Math.atan2(s-a,r-e);d&&u<p?u+=Math.PI*2:!d&&u>p&&(p+=Math.PI*2);let y=u,_=p-u,v=Math.abs(_),T=Math.sqrt(h*h+l*l),A=(15*v*Math.sqrt(T)/Math.PI>>0)+1,P=_/A;if(y+=P,d){o.push(a,e),o.push(t,i);for(let C=1,F=y;C<A;C++,F+=P)o.push(a,e),o.push(a+Math.sin(F)*T,e+Math.cos(F)*T);o.push(a,e),o.push(s,r)}else{o.push(t,i),o.push(a,e);for(let C=1,F=y;C<A;C++,F+=P)o.push(a+Math.sin(F)*T,e+Math.cos(F)*T),o.push(a,e);o.push(s,r),o.push(a,e)}return A*2}function q6(a,e,t,i,s,r){let o=qp;if(a.length===0)return;let d=e,h=d.alignment;if(e.alignment!==.5){let Se=K6(a);t&&(Se*=-1),h=(h-.5)*Se+.5}let l=new Me(a[0],a[1]),u=new Me(a[a.length-2],a[a.length-1]),p=i,y=Math.abs(l.x-u.x)<o&&Math.abs(l.y-u.y)<o;if(p){a=a.slice(),y&&(a.pop(),a.pop(),u.set(a[a.length-2],a[a.length-1]));let Se=(l.x+u.x)*.5,It=(u.y+l.y)*.5;a.unshift(Se,It),a.push(Se,It)}let _=s,v=a.length/2,T=a.length,A=_.length/2,P=d.width/2,C=P*P,F=d.miterLimit*d.miterLimit,D=a[0],H=a[1],U=a[2],j=a[3],se=0,ce=0,Z=-(H-j),q=D-U,re=0,te=0,Oe=Math.sqrt(Z*Z+q*q);Z/=Oe,q/=Oe,Z*=P,q*=P;let Tt=h,ne=(1-Tt)*2,de=Tt*2;p||(d.cap==="round"?T+=ka(D-Z*(ne-de)*.5,H-q*(ne-de)*.5,D-Z*ne,H-q*ne,D+Z*de,H+q*de,_,!0)+2:d.cap==="square"&&(T+=db(D,H,Z,q,ne,de,!0,_))),_.push(D-Z*ne,H-q*ne),_.push(D+Z*de,H+q*de);for(let Se=1;Se<v-1;++Se){D=a[(Se-1)*2],H=a[(Se-1)*2+1],U=a[Se*2],j=a[Se*2+1],se=a[(Se+1)*2],ce=a[(Se+1)*2+1],Z=-(H-j),q=D-U,Oe=Math.sqrt(Z*Z+q*q),Z/=Oe,q/=Oe,Z*=P,q*=P,re=-(j-ce),te=U-se,Oe=Math.sqrt(re*re+te*te),re/=Oe,te/=Oe,re*=P,te*=P;let It=U-D,pa=H-j,ea=U-se,ga=ce-j,Li=It*ea+pa*ga,Vt=pa*ea-ga*It,ma=Vt<0;if(Math.abs(Vt)<.001*Math.abs(Li)){_.push(U-Z*ne,j-q*ne),_.push(U+Z*de,j+q*de),Li>=0&&(d.join==="round"?T+=ka(U,j,U-Z*ne,j-q*ne,U-re*ne,j-te*ne,_,!1)+4:T+=2,_.push(U-re*de,j-te*de),_.push(U+re*ne,j+te*ne));continue}let _a=(-Z+D)*(-q+j)-(-Z+U)*(-q+H),Ga=(-re+se)*(-te+j)-(-re+U)*(-te+ce),ya=(It*Ga-ea*_a)/Vt,xa=(ga*_a-pa*Ga)/Vt,Ba=(ya-U)*(ya-U)+(xa-j)*(xa-j),Gt=U+(ya-U)*ne,Bt=j+(xa-j)*ne,Ft=U-(ya-U)*de,Dt=j-(xa-j)*de,Ni=Math.min(It*It+pa*pa,ea*ea+ga*ga),ai=ma?ne:de,ii=Ni+ai*ai*C;Ba<=ii?d.join==="bevel"||Ba/C>F?(ma?(_.push(Gt,Bt),_.push(U+Z*de,j+q*de),_.push(Gt,Bt),_.push(U+re*de,j+te*de)):(_.push(U-Z*ne,j-q*ne),_.push(Ft,Dt),_.push(U-re*ne,j-te*ne),_.push(Ft,Dt)),T+=2):d.join==="round"?ma?(_.push(Gt,Bt),_.push(U+Z*de,j+q*de),T+=ka(U,j,U+Z*de,j+q*de,U+re*de,j+te*de,_,!0)+4,_.push(Gt,Bt),_.push(U+re*de,j+te*de)):(_.push(U-Z*ne,j-q*ne),_.push(Ft,Dt),T+=ka(U,j,U-Z*ne,j-q*ne,U-re*ne,j-te*ne,_,!1)+4,_.push(U-re*ne,j-te*ne),_.push(Ft,Dt)):(_.push(Gt,Bt),_.push(Ft,Dt)):(_.push(U-Z*ne,j-q*ne),_.push(U+Z*de,j+q*de),d.join==="round"?ma?T+=ka(U,j,U+Z*de,j+q*de,U+re*de,j+te*de,_,!0)+2:T+=ka(U,j,U-Z*ne,j-q*ne,U-re*ne,j-te*ne,_,!1)+2:d.join==="miter"&&Ba/C<=F&&(ma?(_.push(Ft,Dt),_.push(Ft,Dt)):(_.push(Gt,Bt),_.push(Gt,Bt)),T+=2),_.push(U-re*ne,j-te*ne),_.push(U+re*de,j+te*de),T+=2)}D=a[(v-2)*2],H=a[(v-2)*2+1],U=a[(v-1)*2],j=a[(v-1)*2+1],Z=-(H-j),q=D-U,Oe=Math.sqrt(Z*Z+q*q),Z/=Oe,q/=Oe,Z*=P,q*=P,_.push(U-Z*ne,j-q*ne),_.push(U+Z*de,j+q*de),p||(d.cap==="round"?T+=ka(U-Z*(ne-de)*.5,j-q*(ne-de)*.5,U-Z*ne,j-q*ne,U+Z*de,j+q*de,_,!1)+2:d.cap==="square"&&(T+=db(U,j,Z,q,ne,de,!1,_)));let Ui=cb*cb;for(let Se=A;Se<T+A-2;++Se)D=_[Se*2],H=_[Se*2+1],U=_[(Se+1)*2],j=_[(Se+1)*2+1],se=_[(Se+2)*2],ce=_[(Se+2)*2+1],!(Math.abs(D*(j-ce)+U*(ce-H)+se*(H-j))<Ui)&&r.push(Se,Se+1,Se+2)}function Z6(a,e,t,i){let s=qp;if(a.length===0)return;let r=a[0],o=a[1],d=a[a.length-2],h=a[a.length-1],l=e||Math.abs(r-d)<s&&Math.abs(o-h)<s,u=t,p=a.length/2,y=u.length/2;for(let _=0;_<p;_++)u.push(a[_*2]),u.push(a[_*2+1]);for(let _=0;_<p-1;_++)i.push(y+_,y+_+1);l&&i.push(y+p-1,y)}var Io={exports:{}},iS=Io.exports;Io.exports=Go;var sS=Io.exports.default=Go;function Go(a,e,t){t=t||2;var i=e&&e.length,s=i?e[0]*t:a.length,r=Zp(a,0,s,t,!0),o=[];if(!r||r.next===r.prev)return o;var d,h,l,u,p,y,_;if(i&&(r=a7(a,e,r,t)),a.length>80*t){d=l=a[0],h=u=a[1];for(var v=t;v<s;v+=t)p=a[v],y=a[v+1],p<d&&(d=p),y<h&&(h=y),p>l&&(l=p),y>u&&(u=y);_=Math.max(l-d,u-h),_=_!==0?32767/_:0}return Bs(r,o,t,d,h,_,0),o}function Zp(a,e,t,i,s){var r,o;if(s===Kd(a,e,t,i)>0)for(r=e;r<t;r+=i)o=hb(r,a[r],a[r+1],o);else for(r=t-i;r>=e;r-=i)o=hb(r,a[r],a[r+1],o);return o&&Bo(o,o.next)&&(Ds(o),o=o.next),o}function $a(a,e){if(!a)return a;e||(e=a);var t=a,i;do if(i=!1,!t.steiner&&(Bo(t,t.next)||De(t.prev,t,t.next)===0)){if(Ds(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Bs(a,e,t,i,s,r,o){if(a){!o&&r&&o7(a,i,s,r);for(var d=a,h,l;a.prev!==a.next;){if(h=a.prev,l=a.next,r?J6(a,i,s,r):Q6(a)){e.push(h.i/t|0),e.push(a.i/t|0),e.push(l.i/t|0),Ds(a),a=l.next,d=l.next;continue}if(a=l,a===d){o?o===1?(a=e7($a(a),e,t),Bs(a,e,t,i,s,r,2)):o===2&&t7(a,e,t,i,s,r):Bs($a(a),e,t,i,s,r,1);break}}}}function Q6(a){var e=a.prev,t=a,i=a.next;if(De(e,t,i)>=0)return!1;for(var s=e.x,r=t.x,o=i.x,d=e.y,h=t.y,l=i.y,u=s<r?s<o?s:o:r<o?r:o,p=d<h?d<l?d:l:h<l?h:l,y=s>r?s>o?s:o:r>o?r:o,_=d>h?d>l?d:l:h>l?h:l,v=i.next;v!==e;){if(v.x>=u&&v.x<=y&&v.y>=p&&v.y<=_&&_i(s,d,r,h,o,l,v.x,v.y)&&De(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function J6(a,e,t,i){var s=a.prev,r=a,o=a.next;if(De(s,r,o)>=0)return!1;for(var d=s.x,h=r.x,l=o.x,u=s.y,p=r.y,y=o.y,_=d<h?d<l?d:l:h<l?h:l,v=u<p?u<y?u:y:p<y?p:y,T=d>h?d>l?d:l:h>l?h:l,A=u>p?u>y?u:y:p>y?p:y,P=Yd(_,v,e,t,i),C=Yd(T,A,e,t,i),F=a.prevZ,D=a.nextZ;F&&F.z>=P&&D&&D.z<=C;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==s&&F!==o&&_i(d,u,h,p,l,y,F.x,F.y)&&De(F.prev,F,F.next)>=0||(F=F.prevZ,D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==s&&D!==o&&_i(d,u,h,p,l,y,D.x,D.y)&&De(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;F&&F.z>=P;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==s&&F!==o&&_i(d,u,h,p,l,y,F.x,F.y)&&De(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;D&&D.z<=C;){if(D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==s&&D!==o&&_i(d,u,h,p,l,y,D.x,D.y)&&De(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function e7(a,e,t){var i=a;do{var s=i.prev,r=i.next.next;!Bo(s,r)&&Qp(s,i,i.next,r)&&Fs(s,r)&&Fs(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),Ds(i),Ds(i.next),i=a=r),i=i.next}while(i!==a);return $a(i)}function t7(a,e,t,i,s,r){var o=a;do{for(var d=o.next.next;d!==o.prev;){if(o.i!==d.i&&h7(o,d)){var h=Jp(o,d);o=$a(o,o.next),h=$a(h,h.next),Bs(o,e,t,i,s,r,0),Bs(h,e,t,i,s,r,0);return}d=d.next}o=o.next}while(o!==a)}function a7(a,e,t,i){var s=[],r,o,d,h,l;for(r=0,o=e.length;r<o;r++)d=e[r]*i,h=r<o-1?e[r+1]*i:a.length,l=Zp(a,d,h,i,!1),l===l.next&&(l.steiner=!0),s.push(d7(l));for(s.sort(i7),r=0;r<s.length;r++)t=s7(s[r],t);return t}function i7(a,e){return a.x-e.x}function s7(a,e){var t=r7(a,e);if(!t)return e;var i=Jp(t,a);return $a(i,i.next),$a(t,t.next)}function r7(a,e){var t=e,i=a.x,s=a.y,r=-1/0,o;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){var d=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>r&&(r=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;var h=o,l=o.x,u=o.y,p=1/0,y;t=o;do i>=t.x&&t.x>=l&&i!==t.x&&_i(s<u?i:r,s,l,u,s<u?r:i,s,t.x,t.y)&&(y=Math.abs(s-t.y)/(i-t.x),Fs(t,a)&&(y<p||y===p&&(t.x>o.x||t.x===o.x&&n7(o,t)))&&(o=t,p=y)),t=t.next;while(t!==h);return o}function n7(a,e){return De(a.prev,a,e.prev)<0&&De(e.next,a,a.next)<0}function o7(a,e,t,i){var s=a;do s.z===0&&(s.z=Yd(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==a);s.prevZ.nextZ=null,s.prevZ=null,c7(s)}function c7(a){var e,t,i,s,r,o,d,h,l=1;do{for(t=a,a=null,r=null,o=0;t;){for(o++,i=t,d=0,e=0;e<l&&(d++,i=i.nextZ,!!i);e++);for(h=l;d>0||h>0&&i;)d!==0&&(h===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,d--):(s=i,i=i.nextZ,h--),r?r.nextZ=s:a=s,s.prevZ=r,r=s;t=i}r.nextZ=null,l*=2}while(o>1);return a}function Yd(a,e,t,i,s){return a=(a-t)*s|0,e=(e-i)*s|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function d7(a){var e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function _i(a,e,t,i,s,r,o,d){return(s-o)*(e-d)>=(a-o)*(r-d)&&(a-o)*(i-d)>=(t-o)*(e-d)&&(t-o)*(r-d)>=(s-o)*(i-d)}function h7(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!l7(a,e)&&(Fs(a,e)&&Fs(e,a)&&f7(a,e)&&(De(a.prev,a,e.prev)||De(a,e.prev,e))||Bo(a,e)&&De(a.prev,a,a.next)>0&&De(e.prev,e,e.next)>0)}function De(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function Bo(a,e){return a.x===e.x&&a.y===e.y}function Qp(a,e,t,i){var s=mr(De(a,e,t)),r=mr(De(a,e,i)),o=mr(De(t,i,a)),d=mr(De(t,i,e));return!!(s!==r&&o!==d||s===0&&gr(a,t,e)||r===0&&gr(a,i,e)||o===0&&gr(t,a,i)||d===0&&gr(t,e,i))}function gr(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function mr(a){return a>0?1:a<0?-1:0}function l7(a,e){var t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&Qp(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function Fs(a,e){return De(a.prev,a,a.next)<0?De(a,e,a.next)>=0&&De(a,a.prev,e)>=0:De(a,e,a.prev)<0||De(a,a.next,e)<0}function f7(a,e){var t=a,i=!1,s=(a.x+e.x)/2,r=(a.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==a);return i}function Jp(a,e){var t=new $d(a.i,a.x,a.y),i=new $d(e.i,e.x,e.y),s=a.next,r=e.prev;return a.next=e,e.prev=a,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function hb(a,e,t,i){var s=new $d(a,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Ds(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function $d(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Go.deviation=function(a,e,t,i){var s=e&&e.length,r=s?e[0]*t:a.length,o=Math.abs(Kd(a,0,r,t));if(s)for(var d=0,h=e.length;d<h;d++){var l=e[d]*t,u=d<h-1?e[d+1]*t:a.length;o-=Math.abs(Kd(a,l,u,t))}var p=0;for(d=0;d<i.length;d+=3){var y=i[d]*t,_=i[d+1]*t,v=i[d+2]*t;p+=Math.abs((a[y]-a[v])*(a[_+1]-a[y+1])-(a[y]-a[_])*(a[v+1]-a[y+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function Kd(a,e,t,i){for(var s=0,r=e,o=t-i;r<t;r+=i)s+=(a[o]-a[r])*(a[r+1]+a[o+1]),o=r;return s}Go.flatten=function(a){for(var e=a[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,s=0;s<a.length;s++){for(var r=0;r<a[s].length;r++)for(var o=0;o<e;o++)t.vertices.push(a[s][r][o]);s>0&&(i+=a[s-1].length,t.holes.push(i))}return t};var u7=Io.exports,b7=fl(u7);function e2(a,e,t,i,s,r,o){let d=b7(a,e,2);if(!d)return;for(let l=0;l<d.length;l+=3)r[o++]=d[l]+s,r[o++]=d[l+1]+s,r[o++]=d[l+2]+s;let h=s*i;for(let l=0;l<a.length;l+=2)t[h]=a[l],t[h+1]=a[l+1],h+=i}var p7=[],g7={extension:{type:G.ShapeBuilder,name:"polygon"},build(a,e){for(let t=0;t<a.points.length;t++)e[t]=a.points[t];return e},triangulate(a,e,t,i,s,r){e2(a,p7,e,t,i,s,r)}},m7={extension:{type:G.ShapeBuilder,name:"rectangle"},build(a,e){let t=a,i=t.x,s=t.y,r=t.width,o=t.height;return r>=0&&o>=0&&(e[0]=i,e[1]=s,e[2]=i+r,e[3]=s,e[4]=i+r,e[5]=s+o,e[6]=i,e[7]=s+o),e},triangulate(a,e,t,i,s,r){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[6],e[i+o+1]=a[7],o+=t,e[i+o]=a[4],e[i+o+1]=a[5],o+=t;let d=i/t;s[r++]=d,s[r++]=d+1,s[r++]=d+2,s[r++]=d+1,s[r++]=d+3,s[r++]=d+2}},_7={extension:{type:G.ShapeBuilder,name:"triangle"},build(a,e){return e[0]=a.x,e[1]=a.y,e[2]=a.x2,e[3]=a.y2,e[4]=a.x3,e[5]=a.y3,e},triangulate(a,e,t,i,s,r){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[4],e[i+o+1]=a[5];let d=i/t;s[r++]=d,s[r++]=d+1,s[r++]=d+2}},Fo={};be.handleByMap(G.ShapeBuilder,Fo),be.add(m7,g7,_7,Gs,Y6,$6);var y7=new Ae;function x7(a,e){let{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let s=0;s<a.instructions.length;s++){let r=a.instructions[s];if(r.action==="texture")v7(r.data,i,t);else if(r.action==="fill"||r.action==="stroke"){let o=r.action==="stroke",d=r.data.path.shapePath,h=r.data.style,l=r.data.hole;o&&l&&lb(l.shapePath,h,null,!0,i,t),lb(d,h,l,o,i,t)}}}function v7(a,e,t){let{vertices:i,uvs:s,indices:r}=t,o=r.length,d=i.length/2,h=[],l=Fo.rectangle,u=y7,p=a.image;u.x=a.dx,u.y=a.dy,u.width=a.dw,u.height=a.dh;let y=a.transform;l.build(u,h),y&&Kp(h,y),l.triangulate(h,i,2,d,r,o);let _=p.uvs;s.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);let v=ye.get(Is);v.indexOffset=o,v.indexSize=r.length-o,v.attributeOffset=d,v.attributeSize=i.length/2-d,v.baseColor=a.style,v.alpha=a.alpha,v.texture=p,v.geometryData=t,e.push(v)}function lb(a,e,t,i,s,r){let{vertices:o,uvs:d,indices:h}=r,l=a.shapePrimitives.length-1;a.shapePrimitives.forEach(({shape:u,transform:p},y)=>{var _;let v=h.length,T=o.length/2,A=[],P=Fo[u.type],C="triangle-list";if(P.build(u,A),p&&Kp(A,p),i){let U=(_=u.closePath)!=null?_:!0,j=e;j.pixelLine?(Z6(A,U,o,h),C="line-list"):q6(A,j,!1,U,o,h)}else if(t&&l===y){let U=[],j=A.slice();T7(t.shapePath).forEach(se=>{U.push(j.length/2),j.push(...se)}),e2(j,U,o,2,T,h,v)}else P.triangulate(A,o,2,T,h,v);let F=d.length/2,D=e.texture;if(D!==K.WHITE){let U=e.matrix;U&&(p&&U.append(p.clone().invert()),L6(o,2,T,d,F,2,o.length/2-T,U))}else N6(d,F,2,o.length/2-T);let H=ye.get(Is);H.indexOffset=v,H.indexSize=h.length-v,H.attributeOffset=T,H.attributeSize=o.length/2-T,H.baseColor=e.color,H.alpha=e.alpha,H.texture=D,H.geometryData=r,H.topology=C,s.push(H)})}function T7(a){if(!a)return[];let e=a.shapePrimitives,t=[];for(let i=0;i<e.length;i++){let s=e[i].shape,r=[];Fo[s.type].build(s,r),t.push(r)}return t}var qd=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},Zd=class{constructor(){this.batcher=new Sl,this.instructions=new jr}init(){this.instructions.reset()}get geometry(){return this.batcher.geometry}},Qd=class Jd{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){var t;Jd.defaultOptions.bezierSmoothness=(t=e?.bezierSmoothness)!=null?t:Jd.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),x7(e,t);let i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let t=ye.get(Zd),{batches:i,geometryData:s}=this._gpuContextHash[e.uid],r=s.vertices.length,o=s.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;let d=t.batcher;d.ensureAttributeBuffer(r),d.ensureIndexBuffer(o),d.begin();for(let u=0;u<i.length;u++){let p=i[u];d.add(p)}d.finish(t.instructions);let h=d.geometry;h.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),h.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);let l=d.batches;for(let u=0;u<l.length;u++){let p=l[u];p.bindGroup=ml(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){let t=new qd;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(ye.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{ye.return(i)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Qd.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"graphicsContext"},Qd.defaultOptions={bezierSmoothness:.5};var wl=Qd,S7={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},Hc=0,zc=1,Vc=2,Wc=3,Yc=4,$c=5,eh=class t2{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Hc)}set blend(e){!!(this.data&1<<Hc)!==e&&(this.data^=1<<Hc)}get offsets(){return!!(this.data&1<<zc)}set offsets(e){!!(this.data&1<<zc)!==e&&(this.data^=1<<zc)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Vc)}set culling(e){!!(this.data&1<<Vc)!==e&&(this.data^=1<<Vc)}get depthTest(){return!!(this.data&1<<Wc)}set depthTest(e){!!(this.data&1<<Wc)!==e&&(this.data^=1<<Wc)}get depthMask(){return!!(this.data&1<<$c)}set depthMask(e){!!(this.data&1<<$c)!==e&&(this.data^=1<<$c)}get clockwiseFrontFace(){return!!(this.data&1<<Yc)}set clockwiseFrontFace(e){!!(this.data&1<<Yc)!==e&&(this.data^=1<<Yc)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=S7[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new t2;return e.depthTest=!1,e.blend=!0,e}};eh.default2d=eh.for2d();var Pt=eh;function Ys(a,e,t){let i=(a>>24&255)/255;e[t++]=(a&255)/255*i,e[t++]=(a>>8&255)/255*i,e[t++]=(a>>16&255)/255*i,e[t++]=i}var en=class{constructor(e,t){this.state=Pt.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){let t=e.context,i=!!this._graphicsBatchesHash[e.uid],s=this.renderer.graphicsContext.updateGpuContext(t);return!!(s.isBatchable||i!==s.isBatchable)}addRenderable(e,t){let i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){let t=this._graphicsBatchesHash[e.uid];if(t)for(let i=0;i<t.length;i++){let s=t[i];s._batcher.updateElement(s)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;let t=this.renderer,i=e.context;if(!t.graphicsContext.getGpuContext(i).batches.length)return;let s=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;let r=s.resources.localUniforms.uniforms;r.uTransformMatrix=e.groupTransform,r.uRound=t._roundPixels|e._roundPixels,Ys(e.groupColorAlpha,r.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){let t=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(e.context);t&&this._removeBatchForRenderable(e.uid),i.isBatchable&&this._initBatchesForRenderable(e),e.batched=i.isBatchable}_addToBatcher(e,t){let i=this.renderer.renderPipes.batch,s=this._getBatchesForRenderable(e);for(let r=0;r<s.length;r++){let o=s[r];i.addToBatch(o,t)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){let t=e.context,i=this.renderer.graphicsContext.getGpuContext(t),s=this.renderer._roundPixels|e._roundPixels,r=i.batches.map(o=>{let d=ye.get(Is);return o.copyTo(d),d.renderable=e,d.roundPixels=s,d});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=r,r}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(t=>{ye.return(t)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}};en.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"graphics"},be.add(en),be.add(wl);var ks=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){let e=this.geometry.getBuffer("aUV"),t=e.data,i=t,s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==e._updateID)&&((!i||i.length<t.length)&&(i=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=e._updateID,s.multiplyUvs(t,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}},tn=class{constructor(e,t){this.localUniforms=new et({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ht({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){let t=this._getMeshData(e),i=t.batched,s=e.batched;if(t.batched=s,i!==s)return!0;if(s){let r=e._geometry;if(r.indices.length!==t.indexSize||r.positions.length!==t.vertexSize)return t.indexSize=r.indices.length,t.vertexSize=r.positions.length,!0;let o=this._getBatchableMesh(e);return!o._batcher.checkAndUpdateTexture(o,e.texture)}return!1}addRenderable(e,t){let i=this.renderer.renderPipes.batch,{batched:s}=this._getMeshData(e);if(s){let r=this._getBatchableMesh(e);r.texture=e._texture,r.geometry=e._geometry,i.addToBatch(r,t)}else i.break(t),t.add(e)}updateRenderable(e){if(e.batched){let t=this._gpuBatchableMeshHash[e.uid];t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;let t=this._gpuBatchableMeshHash[e.uid];t&&(ye.return(t),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=Cs(e.groupBlendMode,e.texture._source);let t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),Ys(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var t,i;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(t=e._geometry.indices)==null?void 0:t.length,vertexSize:(i=e._geometry.positions)==null?void 0:i.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){let t=ye.get(ks);return t.renderable=e,t.texture=e._texture,t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=t,t}destroy(){for(let e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&ye.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};tn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"mesh"},be.add(tn);var th=class{execute(e,t){let i=e.state,s=e.renderer,r=t.shader||e.defaultShader;r.resources.uTexture=t.texture._source,r.resources.uniforms=e.localUniforms;let o=s.gl,d=e.getBuffers(t);s.shader.bind(r),s.state.set(i),s.geometry.bind(d.geometry,r.glProgram);let h=d.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;o.drawElements(o.TRIANGLES,t.particleChildren.length*6,h,0)}};function fb(a,e=null){let t=a*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,s=0;i<t;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function w7(a){return{dynamicUpdate:ub(a,!0),staticUpdate:ub(a,!1)}}function ub(a,e){let t=[];t.push(`

var index = 0;

for (let i = 0; i < ps.length; ++i)
{
const p = ps[i];

`);let i=0;for(let r in a){let o=a[r];if(e!==o.dynamic)continue;t.push(`offset = index + ${i}`),t.push(o.code);let d=Ca(o.format);i+=d.stride/4}t.push(`
index += stride * 4;
}
`),t.unshift(`
var stride = ${i};
`);let s=t.join(`
`);return new Function("ps","f32v","u32v",s)}var ah=class{constructor(e){this._size=0,this._generateParticleUpdateCache={};var t;let i=this._size=(t=e.size)!=null?t:1e3,s=e.properties,r=0,o=0;for(let p in s){let y=s[p],_=Ca(y.format);y.dynamic?o+=_.stride:r+=_.stride}this._dynamicStride=o/4,this._staticStride=r/4,this.staticAttributeBuffer=new Ea(i*4*r),this.dynamicAttributeBuffer=new Ea(i*4*o),this.indexBuffer=fb(i);let d=new qt,h=0,l=0;this._staticBuffer=new rt({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST}),this._dynamicBuffer=new rt({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST});for(let p in s){let y=s[p],_=Ca(y.format);y.dynamic?(d.addAttribute(y.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:h*4,format:y.format}),h+=_.size):(d.addAttribute(y.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:y.format}),l+=_.size)}d.addIndex(this.indexBuffer);let u=this.getParticleUpdate(s);this._dynamicUpload=u.dynamicUpdate,this._staticUpload=u.staticUpdate,this.geometry=d}getParticleUpdate(e){let t=A7(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return w7(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Ea(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Ea(this._size*this._dynamicStride*4*4),this.indexBuffer=fb(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){let s=this.staticAttributeBuffer;this._staticUpload(e,s.float32View,s.uint32View),this._staticBuffer.setDataWithSize(s.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}};function A7(a){let e=[];for(let t in a){let i=a[t];e.push(t,i.code,i.dynamic?"d":"s")}return e.join("_")}var E7=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
vec4 color = texture2D(uTexture, vUV) * vColor;
gl_FragColor = color;
}`,P7=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
float cosRotation = cos(aRotation);
float sinRotation = sin(aRotation);
float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

vec2 v = vec2(x, y);
v = v + aPosition;

gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

if(uRound == 1.0)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}

vUV = aUV;
vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,bb=`
struct ParticleUniforms {
uProjectionMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uResolution:vec2<f32>,
uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) color : vec4<f32>,
};
@vertex
fn mainVertex(
@location(0) aVertex: vec2<f32>,
@location(1) aPosition: vec2<f32>,
@location(2) aUV: vec2<f32>,
@location(3) aColor: vec4<f32>,
@location(4) aRotation: f32,
) -> VSOutput {

let v = vec2(
aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
) + aPosition;

let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

return VSOutput(
position,
aUV,
vColor,
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) color: vec4<f32>,
@builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv) * color;

return sample;
}`,ih=class extends ht{constructor(){let e=fa.from({vertex:P7,fragment:E7}),t=Zt.from({fragment:{source:bb,entryPoint:"mainFragment"},vertex:{source:bb,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:K.WHITE.source,uSampler:new pp({}),uniforms:{uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new we(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}},an=class{constructor(e,t){this.state=Pt.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new et({uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new ih,this.state=Pt.for2d()}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new ah({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){let t=e.particleChildren;if(t.length===0)return;let i=this.renderer,s=this.getBuffers(e);e.texture||(e.texture=t[0].texture);let r=this.state;s.update(t,e._childrenDirty),e._childrenDirty=!1,r.blendMode=Cs(e.blendMode,e.texture._source);let o=this.localUniforms.uniforms,d=o.uTranslationMatrix;e.worldTransform.copyTo(d),d.prepend(i.globalUniforms.globalUniformData.projectionMatrix),o.uResolution=i.globalUniforms.globalUniformData.resolution,o.uRound=i._roundPixels|e._roundPixels,Ys(e.groupColorAlpha,o.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}},sn=class extends an{constructor(e){super(e,new th)}};sn.extension={type:[G.WebGLPipes],name:"particle"};var sh=class{execute(e,t){let i=e.renderer,s=t.shader||e.defaultShader;s.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),s.groups[1]=i.texture.getTextureBindGroup(t.texture);let r=e.state,o=e.getBuffers(t);i.encoder.draw({geometry:o.geometry,shader:t.shader||e.defaultShader,state:r,size:t.particleChildren.length*6})}},rn=class extends an{constructor(e){super(e,new sh)}};rn.extension={type:[G.WebGPUPipes],name:"particle"},be.add(sn),be.add(rn);var Ei=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}};function rh(a,e){let{texture:t,bounds:i}=a;Ap(i,e._anchor,t);let s=e._style.padding;i.minX-=s,i.minY-=s,i.maxX-=s,i.maxY-=s}var nn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),s=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e),e._didTextUpdate=!1,rh(s,e)}_updateGpuText(e){let t=this._getGpuText(e),i=t.batchableSprite;t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),t.texture=i.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e._getKey(),i.texture=t.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:null,currentKey:"--",batchableSprite:ye.get(Ei)};return t.batchableSprite.renderable=e,t.batchableSprite.transform=e.groupTransform,t.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},t.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=t,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};nn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"text"};var nh=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let i=xe.get().createCanvas();i.width=e,i.height=t;let s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),e=wi(e),t=wi(t);let s=(e<<17)+(t<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let r=this._canvasPool[s].pop();return r||(r=this._createCanvasAndContext(e,t)),r}returnCanvasAndContext(e){let t=e.canvas,{width:i,height:s}=t,r=(i<<17)+(s<<1);e.context.clearRect(0,0,i,s),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}},ca=new nh;function pb(a,e,t){for(let i=0,s=4*t*e;i<e;++i,s+=4)if(a[s+3]!==0)return!1;return!0}function gb(a,e,t,i,s){let r=4*e;for(let o=i,d=i*r+4*t;o<=s;++o,d+=r)if(a[d+3]!==0)return!1;return!0}function R7(a,e=1){let{width:t,height:i}=a,s=a.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");let r=s.getImageData(0,0,t,i).data,o=0,d=0,h=t-1,l=i-1;for(;d<i&&pb(r,t,d);)++d;if(d===i)return Ae.EMPTY;for(;pb(r,t,l);)--l;for(;gb(r,t,o,d,l);)++o;for(;gb(r,t,h,d,l);)--h;return++h,++l,new Ae(o/e,d/e,(h-o)/e,(l-d)/e)}var a2=class oh{constructor(e,t,i,s){this.uid=Ge("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=t,this.x1=i,this.y1=s}addColorStop(e,t){return this.gradientStops.push({offset:e,color:we.shared.setValue(t).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;let e=oh.defaultTextureSize,{gradientStops:t}=this,i=xe.get().createCanvas();i.width=e,i.height=e;let s=i.getContext("2d"),r=s.createLinearGradient(0,0,oh.defaultTextureSize,1);for(let T=0;T<t.length;T++){let A=t[T];r.addColorStop(A.offset,A.color)}s.fillStyle=r,s.fillRect(0,0,e,e),this.texture=new K({source:new Ma({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:o,y0:d,x1:h,y1:l}=this,u=new ie,p=h-o,y=l-d,_=Math.sqrt(p*p+y*y),v=Math.atan2(y,p);u.translate(-o,-d),u.scale(1/e,1/e),u.rotate(-v),u.scale(256/_,1),this.transform=u,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let e=this.gradientStops.map(s=>`${s.offset}-${s.color}`).join("-"),t=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${t}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};a2.defaultTextureSize=256;var Us=a2,mb={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Pi=class{constructor(e,t){this.uid=Ge("fillPattern"),this.transform=new ie,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=mb[t].addressModeU,e.source.style.addressModeV=mb[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}},M7=O7,Kc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},C7=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function O7(a){var e=[];return a.replace(C7,function(t,i,s){var r=i.toLowerCase();for(s=G7(s),r=="m"&&s.length>2&&(e.push([i].concat(s.splice(0,2))),r="l",i=i=="m"?"l":"L");;){if(s.length==Kc[r])return s.unshift(i),e.push(s);if(s.length<Kc[r])throw new Error("malformed path data");e.push([i].concat(s.splice(0,Kc[r])))}}),e}var I7=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function G7(a){var e=a.match(I7);return e?e.map(Number):[]}var B7=fl(M7);function F7(a,e){let t=B7(a),i=[],s=null,r=0,o=0;for(let d=0;d<t.length;d++){let h=t[d],l=h[0],u=h;switch(l){case"M":r=u[1],o=u[2],e.moveTo(r,o);break;case"m":r+=u[1],o+=u[2],e.moveTo(r,o);break;case"H":r=u[1],e.lineTo(r,o);break;case"h":r+=u[1],e.lineTo(r,o);break;case"V":o=u[1],e.lineTo(r,o);break;case"v":o+=u[1],e.lineTo(r,o);break;case"L":r=u[1],o=u[2],e.lineTo(r,o);break;case"l":r+=u[1],o+=u[2],e.lineTo(r,o);break;case"C":r=u[5],o=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],r,o);break;case"c":e.bezierCurveTo(r+u[1],o+u[2],r+u[3],o+u[4],r+u[5],o+u[6]),r+=u[5],o+=u[6];break;case"S":r=u[3],o=u[4],e.bezierCurveToShort(u[1],u[2],r,o);break;case"s":e.bezierCurveToShort(r+u[1],o+u[2],r+u[3],o+u[4]),r+=u[3],o+=u[4];break;case"Q":r=u[3],o=u[4],e.quadraticCurveTo(u[1],u[2],r,o);break;case"q":e.quadraticCurveTo(r+u[1],o+u[2],r+u[3],o+u[4]),r+=u[3],o+=u[4];break;case"T":r=u[1],o=u[2],e.quadraticCurveToShort(r,o);break;case"t":r+=u[1],o+=u[2],e.quadraticCurveToShort(r,o);break;case"A":r=u[6],o=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,o);break;case"a":r+=u[6],o+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,o);break;case"Z":case"z":e.closePath(),i.length>0&&(s=i.pop(),s?(r=s.startX,o=s.startY):(r=0,o=0)),s=null;break;default:}l!=="Z"&&l!=="z"&&s===null&&(s={startX:r,startY:o},i.push(s))}return e}var ch=class a{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new a(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let i=this.radius*this.radius,s=this.x-e,r=this.y-t;return s*=s,r*=r,s+r<=i}strokeContains(e,t,i,s=.5){if(this.radius===0)return!1;let r=this.x-e,o=this.y-t,d=this.radius,h=(1-s)*i,l=Math.sqrt(r*r+o*o);return l<=d+h&&l>d-(i-h)}getBounds(e){return e||(e=new Ae),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}},dh=class a{constructor(e=0,t=0,i=0,s=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=s}clone(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,s=(t-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(e,t,i,s=.5){let{halfWidth:r,halfHeight:o}=this;if(r<=0||o<=0)return!1;let d=i*(1-s),h=i-d,l=r-h,u=o-h,p=r+d,y=o+d,_=e-this.x,v=t-this.y,T=_*_/(l*l)+v*v/(u*u),A=_*_/(p*p)+v*v/(y*y);return T>1&&A<=1}getBounds(e){return e||(e=new Ae),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}};function D7(a,e,t,i,s,r){let o=a-t,d=e-i,h=s-t,l=r-i,u=o*h+d*l,p=h*h+l*l,y=-1;p!==0&&(y=u/p);let _,v;y<0?(_=t,v=i):y>1?(_=s,v=r):(_=t+y*h,v=i+y*l);let T=a-_,A=e-v;return T*T+A*A}var vs=class a{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let i=[];for(let s=0,r=t.length;s<r;s++)i.push(t[s].x,t[s].y);t=i}this.points=t,this.closePath=!0}clone(){let e=this.points.slice(),t=new a(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1,s=this.points.length/2;for(let r=0,o=s-1;r<s;o=r++){let d=this.points[r*2],h=this.points[r*2+1],l=this.points[o*2],u=this.points[o*2+1];h>t!=u>t&&e<(l-d)*((t-h)/(u-h))+d&&(i=!i)}return i}strokeContains(e,t,i,s=.5){let r=i*i,o=r*(1-s),d=r-o,{points:h}=this,l=h.length-(this.closePath?0:2);for(let u=0;u<l;u+=2){let p=h[u],y=h[u+1],_=h[(u+2)%h.length],v=h[(u+3)%h.length],T=D7(e,t,p,y,_,v),A=Math.sign((_-p)*(t-y)-(v-y)*(e-p));if(T<=(A<0?d:o))return!0}return!1}getBounds(e){e||(e=new Ae);let t=this.points,i=1/0,s=-1/0,r=1/0,o=-1/0;for(let d=0,h=t.length;d<h;d+=2){let l=t[d],u=t[d+1];i=l<i?l:i,s=l>s?l:s,r=u<r?u:r,o=u>o?u:o}return e.x=i,e.width=s-i,e.y=r,e.height=o-r,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}},_r=(a,e,t,i,s,r,o)=>{let d=a-t,h=e-i,l=Math.sqrt(d*d+h*h);return l>=s-r&&l<=s+o},hh=class a{constructor(e=0,t=0,i=0,s=0,r=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=s,this.radius=r}getBounds(e){return e||(e=new Ae),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new a(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),r=t-(this.y+i),o=i*i;if(s*s+r*r<=o||(s=e-(this.x+this.width-i),s*s+r*r<=o)||(r=t-(this.y+this.height-i),s*s+r*r<=o)||(s=e-(this.x+i),s*s+r*r<=o))return!0}return!1}strokeContains(e,t,i,s=.5){let{x:r,y:o,width:d,height:h,radius:l}=this,u=i*(1-s),p=i-u,y=r+l,_=o+l,v=d-l*2,T=h-l*2,A=r+d,P=o+h;return(e>=r-u&&e<=r+p||e>=A-p&&e<=A+u)&&t>=_&&t<=_+T||(t>=o-u&&t<=o+p||t>=P-p&&t<=P+u)&&e>=y&&e<=y+v?!0:e<y&&t<_&&_r(e,t,y,_,l,p,u)||e>A-l&&t<_&&_r(e,t,A-l,_,l,p,u)||e>A-l&&t>P-l&&_r(e,t,A-l,P-l,l,p,u)||e<y&&t>P-l&&_r(e,t,y,P-l,l,p,u)}},k7=8,yr=11920929e-14,U7=1,qc=.01,fi=0,Ua=0;function i2(a,e,t,i,s,r,o,d,h,l){let u=Math.min(.99,Math.max(0,l??wl.defaultOptions.bezierSmoothness)),p=(U7-u)/1;return p*=p,L7(e,t,i,s,r,o,d,h,a,p),a}function L7(a,e,t,i,s,r,o,d,h,l){lh(a,e,t,i,s,r,o,d,h,l,0),h.push(o,d)}function lh(a,e,t,i,s,r,o,d,h,l,u){if(u>k7)return;let p=Math.PI,y=(a+t)/2,_=(e+i)/2,v=(t+s)/2,T=(i+r)/2,A=(s+o)/2,P=(r+d)/2,C=(y+v)/2,F=(_+T)/2,D=(v+A)/2,H=(T+P)/2,U=(C+D)/2,j=(F+H)/2;if(u>0){let se=o-a,ce=d-e,Z=Math.abs((t-o)*ce-(i-d)*se),q=Math.abs((s-o)*ce-(r-d)*se),re,te;if(Z>yr&&q>yr){if((Z+q)*(Z+q)<=l*(se*se+ce*ce)){if(fi<qc){h.push(U,j);return}let Oe=Math.atan2(r-i,s-t);if(re=Math.abs(Oe-Math.atan2(i-e,t-a)),te=Math.abs(Math.atan2(d-r,o-s)-Oe),re>=p&&(re=2*p-re),te>=p&&(te=2*p-te),re+te<fi){h.push(U,j);return}if(Ua!==0){if(re>Ua){h.push(t,i);return}if(te>Ua){h.push(s,r);return}}}}else if(Z>yr){if(Z*Z<=l*(se*se+ce*ce)){if(fi<qc){h.push(U,j);return}if(re=Math.abs(Math.atan2(r-i,s-t)-Math.atan2(i-e,t-a)),re>=p&&(re=2*p-re),re<fi){h.push(t,i),h.push(s,r);return}if(Ua!==0&&re>Ua){h.push(t,i);return}}}else if(q>yr){if(q*q<=l*(se*se+ce*ce)){if(fi<qc){h.push(U,j);return}if(re=Math.abs(Math.atan2(d-r,o-s)-Math.atan2(r-i,s-t)),re>=p&&(re=2*p-re),re<fi){h.push(t,i),h.push(s,r);return}if(Ua!==0&&re>Ua){h.push(s,r);return}}}else if(se=U-(a+o)/2,ce=j-(e+d)/2,se*se+ce*ce<=l){h.push(U,j);return}}lh(a,e,y,_,C,F,U,j,h,l,u+1),lh(U,j,D,H,A,P,o,d,h,l,u+1)}var N7=8,j7=11920929e-14,X7=1,H7=.01,_b=0;function z7(a,e,t,i,s,r,o,d){let h=Math.min(.99,Math.max(0,d??wl.defaultOptions.bezierSmoothness)),l=(X7-h)/1;return l*=l,V7(e,t,i,s,r,o,a,l),a}function V7(a,e,t,i,s,r,o,d){fh(o,a,e,t,i,s,r,d,0),o.push(s,r)}function fh(a,e,t,i,s,r,o,d,h){if(h>N7)return;let l=Math.PI,u=(e+i)/2,p=(t+s)/2,y=(i+r)/2,_=(s+o)/2,v=(u+y)/2,T=(p+_)/2,A=r-e,P=o-t,C=Math.abs((i-r)*P-(s-o)*A);if(C>j7){if(C*C<=d*(A*A+P*P)){if(_b<H7){a.push(v,T);return}let F=Math.abs(Math.atan2(o-s,r-i)-Math.atan2(s-t,i-e));if(F>=l&&(F=2*l-F),F<_b){a.push(v,T);return}}}else if(A=v-(e+r)/2,P=T-(t+o)/2,A*A+P*P<=d){a.push(v,T);return}fh(a,e,t,u,p,v,T,d,h+1),fh(a,v,T,y,_,r,o,d,h+1)}function s2(a,e,t,i,s,r,o,d){let h=Math.abs(s-r);(!o&&s>r||o&&r>s)&&(h=2*Math.PI-h),d||(d=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI)))),d=Math.max(d,3);let l=h/d,u=s;l*=o?-1:1;for(let p=0;p<d+1;p++){let y=Math.cos(u),_=Math.sin(u),v=e+y*i,T=t+_*i;a.push(v,T),u+=l}}function W7(a,e,t,i,s,r){let o=a[a.length-2],d=a[a.length-1]-t,h=o-e,l=s-t,u=i-e,p=Math.abs(d*u-h*l);if(p<1e-8||r===0){(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t);return}let y=d*d+h*h,_=l*l+u*u,v=d*l+h*u,T=r*Math.sqrt(y)/p,A=r*Math.sqrt(_)/p,P=T*v/y,C=A*v/_,F=T*u+A*h,D=T*l+A*d,H=h*(A+P),U=d*(A+P),j=u*(T+C),se=l*(T+C),ce=Math.atan2(U-D,H-F),Z=Math.atan2(se-D,j-F);s2(a,F+e,D+t,r,ce,Z,h*l>u*d)}var Ts=Math.PI*2,Zc={centerX:0,centerY:0,ang1:0,ang2:0},Qc=({x:a,y:e},t,i,s,r,o,d,h)=>{a*=t,e*=i;let l=s*a-r*e,u=r*a+s*e;return h.x=l+o,h.y=u+d,h};function Y7(a,e){let t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,s=Math.cos(a),r=Math.sin(a),o=Math.cos(a+e),d=Math.sin(a+e);return[{x:s-r*i,y:r+s*i},{x:o+d*i,y:d-o*i},{x:o,y:d}]}var yb=(a,e,t,i)=>{let s=a*i-e*t<0?-1:1,r=a*t+e*i;return r>1&&(r=1),r<-1&&(r=-1),s*Math.acos(r)},$7=(a,e,t,i,s,r,o,d,h,l,u,p,y)=>{let _=Math.pow(s,2),v=Math.pow(r,2),T=Math.pow(u,2),A=Math.pow(p,2),P=_*v-_*A-v*T;P<0&&(P=0),P/=_*A+v*T,P=Math.sqrt(P)*(o===d?-1:1);let C=P*s/r*p,F=P*-r/s*u,D=l*C-h*F+(a+t)/2,H=h*C+l*F+(e+i)/2,U=(u-C)/s,j=(p-F)/r,se=(-u-C)/s,ce=(-p-F)/r,Z=yb(1,0,U,j),q=yb(U,j,se,ce);d===0&&q>0&&(q-=Ts),d===1&&q<0&&(q+=Ts),y.centerX=D,y.centerY=H,y.ang1=Z,y.ang2=q};function K7(a,e,t,i,s,r,o,d=0,h=0,l=0){if(r===0||o===0)return;let u=Math.sin(d*Ts/360),p=Math.cos(d*Ts/360),y=p*(e-i)/2+u*(t-s)/2,_=-u*(e-i)/2+p*(t-s)/2;if(y===0&&_===0)return;r=Math.abs(r),o=Math.abs(o);let v=Math.pow(y,2)/Math.pow(r,2)+Math.pow(_,2)/Math.pow(o,2);v>1&&(r*=Math.sqrt(v),o*=Math.sqrt(v)),$7(e,t,i,s,r,o,h,l,u,p,y,_,Zc);let{ang1:T,ang2:A}=Zc,{centerX:P,centerY:C}=Zc,F=Math.abs(A)/(Ts/4);Math.abs(1-F)<1e-7&&(F=1);let D=Math.max(Math.ceil(F),1);A/=D;let H=a[a.length-2],U=a[a.length-1],j={x:0,y:0};for(let se=0;se<D;se++){let ce=Y7(T,A),{x:Z,y:q}=Qc(ce[0],r,o,p,u,P,C,j),{x:re,y:te}=Qc(ce[1],r,o,p,u,P,C,j),{x:Oe,y:Tt}=Qc(ce[2],r,o,p,u,P,C,j);i2(a,H,U,Z,q,re,te,Oe,Tt),H=Oe,U=Tt,T+=A}}function q7(a,e,t){var i;let s=(d,h)=>{let l=h.x-d.x,u=h.y-d.y,p=Math.sqrt(l*l+u*u),y=l/p,_=u/p;return{len:p,nx:y,ny:_}},r=(d,h)=>{d===0?a.moveTo(h.x,h.y):a.lineTo(h.x,h.y)},o=e[e.length-1];for(let d=0;d<e.length;d++){let h=e[d%e.length],l=(i=h.radius)!=null?i:t;if(l<=0){r(d,h),o=h;continue}let u=e[(d+1)%e.length],p=s(h,o),y=s(h,u);if(p.len<1e-4||y.len<1e-4){r(d,h),o=h;continue}let _=Math.asin(p.nx*y.ny-p.ny*y.nx),v=1,T=!1;p.nx*y.nx-p.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,T=!0):_>0&&(v=-1,T=!0);let A=_/2,P,C=Math.abs(Math.cos(A)*l/Math.sin(A));C>Math.min(p.len/2,y.len/2)?(C=Math.min(p.len/2,y.len/2),P=Math.abs(C*Math.sin(A)/Math.cos(A))):P=l;let F=h.x+y.nx*C+-y.ny*P*v,D=h.y+y.ny*C+y.nx*P*v,H=Math.atan2(p.ny,p.nx)+Math.PI/2*v,U=Math.atan2(y.ny,y.nx)-Math.PI/2*v;d===0&&a.moveTo(F+Math.cos(H)*P,D+Math.sin(H)*P),a.arc(F,D,P,H,U,T),o=h}}function Z7(a,e,t,i){var s;let r=(h,l)=>Math.sqrt((h.x-l.x)**2+(h.y-l.y)**2),o=(h,l,u)=>({x:h.x+(l.x-h.x)*u,y:h.y+(l.y-h.y)*u}),d=e.length;for(let h=0;h<d;h++){let l=e[(h+1)%d],u=(s=l.radius)!=null?s:t;if(u<=0){h===0?a.moveTo(l.x,l.y):a.lineTo(l.x,l.y);continue}let p=e[h],y=e[(h+2)%d],_=r(p,l),v;if(_<1e-4)v=l;else{let P=Math.min(_/2,u);v=o(l,p,P/_)}let T=r(y,l),A;if(T<1e-4)A=l;else{let P=Math.min(T/2,u);A=o(l,y,P/T)}h===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(l.x,l.y,A.x,A.y,i)}}var Q7=new Ae,uh=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ze,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let i=this._currentPoly.points,s=i[i.length-2],r=i[i.length-1];return(s!==e||r!==t)&&i.push(e,t),this}arc(e,t,i,s,r,o){this._ensurePoly(!1);let d=this._currentPoly.points;return s2(d,e,t,i,s,r,o),this}arcTo(e,t,i,s,r){this._ensurePoly();let o=this._currentPoly.points;return W7(o,e,t,i,s,r),this}arcToSvg(e,t,i,s,r,o,d){let h=this._currentPoly.points;return K7(h,this._currentPoly.lastX,this._currentPoly.lastY,o,d,e,t,i,s,r),this}bezierCurveTo(e,t,i,s,r,o,d){this._ensurePoly();let h=this._currentPoly;return i2(this._currentPoly.points,h.lastX,h.lastY,e,t,i,s,r,o,d),this}quadraticCurveTo(e,t,i,s,r){this._ensurePoly();let o=this._currentPoly;return z7(this._currentPoly.points,o.lastX,o.lastY,e,t,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));for(let i=0;i<e.instructions.length;i++){let s=e.instructions[i];this[s.action](...s.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,s,r){return this.drawShape(new Ae(e,t,i,s),r),this}circle(e,t,i,s){return this.drawShape(new ch(e,t,i),s),this}poly(e,t,i){let s=new vs(e);return s.closePath=t,this.drawShape(s,i),this}regularPoly(e,t,i,s,r=0,o){s=Math.max(s|0,3);let d=-1*Math.PI/2+r,h=Math.PI*2/s,l=[];for(let u=0;u<s;u++){let p=d-u*h;l.push(e+i*Math.cos(p),t+i*Math.sin(p))}return this.poly(l,!0,o),this}roundPoly(e,t,i,s,r,o=0,d){if(s=Math.max(s|0,3),r<=0)return this.regularPoly(e,t,i,s,o);let h=i*Math.sin(Math.PI/s)-.001;r=Math.min(r,h);let l=-1*Math.PI/2+o,u=Math.PI*2/s,p=(s-2)*Math.PI/s/2;for(let y=0;y<s;y++){let _=y*u+l,v=e+i*Math.cos(_),T=t+i*Math.sin(_),A=_+Math.PI+p,P=_-Math.PI-p,C=v+r*Math.cos(A),F=T+r*Math.sin(A),D=v+r*Math.cos(P),H=T+r*Math.sin(P);y===0?this.moveTo(C,F):this.lineTo(C,F),this.quadraticCurveTo(v,T,D,H,d)}return this.closePath()}roundShape(e,t,i=!1,s){return e.length<3?this:(i?Z7(this,e,t,s):q7(this,e,t),this.closePath())}filletRect(e,t,i,s,r){if(r===0)return this.rect(e,t,i,s);let o=Math.min(i,s)/2,d=Math.min(o,Math.max(-o,r)),h=e+i,l=t+s,u=d<0?-d:0,p=Math.abs(d);return this.moveTo(e,t+p).arcTo(e+u,t+u,e+p,t,p).lineTo(h-p,t).arcTo(h-u,t+u,h,t+p,p).lineTo(h,l-p).arcTo(h-u,l-u,e+i-p,l,p).lineTo(e+p,l).arcTo(e+u,l-u,e,l-p,p).closePath()}chamferRect(e,t,i,s,r,o){if(r<=0)return this.rect(e,t,i,s);let d=Math.min(r,Math.min(i,s)/2),h=e+i,l=t+s,u=[e+d,t,h-d,t,h,t+d,h,l-d,h-d,l,e+d,l,e,l-d,e,t+d];for(let p=u.length-1;p>=2;p-=2)u[p]===u[p-2]&&u[p-1]===u[p-3]&&u.splice(p-1,2);return this.poly(u,!0,o)}ellipse(e,t,i,s,r){return this.drawShape(new dh(e,t,i,s),r),this}roundRect(e,t,i,s,r,o){return this.drawShape(new hh(e,t,i,s,r),o),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new vs,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new vs,e)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,s=t.shape.y;if(t.transform&&!t.transform.isIdentity()){let r=t.transform,o=i;i=r.a*i+r.c*s+r.tx,s=r.b*o+r.d*s+r.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let i=0;i<t.length;i++){let s=t[i],r=s.shape.getBounds(Q7);s.transform?e.addRect(r,s.transform):e.addRect(r)}return e}},Ri=class a{constructor(e){this.instructions=[],this.uid=Ge("graphicsPath"),this._dirty=!0;var t;typeof e=="string"?F7(e,this):this.instructions=(t=e?.slice())!=null?t:[]}get shapePath(){return this._shapePath||(this._shapePath=new uh(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,s,r){let o=this.instructions[this.instructions.length-1],d=this.getLastPoint(Me.shared),h=0,l=0;if(!o||o.action!=="bezierCurveTo")h=d.x,l=d.y;else{h=o.data[2],l=o.data[3];let u=d.x,p=d.y;h=u+(u-h),l=p+(p-l)}return this.instructions.push({action:"bezierCurveTo",data:[h,l,e,t,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){let s=this.instructions[this.instructions.length-1],r=this.getLastPoint(Me.shared),o=0,d=0;if(!s||s.action!=="quadraticCurveTo")o=r.x,d=r.y;else{o=s.data[0],d=s.data[1];let h=r.x,l=r.y;o=h+(h-o),d=l+(l-d)}return this.instructions.push({action:"quadraticCurveTo",data:[o,d,e,t,i]}),this._dirty=!0,this}rect(e,t,i,s,r){return this.instructions.push({action:"rect",data:[e,t,i,s,r]}),this._dirty=!0,this}circle(e,t,i,s){return this.instructions.push({action:"circle",data:[e,t,i,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,s,r,o,d){r||(r=s/2);let h=-1*Math.PI/2+o,l=i*2,u=Math.PI*2/l,p=[];for(let y=0;y<l;y++){let _=y%2?r:s,v=y*u+h;p.push(e+_*Math.cos(v),t+_*Math.sin(v))}return this.poly(p,!0,d),this}clone(e=!1){let t=new a;if(!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){let s=this.instructions[i];t.instructions.push({action:s.action,data:s.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,i=e.b,s=e.c,r=e.d,o=e.tx,d=e.ty,h=0,l=0,u=0,p=0,y=0,_=0,v=0,T=0;for(let A=0;A<this.instructions.length;A++){let P=this.instructions[A],C=P.data;switch(P.action){case"moveTo":case"lineTo":h=C[0],l=C[1],C[0]=t*h+s*l+o,C[1]=i*h+r*l+d;break;case"bezierCurveTo":u=C[0],p=C[1],y=C[2],_=C[3],h=C[4],l=C[5],C[0]=t*u+s*p+o,C[1]=i*u+r*p+d,C[2]=t*y+s*_+o,C[3]=i*y+r*_+d,C[4]=t*h+s*l+o,C[5]=i*h+r*l+d;break;case"quadraticCurveTo":u=C[0],p=C[1],h=C[2],l=C[3],C[0]=t*u+s*p+o,C[1]=i*u+r*p+d,C[2]=t*h+s*l+o,C[3]=i*h+r*l+d;break;case"arcToSvg":h=C[5],l=C[6],v=C[0],T=C[1],C[0]=t*v+s*T,C[1]=i*v+r*T,C[5]=t*h+s*l+o,C[6]=i*h+r*l+d;break;case"circle":C[4]=ns(C[3],e);break;case"rect":C[4]=ns(C[4],e);break;case"ellipse":C[8]=ns(C[8],e);break;case"roundRect":C[5]=ns(C[5],e);break;case"addPath":C[0].transform(e);break;case"poly":C[2]=ns(C[2],e);break;default:break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}};function ns(a,e){return a?a.prepend(e):e.clone()}var J7=Object.defineProperty,xb=Object.getOwnPropertySymbols,eg=Object.prototype.hasOwnProperty,tg=Object.prototype.propertyIsEnumerable,vb=(a,e,t)=>e in a?J7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,xr=(a,e)=>{for(var t in e||(e={}))eg.call(e,t)&&vb(a,t,e[t]);if(xb)for(var t of xb(e))tg.call(e,t)&&vb(a,t,e[t]);return a};function ag(a,e){if(typeof a=="string"){let i=document.createElement("div");i.innerHTML=a.trim(),a=i.querySelector("svg")}let t={context:e,path:new Ri};return r2(a,t,null,null),e}function r2(a,e,t,i){let s=a.children,{fillStyle:r,strokeStyle:o}=ig(a);r&&t?t=xr(xr({},t),r):r&&(t=r),o&&i?i=xr(xr({},i),o):o&&(i=o),e.context.fillStyle=t,e.context.strokeStyle=i;let d,h,l,u,p,y,_,v,T,A,P,C,F,D,H,U,j;switch(a.nodeName.toLowerCase()){case"path":D=a.getAttribute("d"),H=new Ri(D),e.context.path(H),t&&e.context.fill(),i&&e.context.stroke();break;case"circle":_=Ke(a,"cx",0),v=Ke(a,"cy",0),T=Ke(a,"r",0),e.context.ellipse(_,v,T,T),t&&e.context.fill(),i&&e.context.stroke();break;case"rect":d=Ke(a,"x",0),h=Ke(a,"y",0),U=Ke(a,"width",0),j=Ke(a,"height",0),A=Ke(a,"rx",0),P=Ke(a,"ry",0),A||P?e.context.roundRect(d,h,U,j,A||P):e.context.rect(d,h,U,j),t&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":_=Ke(a,"cx",0),v=Ke(a,"cy",0),A=Ke(a,"rx",0),P=Ke(a,"ry",0),e.context.beginPath(),e.context.ellipse(_,v,A,P),t&&e.context.fill(),i&&e.context.stroke();break;case"line":l=Ke(a,"x1",0),u=Ke(a,"y1",0),p=Ke(a,"x2",0),y=Ke(a,"y2",0),e.context.beginPath(),e.context.moveTo(l,u),e.context.lineTo(p,y),i&&e.context.stroke();break;case"polygon":F=a.getAttribute("points"),C=F.match(/\d+/g).map(se=>parseInt(se,10)),e.context.poly(C,!0),t&&e.context.fill(),i&&e.context.stroke();break;case"polyline":F=a.getAttribute("points"),C=F.match(/\d+/g).map(se=>parseInt(se,10)),e.context.poly(C,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:break}for(let se=0;se<s.length;se++)r2(s[se],e,t,i)}function Ke(a,e,t){let i=a.getAttribute(e);return i?Number(i):t}function ig(a){let e=a.getAttribute("style"),t={},i={},s=!1,r=!1;if(e){let o=e.split(";");for(let d=0;d<o.length;d++){let h=o[d],[l,u]=h.split(":");switch(l){case"stroke":u!=="none"&&(t.color=we.shared.setValue(u).toNumber(),r=!0);break;case"stroke-width":t.width=Number(u);break;case"fill":u!=="none"&&(s=!0,i.color=we.shared.setValue(u).toNumber());break;case"fill-opacity":i.alpha=Number(u);break;case"stroke-opacity":t.alpha=Number(u);break;case"opacity":i.alpha=Number(u),t.alpha=Number(u);break}}}else{let o=a.getAttribute("stroke");o&&o!=="none"&&(r=!0,t.color=we.shared.setValue(o).toNumber(),t.width=Ke(a,"stroke-width",1));let d=a.getAttribute("fill");d&&d!=="none"&&(s=!0,i.color=we.shared.setValue(d).toNumber())}return{strokeStyle:r?t:null,fillStyle:s?i:null}}var sg=Object.defineProperty,on=Object.getOwnPropertySymbols,n2=Object.prototype.hasOwnProperty,o2=Object.prototype.propertyIsEnumerable,Tb=(a,e,t)=>e in a?sg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,la=(a,e)=>{for(var t in e||(e={}))n2.call(e,t)&&Tb(a,t,e[t]);if(on)for(var t of on(e))o2.call(e,t)&&Tb(a,t,e[t]);return a},rg=(a,e)=>{var t={};for(var i in a)n2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&on)for(var i of on(a))e.indexOf(i)<0&&o2.call(a,i)&&(t[i]=a[i]);return t};function ng(a){return we.isColorLike(a)}function Sb(a){return a instanceof Pi}function wb(a){return a instanceof Us}function og(a,e,t){let i=we.shared.setValue(e??0);return a.color=i.toNumber(),a.alpha=i.alpha===1?t.alpha:i.alpha,a.texture=K.WHITE,la(la({},t),a)}function Ab(a,e,t){return a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function Eb(a,e,t){return e.buildLinearGradient(),a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function cg(a,e){var t;let i=la(la({},e),a);if(i.texture){if(i.texture!==K.WHITE){let o=((t=i.matrix)==null?void 0:t.clone().invert())||new ie;o.translate(i.texture.frame.x,i.texture.frame.y),o.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=o}let r=i.texture.source.style;r.addressMode==="clamp-to-edge"&&(r.addressMode="repeat",r.update())}let s=we.shared.setValue(i.color);return i.alpha*=s.alpha,i.color=s.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function Wa(a,e){if(a==null)return null;let t={},i=a;return ng(a)?og(t,a,e):Sb(a)?Ab(t,a,e):wb(a)?Eb(t,a,e):i.fill&&Sb(i.fill)?Ab(i,i.fill,e):i.fill&&wb(i.fill)?Eb(i,i.fill,e):cg(i,e)}function cn(a,e){let t=e,{width:i,alignment:s,miterLimit:r,cap:o,join:d,pixelLine:h}=t,l=rg(t,["width","alignment","miterLimit","cap","join","pixelLine"]),u=Wa(a,l);return u?la({width:i,alignment:s,miterLimit:r,cap:o,join:d,pixelLine:h},u):null}var dg=Object.defineProperty,Pb=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable,Rb=(a,e,t)=>e in a?dg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ui=(a,e)=>{for(var t in e||(e={}))hg.call(e,t)&&Rb(a,t,e[t]);if(Pb)for(var t of Pb(e))lg.call(e,t)&&Rb(a,t,e[t]);return a},fg=new Me,Mb=new ie,bh=class $t extends xt{constructor(){super(...arguments),this.uid=Ge("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ri,this._transform=new ie,this._fillStyle=ui({},$t.defaultFillStyle),this._strokeStyle=ui({},$t.defaultStrokeStyle),this._stateStack=[],this._tick=0,this._bounds=new Ze,this._boundsDirty=!0}clone(){let e=new $t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle=ui({},this._fillStyle),e._strokeStyle=ui({},this._strokeStyle),e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Wa(e,$t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=cn(e,$t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Wa(e,$t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Wa(e,$t.defaultStrokeStyle),this}texture(e,t,i,s,r,o){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:s||0,dw:r||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?we.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ri,this}fill(e,t){let i,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(e!=null&&(t!==void 0&&typeof e=="number"&&(e={color:e,alpha:t}),this._fillStyle=Wa(e,$t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(Me.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t,i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=cn(e,$t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,s,r,o){this._tick++;let d=this._transform;return this._activePath.arc(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,i,s,r,o),this}arcTo(e,t,i,s,r){this._tick++;let o=this._transform;return this._activePath.arcTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,r),this}arcToSvg(e,t,i,s,r,o,d){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,t,i,s,r,h.a*o+h.c*d+h.tx,h.b*o+h.d*d+h.ty),this}bezierCurveTo(e,t,i,s,r,o,d){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,h.a*i+h.c*s+h.tx,h.b*i+h.d*s+h.ty,h.a*r+h.c*o+h.tx,h.b*r+h.d*o+h.ty,d),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,i,s){return this._tick++,this._activePath.ellipse(e,t,i,s,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform,s=this._activePath.instructions,r=i.a*e+i.c*t+i.tx,o=i.b*e+i.d*t+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=r,s[0].data[1]=o,this):(this._activePath.moveTo(r,o),this)}quadraticCurveTo(e,t,i,s,r){this._tick++;let o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,r),this}rect(e,t,i,s){return this._tick++,this._activePath.rect(e,t,i,s,this._transform.clone()),this}roundRect(e,t,i,s,r){return this._tick++,this._activePath.roundRect(e,t,i,s,r,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,s,r=0,o){return this._tick++,this._activePath.regularPoly(e,t,i,s,r,o),this}roundPoly(e,t,i,s,r,o){return this._tick++,this._activePath.roundPoly(e,t,i,s,r,o),this}roundShape(e,t,i,s){return this._tick++,this._activePath.roundShape(e,t,i,s),this}filletRect(e,t,i,s,r){return this._tick++,this._activePath.filletRect(e,t,i,s,r),this}chamferRect(e,t,i,s,r,o){return this._tick++,this._activePath.chamferRect(e,t,i,s,r,o),this}star(e,t,i,s,r=0,o=0){return this._tick++,this._activePath.star(e,t,i,s,r,o,this._transform.clone()),this}svg(e){return this._tick++,ag(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:ui({},this._fillStyle),strokeStyle:ui({},this._strokeStyle)}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,s,r,o){return e instanceof ie?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,s,r,o),this)}transform(e,t,i,s,r,o){return e instanceof ie?(this._transform.append(e),this):(Mb.set(e,t,i,s,r,o),this._transform.append(Mb),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],s=i.action;if(s==="fill"){let r=i.data;e.addBounds(r.path.bounds)}else if(s==="texture"){let r=i.data;e.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh,r.transform)}if(s==="stroke"){let r=i.data,o=r.style.alignment,d=r.style.width*(1-o),h=r.path.bounds;e.addFrame(h.minX-d,h.minY-d,h.maxX+d,h.maxY+d)}}return e}containsPoint(e){var t;if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,s=!1;for(let r=0;r<i.length;r++){let o=i[r],d=o.data,h=d.path;if(!o.action||!h)continue;let l=d.style,u=h.shapePath.shapePrimitives;for(let p=0;p<u.length;p++){let y=u[p].shape;if(!l||!y)continue;let _=u[p].transform,v=_?_.applyInverse(e,fg):e;if(o.action==="fill")s=y.contains(v.x,v.y);else{let A=l;s=y.strokeContains(v.x,v.y,A.width,A.alignment)}let T=d.hole;if(T){let A=(t=T.shapePath)==null?void 0:t.shapePrimitives;if(A)for(let P=0;P<A.length;P++)A[P].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};bh.defaultFillStyle={color:16777215,alpha:1,texture:K.WHITE,matrix:null,fill:null},bh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:K.WHITE,matrix:null,fill:null,pixelLine:!1};var dt=bh,Cb=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function c2(a){let e=[],t=0;for(let i=0;i<Cb.length;i++){let s=`_${Cb[i]}`;e[t++]=a[s]}return t=d2(a._fill,e,t),t=ug(a._stroke,e,t),t=bg(a.dropShadow,e,t),e.join("-")}function d2(a,e,t){var i;return a&&(e[t++]=a.color,e[t++]=a.alpha,e[t++]=(i=a.fill)==null?void 0:i.styleKey),t}function ug(a,e,t){return a&&(t=d2(a,e,t),e[t++]=a.width,e[t++]=a.alignment,e[t++]=a.cap,e[t++]=a.join,e[t++]=a.miterLimit),t}function bg(a,e,t){return a&&(e[t++]=a.alpha,e[t++]=a.angle,e[t++]=a.blur,e[t++]=a.distance,e[t++]=we.shared.setValue(a.color).toNumber()),t}var pg=Object.defineProperty,gg=Object.defineProperties,mg=Object.getOwnPropertyDescriptors,Ob=Object.getOwnPropertySymbols,_g=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,Ib=(a,e,t)=>e in a?pg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ut=(a,e)=>{for(var t in e||(e={}))_g.call(e,t)&&Ib(a,t,e[t]);if(Ob)for(var t of Ob(e))yg.call(e,t)&&Ib(a,t,e[t]);return a},xg=(a,e)=>gg(a,mg(e)),ph=class mi extends xt{constructor(e={}){super(),vg(e);let t=ut(ut({},mi.defaultTextStyle),e);for(let i in t){let s=i;this[s]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy(ut(ut({},mi.defaultDropShadow),e)):this._dropShadow=e?this._createProxy(ut({},mi.defaultDropShadow)):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy(ut(ut({},dt.defaultFillStyle),e),()=>{this._fill=Wa(ut({},this._originalFill),dt.defaultFillStyle)})),this._fill=Wa(e===0?"black":e,dt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy(ut(ut({},dt.defaultStrokeStyle),e),()=>{this._stroke=cn(ut({},this._originalStroke),dt.defaultStrokeStyle)})),this._stroke=cn(e,dt.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=c2(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=mi.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new mi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?ut({},this._dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var t,i,s,r;if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let o=typeof e=="boolean"?e:e?.textureSource;(t=this._fill)!=null&&t.texture&&this._fill.texture.destroy(o),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(o),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(o),(r=this._originalStroke)!=null&&r.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(i,s,r)=>(i[s]=r,t?.(s,r),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(we.isColorLike(e)||e instanceof Us||e instanceof Pi)}};ph.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},ph.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Rt=ph;function vg(a){var e,t,i,s,r;let o=a;if(typeof o.dropShadow=="boolean"&&o.dropShadow){let d=Rt.defaultDropShadow;a.dropShadow={alpha:(e=o.dropShadowAlpha)!=null?e:d.alpha,angle:(t=o.dropShadowAngle)!=null?t:d.angle,blur:(i=o.dropShadowBlur)!=null?i:d.blur,color:(s=o.dropShadowColor)!=null?s:d.color,distance:(r=o.dropShadowDistance)!=null?r:d.distance}}if(o.strokeThickness!==void 0){let d=o.stroke,h={};if(we.isColorLike(d))h.color=d;else if(d instanceof Us||d instanceof Pi)h.fill=d;else if(Object.hasOwnProperty.call(d,"color")||Object.hasOwnProperty.call(d,"fill"))h=d;else throw new Error("Invalid stroke value.");a.stroke=xg(ut({},h),{width:o.strokeThickness})}if(Array.isArray(o.fillGradientStops)){let d;a.fontSize==null?a.fontSize=Rt.defaultTextStyle.fontSize:typeof a.fontSize=="string"?d=parseInt(a.fontSize,10):d=a.fontSize;let h=new Us(0,0,0,d*1.7),l=o.fillGradientStops.map(u=>we.shared.setValue(u).toNumber());l.forEach((u,p)=>{let y=p/(l.length-1);h.addColorStop(y,u)}),a.fill={fill:h}}}var Tg=new Ze;function h2(a,e,t,i){let s=Tg;s.minX=0,s.minY=0,s.maxX=a.width/i|0,s.maxY=a.height/i|0;let r=Ve.getOptimalTexture(s.width,s.height,i,!1);return r.source.uploadMethodId="image",r.source.resource=a,r.source.alphaMode="premultiply-alpha-on-upload",r.frame.width=e/i,r.frame.height=t/i,r.source.emit("update",r.source),r.updateUvs(),r}var Sg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function dn(a){let e=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize,t=a.fontFamily;Array.isArray(a.fontFamily)||(t=a.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!Sg.includes(s)&&(s=`"${s}"`),t[i]=s}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${e} ${t.join(",")}`}var Jc={willReadFrequently:!0},jt=class ee{static get experimentalLetterSpacingSupported(){let e=ee._experimentalLetterSpacingSupported;if(e!==void 0){let t=xe.get().getCanvasRenderingContext2D().prototype;e=ee._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,r,o,d,h,l){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=r,this.lineWidths=o,this.lineHeight=d,this.maxLineWidth=h,this.fontProperties=l}static measureText(e=" ",t,i=ee._canvas,s=t.wordWrap){var r;let o=`${e}:${t.styleKey}`;if(ee._measurementCache[o])return ee._measurementCache[o];let d=dn(t),h=ee.measureFont(d);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);let l=ee.__context;l.font=d;let u=(s?ee._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),p=new Array(u.length),y=0;for(let P=0;P<u.length;P++){let C=ee._measureText(u[P],t.letterSpacing,l);p[P]=C,y=Math.max(y,C)}let _=((r=t._stroke)==null?void 0:r.width)||0,v=y+_;t.dropShadow&&(v+=t.dropShadow.distance);let T=t.lineHeight||h.fontSize,A=Math.max(T,h.fontSize+_)+(u.length-1)*(T+t.leading);return t.dropShadow&&(A+=t.dropShadow.distance),new ee(e,t,v,A,u,p,T+t.leading,y,h)}static _measureText(e,t,i){let s=!1;ee.experimentalLetterSpacingSupported&&(ee.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let r=i.measureText(e),o=r.width,d=-r.actualBoundingBoxLeft,h=r.actualBoundingBoxRight-d;if(o>0)if(s)o-=t,h-=t;else{let l=(ee.graphemeSegmenter(e).length-1)*t;o+=l,h+=l}return Math.max(o,h)}static _wordWrap(e,t,i=ee._canvas){let s=i.getContext("2d",Jc),r=0,o="",d="",h=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,p=ee._collapseSpaces(u),y=ee._collapseNewlines(u),_=!p,v=t.wordWrapWidth+l,T=ee._tokenize(e);for(let A=0;A<T.length;A++){let P=T[A];if(ee._isNewline(P)){if(!y){d+=ee._addLine(o),_=!p,o="",r=0;continue}P=" "}if(p){let F=ee.isBreakingSpace(P),D=ee.isBreakingSpace(o[o.length-1]);if(F&&D)continue}let C=ee._getFromCache(P,l,h,s);if(C>v)if(o!==""&&(d+=ee._addLine(o),o="",r=0),ee.canBreakWords(P,t.breakWords)){let F=ee.wordWrapSplit(P);for(let D=0;D<F.length;D++){let H=F[D],U=H,j=1;for(;F[D+j];){let ce=F[D+j];if(!ee.canBreakChars(U,ce,P,D,t.breakWords))H+=ce;else break;U=ce,j++}D+=j-1;let se=ee._getFromCache(H,l,h,s);se+r>v&&(d+=ee._addLine(o),_=!1,o="",r=0),o+=H,r+=se}}else{o.length>0&&(d+=ee._addLine(o),o="",r=0);let F=A===T.length-1;d+=ee._addLine(P,!F),_=!1,o="",r=0}else C+r>v&&(_=!1,d+=ee._addLine(o),o="",r=0),(o.length>0||!ee.isBreakingSpace(P)||_)&&(o+=P,r+=C)}return d+=ee._addLine(o,!1),d}static _addLine(e,t=!0){return e=ee._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,s){let r=i[e];return typeof r!="number"&&(r=ee._measureText(e,t,s)+t,i[e]=r),r}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let i=e[t];if(!ee.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ee._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ee._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let t=[],i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){let r=e[s],o=e[s+1];if(ee.isBreakingSpace(r,o)||ee._isNewline(r)){i!==""&&(t.push(i),i=""),t.push(r);continue}i+=r}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,r){return!0}static wordWrapSplit(e){return ee.graphemeSegmenter(e)}static measureFont(e){if(ee._fonts[e])return ee._fonts[e];let t=ee._context;t.font=e;let i=t.measureText(ee.METRICS_STRING+ee.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return ee._fonts[e]=s,s}static clearMetrics(e=""){e?delete ee._fonts[e]:ee._fonts={}}static get _canvas(){if(!ee.__canvas){let e;try{let t=new OffscreenCanvas(0,0),i=t.getContext("2d",Jc);if(i!=null&&i.measureText)return ee.__canvas=t,t;e=xe.get().createCanvas()}catch{e=xe.get().createCanvas()}e.width=e.height=10,ee.__canvas=e}return ee.__canvas}static get _context(){return ee.__context||(ee.__context=ee._canvas.getContext("2d",Jc)),ee.__context}};jt.METRICS_STRING="|\xC9q\xC5",jt.BASELINE_SYMBOL="M",jt.BASELINE_MULTIPLIER=1.4,jt.HEIGHT_MULTIPLIER=2,jt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let a=new Intl.Segmenter;return e=>[...a.segment(e)].map(t=>t.segment)}return a=>[...a]})(),jt.experimentalLetterSpacing=!1,jt._fonts={},jt._newlines=[10,13],jt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],jt._measurementCache={};var na=jt;function hn(a,e){var t;if(a.texture===K.WHITE&&!a.fill)return we.shared.setValue(a.color).setAlpha((t=a.alpha)!=null?t:1).toHexa();if(a.fill){if(a.fill instanceof Pi){let i=a.fill,s=e.createPattern(i.texture.source.resource,"repeat"),r=i.transform.copyTo(ie.shared);return r.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(r),s}else if(a.fill instanceof Us){let i=a.fill;if(i.type==="linear"){let s=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(r=>{s.addColorStop(r.offset,we.shared.setValue(r.color).toHex())}),s}}}else{let i=e.createPattern(a.texture.source.resource,"repeat"),s=a.matrix.copyTo(ie.shared);return s.scale(a.texture.frame.width,a.texture.frame.height),i.setTransform(s),i}return"red"}var ln=class{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,t,i){let s=na.measureText(e||" ",i),r=Math.ceil(Math.ceil(Math.max(1,s.width)+i.padding*2)*t),o=Math.ceil(Math.ceil(Math.max(1,s.height)+i.padding*2)*t);return r=Math.ceil(r-1e-6),o=Math.ceil(o-1e-6),r=wi(r),o=wi(o),{width:r,height:o}}getTexture(e,t,i,s){typeof e=="string"&&(e={text:e,style:i,resolution:t}),e.style instanceof Rt||(e.style=new Rt(e.style));let{texture:r,canvasAndContext:o}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(r._source),ca.returnCanvasAndContext(o),r}createTextureAndCanvas(e){var t;let{text:i,style:s}=e,r=(t=e.resolution)!=null?t:this._renderer.resolution,o=na.measureText(i||" ",s),d=Math.ceil(Math.ceil(Math.max(1,o.width)+s.padding*2)*r),h=Math.ceil(Math.ceil(Math.max(1,o.height)+s.padding*2)*r),l=ca.getOptimalCanvasAndContext(d,h),{canvas:u}=l;this.renderTextToCanvas(i,s,r,l);let p=h2(u,d,h,r);if(s.trim){let y=R7(u,r);p.frame.copyFrom(y),p.updateUvs()}return{texture:p,canvasAndContext:l}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let t=e._getKey();if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;let{texture:i,canvasAndContext:s}=this.createTextureAndCanvas(e);return this._activeTextures[t]={canvasAndContext:s,texture:i,usageCount:1},i}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];if(t.usageCount--,t.usageCount===0){ca.returnCanvasAndContext(t.canvasAndContext),Ve.returnTexture(t.texture);let i=t.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[e]=null}}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,t,i,s){var r,o,d,h,l;let{canvas:u,context:p}=s,y=dn(t),_=na.measureText(e||" ",t),v=_.lines,T=_.lineHeight,A=_.lineWidths,P=_.maxLineWidth,C=_.fontProperties,F=u.height;if(p.resetTransform(),p.scale(i,i),p.textBaseline=t.textBaseline,(r=t._stroke)!=null&&r.width){let j=t._stroke;p.lineWidth=j.width,p.miterLimit=j.miterLimit,p.lineJoin=j.join,p.lineCap=j.cap}p.font=y;let D,H,U=t.dropShadow?2:1;for(let j=0;j<U;++j){let se=t.dropShadow&&j===0,ce=se?Math.ceil(Math.max(1,F)+t.padding*2):0,Z=ce*i;if(se){p.fillStyle="black",p.strokeStyle="black";let te=t.dropShadow,Oe=te.color,Tt=te.alpha;p.shadowColor=we.shared.setValue(Oe).setAlpha(Tt).toRgbaString();let ne=te.blur*i,de=te.distance*i;p.shadowBlur=ne,p.shadowOffsetX=Math.cos(te.angle)*de,p.shadowOffsetY=Math.sin(te.angle)*de+Z}else p.fillStyle=t._fill?hn(t._fill,p):null,(o=t._stroke)!=null&&o.width&&(p.strokeStyle=hn(t._stroke,p)),p.shadowColor="black";let q=(T-C.fontSize)/2;T-C.fontSize<0&&(q=0);let re=(h=(d=t._stroke)==null?void 0:d.width)!=null?h:0;for(let te=0;te<v.length;te++)D=re/2,H=re/2+te*T+C.ascent+q,t.align==="right"?D+=P-A[te]:t.align==="center"&&(D+=(P-A[te])/2),(l=t._stroke)!=null&&l.width&&this._drawLetterSpacing(v[te],t,s,D+t.padding,H+t.padding-ce,!0),t._fill!==void 0&&this._drawLetterSpacing(v[te],t,s,D+t.padding,H+t.padding-ce)}}_drawLetterSpacing(e,t,i,s,r,o=!1){let{context:d}=i,h=t.letterSpacing,l=!1;if(na.experimentalLetterSpacingSupported&&(na.experimentalLetterSpacing?(d.letterSpacing=`${h}px`,d.textLetterSpacing=`${h}px`,l=!0):(d.letterSpacing="0px",d.textLetterSpacing="0px")),h===0||l){o?d.strokeText(e,s,r):d.fillText(e,s,r);return}let u=s,p=na.graphemeSegmenter(e),y=d.measureText(e).width,_=0;for(let v=0;v<p.length;++v){let T=p[v];o?d.strokeText(T,u,r):d.fillText(T,u,r);let A="";for(let P=v+1;P<p.length;++P)A+=p[P];_=d.measureText(A).width,u+=y-_+h,y=_}}destroy(){this._activeTextures=null}};ln.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"canvasText"},be.add(ln),be.add(nn);var wg=Object.defineProperty,fn=Object.getOwnPropertySymbols,l2=Object.prototype.hasOwnProperty,f2=Object.prototype.propertyIsEnumerable,Gb=(a,e,t)=>e in a?wg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ag=(a,e)=>{for(var t in e||(e={}))l2.call(e,t)&&Gb(a,t,e[t]);if(fn)for(var t of fn(e))f2.call(e,t)&&Gb(a,t,e[t]);return a},Eg=(a,e)=>{var t={};for(var i in a)l2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&fn)for(var i of fn(a))e.indexOf(i)<0&&f2.call(a,i)&&(t[i]=a[i]);return t},Ye=class a extends ha{constructor(e){e instanceof dt&&(e={context:e});let t=e||{},{context:i,roundPixels:s}=t,r=Eg(t,["context","roundPixels"]);super(Ag({label:"Graphics"},r)),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new dt,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new a(this._context.clone()):(this._ownedContext=null,new a(this._context))}lineStyle(e,t,i){let s={};return e&&(s.width=e),t&&(s.color=t),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(e,t){let i={};return e!==void 0&&(i.color=e),t!==void 0&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){this.context.fill();let e=this.context.strokeStyle;return(e.width!==dt.defaultStrokeStyle.width||e.color!==dt.defaultStrokeStyle.color||e.alpha!==dt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return this._callContextMethod("circle",e)}drawEllipse(...e){return this._callContextMethod("ellipse",e)}drawPolygon(...e){return this._callContextMethod("poly",e)}drawRect(...e){return this._callContextMethod("rect",e)}drawRoundedRect(...e){return this._callContextMethod("roundRect",e)}drawStar(...e){return this._callContextMethod("star",e)}},Pg={name:"local-uniform-msdf-bit",vertex:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32,
uRound:f32,
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:` 
outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
`}},Rg={name:"local-uniform-msdf-bit",vertex:{header:`
uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix *= uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
uniform float uDistance;
`,main:` 
outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
`}},Mg={name:"msdf-bit",fragment:{header:`
fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

// MSDF
var median = msdfColor.r + msdfColor.g + msdfColor.b -
min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

var screenPxDistance = distance * (median - 0.5);
var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
var coverage: f32 = pow(shapeColor.a * alpha, gamma);

return coverage;

}
`}},Cg={name:"msdf-bit",fragment:{header:`
float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

// MSDF
float median = msdfColor.r + msdfColor.g + msdfColor.b -
            min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
            max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

float screenPxDistance = distance * (median - 0.5);
float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
float gamma = mix(1.0, 1.0 / 2.2, luma);
float coverage = pow(shapeColor.a * alpha, gamma);  

return coverage;
}
`}},ed,td,gh=class extends ht{constructor(){let e=new et({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),t=Ci();ed!=null||(ed=Hs({name:"sdf-shader",bits:[_l,xl(t),Pg,Mg,Vs]})),td!=null||(td=zs({name:"sdf-shader",bits:[yl,vl(t),Rg,Cg,Ws]})),super({glProgram:td,gpuProgram:ed,resources:{localUniforms:e,batchSamplers:Tl(t)}})}},ad=0,Bb=500;function Qt(...a){ad!==Bb&&ad++}var un=class extends xt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return this.fontFamily}get pageTextures(){return this.pages}get size(){return this.fontMetrics.fontSize}get distanceFieldRange(){return this.distanceField.range}get distanceFieldType(){return this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(let i in this.chars)(t=this.chars[i].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}};function u2(a){if(a==="")return[];typeof a=="string"&&(a=[a]);let e=[];for(let t=0,i=a.length;t<i;t++){let s=a[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let r=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let d=r,h=o;d<=h;d++)e.push(String.fromCharCode(d))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var Og=Object.defineProperty,Fb=Object.getOwnPropertySymbols,Ig=Object.prototype.hasOwnProperty,Gg=Object.prototype.propertyIsEnumerable,Db=(a,e,t)=>e in a?Og(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,kb=(a,e)=>{for(var t in e||(e={}))Ig.call(e,t)&&Db(a,t,e[t]);if(Fb)for(var t of Fb(e))Gg.call(e,t)&&Db(a,t,e[t]);return a},b2=class p2 extends un{constructor(e){var t,i,s;super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let r=kb(kb({},p2.defaultOptions),e);this._textureSize=r.textureSize,this._mipmap=r.mipmap;let o=r.style.clone();r.overrideFill&&(o._fill.color=16777215,o._fill.alpha=1,o._fill.texture=K.WHITE,o._fill.fill=null),this.applyFillAsTint=r.overrideFill;let d=o.fontSize;o.fontSize=this.baseMeasurementFontSize;let h=dn(o);r.overrideSize?o._stroke&&(o._stroke.width*=this.baseRenderedFontSize/d):o.fontSize=this.baseRenderedFontSize=d,this._style=o,this._skipKerning=(t=r.skipKerning)!=null?t:!1,this.resolution=(i=r.resolution)!=null?i:1,this._padding=(s=r.padding)!=null?s:4,this.fontMetrics=na.measureFont(h),this.lineHeight=o.lineHeight||this.fontMetrics.fontSize||o.fontSize}ensureCharacters(e){var t,i,s,r;let o=u2(e).filter(D=>!this._currentChars.includes(D)).filter((D,H,U)=>U.indexOf(D)===H);if(!o.length)return;this._currentChars=[...this._currentChars,...o];let d;this._currentPageIndex===-1?d=this._nextPage():d=this.pages[this._currentPageIndex];let{canvas:h,context:l}=d.canvasAndContext,u=d.texture.source,p=this._style,y=this._currentX,_=this._currentY,v=this.baseRenderedFontSize/this.baseMeasurementFontSize,T=this._padding*v,A=0,P=!1,C=h.width/this.resolution,F=h.height/this.resolution;for(let D=0;D<o.length;D++){let H=o[D],U=na.measureText(H,p,h,!1);U.lineHeight=U.height;let j=U.width*v,se=Math.ceil((p.fontStyle==="italic"?2:1)*j),ce=U.height*v,Z=se+T*2,q=ce+T*2;if(P=!1,H!==`
`&&H!=="\r"&&H!=="	"&&H!==" "&&(P=!0,A=Math.ceil(Math.max(q,A))),y+Z>C&&(_+=A,A=q,y=0,_+A>F)){u.update();let te=this._nextPage();h=te.canvasAndContext.canvas,l=te.canvasAndContext.context,u=te.texture.source,_=0}let re=j/v-((i=(t=p.dropShadow)==null?void 0:t.distance)!=null?i:0)-((r=(s=p._stroke)==null?void 0:s.width)!=null?r:0);if(this.chars[H]={id:H.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:re,kerning:{}},P){this._drawGlyph(l,U,y+T,_+T,v,p);let te=u.width*v,Oe=u.height*v,Tt=new Ae(y/te*u.width,_/Oe*u.height,Z/te*u.width,q/Oe*u.height);this.chars[H].texture=new K({source:u,frame:Tt}),y+=Math.ceil(Z)}}u.update(),this._currentX=y,this._currentY=_,this._skipKerning&&this._applyKerning(o,l)}get pageTextures(){return this.pages}_applyKerning(e,t){let i=this._measureCache;for(let s=0;s<e.length;s++){let r=e[s];for(let o=0;o<this._currentChars.length;o++){let d=this._currentChars[o],h=i[r];h||(h=i[r]=t.measureText(r).width);let l=i[d];l||(l=i[d]=t.measureText(d).width);let u=t.measureText(r+d).width,p=u-(h+l);p&&(this.chars[r].kerning[d]=p),u=t.measureText(r+d).width,p=u-(h+l),p&&(this.chars[d].kerning[r]=p)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,t=ca.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);let i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new K({source:new Ma({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),r={canvasAndContext:t,texture:s};return this.pages[this._currentPageIndex]=r,r}_setupContext(e,t,i){var s;t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=dn(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;let r=t._stroke,o=(s=r?.width)!=null?s:0;if(r&&(e.lineWidth=o,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=hn(r,e)),t._fill&&(e.fillStyle=hn(t._fill,e)),t.dropShadow){let d=t.dropShadow,h=we.shared.setValue(d.color).toArray(),l=d.blur*i,u=d.distance*i;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${d.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(d.angle)*u,e.shadowOffsetY=Math.sin(d.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,s,r,o){var d;let h=t.text,l=t.fontProperties,u=o._stroke,p=((d=u?.width)!=null?d:0)*r,y=i+p/2,_=s-p/2,v=l.descent*r,T=t.lineHeight*r;o.stroke&&p&&e.strokeText(h,y,_+T-v),o._fill&&e.fillText(h,y,_+T-v)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:t,texture:i}=this.pages[e];ca.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};b2.defaultOptions={textureSize:512,style:new Rt,mipmap:!0};var Ub=b2;function g2(a,e,t,i){let s={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=t.baseLineOffset;let r=s.lines[0],o=null,d=!0,h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=v=>{let T=r.width;for(let A=0;A<h.index;A++){let P=v.positions[A];r.chars.push(v.chars[A]),r.charPositions.push(P+T)}r.width+=v.width,d=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let v=r.chars.length-1;if(i){let T=r.chars[v];for(;T===" ";)r.width-=t.chars[T].xAdvance,T=r.chars[--v]}s.width=Math.max(s.width,r.width),r={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},d=!0,s.lines.push(r),s.height+=t.lineHeight},p=t.baseMeasurementFontSize/e.fontSize,y=e.letterSpacing*p,_=e.wordWrapWidth*p;for(let v=0;v<a.length+1;v++){let T,A=v===a.length;A||(T=a[v]);let P=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||A){if(!d&&e.wordWrap&&r.width+h.width-y>_?(u(),l(h),A||r.charPositions.push(0)):(h.start=r.width,l(h),A||r.charPositions.push(0)),T==="\r"||T===`
`)r.width!==0&&u();else if(!A){let C=P.xAdvance+(P.kerning[o]||0)+y;r.width+=C,r.spaceWidth=C,r.spacesIndex.push(r.charPositions.length),r.chars.push(T)}}else{let C=P.kerning[o]||0,F=P.xAdvance+C+y;h.positions[h.index++]=h.width+C,h.chars.push(T),h.width+=F}o=T}return u(),e.align==="center"?Bg(s):e.align==="right"?Fg(s):e.align==="justify"&&Dg(s),s}function Bg(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width/2-t.width/2;for(let s=0;s<t.charPositions.length;s++)t.charPositions[s]+=i}}function Fg(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width-t.width;for(let s=0;s<t.charPositions.length;s++)t.charPositions[s]+=i}}function Dg(a){let e=a.width;for(let t=0;t<a.lines.length;t++){let i=a.lines[t],s=0,r=i.spacesIndex[s++],o=0,d=i.spacesIndex.length,h=(e-i.width)/d;for(let l=0;l<i.charPositions.length;l++)l===r&&(r=i.spacesIndex[s++],o+=h),i.charPositions[l]+=o}}var kg=Object.defineProperty,Lb=Object.getOwnPropertySymbols,Ug=Object.prototype.hasOwnProperty,Lg=Object.prototype.propertyIsEnumerable,Nb=(a,e,t)=>e in a?kg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,id=(a,e)=>{for(var t in e||(e={}))Ug.call(e,t)&&Nb(a,t,e[t]);if(Lb)for(var t of Lb(e))Lg.call(e,t)&&Nb(a,t,e[t]);return a},vr=0,Ng=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(a,e){var t;let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let o=e.styleKey;o=o.substring(0,o.lastIndexOf("-")),i=`${o}-bitmap`,s=!1}if(!Ce.has(i)){let o=new Ub(id({style:e,overrideFill:s,overrideSize:!0},this.defaultOptions));vr++,vr>50&&Qt("BitmapText",`You have dynamically created ${vr} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{vr--,Ce.remove(i)}),Ce.set(i,o)}let r=Ce.get(i);return(t=r.ensureCharacters)==null||t.call(r,a),r}getLayout(a,e,t=!0){let i=this.getFont(a,e);return g2([...a],e,i,t)}measureText(a,e,t=!0){return this.getLayout(a,e,t)}install(...a){var e,t,i,s;let r=a[0];typeof r=="string"&&(r={name:r,style:a[1],chars:(e=a[2])==null?void 0:e.chars,resolution:(t=a[2])==null?void 0:t.resolution,padding:(i=a[2])==null?void 0:i.padding,skipKerning:(s=a[2])==null?void 0:s.skipKerning});let o=r?.name;if(!o)throw new Error("[BitmapFontManager] Property `name` is required.");r=id(id({},this.defaultOptions),r);let d=r.style,h=d instanceof Rt?d:new Rt(d),l=h._fill.fill!==null&&h._fill.fill!==void 0,u=new Ub({style:h,overrideFill:l,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution,overrideSize:!1}),p=u2(r.chars);return u.ensureCharacters(p.join("")),Ce.set(`${o}-bitmap`,u),u.once("destroy",()=>Ce.remove(`${o}-bitmap`)),u}uninstall(a){let e=`${a}-bitmap`,t=Ce.get(e);t&&t.destroy()}},bn=new Ng,pn=class{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){let t=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,t)),this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){let i=this._getGpuBitmapText(e);jb(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,t),i.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){let t=this._gpuBitmapText[e].context;t.customShader&&(ye.return(t.customShader),t.customShader=null),ye.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){let t=this._getGpuBitmapText(e);jb(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){let{context:i}=t,s=bn.getFont(e.text,e._style);i.clear(),s.distanceField.type!=="none"&&(i.customShader||(i.customShader=ye.get(gh)));let r=Array.from(e.text),o=e._style,d=s.baseLineOffset,h=g2(r,o,s,!0),l=0,u=o.padding,p=h.scale,y=h.width,_=h.height+h.offsetY;o._stroke&&(y+=o._stroke.width/p,_+=o._stroke.width/p),i.translate(-e._anchor._x*y-u,-e._anchor._y*_-u).scale(p,p);let v=s.applyFillAsTint?o._fill.color:16777215;for(let T=0;T<h.lines.length;T++){let A=h.lines[T];for(let P=0;P<A.charPositions.length;P++){let C=r[l++],F=s.chars[C];F!=null&&F.texture&&i.texture(F.texture,v||"black",Math.round(A.charPositions[P]+F.xOffset),Math.round(d+F.yOffset))}d+=s.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){let t=ye.get(Ye);return this._gpuBitmapText[e.uid]=t,this._updateContext(e,t),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){let t=this._getGpuBitmapText(e).context,i=e._style.fontFamily,s=Ce.get(`${i}-bitmap`),{a:r,b:o,c:d,d:h}=e.groupTransform,l=Math.sqrt(r*r+o*o),u=Math.sqrt(d*d+h*h),p=(Math.abs(l)+Math.abs(u))/2,y=s.baseRenderedFontSize/e._style.fontSize,_=p*s.distanceField.range*(1/y);t.customShader.resources.localUniforms.uniforms.uDistance=_}destroy(){for(let e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}};pn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"bitmapText"};function jb(a,e){e.groupTransform=a.groupTransform,e.groupColorAlpha=a.groupColorAlpha,e.groupColor=a.groupColor,e.groupBlendMode=a.groupBlendMode,e.globalDisplayStatus=a.globalDisplayStatus,e.groupTransform=a.groupTransform,e.localDisplayStatus=a.localDisplayStatus,e.groupAlpha=a.groupAlpha,e._roundPixels=a._roundPixels}be.add(pn);var gn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.textureNeedsUploading?(t.textureNeedsUploading=!1,!0):t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),s=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e).catch(r=>{}),e._didTextUpdate=!1,rh(s,e)}async _updateGpuText(e){var t;e._didTextUpdate=!1;let i=this._getGpuText(e);if(i.generatingTexture)return;let s=e._getKey();this._renderer.htmlText.decreaseReferenceCount(i.currentKey),i.generatingTexture=!0,i.currentKey=s;let r=(t=e.resolution)!=null?t:this._renderer.resolution,o=await this._renderer.htmlText.getManagedTexture(e.text,r,e._style,e._getKey()),d=i.batchableSprite;d.texture=i.texture=o,i.generatingTexture=!1,i.textureNeedsUploading=!0,e.onViewUpdate(),rh(d,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:K.EMPTY,currentKey:"--",batchableSprite:ye.get(Ei),textureNeedsUploading:!1,generatingTexture:!1},i=t.batchableSprite;return i.renderable=e,i.transform=e.groupTransform,i.texture=K.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};gn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"htmlText"};function jg(){let{userAgent:a}=xe.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(a)}var Xb="http://www.w3.org/2000/svg",Hb="http://www.w3.org/1999/xhtml",mn=class{constructor(){this.svgRoot=document.createElementNS(Xb,"svg"),this.foreignObject=document.createElementNS(Xb,"foreignObject"),this.domElement=document.createElementNS(Hb,"div"),this.styleElement=document.createElementNS(Hb,"style"),this.image=new Image;let{foreignObject:e,svgRoot:t,styleElement:i,domElement:s}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(i),e.appendChild(s)}};function Xg(a){let e=a._stroke,t=a._fill,i=[`div { ${[`color: ${we.shared.setValue(t.color).toHex()}`,`font-size: ${a.fontSize}px`,`font-family: ${a.fontFamily}`,`font-weight: ${a.fontWeight}`,`font-style: ${a.fontStyle}`,`font-variant: ${a.fontVariant}`,`letter-spacing: ${a.letterSpacing}px`,`text-align: ${a.align}`,`padding: ${a.padding}px`,`white-space: ${a.whiteSpace==="pre"&&a.wordWrap?"pre-wrap":a.whiteSpace}`,...a.lineHeight?[`line-height: ${a.lineHeight}px`]:[],...a.wordWrap?[`word-wrap: ${a.breakWords?"break-all":"break-word"}`,`max-width: ${a.wordWrapWidth}px`]:[],...e?[_2(e)]:[],...a.dropShadow?[m2(a.dropShadow)]:[],...a.cssOverrides].join(";")} }`];return Hg(a.tagStyles,i),i.join(" ")}function m2(a){let e=we.shared.setValue(a.color).setAlpha(a.alpha).toHexa(),t=Math.round(Math.cos(a.angle)*a.distance),i=Math.round(Math.sin(a.angle)*a.distance),s=`${t}px ${i}px`;return a.blur>0?`text-shadow: ${s} ${a.blur}px ${e}`:`text-shadow: ${s} ${e}`}function _2(a){return[`-webkit-text-stroke-width: ${a.width}px`,`-webkit-text-stroke-color: ${we.shared.setValue(a.color).toHex()}`,`text-stroke-width: ${a.width}px`,`text-stroke-color: ${we.shared.setValue(a.color).toHex()}`,"paint-order: stroke"].join(";")}var zb={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},Vb={fill:a=>`color: ${we.shared.setValue(a).toHex()}`,breakWords:a=>`word-wrap: ${a?"break-all":"break-word"}`,stroke:_2,dropShadow:m2};function Hg(a,e){for(let t in a){let i=a[t],s=[];for(let r in i)Vb[r]?s.push(Vb[r](i[r])):zb[r]&&s.push(zb[r].replace("{{VALUE}}",i[r]));e.push(`${t} { ${s.join(";")} }`)}}var zg=Object.defineProperty,Wb=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,Wg=Object.prototype.propertyIsEnumerable,Yb=(a,e,t)=>e in a?zg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Yg=(a,e)=>{for(var t in e||(e={}))Vg.call(e,t)&&Yb(a,t,e[t]);if(Wb)for(var t of Wb(e))Wg.call(e,t)&&Yb(a,t,e[t]);return a},_n=class a extends Rt{constructor(e={}){var t,i;super(e),this._cssOverrides=[],(t=this.cssOverrides)!=null||(this.cssOverrides=e.cssOverrides),this.tagStyles=(i=e.tagStyles)!=null?i:{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=c2(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?Yg({},this.dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=Xg(this)),this._cssStyle}addOverride(...e){let t=e.filter(i=>!this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){let t=e.filter(i=>this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!t.includes(i)),this.update())}set fill(e){super.fill=e}set stroke(e){super.stroke=e}};function $g(a,e){let t=e.fontFamily,i=[],s={},r=/font-family:([^;"\s]+)/g,o=a.match(r);function d(h){s[h]||(i.push(h),s[h]=!0)}if(Array.isArray(t))for(let h=0;h<t.length;h++)d(t[h]);else d(t);o&&o.forEach(h=>{let l=h.split(":")[1].trim();d(l)});for(let h in e.tagStyles){let l=e.tagStyles[h].fontFamily;d(l)}return i}async function Kg(a){let e=await(await xe.get().fetch(a)).blob(),t=new FileReader;return await new Promise((i,s)=>{t.onloadend=()=>i(t.result),t.onerror=s,t.readAsDataURL(e)})}async function $b(a,e){let t=await Kg(e);return`@font-face {
font-family: "${a.fontFamily}";
src: url('${t}');
font-weight: ${a.fontWeight};
font-style: ${a.fontStyle};
}`}var Tr=new Map;async function qg(a,e,t){let i=a.filter(s=>Ce.has(`${s}-and-url`)).map((s,r)=>{if(!Tr.has(s)){let{url:o}=Ce.get(`${s}-and-url`);r===0?Tr.set(s,$b({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:s},o)):Tr.set(s,$b({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:s},o))}return Tr.get(s)});return(await Promise.all(i)).join(`
`)}function Zg(a,e,t,i,s){let{domElement:r,styleElement:o,svgRoot:d}=s;r.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${a}</div>`,r.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),o.textContent=i;let{width:h,height:l}=s.image;return d.setAttribute("width",h.toString()),d.setAttribute("height",l.toString()),new XMLSerializer().serializeToString(d)}function Qg(a,e){let t=ca.getOptimalCanvasAndContext(a.width,a.height,e),{context:i}=t;return i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0),t}function Jg(a,e,t){return new Promise(async i=>{t&&await new Promise(s=>setTimeout(s,100)),a.onload=()=>{i()},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,a.crossOrigin="anonymous"})}var Kb;function y2(a,e,t,i){i||(i=Kb||(Kb=new mn));let{domElement:s,styleElement:r,svgRoot:o}=i;s.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${a}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(r.textContent=t),document.body.appendChild(o);let d=s.getBoundingClientRect();o.remove();let h=e.padding*2;return{width:d.width-h,height:d.height-h}}var Ss=class{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===yt.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,t,i,s){if(this._activeTextures[s])return this._increaseReferenceCount(s),this._activeTextures[s].promise;let r=this._buildTexturePromise(e,t,i).then(o=>(this._activeTextures[s].texture=o,o));return this._activeTextures[s]={texture:null,promise:r,usageCount:1},r}async _buildTexturePromise(e,t,i){let s=ye.get(mn),r=$g(e,i),o=await qg(r,i,_n.defaultTextStyle),d=y2(e,i,o,s),h=Math.ceil(Math.ceil(Math.max(1,d.width)+i.padding*2)*t),l=Math.ceil(Math.ceil(Math.max(1,d.height)+i.padding*2)*t),u=s.image,p=2;u.width=(h|0)+p,u.height=(l|0)+p;let y=Zg(e,i,t,o,s);await Jg(u,y,jg()&&r.length>0);let _=u,v;this._createCanvas&&(v=Qg(u,t));let T=h2(v?v.canvas:_,u.width-p,u.height-p,t);return this._createCanvas&&(this._renderer.texture.initSource(T.source),ca.returnCanvasAndContext(v)),ye.return(s),T}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t):t.promise.then(i=>{t.texture=i,this._cleanUp(t)}).catch(()=>{}),this._activeTextures[e]=null))}_cleanUp(e){Ve.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}};Ss.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"htmlText"},Ss.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"},be.add(Ss),be.add(gn);var em=Object.defineProperty,qb=Object.getOwnPropertySymbols,tm=Object.prototype.hasOwnProperty,am=Object.prototype.propertyIsEnumerable,Zb=(a,e,t)=>e in a?em(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qb=(a,e)=>{for(var t in e||(e={}))tm.call(e,t)&&Zb(a,t,e[t]);if(qb)for(var t of qb(e))am.call(e,t)&&Zb(a,t,e[t]);return a},x2=class v2 extends qt{constructor(...e){var t;let i=(t=e[0])!=null?t:{};i instanceof Float32Array&&(i={positions:i,uvs:e[1],indices:e[2]}),i=Qb(Qb({},v2.defaultOptions),i);let s=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),r=i.uvs;r||(i.positions?r=new Float32Array(s.length):r=new Float32Array([0,0,1,0,1,1,0,1]));let o=i.indices||new Uint32Array([0,1,2,0,2,3]),d=i.shrinkBuffersToFit,h=new rt({data:s,label:"attribute-mesh-positions",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),l=new rt({data:r,label:"attribute-mesh-uvs",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),u=new rt({data:o,label:"index-mesh-buffer",shrinkToFit:d,usage:ve.INDEX|ve.COPY_DST});super({attributes:{aPosition:{buffer:h,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:l,format:"float32x2",stride:2*4,offset:0}},indexBuffer:u,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};x2.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};var $s=x2,im=Object.defineProperty,sm=Object.defineProperties,rm=Object.getOwnPropertyDescriptors,Jb=Object.getOwnPropertySymbols,nm=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,e0=(a,e,t)=>e in a?im(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,t0=(a,e)=>{for(var t in e||(e={}))nm.call(e,t)&&e0(a,t,e[t]);if(Jb)for(var t of Jb(e))om.call(e,t)&&e0(a,t,e[t]);return a},a0=(a,e)=>sm(a,rm(e)),ws={name:"local-uniform-bit",vertex:{header:`

struct LocalUniforms {
uTransformMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uRound:f32,
}

@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`}},cm=a0(t0({},ws),{vertex:a0(t0({},ws.vertex),{header:ws.vertex.header.replace("group(1)","group(2)")})}),Al={name:"local-uniform-bit",vertex:{header:`

uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix = uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`}},dm={name:"tiling-bit",vertex:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`
uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
`},fragment:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`

var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
var unclamped = coord;
coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

var bias = 0.;

if(unclamped.x == coord.x && unclamped.y == coord.y)
{
bias = -32.;
} 

outColor = textureSampleBias(uTexture, uSampler, coord, bias);
`}},hm={name:"tiling-bit",vertex:{header:`
uniform mat3 uTextureTransform;
uniform vec4 uSizeAnchor;

`,main:`
uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
`},fragment:{header:`
uniform sampler2D uTexture;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;
`,main:`

vec2 coord = vUV + ceil(uClampOffset - vUV);
coord = (uMapCoord * vec3(coord, 1.0)).xy;
vec2 unclamped = coord;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

`}},sd,rd,mh=class extends ht{constructor(){sd!=null||(sd=Hs({name:"tiling-sprite-shader",bits:[ws,dm,Vs]})),rd!=null||(rd=zs({name:"tiling-sprite-shader",bits:[Al,hm,Ws]}));let e=new et({uMapCoord:{value:new ie,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ie,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:rd,gpuProgram:sd,resources:{localUniforms:new et({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:K.EMPTY.source,uSampler:K.EMPTY.source.style}})}updateUniforms(e,t,i,s,r,o){let d=this.resources.tilingUniforms,h=o.width,l=o.height,u=o.textureMatrix,p=d.uniforms.uTextureTransform;p.set(i.a*h/e,i.b*h/t,i.c*l/e,i.d*l/t,i.tx/e,i.ty/t),p.invert(),d.uniforms.uMapCoord=u.mapCoord,d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset,d.uniforms.uTextureTransform=p,d.uniforms.uSizeAnchor[0]=e,d.uniforms.uSizeAnchor[1]=t,d.uniforms.uSizeAnchor[2]=s,d.uniforms.uSizeAnchor[3]=r,o&&(this.resources.uTexture=o.source,this.resources.uSampler=o.source.style)}},_h=class extends $s{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};function lm(a,e){let t=a.anchor.x,i=a.anchor.y;e[0]=-t*a.width,e[1]=-i*a.height,e[2]=(1-t)*a.width,e[3]=-i*a.height,e[4]=(1-t)*a.width,e[5]=(1-i)*a.height,e[6]=-t*a.width,e[7]=(1-i)*a.height}function fm(a,e,t,i){let s=0,r=a.length/(e||2),o=i.a,d=i.b,h=i.c,l=i.d,u=i.tx,p=i.ty;for(t*=e;s<r;){let y=a[t],_=a[t+1];a[t]=o*y+h*_+u,a[t+1]=d*y+l*_+p,t+=e,s++}}function um(a,e){let t=a.texture,i=t.frame.width,s=t.frame.height,r=0,o=0;a.applyAnchorToTexture&&(r=a.anchor.x,o=a.anchor.y),e[0]=e[6]=-r,e[2]=e[4]=1-r,e[1]=e[3]=-o,e[5]=e[7]=1-o;let d=ie.shared;d.copyFrom(a._tileTransform.matrix),d.tx/=a.width,d.ty/=a.height,d.invert(),d.scale(a.width/i,a.height/s),fm(e,2,0,d)}var Sr=new _h,yn=class{constructor(e){this._state=Pt.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){let t=this._getTilingSpriteData(e),i=t.canBatch;this._updateCanBatch(e);let s=t.canBatch;if(s&&s===i){let{batchableMesh:r}=t;return!r._batcher.checkAndUpdateTexture(r,e.texture)}return i!==s}addRenderable(e,t){let i=this._renderer.renderPipes.batch;this._updateCanBatch(e);let s=this._getTilingSpriteData(e),{geometry:r,canBatch:o}=s;if(o){s.batchableMesh||(s.batchableMesh=new ks);let d=s.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),d.geometry=r,d.renderable=e,d.transform=e.groupTransform,d.setTexture(e._texture)),d.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(d,t)}else i.break(t),s.shader||(s.shader=new mh),this.updateRenderable(e),t.add(e)}execute(e){let{shader:t}=this._tilingSpriteDataHash[e.uid];t.groups[0]=this._renderer.globalUniforms.bindGroup;let i=t.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=this._renderer._roundPixels|e._roundPixels,Ys(e.groupColorAlpha,i.uColor,0),this._state.blendMode=Cs(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Sr,shader:t,state:this._state})}updateRenderable(e){let t=this._getTilingSpriteData(e),{canBatch:i}=t;if(i){let{batchableMesh:s}=t;e.didViewUpdate&&this._updateBatchableMesh(e),s._batcher.updateElement(s)}else if(e.didViewUpdate){let{shader:s}=t;s.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var t;let i=this._getTilingSpriteData(e);i.batchableMesh=null,(t=i.shader)==null||t.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){let t=new $s({indices:Sr.indices,positions:Sr.positions.slice(),uvs:Sr.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:t},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){let t=this._getTilingSpriteData(e),{geometry:i}=t,s=e.texture.source.style;s.addressMode!=="repeat"&&(s.addressMode="repeat",s.update()),um(e,i.uvs),lm(e,i.positions)}destroy(){for(let e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){let t=this._getTilingSpriteData(e),i=e.texture,s=!0;return this._renderer.type===yt.WEBGL&&(s=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=i.textureMatrix.isSimple&&(s||i.source.isPowerOfTwo),t.canBatch}};yn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"tilingSprite"},be.add(yn);var bm=Object.defineProperty,i0=Object.getOwnPropertySymbols,pm=Object.prototype.hasOwnProperty,gm=Object.prototype.propertyIsEnumerable,s0=(a,e,t)=>e in a?bm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,r0=(a,e)=>{for(var t in e||(e={}))pm.call(e,t)&&s0(a,t,e[t]);if(i0)for(var t of i0(e))gm.call(e,t)&&s0(a,t,e[t]);return a},T2=class S2 extends $s{constructor(...e){var t;super({});let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){var t,i,s,r;e=r0(r0({},S2.defaultOptions),e),this.verticesX=(t=this.verticesX)!=null?t:e.verticesX,this.verticesY=(i=this.verticesY)!=null?i:e.verticesY,this.width=(s=this.width)!=null?s:e.width,this.height=(r=this.height)!=null?r:e.height;let o=this.verticesX*this.verticesY,d=[],h=[],l=[],u=this.verticesX-1,p=this.verticesY-1,y=this.width/u,_=this.height/p;for(let T=0;T<o;T++){let A=T%this.verticesX,P=T/this.verticesX|0;d.push(A*y,P*_),h.push(A/u,P/p)}let v=u*p;for(let T=0;T<v;T++){let A=T%u,P=T/u|0,C=P*this.verticesX+A,F=P*this.verticesX+A+1,D=(P+1)*this.verticesX+A,H=(P+1)*this.verticesX+A+1;l.push(C,F,D,F,H,D)}this.buffers[0].data=new Float32Array(d),this.buffers[1].data=new Float32Array(h),this.indexBuffer.data=new Uint32Array(l),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};T2.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};var w2=T2,mm=Object.defineProperty,n0=Object.getOwnPropertySymbols,_m=Object.prototype.hasOwnProperty,ym=Object.prototype.propertyIsEnumerable,o0=(a,e,t)=>e in a?mm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,c0=(a,e)=>{for(var t in e||(e={}))_m.call(e,t)&&o0(a,t,e[t]);if(n0)for(var t of n0(e))ym.call(e,t)&&o0(a,t,e[t]);return a},A2=class E2 extends w2{constructor(e={}){e=c0(c0({},E2.defaultOptions),e),super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var t,i,s,r,o,d,h,l;this.width=(t=e.width)!=null?t:this.width,this.height=(i=e.height)!=null?i:this.height,this._originalWidth=(s=e.originalWidth)!=null?s:this._originalWidth,this._originalHeight=(r=e.originalHeight)!=null?r:this._originalHeight,this._leftWidth=(o=e.leftWidth)!=null?o:this._leftWidth,this._rightWidth=(d=e.rightWidth)!=null?d:this._rightWidth,this._topHeight=(h=e.topHeight)!=null?h:this._topHeight,this._bottomHeight=(l=e.bottomHeight)!=null?l:this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,t=this._leftWidth+this._rightWidth,i=this.width>t?1:this.width/t,s=this._topHeight+this._bottomHeight,r=this.height>s?1:this.height/s,o=Math.min(i,r);e[9]=e[11]=e[13]=e[15]=this._topHeight*o,e[17]=e[19]=e[21]=e[23]=this.height-this._bottomHeight*o,e[25]=e[27]=e[29]=e[31]=this.height,e[2]=e[10]=e[18]=e[26]=this._leftWidth*o,e[4]=e[12]=e[20]=e[28]=this.width-this._rightWidth*o,e[6]=e[14]=e[22]=e[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let t=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};A2.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};var za=A2,xn=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t.geometry),ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(ks);return t.geometry=ye.get(za),t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.didViewUpdate||this._updateBatchableSprite(e,t),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}};xn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"nineSliceSprite"},be.add(xn);var vn=class{constructor(e){this._renderer=e}push(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}};vn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"filter"};function xm(a,e){e.clear();let t=e.matrix;for(let i=0;i<a.length;i++){let s=a[i];s.globalDisplayStatus<7||(e.matrix=s.worldTransform,e.addBounds(s.bounds))}return e.matrix=t,e}var vm=new qt({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),Tn=class{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new et({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ht({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var t,i;let s=this.renderer,r=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let o=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,r.length===0){o.skip=!0;return}let d=o.bounds;if(e.renderables?xm(e.renderables,d):e.filterEffect.filterArea?(d.clear(),d.addRect(e.filterEffect.filterArea),d.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,d),e.container){let T=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;T&&d.applyMatrix(T)}let h=s.renderTarget.renderTarget.colorTexture.source,l=1/0,u=0,p=!0,y=!1,_=!1,v=!0;for(let T=0;T<r.length;T++){let A=r[T];if(l=Math.min(l,A.resolution==="inherit"?h._resolution:A.resolution),u+=A.padding,A.antialias==="off"?p=!1:A.antialias==="inherit"&&p&&(p=h.antialias),A.clipToViewport||(v=!1),!(A.compatibleRenderers&s.type)){_=!1;break}if(A.blendRequired&&!((i=(t=s.backBuffer)==null?void 0:t.useBackBuffer)==null||i)){_=!1;break}_=A.enabled||_,y||(y=A.blendRequired)}if(!_){o.skip=!0;return}if(v){let T=s.renderTarget.rootViewPort,A=s.renderTarget.renderTarget.resolution;d.fitBounds(0,T.width/A,0,T.height/A)}if(d.scale(l).ceil().scale(1/l).pad(u|0),!d.isPositive){o.skip=!0;return}o.skip=!1,o.bounds=d,o.blendRequired=y,o.container=e.container,o.filterEffect=e.filterEffect,o.previousRenderSurface=s.renderTarget.renderSurface,o.inputTexture=Ve.getOptimalTexture(d.width,d.height,l,p),s.renderTarget.bind(o.inputTexture,!0),s.globalUniforms.push({offset:d})}pop(){let e=this.renderer;this._filterStackIndex--;let t=this._filterStack[this._filterStackIndex];if(t.skip)return;this._activeFilterData=t;let i=t.inputTexture,s=t.bounds,r=K.EMPTY;if(e.renderTarget.finishRenderPass(),t.blendRequired){let d=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,h=e.renderTarget.getRenderTarget(t.previousRenderSurface);r=this.getBackTexture(h,s,d)}t.backTexture=r;let o=t.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(r.source,3),e.globalUniforms.pop(),o.length===1)o[0].apply(this,i,t.previousRenderSurface,!1),Ve.returnTexture(i);else{let d=t.inputTexture,h=Ve.getOptimalTexture(s.width,s.height,d.source._resolution,!1),l=0;for(l=0;l<o.length-1;++l){o[l].apply(this,d,h,!0);let u=d;d=h,h=u}o[l].apply(this,d,t.previousRenderSurface,!1),Ve.returnTexture(d),Ve.returnTexture(h)}t.blendRequired&&Ve.returnTexture(r)}getBackTexture(e,t,i){let s=e.colorTexture.source._resolution,r=Ve.getOptimalTexture(t.width,t.height,s,!1),o=t.minX,d=t.minY;i&&(o-=i.minX,d-=i.minY),o=Math.floor(o*s),d=Math.floor(d*s);let h=Math.ceil(t.width*s),l=Math.ceil(t.height*s);return this.renderer.renderTarget.copyToTexture(e,r,{x:o,y:d},{width:h,height:l},{x:0,y:0}),r}applyFilter(e,t,i,s){let r=this.renderer,o=this._filterStack[this._filterStackIndex],d=o.bounds,h=Me.shared,l=o.previousRenderSurface===i,u=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(u=this._filterStack[p].inputTexture.source._resolution);let y=this._filterGlobalUniforms,_=y.uniforms,v=_.uOutputFrame,T=_.uInputSize,A=_.uInputPixel,P=_.uInputClamp,C=_.uGlobalFrame,F=_.uOutputTexture;if(l){let U=this._filterStackIndex;for(;U>0;){U--;let j=this._filterStack[this._filterStackIndex-1];if(!j.skip){h.x=j.bounds.minX,h.y=j.bounds.minY;break}}v[0]=d.minX-h.x,v[1]=d.minY-h.y}else v[0]=0,v[1]=0;v[2]=t.frame.width,v[3]=t.frame.height,T[0]=t.source.width,T[1]=t.source.height,T[2]=1/T[0],T[3]=1/T[1],A[0]=t.source.pixelWidth,A[1]=t.source.pixelHeight,A[2]=1/A[0],A[3]=1/A[1],P[0]=.5*A[2],P[1]=.5*A[3],P[2]=t.frame.width*T[2]-.5*A[2],P[3]=t.frame.height*T[3]-.5*A[3];let D=this.renderer.renderTarget.rootRenderTarget.colorTexture;C[0]=h.x*u,C[1]=h.y*u,C[2]=D.source.width*u,C[3]=D.source.height*u;let H=this.renderer.renderTarget.getRenderTarget(i);if(r.renderTarget.bind(i,!!s),i instanceof K?(F[0]=i.frame.width,F[1]=i.frame.height):(F[0]=H.width,F[1]=H.height),F[2]=H.isRoot?-1:1,y.update(),r.renderPipes.uniformBatch){let U=r.renderPipes.uniformBatch.getUboResource(y);this._globalFilterBindGroup.setResource(U,0)}else this._globalFilterBindGroup.setResource(y,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,r.encoder.draw({geometry:vm,shader:e,state:e._state,topology:"triangle-list"}),r.type===yt.WEBGL&&r.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new Ze,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,t){let i=this._activeFilterData,s=e.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),r=t.worldTransform.copyTo(ie.shared),o=t.renderGroup||t.parentRenderGroup;return o&&o.cacheToLocalTransform&&r.prepend(o.cacheToLocalTransform),r.invert(),s.prepend(r),s.scale(1/t.texture.frame.width,1/t.texture.frame.height),s.translate(t.anchor.x,t.anchor.y),s}};Tn.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"filter"},be.add(Tn),be.add(vn);var Tm={__proto__:null},yh=[];be.handleByNamedList(G.Environment,yh);async function Sm(a){if(!a)for(let e=0;e<yh.length;e++){let t=yh[e];if(t.value.test()){await t.value.load();return}}}var os;function P2(){if(typeof os=="boolean")return os;try{os=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{os=!1}return os}var mt=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(mt||{}),Sn=class{constructor(e){this.items=[],this._name=e}emit(e,t,i,s,r,o,d,h){let{name:l,items:u}=this;for(let p=0,y=u.length;p<y;p++)u[p][l](e,t,i,s,r,o,d,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}},wm=Object.defineProperty,d0=Object.getOwnPropertySymbols,Am=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable,h0=(a,e,t)=>e in a?wm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,wr=(a,e)=>{for(var t in e||(e={}))Am.call(e,t)&&h0(a,t,e[t]);if(d0)for(var t of d0(e))Em.call(e,t)&&h0(a,t,e[t]);return a},Pm=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],R2=class M2 extends xt{constructor(e){var t;super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...Pm,...(t=this.config.runners)!=null?t:[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Sm(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let i in this._systemsHash){let s=this._systemsHash[i].constructor.defaultOptions;e=wr(wr({},s),e)}e=wr(wr({},M2.defaultOptions),e),this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,t){var i,s;let r=e;if(r instanceof he&&(r={container:r},t&&(r.target=t.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,(i=r.clearColor)!=null||(r.clearColor=this.background.colorRgba),(s=r.clear)!=null||(r.clear=this.background.clearBeforeRender)),r.clearColor){let o=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=o?r.clearColor:we.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(e,t,i){let s=this.view.resolution;this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(e={}){var t;let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),(t=e.clear)!=null||(e.clear=mt.ALL);let{clear:s,clearColor:r,target:o}=e;we.shared.setValue(r??this.background.colorRgba),i.renderTarget.clear(o,s,we.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new Sn(t)})}_addSystems(e){let t;for(t in e){let i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){let i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(let s in this.runners)this.runners[s].add(i);return this}_addPipes(e,t){let i=t.reduce((s,r)=>(s[r.name]=r.value,s),{});e.forEach(s=>{let r=s.value,o=s.name,d=i[o];this.renderPipes[o]=new r(this,d?new d:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!P2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};R2.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var Do=R2,nd;function ko(a){return nd!==void 0||(nd=(()=>{var e;let t={stencil:!0,failIfMajorPerformanceCaveat:a??Do.defaultOptions.failIfMajorPerformanceCaveat};try{if(!xe.get().getWebGLRenderingContext())return!1;let i=xe.get().createCanvas().getContext("webgl",t),s=!!((e=i?.getContextAttributes())!=null&&e.stencil);if(i){let r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,s}catch{return!1}})()),nd}var od;async function Uo(a={}){return od!==void 0||(od=await(async()=>{let e=xe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),od}var Rm=Object.defineProperty,l0=Object.getOwnPropertySymbols,Mm=Object.prototype.hasOwnProperty,Cm=Object.prototype.propertyIsEnumerable,f0=(a,e,t)=>e in a?Rm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,cs=(a,e)=>{for(var t in e||(e={}))Mm.call(e,t)&&f0(a,t,e[t]);if(l0)for(var t of l0(e))Cm.call(e,t)&&f0(a,t,e[t]);return a},u0=["webgl","webgpu","canvas"];async function Lo(a){var e;let t=[];a.preference?(t.push(a.preference),u0.forEach(o=>{o!==a.preference&&t.push(o)})):t=u0.slice();let i,s={};for(let o=0;o<t.length;o++){let d=t[o];if(d==="webgpu"&&await Uo()){let{WebGPURenderer:h}=await Promise.resolve().then(function(){return lT});i=h,s=cs(cs({},a),a.webgpu);break}else if(d==="webgl"&&ko((e=a.failIfMajorPerformanceCaveat)!=null?e:Do.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:h}=await Promise.resolve().then(function(){return jv});i=h,s=cs(cs({},a),a.webgl);break}else if(d==="canvas")throw s=cs({},a),new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!i)throw new Error("No available renderer for the current environment");let r=new i;return await r.init(s),r}var wn="8.7.3",An=class{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,wn)}static destroy(){}};An.extension=G.Application;var En=class{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,wn)}destroy(){this._renderer=null}};En.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"initHook",priority:-10};var Om=Object.defineProperty,b0=Object.getOwnPropertySymbols,Im=Object.prototype.hasOwnProperty,Gm=Object.prototype.propertyIsEnumerable,p0=(a,e,t)=>e in a?Om(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Bm=(a,e)=>{for(var t in e||(e={}))Im.call(e,t)&&p0(a,t,e[t]);if(b0)for(var t of b0(e))Gm.call(e,t)&&p0(a,t,e[t]);return a},C2=class xh{constructor(...e){this.stage=new he}async init(e){e=Bm({},e),this.renderer=await Lo(e),xh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){let i=xh._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};C2._plugins=[];var Fm=C2;be.handleByList(G.Application,Fm._plugins),be.add(An);var Pn=class extends un{constructor(e,t){var i;super();let{textures:s,data:r}=e;Object.keys(r.pages).forEach(o=>{let d=r.pages[parseInt(o,10)],h=s[d.id];this.pages.push({texture:h})}),Object.keys(r.chars).forEach(o=>{var d;let h=r.chars[o],{frame:l,source:u}=s[h.page],p=new Ae(h.x+l.x,h.y+l.y,h.width,h.height),y=new K({source:u,frame:p});this.chars[o]={id:o.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:(d=h.kerning)!=null?d:{},texture:y}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=(i=r.distanceField)!=null?i:{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){bn.install(e)}static uninstall(e){bn.uninstall(e)}},cd={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){var e,t,i;let s=a.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let v in s){let T=s[v].match(/^[a-z]+/gm)[0],A=s[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),P={};for(let C in A){let F=A[C].split("="),D=F[0],H=F[1].replace(/"/gm,""),U=parseFloat(H),j=isNaN(U)?H:U;P[D]=j}r[T].push(P)}let o={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[d]=r.info,[h]=r.common,[l]=(e=r.distanceField)!=null?e:[];l&&(o.distanceField={range:parseInt(l.distanceRange,10),type:l.fieldType}),o.fontSize=parseInt(d.size,10),o.fontFamily=d.face,o.lineHeight=parseInt(h.lineHeight,10);let u=r.page;for(let v=0;v<u.length;v++)o.pages.push({id:parseInt(u[v].id,10)||0,file:u[v].file});let p={};o.baseLineOffset=o.lineHeight-parseInt(h.base,10);let y=r.char;for(let v=0;v<y.length;v++){let T=y[v],A=parseInt(T.id,10),P=(i=(t=T.letter)!=null?t:T.char)!=null?i:String.fromCharCode(A);P==="space"&&(P=" "),p[A]=P,o.chars[P]={id:A,page:parseInt(T.page,10)||0,x:parseInt(T.x,10),y:parseInt(T.y,10),width:parseInt(T.width,10),height:parseInt(T.height,10),xOffset:parseInt(T.xoffset,10),yOffset:parseInt(T.yoffset,10),xAdvance:parseInt(T.xadvance,10),kerning:{}}}let _=r.kerning||[];for(let v=0;v<_.length;v++){let T=parseInt(_[v].first,10),A=parseInt(_[v].second,10),P=parseInt(_[v].amount,10);o.chars[p[A]].kerning[p[T]]=P}return o}},g0={test(a){let e=a;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){var e,t;let i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},s=a.getElementsByTagName("info")[0],r=a.getElementsByTagName("common")[0],o=a.getElementsByTagName("distanceField")[0];o&&(i.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});let d=a.getElementsByTagName("page"),h=a.getElementsByTagName("char"),l=a.getElementsByTagName("kerning");i.fontSize=parseInt(s.getAttribute("size"),10),i.fontFamily=s.getAttribute("face"),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let p=0;p<d.length;p++)i.pages.push({id:parseInt(d[p].getAttribute("id"),10)||0,file:d[p].getAttribute("file")});let u={};i.baseLineOffset=i.lineHeight-parseInt(r.getAttribute("base"),10);for(let p=0;p<h.length;p++){let y=h[p],_=parseInt(y.getAttribute("id"),10),v=(t=(e=y.getAttribute("letter"))!=null?e:y.getAttribute("char"))!=null?t:String.fromCharCode(_);v==="space"&&(v=" "),u[_]=v,i.chars[v]={id:_,page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xOffset:parseInt(y.getAttribute("xoffset"),10),yOffset:parseInt(y.getAttribute("yoffset"),10),xAdvance:parseInt(y.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<l.length;p++){let y=parseInt(l[p].getAttribute("first"),10),_=parseInt(l[p].getAttribute("second"),10),v=parseInt(l[p].getAttribute("amount"),10);i.chars[u[_]].kerning[u[y]]=v}return i}},m0={test(a){return typeof a=="string"&&a.includes("<font>")?g0.test(xe.get().parseXML(a)):!1},parse(a){return g0.parse(xe.get().parseXML(a))}},Dm=[".xml",".fnt"],km={extension:{type:G.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof Pn,getCacheableAssets(a,e){let t={};return a.forEach(i=>{t[i]=e,t[`${i}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},Um={extension:{type:G.LoadParser,priority:Mt.Normal},name:"loadBitmapFont",test(a){return Dm.includes(_t.extname(a).toLowerCase())},async testParse(a){return cd.test(a)||m0.test(a)},async parse(a,e,t){let i=cd.test(a)?cd.parse(a):m0.parse(a),{src:s}=e,{pages:r}=i,o=[],d=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<r.length;++u){let p=r[u].file,y=_t.join(_t.dirname(s),p);y=kd(y,s),o.push({src:y,data:d})}let h=await t.load(o),l=o.map(u=>h[u.src]);return new Pn({data:i,textures:l},s)},async load(a,e){return await(await xe.get().fetch(a)).text()},async unload(a,e,t){await Promise.all(a.pages.map(i=>t.unload(i.texture.source._sourceOrigin))),a.destroy()}},vh=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Lm={extension:{type:G.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(e=>e instanceof K),getCacheableAssets:(a,e)=>{let t={};return a.forEach(i=>{e.forEach((s,r)=>{t[i+(r===0?"":r+1)]=s})}),t}};async function O2(a){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(a)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var Nm={extension:{type:G.DetectionParser,priority:1},test:async()=>O2("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(e=>e!=="avif")},_0=["png","jpg","jpeg"],jm={extension:{type:G.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,..._0],remove:async a=>a.filter(e=>!_0.includes(e))},Xm="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function El(a){return Xm?!1:document.createElement("video").canPlayType(a)!==""}var Hm={extension:{type:G.DetectionParser,priority:0},test:async()=>El("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(e=>e!=="mp4"&&e!=="m4v")},zm={extension:{type:G.DetectionParser,priority:0},test:async()=>El("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(e=>e!=="ogv")},Vm={extension:{type:G.DetectionParser,priority:0},test:async()=>El("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(e=>e!=="webm")},Wm={extension:{type:G.DetectionParser,priority:0},test:async()=>O2("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(e=>e!=="webp")},Ym=Object.defineProperty,$m=Object.defineProperties,Km=Object.getOwnPropertyDescriptors,y0=Object.getOwnPropertySymbols,qm=Object.prototype.hasOwnProperty,Zm=Object.prototype.propertyIsEnumerable,x0=(a,e,t)=>e in a?Ym(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qm=(a,e)=>{for(var t in e||(e={}))qm.call(e,t)&&x0(a,t,e[t]);if(y0)for(var t of y0(e))Zm.call(e,t)&&x0(a,t,e[t]);return a},Jm=(a,e)=>$m(a,Km(e)),Th=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let i={promise:null,parser:null};return i.promise=(async()=>{var s,r;let o=null,d=null;if(t.loadParser&&(d=this._parserHash[t.loadParser]),!d){for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];if(l.load&&(s=l.test)!=null&&s.call(l,e,t,this)){d=l;break}}if(!d)return null}o=await d.load(e,t,this),i.parser=d;for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];l.parse&&l.parse&&await((r=l.testParse)==null?void 0:r.call(l,o,t,this))&&(o=await l.parse(o,t,this)||o,i.parser=l)}return o})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0,s={},r=Wr(e),o=Xt(e,l=>({alias:[l],src:l,data:{}})),d=o.length,h=o.map(async l=>{let u=_t.toAbsolute(l.src);if(!s[l.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,l)),s[l.src]=await this.promiseCache[u].promise,t&&t(++i/d)}catch(p){throw delete this.promiseCache[u],delete s[l.src],new Error(`[Loader.load] Failed to load ${u}.
${p}`)}});return await Promise.all(h),r?s[o[0].src]:s}async unload(e){let t=Xt(e,i=>({alias:[i],src:i})).map(async i=>{var s,r;let o=_t.toAbsolute(i.src),d=this.promiseCache[o];if(d){let h=await d.promise;delete this.promiseCache[o],await((r=(s=d.parser)==null?void 0:s.unload)==null?void 0:r.call(s,h,i,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name&&e[t.name],Jm(Qm({},e),{[t.name]:t})),{})}};function Oi(a,e){if(Array.isArray(e)){for(let t of e)if(a.startsWith(`data:${t}`))return!0;return!1}return a.startsWith(`data:${e}`)}function zt(a,e){let t=a.split("?")[0],i=_t.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}var e9=".json",t9="application/json",a9={extension:{type:G.LoadParser,priority:Mt.Low},name:"loadJson",test(a){return Oi(a,t9)||zt(a,e9)},async load(a){return await(await xe.get().fetch(a)).json()}},i9=".txt",s9="text/plain",r9={name:"loadTxt",extension:{type:G.LoadParser,priority:Mt.Low,name:"loadTxt"},test(a){return Oi(a,s9)||zt(a,i9)},async load(a){return await(await xe.get().fetch(a)).text()}},n9=Object.defineProperty,o9=Object.defineProperties,c9=Object.getOwnPropertyDescriptors,v0=Object.getOwnPropertySymbols,d9=Object.prototype.hasOwnProperty,h9=Object.prototype.propertyIsEnumerable,T0=(a,e,t)=>e in a?n9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,l9=(a,e)=>{for(var t in e||(e={}))d9.call(e,t)&&T0(a,t,e[t]);if(v0)for(var t of v0(e))h9.call(e,t)&&T0(a,t,e[t]);return a},f9=(a,e)=>o9(a,c9(e)),u9=["normal","bold","100","200","300","400","500","600","700","800","900"],b9=[".ttf",".otf",".woff",".woff2"],p9=["font/ttf","font/otf","font/woff","font/woff2"],g9=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function m9(a){let e=_t.extname(a),t=_t.basename(a,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)),i=t.length>0;for(let r of t)if(!r.match(g9)){i=!1;break}let s=t.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}var _9=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function y9(a){return _9.test(a)?a:encodeURI(a)}var x9={extension:{type:G.LoadParser,priority:Mt.Low},name:"loadWebFont",test(a){return Oi(a,p9)||zt(a,b9)},async load(a,e){var t,i,s,r,o,d;let h=xe.get().getFontFaceSet();if(h){let l=[],u=(i=(t=e.data)==null?void 0:t.family)!=null?i:m9(a),p=(o=(r=(s=e.data)==null?void 0:s.weights)==null?void 0:r.filter(_=>u9.includes(_)))!=null?o:["normal"],y=(d=e.data)!=null?d:{};for(let _=0;_<p.length;_++){let v=p[_],T=new FontFace(u,`url(${y9(a)})`,f9(l9({},y),{weight:v}));await T.load(),h.add(T),l.push(T)}return Ce.set(`${u}-and-url`,{url:a,fontFaces:l}),l.length===1?l[0]:l}return null},unload(a){(Array.isArray(a)?a:[a]).forEach(e=>{Ce.remove(`${e.family}-and-url`),xe.get().getFontFaceSet().delete(e)})}};function Pl(a,e=1){var t;let i=(t=da.RETINA_PREFIX)==null?void 0:t.exec(a);return i?parseFloat(i[1]):e}function Za(a,e,t){a.label=t,a._sourceOrigin=t;let i=new K({source:a,label:t}),s=()=>{delete e.promiseCache[t],Ce.has(t)&&Ce.remove(t)};return i.source.once("destroy",()=>{e.promiseCache[t]&&s()}),i.once("destroy",()=>{a.destroyed||s()}),i}var v9=Object.defineProperty,Rn=Object.getOwnPropertySymbols,I2=Object.prototype.hasOwnProperty,G2=Object.prototype.propertyIsEnumerable,S0=(a,e,t)=>e in a?v9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,T9=(a,e)=>{for(var t in e||(e={}))I2.call(e,t)&&S0(a,t,e[t]);if(Rn)for(var t of Rn(e))G2.call(e,t)&&S0(a,t,e[t]);return a},S9=(a,e)=>{var t={};for(var i in a)I2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Rn)for(var i of Rn(a))e.indexOf(i)<0&&G2.call(a,i)&&(t[i]=a[i]);return t},w9=".svg",A9="image/svg+xml",E9={extension:{type:G.LoadParser,priority:Mt.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return Oi(a,A9)||zt(a,w9)},async load(a,e,t){var i,s;return((s=(i=e.data)==null?void 0:i.parseAsGraphicsContext)!=null?s:this.config.parseAsGraphicsContext)?R9(a):P9(a,e,t,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function P9(a,e,t,i){var s,r,o,d,h,l;let u=await(await xe.get().fetch(a)).blob(),p=URL.createObjectURL(u),y=new Image;y.src=p,y.crossOrigin=i,await y.decode(),URL.revokeObjectURL(p);let _=document.createElement("canvas"),v=_.getContext("2d"),T=((s=e.data)==null?void 0:s.resolution)||Pl(a),A=(o=(r=e.data)==null?void 0:r.width)!=null?o:y.width,P=(h=(d=e.data)==null?void 0:d.height)!=null?h:y.height;_.width=A*T,_.height=P*T,v.drawImage(y,0,0,A*T,P*T);let C=(l=e.data)!=null?l:{},{parseAsGraphicsContext:F}=C,D=S9(C,["parseAsGraphicsContext"]),H=new Ma(T9({resource:_,alphaMode:"premultiply-alpha-on-upload",resolution:T},D));return Za(H,t,a)}async function R9(a){let e=await(await xe.get().fetch(a)).text(),t=new dt;return t.svg(e),t}var M9=`(function(){"use strict";const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";async function a(){try{if(typeof createImageBitmap!="function")return!1;const A=await(await fetch(e)).blob(),t=await createImageBitmap(A);return t.width===1&&t.height===1}catch(A){return!1}}a().then(A=>{self.postMessage(A)})})();
`,yi=null,Sh=class{constructor(){yi||(yi=URL.createObjectURL(new Blob([M9],{type:"application/javascript"}))),this.worker=new Worker(yi)}};Sh.revokeObjectURL=function(){yi&&(URL.revokeObjectURL(yi),yi=null)};var C9='(function(){"use strict";async function s(a,t){const e=await fetch(a);if(!e.ok)throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${a}: ${e.status} ${e.statusText}`);const i=await e.blob();return t==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}self.onmessage=async a=>{try{const t=await s(a.data.data[0],a.data.data[1]);self.postMessage({data:t,uuid:a.data.uuid,id:a.data.id},[t])}catch(t){self.postMessage({error:t,uuid:a.data.uuid,id:a.data.id})}}})();\n',xi=null,B2=class{constructor(){xi||(xi=URL.createObjectURL(new Blob([C9],{type:"application/javascript"}))),this.worker=new Worker(xi)}};B2.revokeObjectURL=function(){xi&&(URL.revokeObjectURL(xi),xi=null)};var w0=0,dd,O9=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(a=>{let{worker:e}=new Sh;e.addEventListener("message",t=>{e.terminate(),Sh.revokeObjectURL(),a(t.data)})}),this._isImageBitmapSupported)}loadImageBitmap(a,e){var t;return this._run("loadImageBitmap",[a,(t=e?.data)==null?void 0:t.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dd===void 0&&(dd=navigator.hardwareConcurrency||4);let a=this._workerPool.pop();return!a&&this._createdWorkers<dd&&(this._createdWorkers++,a=new B2().worker,a.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),a}_returnWorker(a){this._workerPool.push(a)}_complete(a){a.error!==void 0?this._resolveHash[a.uuid].reject(a.error):this._resolveHash[a.uuid].resolve(a.data),this._resolveHash[a.uuid]=null}async _run(a,e){await this._initWorkers();let t=new Promise((i,s)=>{this._queue.push({id:a,arguments:e,resolve:i,reject:s})});return this._next(),t}_next(){if(!this._queue.length)return;let a=this._getWorker();if(!a)return;let e=this._queue.pop(),t=e.id;this._resolveHash[w0]={resolve:e.resolve,reject:e.reject},a.postMessage({data:e.arguments,uuid:w0++,id:t})}},A0=new O9,I9=Object.defineProperty,E0=Object.getOwnPropertySymbols,G9=Object.prototype.hasOwnProperty,B9=Object.prototype.propertyIsEnumerable,P0=(a,e,t)=>e in a?I9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,F9=(a,e)=>{for(var t in e||(e={}))G9.call(e,t)&&P0(a,t,e[t]);if(E0)for(var t of E0(e))B9.call(e,t)&&P0(a,t,e[t]);return a},D9=[".jpeg",".jpg",".png",".webp",".avif"],k9=["image/jpeg","image/png","image/webp","image/avif"];async function U9(a,e){var t;let i=await xe.get().fetch(a);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${i.status} ${i.statusText}`);let s=await i.blob();return((t=e?.data)==null?void 0:t.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}var F2={name:"loadTextures",extension:{type:G.LoadParser,priority:Mt.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return Oi(a,k9)||zt(a,D9)},async load(a,e,t){var i;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await A0.isImageBitmapSupported()?s=await A0.loadImageBitmap(a,e):s=await U9(a,e):s=await new Promise((o,d)=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=a,s.complete?o(s):(s.onload=()=>{o(s)},s.onerror=d)});let r=new Ma(F9({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||Pl(a)},e.data));return Za(r,t,a)},unload(a){a.destroy(!0)}},L9=Object.defineProperty,N9=Object.defineProperties,j9=Object.getOwnPropertyDescriptors,R0=Object.getOwnPropertySymbols,X9=Object.prototype.hasOwnProperty,H9=Object.prototype.propertyIsEnumerable,M0=(a,e,t)=>e in a?L9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hd=(a,e)=>{for(var t in e||(e={}))X9.call(e,t)&&M0(a,t,e[t]);if(R0)for(var t of R0(e))H9.call(e,t)&&M0(a,t,e[t]);return a},C0=(a,e)=>N9(a,j9(e)),D2=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],z9=D2.map(a=>`video/${a.substring(1)}`);function V9(a,e,t){t===void 0&&!e.startsWith("data:")?a.crossOrigin=Y9(e):t!==!1&&(a.crossOrigin=typeof t=="string"?t:"anonymous")}function W9(a){return new Promise((e,t)=>{a.addEventListener("canplaythrough",i),a.addEventListener("error",s),a.load();function i(){r(),e()}function s(o){r(),t(o)}function r(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",s)}})}function Y9(a,e=globalThis.location){if(a.startsWith("data:"))return"";e||(e=globalThis.location);let t=new URL(a,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}var $9={name:"loadVideo",extension:{type:G.LoadParser,name:"loadVideo"},test(a){let e=Oi(a,z9),t=zt(a,D2);return e||t},async load(a,e,t){var i,s;let r=hd(C0(hd({},Fr.defaultOptions),{resolution:((i=e.data)==null?void 0:i.resolution)||Pl(a),alphaMode:((s=e.data)==null?void 0:s.alphaMode)||await Op()}),e.data),o=document.createElement("video"),d={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(d).forEach(u=>{let p=d[u];p!==void 0&&o.setAttribute(u,p)}),r.muted===!0&&(o.muted=!0),V9(o,a,r.crossorigin);let h=document.createElement("source"),l;if(a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();l=Fr.MIME_TYPES[u]||`video/${u}`}return h.src=a,l&&(h.type=l),new Promise(u=>{let p=async()=>{let y=new Fr(C0(hd({},r),{resource:o}));o.removeEventListener("canplay",p),e.data.preload&&await W9(o),u(Za(y,t,a))};o.addEventListener("canplay",p),o.appendChild(h)})},unload(a){a.destroy(!0)}},k2={extension:{type:G.ResolveParser,name:"resolveTexture"},test:F2.test,parse:a=>{var e,t;return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:a.split(".").pop(),src:a}}},K9={extension:{type:G.ResolveParser,priority:-2,name:"resolveJson"},test:a=>da.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:k2.parse},wh=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new da,this.loader=new Th,this.cache=Ce,this._backgroundLoader=new vh(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var t,i,s;if(this._initialized)return;if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}let r=(i=(t=e.texturePreference)==null?void 0:t.resolution)!=null?i:1,o=typeof r=="number"?[r]:r,d=await this._detectFormats({preferredFormats:(s=e.texturePreference)==null?void 0:s.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:d,resolution:o}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let i=Wr(e),s=Xt(e).map(d=>{if(typeof d!="string"){let h=this.resolver.getAlias(d);return h.some(l=>!this.resolver.hasKey(l))&&this.add(d),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(d)||this.add({alias:d,src:d}),d}),r=this.resolver.resolve(s),o=await this._mapLoadToResolve(r,t);return i?o[s[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);let s=this.resolver.resolveBundle(e),r={},o=Object.keys(s),d=0,h=0,l=()=>{t?.(++d/h)},u=o.map(p=>{let y=s[p];return h+=Object.keys(y).length,this._mapLoadToResolve(y,l).then(_=>{r[p]=_})});return await Promise.all(u),i?r[e[0]]:r}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ce.get(e);let t={};for(let i=0;i<e.length;i++)t[i]=Ce.get(e[i]);return t}async _mapLoadToResolve(e,t){let i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let s=await this.loader.load(i,t);this._backgroundLoader.active=!0;let r={};return i.forEach(o=>{let d=s[o.src],h=[o.src];o.alias&&h.push(...o.alias),h.forEach(l=>{r[l]=d}),Ce.set(h,d)}),r}async unload(e){this._initialized||await this.init();let t=Xt(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Xt(e);let t=this.resolver.resolveBundle(e),i=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(i)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(i=>{Ce.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,s)=>t.indexOf(i)===s),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}},me=new wh;be.handleByList(G.LoadParser,me.loader.parsers).handleByList(G.ResolveParser,me.resolver.parsers).handleByList(G.CacheParser,me.cache.parsers).handleByList(G.DetectionParser,me.detections),be.add(Lm,jm,Nm,Wm,Hm,zm,Vm,a9,r9,x9,E9,F2,$9,Um,km,k2,K9);var O0={loader:G.LoadParser,resolver:G.ResolveParser,cache:G.CacheParser,detection:G.DetectionParser};be.handle(G.Asset,a=>{let e=a.ref;Object.entries(O0).filter(([t])=>!!e[t]).forEach(([t,i])=>{var s;return be.add(Object.assign(e[t],{extension:(s=e[t].extension)!=null?s:i}))})},a=>{let e=a.ref;Object.keys(O0).filter(t=>!!e[t]).forEach(t=>be.remove(e[t]))});var rS={extension:{type:G.DetectionParser,priority:3},test:async()=>!!(await Uo()||ko()),add:async a=>[...a,"basis"],remove:async a=>a.filter(e=>e!=="basis")},Mi=class extends Be{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}},Ar;function I0(){if(Ar)return Ar;let a=document.createElement("canvas").getContext("webgl");return a?(Ar=[...a.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...a.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...a.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...a.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ar):[]}var Er;async function G0(){if(Er)return Er;let a=await xe.get().getNavigator().gpu.requestAdapter();return Er=[...a.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...a.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Er}var ld;async function U2(){return ld!==void 0||(ld=await(async()=>{let a=await Uo(),e=ko();if(a&&e){let t=await G0(),i=I0();return t.filter(s=>i.includes(s))}else{if(a)return await G0();if(e)return I0()}return[]})()),ld}var q9=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"],Pr;async function No(){if(Pr!==void 0)return Pr;let a=await U2();return Pr=[...q9,...a],Pr}var Z9='(function(){"use strict";function g(r,a){const t=r.getNumImages(),s=r.getNumLevels(0);if(!r.startTranscoding())throw new Error("startTranscoding failed");const m=[];for(let e=0;e<s;++e)for(let o=0;o<t;++o){const B=r.getImageTranscodedSizeInBytes(o,e,a),f=new Uint8Array(B);if(!r.transcodeImage(f,o,e,a,1,0))throw new Error("transcodeImage failed");m.push(f)}return m}const w={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function d(r){const a=w[r];if(a)return a;throw new Error(`Unsupported transcoderFormat: ${r}`)}const n={jsUrl:"basis/basis_transcoder.js",wasmUrl:"basis/basis_transcoder.wasm"};let u,i,c;async function l(){if(!c){const r=new URL(n.jsUrl,location.origin).href,a=new URL(n.wasmUrl,location.origin).href;importScripts(r),c=new Promise(t=>{BASIS({locateFile:s=>a}).then(s=>{s.initializeBasis(),t(s.BasisFile)})})}return c}async function b(r,a){const t=await fetch(r);if(t.ok){const s=await t.arrayBuffer();return new a(new Uint8Array(s))}throw new Error(`Failed to load Basis texture: ${r}`)}const h=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function p(r){const a=await l(),t=await b(r,a),s=g(t,u);return{width:t.getImageWidth(0,0),height:t.getImageHeight(0,0),format:i,resource:s,alphaMode:"no-premultiply-alpha"}}async function y(r,a,t){r&&(n.jsUrl=r),a&&(n.wasmUrl=a),i=h.filter(s=>t.includes(s))[0],u=d(i),await l()}const U={init:async r=>{const{jsUrl:a,wasmUrl:t,supportedTextures:s}=r;await y(a,t,s)},load:async r=>{var a;try{const t=await p(r.url);return{type:"load",url:r.url,success:!0,textureOptions:t,transferables:(a=t.resource)==null?void 0:a.map(s=>s.buffer)}}catch(t){throw t}}};self.onmessage=async r=>{const a=r.data,t=await U[a.type](a);t&&self.postMessage(t,t.transferables)}})();\n',vi=null,L2=class{constructor(){vi||(vi=URL.createObjectURL(new Blob([Z9],{type:"application/javascript"}))),this.worker=new Worker(vi)}};L2.revokeObjectURL=function(){vi&&(URL.revokeObjectURL(vi),vi=null)};var B0={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};var ds,N2={};function Q9(a){return ds||(ds=new L2().worker,ds.onmessage=e=>{let{success:t,url:i,textureOptions:s}=e.data;N2[i](s)},ds.postMessage({type:"init",jsUrl:B0.jsUrl,wasmUrl:B0.wasmUrl,supportedTextures:a})),ds}function J9(a,e){let t=Q9(e);return new Promise(i=>{N2[a]=i,t.postMessage({type:"load",url:a})})}var nS={extension:{type:G.LoadParser,priority:Mt.High,name:"loadBasis"},name:"loadBasis",test(a){return zt(a,[".basis"])},async load(a,e,t){let i=await No(),s=await J9(a,i),r=new Mi(s);return Za(r,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var e_={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},t_={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},j2=(a=>(a[a.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a[a.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a[a.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a[a.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a[a.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a[a.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a[a.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a[a.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a[a.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a[a.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a[a.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a[a.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a[a.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a[a.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a[a.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a[a.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a[a.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a[a.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a[a.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a[a.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a[a.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a[a.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a[a.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a[a.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a[a.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a[a.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a[a.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a[a.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a[a.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a[a.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a[a.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a[a.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a[a.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a[a.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a[a.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a[a.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a[a.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a[a.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a[a.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a[a.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a[a.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a[a.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a[a.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a[a.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a[a.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a[a.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a[a.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a[a.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a[a.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a[a.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a[a.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a[a.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a[a.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a[a.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a[a.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a[a.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a[a.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a[a.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a[a.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a[a.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a[a.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a[a.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a[a.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a[a.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a[a.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a[a.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a[a.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a[a.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a[a.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a[a.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a[a.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a[a.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a[a.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a[a.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a[a.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a[a.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a[a.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a[a.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a[a.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a[a.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a[a.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a[a.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a[a.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a[a.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a[a.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a[a.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a[a.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a[a.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a[a.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a[a.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a[a.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a[a.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a[a.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a[a.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a[a.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a[a.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a[a.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a[a.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a[a.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a[a.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",a))(j2||{}),X2=(a=>(a[a.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",a[a.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",a[a.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",a))(X2||{});function $e(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var bt=(a=>(a[a.UNKNOWN=0]="UNKNOWN",a[a.R8G8B8=20]="R8G8B8",a[a.A8R8G8B8=21]="A8R8G8B8",a[a.X8R8G8B8=22]="X8R8G8B8",a[a.R5G6B5=23]="R5G6B5",a[a.X1R5G5B5=24]="X1R5G5B5",a[a.A1R5G5B5=25]="A1R5G5B5",a[a.A4R4G4B4=26]="A4R4G4B4",a[a.R3G3B2=27]="R3G3B2",a[a.A8=28]="A8",a[a.A8R3G3B2=29]="A8R3G3B2",a[a.X4R4G4B4=30]="X4R4G4B4",a[a.A2B10G10R10=31]="A2B10G10R10",a[a.A8B8G8R8=32]="A8B8G8R8",a[a.X8B8G8R8=33]="X8B8G8R8",a[a.G16R16=34]="G16R16",a[a.A2R10G10B10=35]="A2R10G10B10",a[a.A16B16G16R16=36]="A16B16G16R16",a[a.A8P8=40]="A8P8",a[a.P8=41]="P8",a[a.L8=50]="L8",a[a.A8L8=51]="A8L8",a[a.A4L4=52]="A4L4",a[a.V8U8=60]="V8U8",a[a.L6V5U5=61]="L6V5U5",a[a.X8L8V8U8=62]="X8L8V8U8",a[a.Q8W8V8U8=63]="Q8W8V8U8",a[a.V16U16=64]="V16U16",a[a.A2W10V10U10=67]="A2W10V10U10",a[a.Q16W16V16U16=110]="Q16W16V16U16",a[a.R16F=111]="R16F",a[a.G16R16F=112]="G16R16F",a[a.A16B16G16R16F=113]="A16B16G16R16F",a[a.R32F=114]="R32F",a[a.G32R32F=115]="G32R32F",a[a.A32B32G32R32F=116]="A32B32G32R32F",a[a.UYVY=$e("UYVY")]="UYVY",a[a.R8G8_B8G8=$e("RGBG")]="R8G8_B8G8",a[a.YUY2=$e("YUY2")]="YUY2",a[a.D3DFMT_G8R8_G8B8=$e("GRGB")]="D3DFMT_G8R8_G8B8",a[a.DXT1=$e("DXT1")]="DXT1",a[a.DXT2=$e("DXT2")]="DXT2",a[a.DXT3=$e("DXT3")]="DXT3",a[a.DXT4=$e("DXT4")]="DXT4",a[a.DXT5=$e("DXT5")]="DXT5",a[a.ATI1=$e("ATI1")]="ATI1",a[a.AT1N=$e("AT1N")]="AT1N",a[a.ATI2=$e("ATI2")]="ATI2",a[a.AT2N=$e("AT2N")]="AT2N",a[a.BC4U=$e("BC4U")]="BC4U",a[a.BC4S=$e("BC4S")]="BC4S",a[a.BC5U=$e("BC5U")]="BC5U",a[a.BC5S=$e("BC5S")]="BC5S",a[a.DX10=$e("DX10")]="DX10",a))(bt||{}),F0={[bt.DXT1]:"bc1-rgba-unorm",[bt.DXT2]:"bc2-rgba-unorm",[bt.DXT3]:"bc2-rgba-unorm",[bt.DXT4]:"bc3-rgba-unorm",[bt.DXT5]:"bc3-rgba-unorm",[bt.ATI1]:"bc4-r-unorm",[bt.BC4U]:"bc4-r-unorm",[bt.BC4S]:"bc4-r-snorm",[bt.ATI2]:"bc5-rg-unorm",[bt.BC5U]:"bc5-rg-unorm",[bt.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},pt={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},fe={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:e_,HEADER_DX10_FIELDS:t_,DXGI_FORMAT:j2,D3D10_RESOURCE_DIMENSION:X2,D3DFMT:bt},a_={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function i_(a,e){let{format:t,fourCC:i,width:s,height:r,dataOffset:o,mipmapCount:d}=r_(a);if(!e.includes(t))throw new Error(`Unsupported texture format: ${i} ${t}, supported: ${e}`);if(d<=1)return{format:t,width:s,height:r,resource:[new Uint8Array(a,o)],alphaMode:"no-premultiply-alpha"};let h=s_(t,s,r,o,d,a);return{format:t,width:s,height:r,resource:h,alphaMode:"no-premultiply-alpha"}}function s_(a,e,t,i,s,r){let o=[],d=a_[a],h=e,l=t,u=i;for(let p=0;p<s;++p){let y=Math.ceil(Math.max(4,h)/4)*4,_=Math.ceil(Math.max(4,l)/4)*4,v=d?y/4*_/4*d:h*l*4,T=new Uint8Array(r,u,v);o.push(T),u+=v,h=Math.max(h>>1,1),l=Math.max(l>>1,1)}return o}function r_(a){let e=new Uint32Array(a,0,fe.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[fe.HEADER_FIELDS.MAGIC]!==fe.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let t=e[fe.HEADER_FIELDS.HEIGHT],i=e[fe.HEADER_FIELDS.WIDTH],s=Math.max(1,e[fe.HEADER_FIELDS.MIPMAP_COUNT]),r=e[fe.HEADER_FIELDS.PF_FLAGS],o=e[fe.HEADER_FIELDS.FOURCC],d=n_(e,r,o,a),h=fe.MAGIC_SIZE+fe.HEADER_SIZE+(o===fe.D3DFMT.DX10?fe.HEADER_DX10_SIZE:0);return{format:d,fourCC:o,width:i,height:t,dataOffset:h,mipmapCount:s}}function n_(a,e,t,i){if(e&fe.PIXEL_FORMAT_FLAGS.FOURCC){if(t===fe.D3DFMT.DX10){let s=new Uint32Array(i,fe.MAGIC_SIZE+fe.HEADER_SIZE,fe.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(s[fe.HEADER_DX10_FIELDS.MISC_FLAG]===fe.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(s[fe.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===fe.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let r=s[fe.HEADER_DX10_FIELDS.DXGI_FORMAT];if(r in pt)return pt[r];throw new Error(`DDSParser cannot parse texture data with DXGI format ${r}`)}if(t in F0)return F0[t];throw new Error(`DDSParser cannot parse texture data with fourCC format ${t}`)}if(e&fe.PIXEL_FORMAT_FLAGS.RGB||e&fe.PIXEL_FORMAT_FLAGS.RGBA)return o_(a);throw e&fe.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&fe.PIXEL_FORMAT_FLAGS.LUMINANCE||e&fe.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&fe.PIXEL_FORMAT_FLAGS.ALPHA||e&fe.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function o_(a){let e=a[fe.HEADER_FIELDS.RGB_BITCOUNT],t=a[fe.HEADER_FIELDS.R_BIT_MASK],i=a[fe.HEADER_FIELDS.G_BIT_MASK],s=a[fe.HEADER_FIELDS.B_BIT_MASK],r=a[fe.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(t===255&&i===65280&&s===16711680&&r===4278190080)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(t===16711680&&i===65280&&s===255&&r===4278190080)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(t===1072693248&&i===1047552&&s===1023&&r===3221225472)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(t===65535&&i===4294901760&&s===0&&r===0)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(t===4294967295&&i===0&&s===0&&r===0)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(t===31744&&i===992&&s===31&&r===32768)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(t===63488&&i===2016&&s===31&&r===0)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(t===3840&&i===240&&s===15&&r===61440)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(t===255&&i===0&&s===0&&r===65280)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(t===65535&&i===0&&s===0&&r===0)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(t===255&&i===0&&s===0&&r===0)return pt[fe.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
bitCount = ${e}, rBitMask = ${t}, gBitMask = ${i}, aBitMask = ${r}`)}var oS={extension:{type:G.LoadParser,priority:Mt.High,name:"loadDDS"},name:"loadDDS",test(a){return zt(a,[".dds"])},async load(a,e,t){let i=await No(),s=await(await fetch(a)).arrayBuffer(),r=i_(s,i),o=new Mi(r);return Za(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},c_=(a=>(a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGBA=6408]="RGBA",a[a.RGBA8UI=36220]="RGBA8UI",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.RGBA8I=36238]="RGBA8I",a[a.RGBA8=32856]="RGBA8",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",a[a.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",a[a.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",a[a.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",a[a.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",a[a.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",a[a.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",a[a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",a[a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",a[a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",a))(c_||{}),d_=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(d_||{}),h_=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(h_||{}),l_={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},f_=[171,75,84,88,32,49,49,187,13,10,26,10],u_={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},b_=64,p_=67305985,g_={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},m_={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},__={32819:2,32820:2,33635:2},y_={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Ue={FILE_HEADER_SIZE:b_,FILE_IDENTIFIER:f_,FORMATS_TO_COMPONENTS:m_,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:y_,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:l_,FIELDS:u_,TYPES_TO_BYTES_PER_COMPONENT:g_,TYPES_TO_BYTES_PER_PIXEL:__,ENDIANNESS:p_};function x_(a,e){let t=new DataView(a);if(!w_(t))throw new Error("Invalid KTX identifier in header");let{littleEndian:i,glType:s,glFormat:r,glInternalFormat:o,pixelWidth:d,pixelHeight:h,numberOfMipmapLevels:l,offset:u}=S_(t),p=Ue.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[o];if(!p)throw new Error(`Unknown texture format ${o}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);let y=T_(s,r,o),_=v_(t,s,y,d,h,u,l,i);return{format:p,width:d,height:h,resource:_,alphaMode:"no-premultiply-alpha"}}function v_(a,e,t,i,s,r,o,d){let h=i+3&-4,l=s+3&-4,u=i*s;e===0&&(u=h*l);let p=u*t,y=i,_=s,v=h,T=l,A=r,P=new Array(o);for(let C=0;C<o;C++){let F=a.getUint32(A,d),D=A+4;P[C]=new Uint8Array(a.buffer,D,p),D+=p,A+=F+4,A=A%4!==0?A+4-A%4:A,y=y>>1||1,_=_>>1||1,v=y+4-1&-4,T=_+4-1&-4,p=v*T*t}return P}function T_(a,e,t){let i=Ue.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[t];if(a!==0&&(Ue.TYPES_TO_BYTES_PER_COMPONENT[a]?i=Ue.TYPES_TO_BYTES_PER_COMPONENT[a]*Ue.FORMATS_TO_COMPONENTS[e]:i=Ue.TYPES_TO_BYTES_PER_PIXEL[a]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function S_(a){let e=a.getUint32(Ue.FIELDS.ENDIANNESS,!0)===Ue.ENDIANNESS,t=a.getUint32(Ue.FIELDS.GL_TYPE,e),i=a.getUint32(Ue.FIELDS.GL_FORMAT,e),s=a.getUint32(Ue.FIELDS.GL_INTERNAL_FORMAT,e),r=a.getUint32(Ue.FIELDS.PIXEL_WIDTH,e),o=a.getUint32(Ue.FIELDS.PIXEL_HEIGHT,e)||1,d=a.getUint32(Ue.FIELDS.PIXEL_DEPTH,e)||1,h=a.getUint32(Ue.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,l=a.getUint32(Ue.FIELDS.NUMBER_OF_FACES,e),u=a.getUint32(Ue.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=a.getUint32(Ue.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(o===0||d!==1)throw new Error("Only 2D textures are supported");if(l!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:t,glFormat:i,glInternalFormat:s,pixelWidth:r,pixelHeight:o,numberOfMipmapLevels:u,offset:Ue.FILE_HEADER_SIZE+p}}function w_(a){for(let e=0;e<Ue.FILE_IDENTIFIER.length;e++)if(a.getUint8(e)!==Ue.FILE_IDENTIFIER[e])return!1;return!0}var cS={extension:{type:G.LoadParser,priority:Mt.High,name:"loadKTX"},name:"loadKTX",test(a){return zt(a,".ktx")},async load(a,e,t){let i=await No(),s=await(await fetch(a)).arrayBuffer(),r=x_(s,i),o=new Mi(r);return Za(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},A_='(function(){"use strict";const s={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:i},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:i}};function f(r){const t=r.format;if(s[t]){const n=s[t].convertFunction,o=r.resource;for(let e=0;e<o.length;e++)o[e]=n(o[e]);r.format=s[t].convertedFormat}}function i(r){const t=r.byteLength/3,n=new Uint32Array(t);for(let o=0;o<t;++o)n[o]=r[o*3]+(r[o*3+1]<<8)+(r[o*3+2]<<16)+4278190080;return new Uint8Array(n.buffer)}function d(r){const t=[];for(let n=0;n<r.numLevels;n++){const o=r.getImageData(n,0,0),e=new Uint8Array(o.byteLength);e.set(o),t.push(e)}return t}const w={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function p(r){const t=w[r];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${r}`)}const h={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function F(r){const t=h[r];if(t)return t;throw new Error(`Unsupported VkFormat: ${r}`)}function U(r){return r.classId===2?F(r.vkFormat):p(r.glInternalformat)}const T={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function y(r){const t=T[r];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${r}`)}const a={jsUrl:"",wasmUrl:""};let l,u,c;async function g(){if(!c){const r=new URL(a.jsUrl,location.origin).href,t=new URL(a.wasmUrl,location.origin).href;importScripts(r),c=new Promise(n=>{LIBKTX({locateFile:o=>t}).then(o=>{n(o)})})}return c}async function v(r,t){const n=await fetch(r);if(n.ok){const o=await n.arrayBuffer();return new t.ktxTexture(new Uint8Array(o))}throw new Error(`Failed to load KTX(2) texture: ${r}`)}const x=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function B(r){const t=await g(),n=await v(r,t);let o;if(n.needsTranscoding){o=u;const R=t.TranscodeTarget[l];if(n.transcodeBasis(R,0)!==t.ErrorCode.SUCCESS)throw new Error("Unable to transcode basis texture.")}else o=U(n);const e=d(n),b={width:n.baseWidth,height:n.baseHeight,format:o,mipLevelCount:n.numLevels,resource:e,alphaMode:"no-premultiply-alpha"};return f(b),b}async function A(r,t,n){r&&(a.jsUrl=r),t&&(a.wasmUrl=t),u=x.filter(o=>n.includes(o))[0],l=y(u),await g()}const m={init:async r=>{const{jsUrl:t,wasmUrl:n,supportedTextures:o}=r;await A(t,n,o)},load:async r=>{var t;try{const n=await B(r.url);return{type:"load",url:r.url,success:!0,textureOptions:n,transferables:(t=n.resource)==null?void 0:t.map(o=>o.buffer)}}catch(n){throw n}}};self.onmessage=async r=>{var t;const n=r.data,o=await((t=m[n.type])==null?void 0:t.call(m,n));o&&self.postMessage(o,o.transferables)}})();\n',Ti=null,Mn=class{constructor(){Ti||(Ti=URL.createObjectURL(new Blob([A_],{type:"application/javascript"}))),this.worker=new Worker(Ti)}};Mn.revokeObjectURL=function(){Ti&&(URL.revokeObjectURL(Ti),Ti=null)};var D0={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};var hs,H2={};function E_(a){return hs||(hs=new Mn().worker,hs.onmessage=e=>{let{success:t,url:i,textureOptions:s}=e.data;H2[i](s)},hs.postMessage({type:"init",jsUrl:D0.jsUrl,wasmUrl:D0.wasmUrl,supportedTextures:a})),hs}function P_(a,e){let t=E_(e);return new Promise(i=>{H2[a]=i,t.postMessage({type:"load",url:a})})}var dS={extension:{type:G.LoadParser,priority:Mt.High,name:"loadKTX2"},name:"loadKTX2",test(a){return zt(a,".ktx2")},async load(a,e,t){let i=await No(),s=await P_(a,i),r=new Mi(s);return Za(r,t,a)},async unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var Ah=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],hS={extension:G.ResolveParser,test:a=>zt(a,[".ktx",".ktx2",".dds"]),parse:a=>{var e,t;let i,s=a.split(".");if(s.length>2){let r=s[s.length-2];Ah.includes(r)&&(i=r)}else i=s[s.length-1];return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i,src:a}}},Rr,lS={extension:{type:G.DetectionParser,priority:2},test:async()=>!!(await Uo()||ko()),add:async a=>{let e=await U2();return Rr=R_(e),[...Rr,...a]},remove:async a=>Rr?a.filter(e=>!(e in Rr)):a};function R_(a){let e=["basis"],t={};return a.forEach(i=>{let s=i.split("-")[0];s&&!t[s]&&(t[s]=!0,e.push(s))}),e.sort((i,s)=>{let r=Ah.indexOf(i),o=Ah.indexOf(s);return r===-1?1:o===-1?-1:r-o}),e}var M_=new Ze,Eh=class{cull(a,e,t=!0){this._cullRecursive(a,e,t)}_cullRecursive(a,e,t=!0){var i;if(a.cullable&&a.measurable&&a.includeInBuild){let s=(i=a.cullArea)!=null?i:Oo(a,t,M_);a.culled=s.x>=e.x+e.width||s.y>=e.y+e.height||s.x+s.width<=e.x||s.y+s.height<=e.y}else a.culled=!1;if(!(!a.cullableChildren||a.culled||!a.renderable||!a.measurable||!a.includeInBuild))for(let s=0;s<a.children.length;s++)this._cullRecursive(a.children[s],e,t)}};Eh.shared=new Eh;var C_=Eh,Ph=class{static init(){this._renderRef=this.render.bind(this),this.render=()=>{C_.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}};Ph.extension={priority:10,type:G.Application,name:"culler"};var fS={extension:{type:G.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(function(){return Tm})}},O_=Object.defineProperty,Cn=Object.getOwnPropertySymbols,z2=Object.prototype.hasOwnProperty,V2=Object.prototype.propertyIsEnumerable,k0=(a,e,t)=>e in a?O_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fd=(a,e)=>{for(var t in e||(e={}))z2.call(e,t)&&k0(a,t,e[t]);if(Cn)for(var t of Cn(e))V2.call(e,t)&&k0(a,t,e[t]);return a},I_=(a,e)=>{var t={};for(var i in a)z2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Cn)for(var i of Cn(a))e.indexOf(i)<0&&V2.call(a,i)&&(t[i]=a[i]);return t},W2=class Rh extends ht{constructor(e){e=fd(fd({},Rh.defaultOptions),e),super(e),this.enabled=!0,this._state=Pt.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,t,i,s){e.applyFilter(this,t,i,s)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let t=e,{gpu:i,gl:s}=t,r=I_(t,["gpu","gl"]),o,d;return i&&(o=Zt.from(i)),s&&(d=fa.from(s)),new Rh(fd({gpuProgram:o,glProgram:d},r))}};W2.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};var Ks=W2;var Y2=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();
vTextureCoord = filterTextureCoord();
}
`,G_=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,U0=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv);

return sample * alphaUniforms.uAlpha;
}`,B_=Object.defineProperty,F_=Object.defineProperties,D_=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertySymbols,$2=Object.prototype.hasOwnProperty,K2=Object.prototype.propertyIsEnumerable,L0=(a,e,t)=>e in a?B_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ud=(a,e)=>{for(var t in e||(e={}))$2.call(e,t)&&L0(a,t,e[t]);if(On)for(var t of On(e))K2.call(e,t)&&L0(a,t,e[t]);return a},k_=(a,e)=>F_(a,D_(e)),U_=(a,e)=>{var t={};for(var i in a)$2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&On)for(var i of On(a))e.indexOf(i)<0&&K2.call(a,i)&&(t[i]=a[i]);return t},L_=class q2 extends Ks{constructor(e){e=ud(ud({},q2.defaultOptions),e);let t=Zt.from({vertex:{source:U0,entryPoint:"mainVertex"},fragment:{source:U0,entryPoint:"mainFragment"}}),i=fa.from({vertex:Y2,fragment:G_,name:"alpha-filter"}),s=e,{alpha:r}=s,o=U_(s,["alpha"]),d=new et({uAlpha:{value:r,type:"f32"}});super(k_(ud({},o),{gpuProgram:t,glProgram:i,resources:{alphaUniforms:d}}))}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};L_.defaultOptions={alpha:1};var Z2={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},N_=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function j_(a){let e=Z2[a],t=e.length,i=N_,s="",r="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",o;for(let d=0;d<a;d++){let h=r.replace("%index%",d.toString());o=d,d>=t&&(o=a-d-1),h=h.replace("%value%",e[o].toString()),s+=h,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",a.toString()),i}var X_=`
in vec2 aPosition;

uniform float uStrength;

out vec2 vBlurTexCoords[%size%];

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();

float pixelStrength = uInputSize.%dimension% * uStrength;

vec2 textureCoord = filterTextureCoord();
%blur%
}`;function H_(a,e){let t=Math.ceil(a/2),i=X_,s="",r;e?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let o=0;o<a;o++){let d=r.replace("%index%",o.toString());d=d.replace("%sampleIndex%",`${o-(t-1)}.0`),s+=d,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",a.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function z_(a,e){let t=H_(e,a),i=j_(e);return fa.from({vertex:t,fragment:i,name:`blur-${a?"horizontal":"vertical"}-pass-filter`})}var V_=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
@builtin(position) position: vec4<f32>,
%blur-struct%
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {

let filteredCord = filterTextureCoord(aPosition);

let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

return VSOutput(
filterVertexPosition(aPosition),
%blur-vertex-out%
);
}

@fragment
fn mainFragment(
@builtin(position) position: vec4<f32>,
%blur-fragment-in%
) -> @location(0) vec4<f32> {

var   finalColor = vec4(0.0);

%blur-sampling%

return finalColor;
}`;function W_(a,e){let t=Z2[e],i=t.length,s=[],r=[],o=[];for(let p=0;p<e;p++){s[p]=`@location(${p}) offset${p}: vec2<f32>,`,a?r[p]=`filteredCord + vec2(${p-i+1} * pixelStrength, 0.0),`:r[p]=`filteredCord + vec2(0.0, ${p-i+1} * pixelStrength),`;let y=p<i?p:e-p-1,_=t[y].toString();o[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${_};`}let d=s.join(`
`),h=r.join(`
`),l=o.join(`
`),u=V_.replace("%blur-struct%",d).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",d).replace("%blur-sampling%",l).replace("%dimension%",a?"z":"w");return Zt.from({vertex:{source:u,entryPoint:"mainVertex"},fragment:{source:u,entryPoint:"mainFragment"}})}var Y_=Object.defineProperty,N0=Object.getOwnPropertySymbols,$_=Object.prototype.hasOwnProperty,K_=Object.prototype.propertyIsEnumerable,j0=(a,e,t)=>e in a?Y_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bd=(a,e)=>{for(var t in e||(e={}))$_.call(e,t)&&j0(a,t,e[t]);if(N0)for(var t of N0(e))K_.call(e,t)&&j0(a,t,e[t]);return a},Q2=class J2 extends Ks{constructor(e){e=bd(bd({},J2.defaultOptions),e);let t=z_(e.horizontal,e.kernelSize),i=W_(e.horizontal,e.kernelSize);super(bd({glProgram:t,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}}},e)),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,i,s){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,i,s);else{let r=Ve.getSameSizeTexture(t),o=t,d=r;this._state.blend=!1;let h=e.renderer.type===yt.WEBGPU;for(let l=0;l<this.passes-1;l++){e.applyFilter(this,o,d,l===0?!0:h);let u=d;d=o,o=u}this._state.blend=!0,e.applyFilter(this,o,i,s),Ve.returnTexture(r)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Q2.defaultOptions={strength:8,quality:4,kernelSize:5};var pd=Q2,q_=Object.defineProperty,Z_=Object.defineProperties,Q_=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,X0=(a,e,t)=>e in a?q_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ls=(a,e)=>{for(var t in e||(e={}))e3.call(e,t)&&X0(a,t,e[t]);if(In)for(var t of In(e))t3.call(e,t)&&X0(a,t,e[t]);return a},J_=(a,e)=>Z_(a,Q_(e)),ey=(a,e)=>{var t={};for(var i in a)e3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&In)for(var i of In(a))e.indexOf(i)<0&&t3.call(a,i)&&(t[i]=a[i]);return t},Mh=class extends Ks{constructor(...e){var t;let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={strength:i},e[1]!==void 0&&(i.quality=e[1]),e[2]!==void 0&&(i.resolution=e[2]||"inherit"),e[3]!==void 0&&(i.kernelSize=e[3])),i=ls(ls({},pd.defaultOptions),i);let s=i,{strength:r,strengthX:o,strengthY:d,quality:h}=s,l=ey(s,["strength","strengthX","strengthY","quality"]);super(J_(ls({},l),{compatibleRenderers:yt.BOTH,resources:{}})),this._repeatEdgePixels=!1,this.blurXFilter=new pd(ls({horizontal:!0},i)),this.blurYFilter=new pd(ls({horizontal:!1},i)),this.quality=h,this.strengthX=o??r,this.strengthY=d??r,this.repeatEdgePixels=!1}apply(e,t,i,s){let r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){let d=Ve.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,d,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,d,i,s),Ve.returnTexture(d)}else o?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,i,s)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,i,s))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return this.strength}set blur(e){this.strength=e}get blurX(){return this.strengthX}set blurX(e){this.strengthX=e}get blurY(){return this.strengthY}set blurY(e){this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};Mh.defaultOptions={strength:8,quality:4,kernelSize:5};var ty=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
vec4 color = texture(uTexture, vTextureCoord);
float randomValue = rand(gl_FragCoord.xy * uSeed);
float diff = (randomValue - 0.5) *  uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (color.a > 0.0) {
color.rgb /= color.a;
}

color.r += diff;
color.g += diff;
color.b += diff;

// Premultiply alpha again.
color.rgb *= color.a;

finalColor = color;
}
`,H0=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
uNoise:f32,
uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

fn rand(co:vec2<f32>) -> f32
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);


var sample = textureSample(uTexture, uSampler, uv);
var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
var diff = (randomValue - 0.5) * noiseUniforms.uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (sample.a > 0.0) {
sample.r /= sample.a;
sample.g /= sample.a;
sample.b /= sample.a;
}

sample.r += diff;
sample.g += diff;
sample.b += diff;

// Premultiply alpha again.
sample.r *= sample.a;
sample.g *= sample.a;
sample.b *= sample.a;

return sample;
}`,ay=Object.defineProperty,iy=Object.defineProperties,sy=Object.getOwnPropertyDescriptors,Gn=Object.getOwnPropertySymbols,a3=Object.prototype.hasOwnProperty,i3=Object.prototype.propertyIsEnumerable,z0=(a,e,t)=>e in a?ay(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gd=(a,e)=>{for(var t in e||(e={}))a3.call(e,t)&&z0(a,t,e[t]);if(Gn)for(var t of Gn(e))i3.call(e,t)&&z0(a,t,e[t]);return a},ry=(a,e)=>iy(a,sy(e)),ny=(a,e)=>{var t={};for(var i in a)a3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Gn)for(var i of Gn(a))e.indexOf(i)<0&&i3.call(a,i)&&(t[i]=a[i]);return t},oy=class s3 extends Ks{constructor(e={}){e=gd(gd({},s3.defaultOptions),e);let t=Zt.from({vertex:{source:H0,entryPoint:"mainVertex"},fragment:{source:H0,entryPoint:"mainFragment"}}),i=fa.from({vertex:Y2,fragment:ty,name:"noise-filter"}),s=e,{noise:r,seed:o}=s,d=ny(s,["noise","seed"]);super(ry(gd({},d),{gpuProgram:t,glProgram:i,resources:{noiseUniforms:new et({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}})),this.noise=r,this.seed=o??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};oy.defaultOptions={noise:.5};var cy=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
float clip = step(3.5,
step(uMaskClamp.x, vMaskCoord.x) +
step(uMaskClamp.y, vMaskCoord.y) +
step(vMaskCoord.x, uMaskClamp.z) +
step(vMaskCoord.y, uMaskClamp.w));

// TODO look into why this is needed
float npmAlpha = uAlpha;
vec4 original = texture(uTexture, vTextureCoord);
vec4 masky = texture(uMaskTexture, vMaskCoord);
float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

float a = alphaMul * masky.r * npmAlpha * clip;

if (uInverse == 1.0) {
a = 1.0 - a;
}

finalColor = original * a;
}
`,dy=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
gl_Position = filterVertexPosition(aPosition);
vTextureCoord = filterTextureCoord(aPosition);
vMaskCoord = getFilterCoord(aPosition);
}
`,V0=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
uFilterMatrix:mat3x3<f32>,
uMaskClamp:vec4<f32>,
uAlpha:f32,
uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>,
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition),
getFilterCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) filterUv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var maskClamp = filterUniforms.uMaskClamp;
var uAlpha = filterUniforms.uAlpha;

var clip = step(3.5,
step(maskClamp.x, filterUv.x) +
step(maskClamp.y, filterUv.y) +
step(filterUv.x, maskClamp.z) +
step(filterUv.y, maskClamp.w));

var mask = textureSample(uMaskTexture, uSampler, filterUv);
var source = textureSample(uTexture, uSampler, uv);
var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

var a: f32 = alphaMul * mask.r * uAlpha * clip;

if (filterUniforms.uInverse == 1.0) {
a = 1.0 - a;
}

return source * a;
}
`,hy=Object.defineProperty,ly=Object.defineProperties,fy=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,r3=Object.prototype.hasOwnProperty,n3=Object.prototype.propertyIsEnumerable,W0=(a,e,t)=>e in a?hy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,uy=(a,e)=>{for(var t in e||(e={}))r3.call(e,t)&&W0(a,t,e[t]);if(Bn)for(var t of Bn(e))n3.call(e,t)&&W0(a,t,e[t]);return a},by=(a,e)=>ly(a,fy(e)),py=(a,e)=>{var t={};for(var i in a)r3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Bn)for(var i of Bn(a))e.indexOf(i)<0&&n3.call(a,i)&&(t[i]=a[i]);return t},Ch=class extends Ks{constructor(e){let t=e,{sprite:i}=t,s=py(t,["sprite"]),r=new Xr(i.texture),o=new et({uFilterMatrix:{value:new ie,type:"mat3x3<f32>"},uMaskClamp:{value:r.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),d=Zt.from({vertex:{source:V0,entryPoint:"mainVertex"},fragment:{source:V0,entryPoint:"mainFragment"}}),h=fa.from({vertex:dy,fragment:cy,name:"mask-filter"});super(by(uy({},s),{gpuProgram:d,glProgram:h,resources:{filterUniforms:o,uMaskTexture:i.texture.source}})),this.sprite=i,this._textureMatrix=r}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,i,s){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,i,s)}};function Y0(a,e,t,i,s,r,o,d){let h=o-t,l=d-i,u=s-t,p=r-i,y=a-t,_=e-i,v=h*h+l*l,T=h*u+l*p,A=h*y+l*_,P=u*u+p*p,C=u*y+p*_,F=1/(v*P-T*T),D=(P*A-T*C)*F,H=(v*C-T*A)*F;return D>=0&&H>=0&&D+H<1}var o3=class c3{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{let{queue:t}=this,i=0;for(;t.length&&i<c3.uploadsPerFrame;){let s=t.shift();this.uploadQueueItem(s),i++}t.length?at.system.addOnce(this._tick,this,Ra.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){let t=Array.isArray(e)?e:[e];for(let i of t)i instanceof he?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(let t of e.children)this._addContainer(t)}upload(e){return e&&this.add(e),new Promise(t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),at.system.addOnce(this._tick,this,Ra.UTILITY)):t()})}dedupeQueue(){let e=Object.create(null),t=0;for(let i=0;i<this.queue.length;i++){let s=this.queue[i];e[s.uid]||(e[s.uid]=!0,this.queue[t++]=s)}this.queue.length=t}_resolve(){let{resolves:e}=this,t=e.slice(0);e.length=0;for(let i of t)i()}};o3.uploadsPerFrame=4;var gy=o3,my=Object.defineProperty,Fn=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,$0=(a,e,t)=>e in a?my(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,_y=(a,e)=>{for(var t in e||(e={}))d3.call(e,t)&&$0(a,t,e[t]);if(Fn)for(var t of Fn(e))h3.call(e,t)&&$0(a,t,e[t]);return a},yy=(a,e)=>{var t={};for(var i in a)d3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Fn)for(var i of Fn(a))e.indexOf(i)<0&&h3.call(a,i)&&(t[i]=a[i]);return t},Ka=class extends ha{constructor(...e){var t;let i=e[0];i instanceof qt&&(i={geometry:i,shader:e[1]},e[3]&&(i.geometry.topology=e[3]));let s=i,{geometry:r,shader:o,texture:d,roundPixels:h,state:l}=s,u=yy(s,["geometry","shader","texture","roundPixels","state"]);super(_y({label:"Mesh"},u)),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=o??null,this.texture=(t=d??o?.texture)!=null?t:K.WHITE,this.state=l??Pt.for2d(),this._geometry=r,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var t;this._geometry!==e&&((t=this._geometry)==null||t.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof $s?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){let{x:t,y:i}=e;if(!this.bounds.containsPoint(t,i))return!1;let s=this.geometry.getBuffer("aPosition").data,r=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let o=this.geometry.getIndex().data,d=o.length;for(let h=0;h+2<d;h+=r){let l=o[h]*2,u=o[h+1]*2,p=o[h+2]*2;if(Y0(t,i,s[l],s[l+1],s[u],s[u+1],s[p],s[p+1]))return!0}}else{let o=s.length/2;for(let d=0;d+2<o;d+=r){let h=d*2,l=(d+1)*2,u=(d+2)*2;if(Y0(t,i,s[h],s[h+1],s[l],s[l+1],s[u],s[u+1]))return!0}}return!1}destroy(e){var t;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}(t=this._geometry)==null||t.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}},xy=Object.defineProperty,vy=Object.defineProperties,Ty=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,K0=(a,e,t)=>e in a?xy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sy=(a,e)=>{for(var t in e||(e={}))l3.call(e,t)&&K0(a,t,e[t]);if(Dn)for(var t of Dn(e))f3.call(e,t)&&K0(a,t,e[t]);return a},wy=(a,e)=>vy(a,Ty(e)),Ay=(a,e)=>{var t={};for(var i in a)l3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Dn)for(var i of Dn(a))e.indexOf(i)<0&&f3.call(a,i)&&(t[i]=a[i]);return t},Oh=class a extends Pe{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});let i=t,{textures:s,autoUpdate:r}=i,o=Ay(i,["textures","autoUpdate"]),[d]=s;super(wy(Sy({},o),{texture:d instanceof K?d:d.texture})),this._textures=null,this._durations=null,this._autoUpdate=r??!0,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=s}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(at.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(at.shared.add(this.update,this,Ra.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=e.deltaTime,i=this.animationSpeed*t,s=this.currentFrame;if(this._durations!==null){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=i/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];let o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}static fromImages(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof K)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(at.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(at.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Ih=class{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new ie,this.observer=t,this.position=new We(this,0,0),this.scale=new We(this,1,1),this.pivot=new We(this,0,0),this.skew=new We(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var t;this.dirty=!0,e===this.skew&&this.updateSkew(),(t=this.observer)==null||t._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}},Ey=Object.defineProperty,kn=Object.getOwnPropertySymbols,u3=Object.prototype.hasOwnProperty,b3=Object.prototype.propertyIsEnumerable,q0=(a,e,t)=>e in a?Ey(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fs=(a,e)=>{for(var t in e||(e={}))u3.call(e,t)&&q0(a,t,e[t]);if(kn)for(var t of kn(e))b3.call(e,t)&&q0(a,t,e[t]);return a},Py=(a,e)=>{var t={};for(var i in a)u3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&kn)for(var i of kn(a))e.indexOf(i)<0&&b3.call(a,i)&&(t[i]=a[i]);return t},p3=class kr extends ha{constructor(...e){let t=e[0]||{};t instanceof K&&(t={texture:t}),e.length>1&&(t.width=e[1],t.height=e[2]),t=fs(fs({},kr.defaultOptions),t);let i=t??{},{texture:s,anchor:r,tilePosition:o,tileScale:d,tileRotation:h,width:l,height:u,applyAnchorToTexture:p,roundPixels:y}=i,_=Py(i,["texture","anchor","tilePosition","tileScale","tileRotation","width","height","applyAnchorToTexture","roundPixels"]);super(fs({label:"TilingSprite"},_)),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=p,this.texture=s,this._width=l??s.width,this._height=u??s.height,this._tileTransform=new Ih({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=o,this.tileScale=d,this.tileRotation=h,this.roundPixels=y??!1}static from(e,t={}){return typeof e=="string"?new kr(fs({texture:Ce.get(e)},t)):new kr(fs({texture:e},t))}get uvRespectAnchor(){return Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,t=this._anchor,i=this._width,s=this._height;e.maxX=-t._x*i,e.minX=e.maxX+i,e.maxY=-t._y*s,e.minY=e.maxY+s}containsPoint(e){let t=this._width,i=this._height,s=-t*this._anchor._x,r=0;return e.x>=s&&e.x<=s+t&&(r=-i*this._anchor._y,e.y>=r&&e.y<=r+i)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};p3.defaultOptions={texture:K.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};var Ry=p3,My=Object.defineProperty,Un=Object.getOwnPropertySymbols,g3=Object.prototype.hasOwnProperty,m3=Object.prototype.propertyIsEnumerable,Z0=(a,e,t)=>e in a?My(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Cy=(a,e)=>{for(var t in e||(e={}))g3.call(e,t)&&Z0(a,t,e[t]);if(Un)for(var t of Un(e))m3.call(e,t)&&Z0(a,t,e[t]);return a},Oy=(a,e)=>{var t={};for(var i in a)g3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Un)for(var i of Un(a))e.indexOf(i)<0&&m3.call(a,i)&&(t[i]=a[i]);return t},Ls=class extends ha{constructor(e,t){let i=e,{text:s,resolution:r,style:o,anchor:d,width:h,height:l,roundPixels:u}=i,p=Oy(i,["text","resolution","style","anchor","width","height","roundPixels"]);super(Cy({},p)),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=o,this.resolution=r??null,this.allowChildren=!1,this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),d&&(this.anchor=d),this.roundPixels=u??!1,h!==void 0&&(this.width=h),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,i=this.bounds.height,s=-t*this.anchor.x,r=0;return e.x>=s&&e.x<=s+t&&(r=-i*this.anchor.y,e.y>=r&&e.y<=r+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}};function Rl(a,e){var t;let i=(t=a[0])!=null?t:{};return(typeof i=="string"||a[1])&&(i={text:i,style:a[1]}),i}var Ne=class extends Ls{constructor(...e){let t=Rl(e,"Text");super(t,Rt),this.renderPipeId="text"}updateBounds(){let e=this._bounds,t=this._anchor,i=na.measureText(this._text,this._style),{width:s,height:r}=i;e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*r,e.maxY=e.minY+r}},Gh=class extends gy{resolveQueueItem(e,t){return e instanceof he?this.resolveContainerQueueItem(e,t):e instanceof Be||e instanceof K?t.push(e.source):e instanceof dt&&t.push(e),null}resolveContainerQueueItem(e,t){e instanceof Pe||e instanceof Ry||e instanceof Ka?t.push(e.texture.source):e instanceof Ne?t.push(e):e instanceof Ye?t.push(e.context):e instanceof Oh&&e.textures.forEach(i=>{i.source?t.push(i.source):t.push(i.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:s}=i.data;return s.source}else if(i.action==="fill"){let{texture:s}=i.data.style;return s.source}return null}},Bh=class extends Ls{constructor(...e){var t,i,s;let r=Rl(e,"BitmapText");(t=r.style)!=null||(r.style=r.style||{}),(s=(i=r.style).fill)!=null||(i.fill=16777215),super(r,Rt),this.renderPipeId="bitmapText"}updateBounds(){let e=this._bounds,t=this._anchor,i=bn.measureText(this.text,this._style),s=i.scale,r=i.offsetY*s,o=i.width*s,d=i.height*s,h=this._style._stroke;h&&(o+=h.width,d+=h.width),e.minX=-t._x*o,e.maxX=e.minX+o,e.minY=-t._y*(d+r),e.maxY=e.minY+d}set resolution(e){}get resolution(){return this._resolution}},Fh=class extends Ls{constructor(...e){let t=Rl(e,"HtmlText");super(t,_n),this.renderPipeId="htmlText"}updateBounds(){let e=this._bounds,t=this._anchor,i=y2(this.text,this._style),{width:s,height:r}=i;e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*r,e.maxY=e.minY+r}},Dh=class extends Gh{uploadQueueItem(e){e instanceof Be?this.uploadTextureSource(e):e instanceof Ne?this.uploadText(e):e instanceof Fh?this.uploadHTMLText(e):e instanceof Bh?this.uploadBitmapText(e):e instanceof dt&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:s}=i.data;this.uploadTextureSource(s.source)}else if(i.action==="fill"){let{texture:s}=i.data.style;this.uploadTextureSource(s.source)}return null}},kh=class extends Dh{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}};kh.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"prepare"};var Ln=class{constructor(){this._tempState=Pt.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,i){let s=e.renderer,r=this._didUploadHash[i.uid];s.shader.bind(i,r),r||(this._didUploadHash[i.uid]=!0),s.shader.updateUniformGroup(s.globalUniforms.uniformGroup),s.geometry.bind(t,i.glProgram)}execute(e,t){let i=e.renderer;this._tempState.blendMode=t.blendMode,i.state.set(this._tempState);let s=t.textures.textures;for(let r=0;r<t.textures.count;r++)i.texture.bind(s[r],r);i.geometry.draw(t.topology,t.size,t.start)}};Ln.extension={type:[G.WebGLPipesAdaptor],name:"batch"};var Mr=Pt.for2d(),Nn=class{start(e,t,i){let s=e.renderer,r=s.encoder,o=i.gpuProgram;this._shader=i,this._geometry=t,r.setGeometry(t,o),Mr.blendMode="normal",s.pipeline.getPipeline(t,o,Mr);let d=s.globalUniforms.bindGroup;r.resetBindGroup(1),r.setBindGroup(0,d,o)}execute(e,t){let i=this._shader.gpuProgram,s=e.renderer,r=s.encoder;if(!t.bindGroup){let h=t.textures;t.bindGroup=ml(h.textures,h.count)}Mr.blendMode=t.blendMode;let o=s.bindGroup.getBindGroup(t.bindGroup,i,1),d=s.pipeline.getPipeline(this._geometry,i,Mr,t.topology);t.bindGroup._touch(s.textureGC.count),r.setPipeline(d),r.renderPassEncoder.setBindGroup(1,o),r.renderPassEncoder.drawIndexed(t.size,1,t.start)}};Nn.extension={type:[G.WebGPUPipesAdaptor],name:"batch"};var Uh=class _3{constructor(e,t){this.state=Pt.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null);var i,s;this.renderer=e,this._adaptor=t,(s=(i=this._adaptor).init)==null||s.call(i,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new Sl)),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(let i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let i=this._activeBatches[e.batcherName];i||(i=this._activeBatches[e.batcherName]=_3.getBatcher(e.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let t=this._activeBatches;for(let i in t){let s=t[i],r=s.geometry;r.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),r.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!1)}}upload(e){let t=this._batchersByInstructionSet[e.uid];for(let i in t){let s=t[i],r=s.geometry;s.dirty&&(s.dirty=!1,r.buffers[0].update(s.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let t=e.batcher,i=t.geometry,s=t.shader;this._adaptor.start(this,i,s)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};Uh.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"batch"},Uh._availableBatchers=Object.create(null);var y3=Uh;be.handleByMap(G.Batcher,y3._availableBatchers),be.add(Sl);var Iy={name:"texture-bit",vertex:{header:`

struct TextureUniforms {
uTextureMatrix:mat3x3<f32>,
}

@group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
`,main:`
uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
@group(2) @binding(0) var uTexture: texture_2d<f32>;
@group(2) @binding(1) var uSampler: sampler;


`,main:`
outColor = textureSample(uTexture, uSampler, vUV);
`}},Gy={name:"texture-bit",vertex:{header:`
uniform mat3 uTextureMatrix;
`,main:`
uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
uniform sampler2D uTexture;


`,main:`
outColor = texture(uTexture, vUV);
`}},By=new Ze,Fy=class extends Si{constructor(){super(),this.filters=[new Ch({sprite:new Pe(K.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(a){this.filters[0].sprite=a}get inverse(){return this.filters[0].inverse}set inverse(a){this.filters[0].inverse=a}},jn=class{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,i){let s=this._renderer;if(s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){let r=e.mask;r.includeInBuild=!0,r.collectRenderables(i,s,null),r.includeInBuild=!1}s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){let t=this._renderer,i=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){let s=ye.get(Fy);if(s.inverse=e.inverse,i){e.mask.mask.measurable=!0;let r=Oo(e.mask.mask,!0,By);e.mask.mask.measurable=!1,r.ceil();let o=t.renderTarget.renderTarget.colorTexture.source,d=Ve.getOptimalTexture(r.width,r.height,o._resolution,o.antialias);t.renderTarget.push(d,!0),t.globalUniforms.push({offset:r,worldColor:4294967295});let h=s.sprite;h.texture=d,h.worldTransform.tx=r.minX,h.worldTransform.ty=r.minY,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer,filterTexture:d})}else s.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){let s=this._activeMaskStage[this._activeMaskStage.length-1];i&&(t.type===yt.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:s.maskedContainer,filterEffect:s.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();let s=this._activeMaskStage.pop();i&&Ve.returnTexture(s.filterTexture),ye.return(s.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};jn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"alphaMask"};var Xn=class{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,i){this._renderer.renderPipes.batch.break(i);let s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;let r=this._colorStack[this._colorStackIndex];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1})),this._colorStackIndex++}pop(e,t,i){this._renderer.renderPipes.batch.break(i);let s=this._colorStack;this._colorStackIndex--;let r=s[this._colorStackIndex-1];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}};Xn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"colorMask"};var Hn=class{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,i){var s,r;let o=e,d=this._renderer;d.renderPipes.batch.break(i),d.renderPipes.blendMode.setBlendMode(o.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let h=o.mask;h.includeInBuild=!0,this._maskHash.has(o)||this._maskHash.set(o,{instructionsStart:0,instructionsLength:0});let l=this._maskHash.get(o);l.instructionsStart=i.instructionSize,h.collectRenderables(i,d,null),h.includeInBuild=!1,d.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let u=i.instructionSize-l.instructionsStart-1;l.instructionsLength=u;let p=d.renderTarget.renderTarget.uid;(r=(s=this._maskStackHash)[p])!=null||(s[p]=0)}pop(e,t,i){let s=e,r=this._renderer;r.renderPipes.batch.break(i),r.renderPipes.blendMode.setBlendMode(s.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});let o=this._maskHash.get(e);for(let d=0;d<o.instructionsLength;d++)i.instructions[i.instructionSize++]=i.instructions[o.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t,i;let s=this._renderer,r=s.renderTarget.renderTarget.uid,o=(i=(t=this._maskStackHash)[r])!=null?i:t[r]=0;e.action==="pushMaskBegin"?(s.renderTarget.ensureDepthStencil(),s.stencil.setStencilMode(Le.RENDERING_MASK_ADD,o),o++,s.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?s.stencil.setStencilMode(Le.INVERSE_MASK_ACTIVE,o):s.stencil.setStencilMode(Le.MASK_ACTIVE,o),s.colorMask.setMask(15)):e.action==="popMaskBegin"?(s.colorMask.setMask(0),o!==0?s.stencil.setStencilMode(Le.RENDERING_MASK_REMOVE,o):(s.renderTarget.clear(null,mt.STENCIL),s.stencil.setStencilMode(Le.DISABLED,o)),o--):e.action==="popMaskEnd"&&(e.inverse?s.stencil.setStencilMode(Le.INVERSE_MASK_ACTIVE,o):s.stencil.setStencilMode(Le.MASK_ACTIVE,o),s.colorMask.setMask(15)),this._maskStackHash[r]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};Hn.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"stencilMask"};var Ur=(a=>(a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a))(Ur||{}),Lh=class{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}},zn=class{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,i=this.getGlBuffer(e);t.bindBuffer(i.type,i.buffer)}bindBufferBase(e,t){let{_gl:i}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,i.bindBufferBase(i.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let i=0,s=this._nextBindBaseIndex;for(;i<2;){s>=this._maxBindings&&(s=this._minBaseLocation,i++);let r=this._boundBufferBases[s];if(r&&r._lastBindCallId===this._bindCallId){s++;continue}break}return t=s,this._nextBindBaseIndex=s+1,i>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,i,s){let{_gl:r}=this;i||(i=0),t||(t=0),this._boundBufferBases[t]=null,r.bindBufferRange(r.UNIFORM_BUFFER,t||0,e.buffer,i*256,s||256)}updateBuffer(e){let{_gl:t}=this,i=this.getGlBuffer(e);if(e._updateID===i.updateID)return i;i.updateID=e._updateID,t.bindBuffer(i.type,i.buffer);let s=e.data,r=e.descriptor.usage&ve.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return s?i.byteLength>=s.byteLength?t.bufferSubData(i.type,0,s,0,e._updateSize/s.BYTES_PER_ELEMENT):(i.byteLength=s.byteLength,t.bufferData(i.type,s,r)):(i.byteLength=e.descriptor.size,t.bufferData(i.type,i.byteLength,r)),i}destroyAll(){let e=this._gl;for(let t in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[t].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,t){let i=this._gpuBuffers[e.uid],s=this._gl;t||s.deleteBuffer(i.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){let{_gl:t}=this,i=Ur.ARRAY_BUFFER;e.descriptor.usage&ve.INDEX?i=Ur.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&ve.UNIFORM&&(i=Ur.UNIFORM_BUFFER);let s=new Lh(t.createBuffer(),i);return this._gpuBuffers[e.uid]=s,e.on("destroy",this.onBufferDestroy,this),s}resetState(){this._boundBufferBases=Object.create(null)}};zn.extension={type:[G.WebGLSystem],name:"buffer"};var Dy=Object.defineProperty,ky=Object.defineProperties,Uy=Object.getOwnPropertyDescriptors,Q0=Object.getOwnPropertySymbols,Ly=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,J0=(a,e,t)=>e in a?Dy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Cr=(a,e)=>{for(var t in e||(e={}))Ly.call(e,t)&&J0(a,t,e[t]);if(Q0)for(var t of Q0(e))Ny.call(e,t)&&J0(a,t,e[t]);return a},e1=(a,e)=>ky(a,Uy(e)),Nh=class x3{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){var t,i;e=Cr(Cr({},x3.defaultOptions),e);let s=this.multiView=e.multiView;if(e.context&&s&&(Qt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),s=!1),s?this.canvas=xe.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let r=this._renderer.background.alpha<1,o=(t=e.premultipliedAlpha)!=null?t:!0,d=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:r,premultipliedAlpha:o,antialias:d,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:(i=e.powerPreference)!=null?i:"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Qt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof xe.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let i,s=this.canvas;if(e===2&&(i=s.getContext("webgl2",t)),!i&&(i=s.getContext("webgl",t),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions=e1(Cr({},t),{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")});else{this.extensions=e1(Cr({},t),{colorBufferFloat:e.getExtension("EXT_color_buffer_float")});let i=e.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var t;this.gl.isContextLost()&&((t=this.extensions.loseContext)==null||t.restoreContext())},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;let t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&t.stencil;let i=this.supports,s=this.webGLVersion===2,r=this.extensions;i.uint32Indices=s||!!r.uint32ElementIndex,i.uniformBufferObject=s,i.vertexArrayObject=s||!!r.vertexArrayObject,i.srgbTextures=s||!!r.srgb,i.nonPowOf2wrapping=s,i.nonPowOf2mipmaps=s,i.msaa=s,i.uint32Indices}};Nh.extension={type:[G.WebGLSystem],name:"context"},Nh.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};var jy=Nh;function v3(a,e){var t,i,s;for(let r in a.attributes){let o=a.attributes[r],d=e[r];d?((t=o.format)!=null||(o.format=d.format),(i=o.offset)!=null||(o.offset=d.offset),(s=o.instance)!=null||(o.instance=d.instance)):Qt(`Attribute ${r} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Xy(a)}function Xy(a){var e,t;let{buffers:i,attributes:s}=a,r={},o={};for(let d in i){let h=i[d];r[h.uid]=0,o[h.uid]=0}for(let d in s){let h=s[d];r[h.buffer.uid]+=Ca(h.format).stride}for(let d in s){let h=s[d];(e=h.stride)!=null||(h.stride=r[h.buffer.uid]),(t=h.start)!=null||(h.start=o[h.buffer.uid]),o[h.buffer.uid]+=Ca(h.format).stride}}var jh=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(jh||{}),T3=(a=>(a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a))(T3||{}),Hy=(a=>(a[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a))(Hy||{}),Te=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(Te||{}),t1={uint8x2:Te.UNSIGNED_BYTE,uint8x4:Te.UNSIGNED_BYTE,sint8x2:Te.BYTE,sint8x4:Te.BYTE,unorm8x2:Te.UNSIGNED_BYTE,unorm8x4:Te.UNSIGNED_BYTE,snorm8x2:Te.BYTE,snorm8x4:Te.BYTE,uint16x2:Te.UNSIGNED_SHORT,uint16x4:Te.UNSIGNED_SHORT,sint16x2:Te.SHORT,sint16x4:Te.SHORT,unorm16x2:Te.UNSIGNED_SHORT,unorm16x4:Te.UNSIGNED_SHORT,snorm16x2:Te.SHORT,snorm16x4:Te.SHORT,float16x2:Te.HALF_FLOAT,float16x4:Te.HALF_FLOAT,float32:Te.FLOAT,float32x2:Te.FLOAT,float32x3:Te.FLOAT,float32x4:Te.FLOAT,uint32:Te.UNSIGNED_INT,uint32x2:Te.UNSIGNED_INT,uint32x3:Te.UNSIGNED_INT,uint32x4:Te.UNSIGNED_INT,sint32:Te.INT,sint32x2:Te.INT,sint32x3:Te.INT,sint32x4:Te.INT};function zy(a){var e;return(e=t1[a])!=null?e:t1.float32}var Vy={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},Vn=class{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=s=>t.bindVertexArrayOES(s),e.deleteVertexArray=s=>t.deleteVertexArrayOES(s));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(e.drawArraysInstanced=(s,r,o,d)=>{i.drawArraysInstancedANGLE(s,r,o,d)},e.drawElementsInstanced=(s,r,o,d,h)=>{i.drawElementsInstancedANGLE(s,r,o,d,h)},e.vertexAttribDivisor=(s,r)=>i.vertexAttribDivisorANGLE(s,r)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,t){let i=this.gl;this._activeGeometry=e;let s=this.getVao(e,t);this._activeVao!==s&&(this._activeVao=s,i.bindVertexArray(s)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let i=0;i<e.buffers.length;i++){let s=e.buffers[i];t.updateBuffer(s)}}checkCompatibility(e,t){let i=e.attributes,s=t._attributeData;for(let r in s)if(!i[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(e,t){let i=e.attributes,s=t._attributeData,r=["g",e.uid];for(let o in i)s[o]&&r.push(o,s[o].location);return r.join("-")}getVao(e,t){var i;return((i=this._geometryVaoHash[e.uid])==null?void 0:i[t._key])||this.initGeometryVao(e,t)}initGeometryVao(e,t,i=!0){let s=this._renderer.gl,r=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let o=this.getSignature(e,t);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));let d=this._geometryVaoHash[e.uid],h=d[o];if(h)return d[t._key]=h,h;v3(e,t._attributeData);let l=e.buffers;h=s.createVertexArray(),s.bindVertexArray(h);for(let u=0;u<l.length;u++){let p=l[u];r.bind(p)}return this.activateVao(e,t),d[t._key]=h,d[o]=h,s.bindVertexArray(null),h}onGeometryDestroy(e,t){let i=this._geometryVaoHash[e.uid],s=this.gl;if(i){if(t)for(let r in i)this._activeVao!==i[r]&&this.unbind(),s.deleteVertexArray(i[r]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){let t=this.gl;for(let i in this._geometryVaoHash){if(e)for(let s in this._geometryVaoHash[i]){let r=this._geometryVaoHash[i];this._activeVao!==r&&this.unbind(),t.deleteVertexArray(r[s])}this._geometryVaoHash[i]=null}}activateVao(e,t){var i,s;let r=this._renderer.gl,o=this._renderer.buffer,d=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);let h=null;for(let l in d){let u=d[l],p=u.buffer,y=o.getGlBuffer(p),_=t._attributeData[l];if(_){h!==y&&(o.bind(p),h=y);let v=_.location;r.enableVertexAttribArray(v);let T=Ca(u.format),A=zy(u.format);if(((i=_.format)==null?void 0:i.substring(1,4))==="int"?r.vertexAttribIPointer(v,T.size,A,u.stride,u.offset):r.vertexAttribPointer(v,T.size,A,T.normalised,u.stride,u.offset),u.instance)if(this.hasInstance){let P=(s=u.divisor)!=null?s:1;r.vertexAttribDivisor(v,P)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,s){let{gl:r}=this._renderer,o=this._activeGeometry,d=Vy[e||o.topology];if(s!=null||(s=o.instanceCount),o.indexBuffer){let h=o.indexBuffer.data.BYTES_PER_ELEMENT,l=h===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;s>1?r.drawElementsInstanced(d,t||o.indexBuffer.data.length,l,(i||0)*h,s):r.drawElements(d,t||o.indexBuffer.data.length,l,(i||0)*h)}else s>1?r.drawArraysInstanced(d,i||0,t||o.getSize(),s):r.drawArrays(d,i||0,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};Vn.extension={type:[G.WebGLSystem],name:"geometry"};var Wy=Object.defineProperty,a1=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,$y=Object.prototype.propertyIsEnumerable,i1=(a,e,t)=>e in a?Wy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,s1=(a,e)=>{for(var t in e||(e={}))Yy.call(e,t)&&i1(a,t,e[t]);if(a1)for(var t of a1(e))$y.call(e,t)&&i1(a,t,e[t]);return a},Ky=new qt({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Xh=class S3{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:t,antialias:i}=s1(s1({},S3.defaultOptions),e);this.useBackBuffer=t,this._antialias=i,this._renderer.context.supports.msaa||(Qt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Pt.for2d();let s=new fa({vertex:`
attribute vec2 aPosition;
out vec2 vUv;

void main() {
gl_Position = vec4(aPosition, 0.0, 1.0);

vUv = (aPosition + 1.0) / 2.0;

// flip dem UVs
vUv.y = 1.0 - vUv.y;
}`,fragment:`
in vec2 vUv;
out vec4 finalColor;

uniform sampler2D uTexture;

void main() {
finalColor = texture(uTexture, vUv);
}`,name:"big-triangle"});this._bigTriangleShader=new ht({glProgram:s,resources:{uTexture:K.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let i=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=i.colorTexture,e.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:Ky,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new K({source:new Be({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Xh.extension={type:[G.WebGLSystem],name:"backBuffer",priority:1},Xh.defaultOptions={useBackBuffer:!1};var qy=Xh,Wn=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}};Wn.extension={type:[G.WebGLSystem],name:"colorMask"};var Yn=class{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:i,shader:s,state:r,skipSync:o,topology:d,size:h,start:l,instanceCount:u}=e;t.shader.bind(s,o),t.geometry.bind(i,t.shader._activeProgram),r&&t.state.set(r),t.geometry.draw(d,h,l,u??i.instanceCount)}destroy(){this._renderer=null}};Yn.extension={type:[G.WebGLSystem],name:"encoder"};var Hh=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}},wa=[];wa[Le.NONE]=void 0,wa[Le.DISABLED]={stencilWriteMask:0,stencilReadMask:0},wa[Le.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},wa[Le.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},wa[Le.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},wa[Le.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};var $n=class{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Le.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Le.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Le.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],s=this._gl,r=wa[e],o=this._stencilCache;if(i.stencilMode=e,i.stencilReference=t,e===Le.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,s.disable(s.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,s.enable(s.STENCIL_TEST)),(e!==o.stencilMode||o.stencilReference!==t)&&(o.stencilMode=e,o.stencilReference=t,s.stencilFunc(this._comparisonFuncMapping[r.stencilBack.compare],t,255),s.stencilOp(s.KEEP,s.KEEP,this._stencilOpsMapping[r.stencilBack.passOp]))}};$n.extension={type:[G.WebGLSystem],name:"stencil"};var Kn=class{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!P2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){let t=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(t.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){let t=e._signature,i=this._syncFunctionHash[t];if(!i){let s=Object.keys(e.uniformStructures).map(d=>e.uniformStructures[d]),r=this._adaptor.createUboElements(s),o=this._generateUboSync(r.uboElements);i=this._syncFunctionHash[t]={layout:r,syncFunction:o}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,i){let s=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(s.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}));let r=null;return t||(t=e.buffer.data,r=e.buffer.dataInt32),i||(i=0),s.syncFunction(e.uniforms,t,r,i),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;let t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}},w3={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function Zy(a){let e=a.map(r=>({data:r,offset:0,size:0})),t=16,i=0,s=0;for(let r=0;r<e.length;r++){let o=e[r];if(i=w3[o.data.type],!i)throw new Error(`Unknown type ${o.data.type}`);o.data.size>1&&(i=Math.max(i,t)*o.data.size);let d=i===12?16:i;o.size=i;let h=s%t;h>0&&t-h<d?s+=(t-h)%16:s+=(i-h%i)%i,o.offset=s,s+=i}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}var Ya=[{type:"mat3x3<f32>",test:a=>a.value.a!==void 0,ubo:`
var matrix = uv[name].toArray(true);
data[offset] = matrix[0];
data[offset + 1] = matrix[1];
data[offset + 2] = matrix[2];
data[offset + 4] = matrix[3];
data[offset + 5] = matrix[4];
data[offset + 6] = matrix[5];
data[offset + 8] = matrix[6];
data[offset + 9] = matrix[7];
data[offset + 10] = matrix[8];
`,uniform:`
gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.width!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
data[offset + 2] = v.width;
data[offset + 3] = v.height;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
cv[0] = v.x;
cv[1] = v.y;
cv[2] = v.width;
cv[3] = v.height;
gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
}
`},{type:"vec2<f32>",test:a=>a.type==="vec2<f32>"&&a.size===1&&a.value.x!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y) {
cv[0] = v.x;
cv[1] = v.y;
gl.uniform2f(ud[name].location, v.x, v.y);
}
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
data[offset + 3] = v.alpha;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
cv[3] = v.alpha;
gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
}
`},{type:"vec3<f32>",test:a=>a.type==="vec3<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
}
`}];function A3(a,e,t,i){let s=[`
var v = null;
var v2 = null;
var t = 0;
var index = 0;
var name = null;
var arrayOffset = null;
`],r=0;for(let d=0;d<a.length;d++){let h=a[d],l=h.data.name,u=!1,p=0;for(let y=0;y<Ya.length;y++)if(Ya[y].test(h.data)){p=h.offset/4,s.push(`name = "${l}";`,`offset += ${p-r};`,Ya[y][e]||Ya[y].ubo),u=!0;break}if(!u)if(h.data.size>1)p=h.offset/4,s.push(t(h,p-r));else{let y=i[h.data.type];p=h.offset/4,s.push(`
v = uv.${l};
offset += ${p-r};
${y};
`)}r=p}let o=s.join(`
`);return new Function("uv","data","dataInt32","offset",o)}var Qy=Object.defineProperty,Jy=Object.defineProperties,ex=Object.getOwnPropertyDescriptors,r1=Object.getOwnPropertySymbols,tx=Object.prototype.hasOwnProperty,ax=Object.prototype.propertyIsEnumerable,n1=(a,e,t)=>e in a?Qy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ix=(a,e)=>{for(var t in e||(e={}))tx.call(e,t)&&n1(a,t,e[t]);if(r1)for(var t of r1(e))ax.call(e,t)&&n1(a,t,e[t]);return a},sx=(a,e)=>Jy(a,ex(e));function bi(a,e){return`
for (let i = 0; i < ${a*e}; i++) {
data[offset + (((i / ${a})|0) * 4) + (i % ${a})] = v[i];
}
`}var E3={f32:`
data[offset] = v;`,i32:`
dataInt32[offset] = v;`,"vec2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];`,"vec3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];`,"vec4<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];`,"vec2<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];
dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 4] = v[2];
data[offset + 5] = v[3];`,"mat3x3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 4] = v[3];
data[offset + 5] = v[4];
data[offset + 6] = v[5];
data[offset + 8] = v[6];
data[offset + 9] = v[7];
data[offset + 10] = v[8];`,"mat4x4<f32>":`
for (let i = 0; i < 16; i++) {
data[offset + i] = v[i];
}`,"mat3x2<f32>":bi(3,2),"mat4x2<f32>":bi(4,2),"mat2x3<f32>":bi(2,3),"mat4x3<f32>":bi(4,3),"mat2x4<f32>":bi(2,4),"mat3x4<f32>":bi(3,4)},rx=sx(ix({},E3),{"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];
`});function nx(a,e){let t=Math.max(w3[a.data.type]/16,1),i=a.data.value.length/a.data.size,s=(4-i%4)%4,r=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
offset += ${e};

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*t}; i++)
{
for(var j = 0; j < ${i}; j++)
{
${r}[arrayOffset++] = v[t++];
}
${s!==0?`arrayOffset += ${s};`:""}
}
`}function ox(a){return A3(a,"uboStd40",nx,E3)}var qn=class extends Kn{constructor(){super({createUboElements:Zy,generateUboSync:ox})}};qn.extension={type:[G.WebGLSystem],name:"ubo"};var zh=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ae}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ae}copyToTexture(e,t,i,s,r){let o=this._renderTargetSystem,d=this._renderer,h=o.getGpuRenderTarget(e),l=d.gl;return this.finishRenderPass(e),l.bindFramebuffer(l.FRAMEBUFFER,h.resolveTargetFramebuffer),d.texture.bind(t,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,r.x,r.y,i.x,i.y,s.width,s.height),t}startRenderPass(e,t=!0,i,s){let r=this._renderTargetSystem,o=e.colorTexture,d=r.getGpuRenderTarget(e),h=s.y;e.isRoot&&(h=o.pixelHeight-s.height),e.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});let l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,d.framebuffer);let u=this._viewPortCache;(u.x!==s.x||u.y!==h||u.width!==s.width||u.height!==s.height)&&(u.x=s.x,u.y=h,u.width=s.width,u.height=s.height,l.viewport(s.x,h,s.width,s.height)),!d.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(d),this.clear(e,t,i)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,t.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,t.framebuffer),i.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer,i=t.gl,s=new Hh;return e.colorTexture.resource===t.canvas?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),s.framebuffer=null,s):(this._initColor(e,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s)}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(i=>{t.deleteRenderbuffer(i)}),e.msaaRenderBuffer=null}clear(e,t,i){if(!t)return;let s=this._renderTargetSystem;typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let r=this._renderer.gl;if(t&mt.COLOR){i!=null||(i=s.defaultClearColor);let o=this._clearColorCache,d=i;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3])&&(o[0]=d[0],o[1]=d[1],o[2]=d[2],o[3]=d[3],r.clearColor(d[0],d[1],d[2],d[3]))}r.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let i=this._renderer,s=i.gl,r=s.createFramebuffer();if(t.resolveTargetFramebuffer=r,s.bindFramebuffer(s.FRAMEBUFFER,r),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((o,d)=>{let h=o.source;h.antialias&&(i.context.supports.msaa?t.msaa=!0:Qt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(h,0);let l=i.texture.getGlSource(h).texture;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+d,3553,l,0)}),t.msaa){let o=s.createFramebuffer();t.framebuffer=o,s.bindFramebuffer(s.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let l=s.createRenderbuffer();t.msaaRenderBuffer[h]=l})}else t.framebuffer=r;this._resizeColor(e,t)}_resizeColor(e,t){let i=e.colorTexture.source;if(t.width=i.pixelWidth,t.height=i.pixelHeight,e.colorTextures.forEach((s,r)=>{r!==0&&s.source.resize(i.width,i.height,i._resolution)}),t.msaa){let s=this._renderer,r=s.gl,o=t.framebuffer;r.bindFramebuffer(r.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let l=d.source;s.texture.bindSource(l,0);let u=s.texture.getGlSource(l).internalFormat,p=t.msaaRenderBuffer[h];r.bindRenderbuffer(r.RENDERBUFFER,p),r.renderbufferStorageMultisample(r.RENDERBUFFER,4,u,l.pixelWidth,l.pixelHeight),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,r.RENDERBUFFER,p)})}}_initStencil(e){if(e.framebuffer===null)return;let t=this._renderer.gl,i=t.createRenderbuffer();e.depthStencilRenderBuffer=i,t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&Kt.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&Kt.test(e.colorTexture.resource)){let t=this._renderer.context.canvas,i=e.colorTexture;i.context2D.drawImage(t,0,i.pixelHeight-t.height)}}};function cx(a,e,t,i,s,r){let o=r?1:-1;return a.identity(),a.a=1/i*2,a.d=o*(1/s*2),a.tx=-1-e*a.a,a.ty=-o-t*a.d,a}var dx=Object.defineProperty,o1=Object.getOwnPropertySymbols,hx=Object.prototype.hasOwnProperty,lx=Object.prototype.propertyIsEnumerable,c1=(a,e,t)=>e in a?dx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fx=(a,e)=>{for(var t in e||(e={}))hx.call(e,t)&&c1(a,t,e[t]);if(o1)for(var t of o1(e))lx.call(e,t)&&c1(a,t,e[t]);return a},us=new Map;function P3(a,e){if(!us.has(a)){let t=new K({source:new Kt(fx({resource:a},e))}),i=()=>{us.get(a)===t&&us.delete(a)};t.once("destroy",i),t.source.once("destroy",i),us.set(a,t)}return us.get(a)}function ux(a){let e=a.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var bx=Object.defineProperty,d1=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,h1=(a,e,t)=>e in a?bx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,l1=(a,e)=>{for(var t in e||(e={}))px.call(e,t)&&h1(a,t,e[t]);if(d1)for(var t of d1(e))gx.call(e,t)&&h1(a,t,e[t]);return a},R3=class M3{constructor(e={}){if(this.uid=Ge("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e=l1(l1({},M3.defaultOptions),e),this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new Be({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(i=>i.source)];let t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof K||e.depthStencilTexture instanceof Be?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Be({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,i=this.resolution,s=!1){this.dirtyId++,this.colorTextures.forEach((r,o)=>{s&&o===0||r.source.resize(e,t,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};R3.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};var Vh=R3,Zn=class{constructor(e){this.rootViewPort=new Ae,this.viewport=new Ae,this.onRenderTargetChange=new Sn("onRenderTargetChange"),this.projectionMatrix=new ie,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:i,frame:s}){var r,o;this._renderTargetStack.length=0,this.push(e,t,i,s),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=ux(this.rootRenderTarget),(o=(r=this.adaptor).prerender)==null||o.call(r,this.rootRenderTarget)}postrender(){var e,t;(t=(e=this.adaptor).postrender)==null||t.call(e,this.rootRenderTarget)}bind(e,t=!0,i,s){let r=this.getRenderTarget(e),o=this.renderTarget!==r;this.renderTarget=r,this.renderSurface=e;let d=this.getGpuRenderTarget(r);(r.pixelWidth!==d.width||r.pixelHeight!==d.height)&&(this.adaptor.resizeGpuRenderTarget(r),d.width=r.pixelWidth,d.height=r.pixelHeight);let h=r.colorTexture,l=this.viewport,u=h.pixelWidth,p=h.pixelHeight;if(!s&&e instanceof K&&(s=e.frame),s){let y=h._resolution;l.x=s.x*y+.5|0,l.y=s.y*y+.5|0,l.width=s.width*y+.5|0,l.height=s.height*y+.5|0}else l.x=0,l.y=0,l.width=u,l.height=p;return cx(this.projectionMatrix,0,0,l.width/h.resolution,l.height/h.resolution,!r.isRoot),this.adaptor.startRenderPass(r,t,i,l),o&&this.onRenderTargetChange.emit(r),r}clear(e,t=mt.ALL,i){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=mt.ALL,i,s){let r=this.bind(e,t,i,s);return this._renderTargetStack.push({renderTarget:r,frame:s}),r}pop(){this._renderTargetStack.pop();let e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){var t;return e.isTexture&&(e=e.source),(t=this._renderSurfaceToRenderTargetHash.get(e))!=null?t:this._initRenderTarget(e)}copyToTexture(e,t,i,s,r){i.x<0&&(s.width+=i.x,r.x-=i.x,i.x=0),i.y<0&&(s.height+=i.y,r.y-=i.y,i.y=0);let{pixelWidth:o,pixelHeight:d}=e;return s.width=Math.min(s.width,o-i.x),s.height=Math.min(s.height,d-i.y),this.adaptor.copyToTexture(e,t,i,s,r)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return Kt.test(e)&&(e=P3(e).source),e instanceof Vh?t=e:e instanceof Be&&(t=new Vh({colorTextures:[e]}),Kt.test(e.source.resource)&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);let i=this._gpuRenderTargetHash[t.uid];i&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}},Qn=class extends Zn{constructor(e){super(e),this.adaptor=new zh,this.adaptor.init(e,this)}};Qn.extension={type:[G.WebGLSystem],name:"renderTarget"};var Ns=class extends xt{constructor({buffer:e,offset:t,size:i}){super(),this.uid=Ge("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Ge("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Ge("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}};function mx(a,e){let t=[],i=[`
var g = s.groups;
var sS = r.shader;
var p = s.glProgram;
var ugS = r.uniformGroup;
var resources;
`],s=!1,r=0,o=e._getProgramData(a.glProgram);for(let h in a.groups){let l=a.groups[h];t.push(`
resources = g[${h}].resources;
`);for(let u in l.resources){let p=l.resources[u];if(p instanceof et)if(p.ubo){let y=a._uniformBindMap[h][Number(u)];t.push(`
    sS.bindUniformBlock(
        resources[${u}],
        '${y}',
        ${a.glProgram._uniformBlockData[y].index}
    );
`)}else t.push(`
    ugS.updateUniformGroup(resources[${u}], p, sD);
`);else if(p instanceof Ns){let y=a._uniformBindMap[h][Number(u)];t.push(`
sS.bindUniformBlock(
    resources[${u}],
    '${y}',
    ${a.glProgram._uniformBlockData[y].index}
);
`)}else if(p instanceof Be){let y=a._uniformBindMap[h][u],_=o.uniformData[y];_&&(s||(s=!0,i.push(`
    var tS = r.texture;
    `)),e._gl.uniform1i(_.location,r),t.push(`
    tS.bind(resources[${u}], ${r});
`),r++)}}}let d=[...i,...t].join(`
`);return new Function("r","s","sD",d)}var Wh=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}};function f1(a,e,t){let i=a.createShader(e);return a.shaderSource(i,t),a.compileShader(i),i}function md(a){let e=new Array(a);for(let t=0;t<e.length;t++)e[t]=!1;return e}function C3(a,e){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return md(2*e);case"bvec3":return md(3*e);case"bvec4":return md(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Or=null,u1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},_x={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function O3(a,e){if(!Or){let t=Object.keys(u1);Or={};for(let i=0;i<t.length;++i){let s=t[i];Or[a[s]]=u1[s]}}return Or[e]}function yx(a,e){let t=O3(a,e);return _x[t]||"float32"}function xx(a,e,t=!1){let i={},s=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){let d=e.getActiveAttrib(a,o);if(d.name.startsWith("gl_"))continue;let h=yx(e,d.type);i[d.name]={location:0,format:h,stride:Ca(h).stride,offset:0,instance:!1,start:0}}let r=Object.keys(i);if(t){r.sort((o,d)=>o>d?1:-1);for(let o=0;o<r.length;o++)i[r[o]].location=o,e.bindAttribLocation(a,o,r[o]);e.linkProgram(a)}else for(let o=0;o<r.length;o++)i[r[o]].location=e.getAttribLocation(a,r[o]);return i}function vx(a,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORM_BLOCKS);for(let s=0;s<i;s++){let r=e.getActiveUniformBlockName(a,s),o=e.getUniformBlockIndex(a,r),d=e.getActiveUniformBlockParameter(a,s,e.UNIFORM_BLOCK_DATA_SIZE);t[r]={name:r,index:o,size:d}}return t}function Tx(a,e){let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){let r=e.getActiveUniform(a,s),o=r.name.replace(/\[.*?\]$/,""),d=!!r.name.match(/\[.*?\]$/),h=O3(e,r.type);t[o]={name:o,index:s,type:h,size:r.size,isArray:d,value:C3(h,r.size)}}return t}function b1(a,e){let t=a.getShaderSource(e).split(`
`).map((l,u)=>`${u}: ${l}`),i=a.getShaderInfoLog(e),s=i.split(`
`),r={},o=s.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!r[l]?(r[l]=!0,!0):!1),d=[""];o.forEach(l=>{t[l-1]=`%c${t[l-1]}%c`,d.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let h=t.join(`
`);d[0]=h}function Sx(a,e,t,i){a.getProgramParameter(e,a.LINK_STATUS)||(a.getShaderParameter(t,a.COMPILE_STATUS)||b1(a,t),a.getShaderParameter(i,a.COMPILE_STATUS)||b1(a,i),a.getProgramInfoLog(e))}function wx(a,e){let t=f1(a,a.VERTEX_SHADER,e.vertex),i=f1(a,a.FRAGMENT_SHADER,e.fragment),s=a.createProgram();a.attachShader(s,t),a.attachShader(s,i);let r=e.transformFeedbackVaryings;r&&(typeof a.transformFeedbackVaryings!="function"||a.transformFeedbackVaryings(s,r.names,r.bufferMode==="separate"?a.SEPARATE_ATTRIBS:a.INTERLEAVED_ATTRIBS)),a.linkProgram(s),a.getProgramParameter(s,a.LINK_STATUS)||Sx(a,s,t,i),e._attributeData=xx(s,a,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=Tx(s,a),e._uniformBlockData=vx(s,a),a.deleteShader(t),a.deleteShader(i);let o={};for(let d in e._uniformData){let h=e._uniformData[d];o[d]={location:a.getUniformLocation(s,d),value:C3(h.type,h.size)}}return new Wh(s,o)}var Ir={textureCount:0,blockIndex:0},Jn=class{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=Ci()}bind(e,t){if(this._setProgram(e.glProgram),t)return;Ir.textureCount=0,Ir.blockIndex=0;let i=this._shaderSyncFunctions[e.glProgram._key];i||(i=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),i(this._renderer,e,Ir)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Ir)}bindUniformBlock(e,t,i=0){let s=this._renderer.buffer,r=this._getProgramData(this._activeProgram),o=e._bufferResource;o||this._renderer.ubo.updateUniformGroup(e);let d=e.buffer,h=s.updateBuffer(d),l=s.freeLocationForBufferBase(h);if(o){let{offset:p,size:y}=e;p===0&&y===d.data.byteLength?s.bindBufferBase(h,l):s.bindBufferRange(h,l,p)}else s.getLastBindBaseLocation(h)!==l&&s.bindBufferBase(h,l);let u=this._activeProgram._uniformBlockData[t].index;r.uniformBlockBindings[i]!==l&&(r.uniformBlockBindings[i]=l,this._renderer.gl.uniformBlockBinding(r.program,u,l))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=wx(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,t){return mx(e,t)}resetState(){this._activeProgram=null}};Jn.extension={type:[G.WebGLSystem],name:"shader"};var Ax={f32:`if (cv !== v) {
cu.value = v;
gl.uniform1f(location, v);
}`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2f(location, v[0], v[1]);
}`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3f(location, v[0], v[1], v[2]);
}`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4f(location, v[0], v[1], v[2], v[3]);
}`,i32:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,u32:`if (cv !== v) {
cu.value = v;
gl.uniform1ui(location, v);
}`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2ui(location, v[0], v[1]);
}`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3ui(location, v[0], v[1], v[2]);
}`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
}`,bool:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},Ex={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function Px(a,e){let t=[`
var v = null;
var cv = null;
var cu = null;
var t = 0;
var gl = renderer.gl;
var name = null;
`];for(let i in a.uniforms){if(!e[i]){a.uniforms[i]instanceof et?a.uniforms[i].ubo?t.push(`
    renderer.shader.bindUniformBlock(uv.${i}, "${i}");
`):t.push(`
    renderer.shader.updateUniformGroup(uv.${i});
`):a.uniforms[i]instanceof Ns&&t.push(`
    renderer.shader.bindBufferResource(uv.${i}, "${i}");
`);continue}let s=a.uniformStructures[i],r=!1;for(let o=0;o<Ya.length;o++){let d=Ya[o];if(s.type===d.type&&d.test(s)){t.push(`name = "${i}";`,Ya[o].uniform),r=!0;break}}if(!r){let o=(s.size===1?Ax:Ex)[s.type].replace("location",`ud["${i}"].location`);t.push(`
cu = ud["${i}"];
cv = cu.value;
v = uv["${i}"];
${o};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var eo=class{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,i){let s=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==s.uniformDirtyGroups[e.uid])&&(s.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(s.uniformData,e.uniforms,this._renderer,i))}_getUniformSyncFunction(e,t){var i;return((i=this._uniformGroupSyncHash[e._signature])==null?void 0:i[t._key])||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let i=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),s=this._getSignature(e,t._uniformData,"u");return this._cache[s]||(this._cache[s]=this._generateUniformsSync(e,t._uniformData)),i[t._key]=this._cache[s],i[t._key]}_generateUniformsSync(e,t){return Px(e,t)}_getSignature(e,t,i){let s=e.uniforms,r=[`${i}-`];for(let o in s)r.push(o),t[o]&&r.push(t[o].type);return r.join("-")}destroy(){this._renderer=null,this._cache=null}};eo.extension={type:[G.WebGLSystem],name:"uniformGroup"};function Rx(a){let e={};if(e.normal=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e.add=[a.ONE,a.ONE],e.multiply=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.screen=[a.ONE,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[a.SRC_ALPHA,a.ONE,a.ONE,a.ONE],e["screen-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.erase=[a.ZERO,a.ONE_MINUS_SRC_ALPHA],!(a instanceof xe.get().getWebGLRenderingContext()))e.min=[a.ONE,a.ONE,a.ONE,a.ONE,a.MIN,a.MIN],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,a.MAX,a.MAX];else{let t=a.getExtension("EXT_blend_minmax");t&&(e.min=[a.ONE,a.ONE,a.ONE,a.ONE,t.MIN_EXT,t.MIN_EXT],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,t.MAX_EXT,t.MAX_EXT])}return e}var Mx=0,Cx=1,Ox=2,Ix=3,Gx=4,Bx=5,I3=class Yh{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Mx]=this.setBlend,this.map[Cx]=this.setOffset,this.map[Ox]=this.setCullFace,this.map[Ix]=this.setDepthTest,this.map[Gx]=this.setFrontFace,this.map[Bx]=this.setDepthMask,this.checks=[],this.defaultState=Pt.for2d()}contextChange(e){this.gl=e,this.blendModesMap=Rx(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(Yh._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(Yh._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){let i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};I3.extension={type:[G.WebGLSystem],name:"state"};var Fx=I3,$h=class{constructor(e){this.target=T3.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=Te.UNSIGNED_BYTE,this.internalFormat=jh.RGBA,this.format=jh.RGBA,this.samplerType=0}},Dx={id:"buffer",upload(a,e,t){e.width===a.width||e.height===a.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,a.width,a.height,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,a.width,a.height,0,e.format,e.type,a.resource),e.width=a.width,e.height=a.height}},kx={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Ux={id:"compressed",upload(a,e,t){t.pixelStorei(t.UNPACK_ALIGNMENT,4);let i=a.pixelWidth,s=a.pixelHeight,r=!!kx[a.format];for(let o=0;o<a.resource.length;o++){let d=a.resource[o];r?t.compressedTexImage2D(t.TEXTURE_2D,o,e.internalFormat,i,s,0,d):t.texImage2D(t.TEXTURE_2D,o,e.internalFormat,i,s,0,e.format,e.type,d),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},G3={id:"image",upload(a,e,t,i){let s=e.width,r=e.height,o=a.pixelWidth,d=a.pixelHeight,h=a.resourceWidth,l=a.resourceHeight;h<o||l<d?((s!==o||r!==d)&&t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,null),i===2?t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,l,e.format,e.type,a.resource):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource)):s===o&&r===d?t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource):i===2?t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,e.format,e.type,a.resource),e.width=o,e.height=d}},Lx={id:"video",upload(a,e,t,i){if(!a.isValid){t.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}G3.upload(a,e,t,i)}},p1={linear:9729,nearest:9728},Nx={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},_d={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},jx={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function g1(a,e,t,i,s,r,o,d){let h=r;if(!d||a.addressModeU!=="repeat"||a.addressModeV!=="repeat"||a.addressModeW!=="repeat"){let l=_d[o?"clamp-to-edge":a.addressModeU],u=_d[o?"clamp-to-edge":a.addressModeV],p=_d[o?"clamp-to-edge":a.addressModeW];e[s](h,e.TEXTURE_WRAP_S,l),e[s](h,e.TEXTURE_WRAP_T,u),e.TEXTURE_WRAP_R&&e[s](h,e.TEXTURE_WRAP_R,p)}if((!d||a.magFilter!=="linear")&&e[s](h,e.TEXTURE_MAG_FILTER,p1[a.magFilter]),t){if(!d||a.mipmapFilter!=="linear"){let l=Nx[a.minFilter][a.mipmapFilter];e[s](h,e.TEXTURE_MIN_FILTER,l)}}else e[s](h,e.TEXTURE_MIN_FILTER,p1[a.minFilter]);if(i&&a.maxAnisotropy>1){let l=Math.min(a.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[s](h,i.TEXTURE_MAX_ANISOTROPY_EXT,l)}a.compare&&e[s](h,e.TEXTURE_COMPARE_FUNC,jx[a.compare])}function Xx(a){return{r8unorm:a.RED,r8snorm:a.RED,r8uint:a.RED,r8sint:a.RED,r16uint:a.RED,r16sint:a.RED,r16float:a.RED,rg8unorm:a.RG,rg8snorm:a.RG,rg8uint:a.RG,rg8sint:a.RG,r32uint:a.RED,r32sint:a.RED,r32float:a.RED,rg16uint:a.RG,rg16sint:a.RG,rg16float:a.RG,rgba8unorm:a.RGBA,"rgba8unorm-srgb":a.RGBA,rgba8snorm:a.RGBA,rgba8uint:a.RGBA,rgba8sint:a.RGBA,bgra8unorm:a.RGBA,"bgra8unorm-srgb":a.RGBA,rgb9e5ufloat:a.RGB,rgb10a2unorm:a.RGBA,rg11b10ufloat:a.RGB,rg32uint:a.RG,rg32sint:a.RG,rg32float:a.RG,rgba16uint:a.RGBA,rgba16sint:a.RGBA,rgba16float:a.RGBA,rgba32uint:a.RGBA,rgba32sint:a.RGBA,rgba32float:a.RGBA,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT,depth24plus:a.DEPTH_COMPONENT,"depth24plus-stencil8":a.DEPTH_STENCIL,depth32float:a.DEPTH_COMPONENT,"depth32float-stencil8":a.DEPTH_STENCIL}}var Hx=Object.defineProperty,zx=Object.defineProperties,Vx=Object.getOwnPropertyDescriptors,m1=Object.getOwnPropertySymbols,Wx=Object.prototype.hasOwnProperty,Yx=Object.prototype.propertyIsEnumerable,_1=(a,e,t)=>e in a?Hx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,La=(a,e)=>{for(var t in e||(e={}))Wx.call(e,t)&&_1(a,t,e[t]);if(m1)for(var t of m1(e))Yx.call(e,t)&&_1(a,t,e[t]);return a},$x=(a,e)=>zx(a,Vx(e));function Kx(a,e){let t={},i=a.RGBA;return a instanceof xe.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":a.SRGB8_ALPHA8,"bgra8unorm-srgb":a.SRGB8_ALPHA8},i=a.RGBA8),La(La(La(La(La(La($x(La({r8unorm:a.R8,r8snorm:a.R8_SNORM,r8uint:a.R8UI,r8sint:a.R8I,r16uint:a.R16UI,r16sint:a.R16I,r16float:a.R16F,rg8unorm:a.RG8,rg8snorm:a.RG8_SNORM,rg8uint:a.RG8UI,rg8sint:a.RG8I,r32uint:a.R32UI,r32sint:a.R32I,r32float:a.R32F,rg16uint:a.RG16UI,rg16sint:a.RG16I,rg16float:a.RG16F,rgba8unorm:a.RGBA},t),{rgba8snorm:a.RGBA8_SNORM,rgba8uint:a.RGBA8UI,rgba8sint:a.RGBA8I,bgra8unorm:i,rgb9e5ufloat:a.RGB9_E5,rgb10a2unorm:a.RGB10_A2,rg11b10ufloat:a.R11F_G11F_B10F,rg32uint:a.RG32UI,rg32sint:a.RG32I,rg32float:a.RG32F,rgba16uint:a.RGBA16UI,rgba16sint:a.RGBA16I,rgba16float:a.RGBA16F,rgba32uint:a.RGBA32UI,rgba32sint:a.RGBA32I,rgba32float:a.RGBA32F,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT16,depth24plus:a.DEPTH_COMPONENT24,"depth24plus-stencil8":a.DEPTH24_STENCIL8,depth32float:a.DEPTH_COMPONENT32F,"depth32float-stencil8":a.DEPTH32F_STENCIL8}),e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{}),e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{}),e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{}),e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{}),e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{}),e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{})}function qx(a){return{r8unorm:a.UNSIGNED_BYTE,r8snorm:a.BYTE,r8uint:a.UNSIGNED_BYTE,r8sint:a.BYTE,r16uint:a.UNSIGNED_SHORT,r16sint:a.SHORT,r16float:a.HALF_FLOAT,rg8unorm:a.UNSIGNED_BYTE,rg8snorm:a.BYTE,rg8uint:a.UNSIGNED_BYTE,rg8sint:a.BYTE,r32uint:a.UNSIGNED_INT,r32sint:a.INT,r32float:a.FLOAT,rg16uint:a.UNSIGNED_SHORT,rg16sint:a.SHORT,rg16float:a.HALF_FLOAT,rgba8unorm:a.UNSIGNED_BYTE,"rgba8unorm-srgb":a.UNSIGNED_BYTE,rgba8snorm:a.BYTE,rgba8uint:a.UNSIGNED_BYTE,rgba8sint:a.BYTE,bgra8unorm:a.UNSIGNED_BYTE,"bgra8unorm-srgb":a.UNSIGNED_BYTE,rgb9e5ufloat:a.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:a.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:a.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:a.UNSIGNED_INT,rg32sint:a.INT,rg32float:a.FLOAT,rgba16uint:a.UNSIGNED_SHORT,rgba16sint:a.SHORT,rgba16float:a.HALF_FLOAT,rgba32uint:a.UNSIGNED_INT,rgba32sint:a.INT,rgba32float:a.FLOAT,stencil8:a.UNSIGNED_BYTE,depth16unorm:a.UNSIGNED_SHORT,depth24plus:a.UNSIGNED_INT,"depth24plus-stencil8":a.UNSIGNED_INT_24_8,depth32float:a.FLOAT,"depth32float-stencil8":a.FLOAT_32_UNSIGNED_INT_24_8_REV}}var Zx=4,to=class{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:G3,buffer:Dx,video:Lx,compressed:Ux},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=Kx(e,this._renderer.context.extensions),this._mapFormatToType=qx(e),this._mapFormatToFormat=Xx(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(K.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){let i=e.source;e?(this.bindSource(i,t),this._useSeparateSamplers&&this._bindSampler(i.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let i=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=K.EMPTY.source);let s=this.getGlSource(e);i.bindTexture(s.target,s.texture)}}_bindSampler(e,t=0){let i=this._gl;if(!e){this._boundSamplers[t]=null,i.bindSampler(t,null);return}let s=this._getGlSampler(e);this._boundSamplers[t]!==s&&(this._boundSamplers[t]=s,i.bindSampler(t,s))}unbind(e){let t=e.source,i=this._boundTextures,s=this._gl;for(let r=0;r<i.length;r++)if(i[r]===t){this._activateLocation(r);let o=this.getGlSource(t);s.bindTexture(o.target,null),i[r]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,i=new $h(t.createTexture());if(i.type=this._mapFormatToType[e.format],i.internalFormat=this._mapFormatToInternalFormat[e.format],i.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let s=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(s))+1}return this._glTextures[e.uid]=i,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),i}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let i=this._gl,s=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,s.texture),this._boundTextures[this._activeTextureLocation]=e,g1(e.style,i,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e){let t=this._glTextures[e.uid];t&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(t.texture))}onSourceUpdate(e){let t=this._gl,i=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e;let s=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==s&&(this._premultiplyAlpha=s,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,i,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.pixelWidth,e.pixelHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let i=this.getGlSource(e);this._gl.generateMipmap(i.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){let t=this._gl,i=this._gl.createSampler();return this._glSamplers[e._resourceId]=i,g1(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:i,height:s}=this.getPixels(e),r=xe.get().createCanvas();r.width=i,r.height=s;let o=r.getContext("2d");if(o){let d=o.createImageData(i,s);d.data.set(t),o.putImageData(d,0,0)}return r}getPixels(e){let t=e.source.resolution,i=e.frame,s=Math.max(Math.round(i.width*t),1),r=Math.max(Math.round(i.height*t),1),o=new Uint8Array(Zx*s*r),d=this._renderer,h=d.renderTarget.getRenderTarget(e),l=d.renderTarget.getGpuRenderTarget(h),u=d.gl;return u.bindFramebuffer(u.FRAMEBUFFER,l.resolveTargetFramebuffer),u.readPixels(Math.round(i.x*t),Math.round(i.y*t),s,r,u.RGBA,u.UNSIGNED_BYTE,o),{pixels:new Uint8ClampedArray(o.buffer),width:s,height:r}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(K.EMPTY.source),this._boundSamplers=Object.create(null)}};to.extension={type:[G.WebGLSystem],name:"texture"};var ao=class{init(){let e=new et({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),t=Ci(),i=zs({name:"graphics",bits:[yl,vl(t),Al,Ws]});this.shader=new ht({glProgram:i,resources:{localUniforms:e,batchSamplers:Tl(t)}})}execute(e,t){let i=t.context,s=i.customShader||this.shader,r=e.renderer,o=r.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i);s.groups[0]=r.globalUniforms.bindGroup,r.state.set(e.state),r.shader.bind(s),r.geometry.bind(d.geometry,s.glProgram);let l=h.instructions;for(let u=0;u<h.instructionSize;u++){let p=l[u];if(p.size){for(let y=0;y<p.textures.count;y++)r.texture.bind(p.textures.textures[y],y);r.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};ao.extension={type:[G.WebGLPipesAdaptor],name:"graphics"};var io=class{init(){let e=zs({name:"mesh",bits:[Al,Gy,Ws]});this._shader=new ht({glProgram:e,resources:{uTexture:K.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,s=t._shader;if(s){if(!s.glProgram)return}else{s=this._shader;let r=t.texture,o=r.source;s.resources.uTexture=o,s.resources.uSampler=o.style,s.resources.textureUniforms.uniforms.uTextureMatrix=r.textureMatrix.mapCoord}s.groups[100]=i.globalUniforms.bindGroup,s.groups[101]=e.localUniformsBindGroup,i.encoder.draw({geometry:t._geometry,shader:s,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};io.extension={type:[G.WebGLPipesAdaptor],name:"mesh"};var so=class{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}};so.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"customRender"};function Kh(a,e){let t=a.instructionSet,i=t.instructions;for(let s=0;s<t.instructionSize;s++){let r=i[s];e[r.renderPipeId].execute(r)}}var Qx=new ie,ro=class{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(ye.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){var i;let s=(i=e._batchableRenderGroup)!=null?i:e._batchableRenderGroup=ye.get(Ei);s.renderable=e.root,s.transform=e.root.relativeGroupTransform,s.texture=e.texture,s.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.batch.addToBatch(s,t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;let t=Qx.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295}),Kh(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Kh(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}};ro.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"renderGroup"};function qh(a,e){e||(e=0);for(let t=e;t<a.length&&a[t];t++)a[t]=null}var Jx=new he,y1=ys|Hr|gl;function B3(a,e=!1){ev(a);let t=a.childrenToUpdate,i=a.updateTick++;for(let s in t){let r=Number(s),o=t[s],d=o.list,h=o.index;for(let l=0;l<h;l++){let u=d[l];u.parentRenderGroup===a&&u.relativeRenderGroupDepth===r&&F3(u,i,0)}qh(d,h),o.index=0}if(e)for(let s=0;s<a.renderGroupChildren.length;s++)B3(a.renderGroupChildren[s],e)}function ev(a){let e=a.root,t;if(a.renderGroupParent){let i=a.renderGroupParent;a.worldTransform.appendFrom(e.relativeGroupTransform,i.worldTransform),a.worldColor=Nr(e.groupColor,i.worldColor),t=e.groupAlpha*i.worldAlpha}else a.worldTransform.copyFrom(e.localTransform),a.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,a.worldAlpha=t,a.worldColorAlpha=a.worldColor+((t*255|0)<<24)}function F3(a,e,t){if(e===a.updateTick)return;a.updateTick=e,a.didChange=!1;let i=a.localTransform;a.updateLocalTransform();let s=a.parent;if(s&&!s.renderGroup?(t|=a._updateFlags,a.relativeGroupTransform.appendFrom(i,s.relativeGroupTransform),t&y1&&x1(a,s,t)):(t=a._updateFlags,a.relativeGroupTransform.copyFrom(i),t&y1&&x1(a,Jx,t)),!a.renderGroup){let r=a.children,o=r.length;for(let l=0;l<o;l++)F3(r[l],e,t);let d=a.parentRenderGroup,h=a;h.renderPipeId&&!d.structureDidChange&&d.updateRenderable(h)}}function x1(a,e,t){if(t&Hr){a.groupColor=Nr(a.localColor,e.groupColor);let i=a.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,a.groupAlpha=i,a.groupColorAlpha=a.groupColor+((i*255|0)<<24)}t&gl&&(a.groupBlendMode=a.localBlendMode==="inherit"?e.groupBlendMode:a.localBlendMode),t&ys&&(a.globalDisplayStatus=a.localDisplayStatus&e.globalDisplayStatus),a._updateFlags=0}function tv(a,e){let{list:t,index:i}=a.childrenRenderablesToUpdate,s=!1;for(let r=0;r<i;r++){let o=t[r];if(s=e[o.renderPipeId].validateRenderable(o),s)break}return a.structureDidChange=s,s}var av=new ie,no=class{constructor(e){this._renderer=e}render({container:e,transform:t}){let i=e.parent,s=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;let r=this._renderer,o=av;t&&(o=o.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));let d=r.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),r.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Kh(e.renderGroup,d),d.uniformBatch&&d.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(o),e.parent=i,e.renderGroup.renderGroupParent=s}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){var i;if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;t=e}e._parentCacheAsTextureRenderGroup=t;for(let s=e.renderGroupChildren.length-1;s>=0;s--)this._updateCachedRenderGroups(e.renderGroupChildren[s],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){let s=e.root.getLocalBounds();s.ceil();let r=e.texture;e.texture&&Ve.returnTexture(e.texture);let o=this._renderer,d=e.textureOptions.resolution||o.view.resolution,h=(i=e.textureOptions.antialias)!=null?i:o.view.antialias;e.texture=Ve.getOptimalTexture(s.width,s.height,d,h),e._textureBounds||(e._textureBounds=new Ze),e._textureBounds.copyFrom(s),r!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(Ve.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){let t=this._renderer,i=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=i,e.structureDidChange?qh(e.childrenRenderablesToUpdate.list,0):tv(e,i),B3(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let s=0;s<e.renderGroupChildren.length;s++)this._updateRenderGroups(e.renderGroupChildren[s])}_updateRenderables(e){let{list:t,index:i}=e.childrenRenderablesToUpdate;for(let s=0;s<i;s++){let r=t[s];r.didViewUpdate&&e.updateRenderable(r)}qh(t,i)}_buildInstructions(e,t){let i=e.root,s=e.instructionSet;s.reset();let r=t.renderPipes?t:t.batch.renderer,o=r.renderPipes;o.batch.buildStart(s),o.blendMode.buildStart(),o.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(s,r,null),o.batch.buildEnd(s),o.blendMode.buildEnd(s)}};no.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"renderGroup"};var oo=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(Ei);return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)ye.return(this._gpuSpriteHash[e]);this._gpuSpriteHash=null,this._renderer=null}};oo.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"sprite"};var iv=Object.defineProperty,v1=Object.getOwnPropertySymbols,sv=Object.prototype.hasOwnProperty,rv=Object.prototype.propertyIsEnumerable,T1=(a,e,t)=>e in a?iv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,S1=(a,e)=>{for(var t in e||(e={}))sv.call(e,t)&&T1(a,t,e[t]);if(v1)for(var t of v1(e))rv.call(e,t)&&T1(a,t,e[t]);return a},Zh=class D3{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new we(0),this.color=this._backgroundColor,this.alpha=1}init(e){e=S1(S1({},D3.defaultOptions),e),this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Zh.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"background",priority:0},Zh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};var nv=Zh,As={};be.handle(G.BlendMode,a=>{if(!a.name)throw new Error("BlendMode extension must have a name property");As[a.name]=a.ref},a=>{delete As[a.name]});var co=class{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,t,i){if(this._activeBlendMode===t){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=t,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!As[t],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);let t=this._activeBlendMode;if(!As[t])return;let i=this._filterHash[t];i||(i=this._filterHash[t]=new Si,i.filters=[new As[t]]);let s={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=s.renderables,e.add(s)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(let e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}};co.extension={type:[G.WebGLPipes,G.WebGPUPipes,G.CanvasPipes],name:"blendMode"};var ov=Object.defineProperty,w1=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,dv=Object.prototype.propertyIsEnumerable,A1=(a,e,t)=>e in a?ov(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yd=(a,e)=>{for(var t in e||(e={}))cv.call(e,t)&&A1(a,t,e[t]);if(w1)for(var t of w1(e))dv.call(e,t)&&A1(a,t,e[t]);return a},xd={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},Qh=class k3{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof he||e instanceof K?yd({target:e},t):yd(yd({},t),e)}async image(e){let t=new Image;return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,k3.defaultImageOptions);let{format:t,quality:i}=e,s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((r,o)=>{s.toBlob(d=>{if(!d){o(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>r(h.result),h.onerror=o,h.readAsDataURL(d)},xd[t],i)});if(s.toDataURL!==void 0)return s.toDataURL(xd[t],i);if(s.convertToBlob!==void 0){let r=await s.convertToBlob({type:xd[t],quality:i});return new Promise((o,d)=>{let h=new FileReader;h.onload=()=>o(h.result),h.onerror=d,h.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer;if(t instanceof K)return i.texture.generateCanvas(t);let s=i.textureGenerator.generateTexture(e),r=i.texture.generateCanvas(s);return s.destroy(!0),r}pixels(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer,s=t instanceof K?t:i.textureGenerator.generateTexture(e),r=i.texture.getPixels(s);return t instanceof he&&s.destroy(!0),r}texture(e){return e=this._normalizeOptions(e),e.target instanceof K?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){var t;e=this._normalizeOptions(e);let i=this.canvas(e),s=document.createElement("a");s.download=(t=e.filename)!=null?t:"image.png",s.href=i.toDataURL("image/png"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}log(e){var t;let i=(t=e.width)!=null?t:200;e=this._normalizeOptions(e);let s=this.canvas(e),r=s.toDataURL(),o=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ")}destroy(){this._renderer=null}};Qh.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"extract"},Qh.defaultImageOptions={format:"png",quality:1};var hv=Qh,Jh=class a extends K{static create(e){return new a({source:new Be(e)})}resize(e,t,i){return this.source.resize(e,t,i),this}},lv=Object.defineProperty,fv=Object.defineProperties,uv=Object.getOwnPropertyDescriptors,E1=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,P1=(a,e,t)=>e in a?lv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gv=(a,e)=>{for(var t in e||(e={}))bv.call(e,t)&&P1(a,t,e[t]);if(E1)for(var t of E1(e))pv.call(e,t)&&P1(a,t,e[t]);return a},mv=(a,e)=>fv(a,uv(e)),_v=new Ae,yv=new Ze,xv=[0,0,0,0],ho=class{constructor(e){this._renderer=e}generateTexture(e){var t;e instanceof he&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});let i=e.resolution||this._renderer.resolution,s=e.antialias||this._renderer.view.antialias,r=e.target,o=e.clearColor;o?o=Array.isArray(o)&&o.length===4?o:we.shared.setValue(o).toArray():o=xv;let d=((t=e.frame)==null?void 0:t.copyTo(_v))||pl(r,yv).rectangle;d.width=Math.max(d.width,1/i)|0,d.height=Math.max(d.height,1/i)|0;let h=Jh.create(mv(gv({},e.textureSourceOptions),{width:d.width,height:d.height,resolution:i,antialias:s})),l=ie.shared.translate(-d.x,-d.y);return this._renderer.render({container:r,transform:l,target:h,clearColor:o}),h.source.updateMipmaps(),h}destroy(){this._renderer=null}};ho.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"textureGenerator"};var lo=class{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:i,worldColor:s,offset:r}){let o=this._renderer.renderTarget.renderTarget,d=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:o,worldTransformMatrix:new ie,worldColor:4294967295,offset:new Me},h={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||o.size,worldTransformMatrix:i||d.worldTransformMatrix,worldColor:s||d.worldColor,offset:r||d.offset,bindGroup:null},l=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(l);let u=l.uniforms;u.uProjectionMatrix=h.projectionMatrix,u.uResolution=h.resolution,u.uWorldTransformMatrix.copyFrom(h.worldTransformMatrix),u.uWorldTransformMatrix.tx-=h.offset.x,u.uWorldTransformMatrix.ty-=h.offset.y,Ys(h.worldColor,u.uWorldColorAlpha,0),l.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(l,!1):(p=this._bindGroupPool.pop()||new Ht,this._activeBindGroups.push(p),p.setResource(l,0)),h.bindGroup=p,this._currentGlobalUniformData=h}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===yt.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new et({uProjectionMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}};lo.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"globalUniforms"};var vv=1,fo=class{constructor(){this._tasks=[],this._offset=0}init(){at.system.add(this._update,this)}repeat(e,t,i=!0){let s=vv++,r=0;return i&&(this._offset+=1e3,r=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:r,last:performance.now(),repeat:!0,id:s}),s}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){let e=performance.now();for(let t=0;t<this._tasks.length;t++){let i=this._tasks[t];if(e-i.offset-i.last>=i.duration){let s=e-i.start;i.func(s),i.last=e}}}destroy(){at.system.remove(this._update,this),this._tasks.length=0}};fo.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"scheduler",priority:0};var R1=!1;function Tv(a){if(!R1){if(xe.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${wn} (${a}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${wn} - ${a} - http://www.pixijs.com/`);R1=!0}}var js=class{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===yt.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),Tv(t)}}};js.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"hello",priority:-2},js.defaultOptions={hello:!1};function Sv(a){let e=!1;for(let i in a)if(a[i]==null){e=!0;break}if(!e)return a;let t=Object.create(null);for(let i in a){let s=a[i];s&&(t[i]=s)}return t}function wv(a){let e=0;for(let t=0;t<a.length;t++)a[t]==null?e++:a[t-e]=a[t];return a.length-=e,a}var Av=Object.defineProperty,M1=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable,C1=(a,e,t)=>e in a?Av(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,O1=(a,e)=>{for(var t in e||(e={}))Ev.call(e,t)&&C1(a,t,e[t]);if(M1)for(var t of M1(e))Pv.call(e,t)&&C1(a,t,e[t]);return a},Rv=0,el=class U3{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e=O1(O1({},U3.defaultOptions),e),this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedHashes)t.context[t.hash]=Sv(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedArrays)wv(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=Rv++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var e,t,i,s;let r=this._now,o=this._managedRenderables,d=this._renderer.renderPipes,h=0;for(let l=0;l<o.length;l++){let u=o[l];if(u===null){h++;continue}let p=(e=u.renderGroup)!=null?e:u.parentRenderGroup,y=(i=(t=p?.instructionSet)==null?void 0:t.gcTick)!=null?i:-1;if(((s=p?.gcTick)!=null?s:0)===y&&(u._lastUsed=r),r-u._lastUsed>this.maxUnusedTime){if(!u.destroyed){let _=d;p&&(p.structureDidChange=!0),_[u.renderPipeId].destroyRenderable(u)}u._lastUsed=-1,h++,u.off("destroyed",this._removeRenderable,this)}else o[l-h]=u}o.length-=h}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let t=this._managedRenderables.indexOf(e);t>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let i of e.renderGroupChildren)this._updateInstructionGCTick(i,t)}};el.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"renderableGC",priority:0},el.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};var Mv=el,Cv=Object.defineProperty,I1=Object.getOwnPropertySymbols,Ov=Object.prototype.hasOwnProperty,Iv=Object.prototype.propertyIsEnumerable,G1=(a,e,t)=>e in a?Cv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,B1=(a,e)=>{for(var t in e||(e={}))Ov.call(e,t)&&G1(a,t,e[t]);if(I1)for(var t of I1(e))Iv.call(e,t)&&G1(a,t,e[t]);return a},tl=class L3{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){var t;e=B1(B1({},L3.defaultOptions),e),this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=(t=e.textureGCAMaxIdle)!=null?t:e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let t=0;t<e.length;t++){let i=e[t];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};tl.extension={type:[G.WebGLSystem,G.WebGPUSystem],name:"textureGC"},tl.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};var Gv=tl,Bv=Object.defineProperty,F1=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Dv=Object.prototype.propertyIsEnumerable,D1=(a,e,t)=>e in a?Bv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k1=(a,e)=>{for(var t in e||(e={}))Fv.call(e,t)&&D1(a,t,e[t]);if(F1)for(var t of F1(e))Dv.call(e,t)&&D1(a,t,e[t]);return a},al=class N3{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e=k1(k1({},N3.defaultOptions),e),e.view&&(e.canvas=e.view),this.screen=new Ae(0,0,e.width,e.height),this.canvas=e.canvas||xe.get().createCanvas(),this.antialias=!!e.antialias,this.texture=P3(this.canvas,e),this.renderTarget=new Vh({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,i){this.texture.source.resize(e,t,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e!=null&&e.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};al.extension={type:[G.WebGLSystem,G.WebGPUSystem,G.CanvasSystem],name:"view",priority:0},al.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};var kv=al,j3=[nv,lo,js,kv,no,Gv,ho,hv,En,Mv,fo],X3=[co,y3,oo,ro,jn,Hn,Xn,so],Uv=[...j3,qn,qy,jy,zn,to,Qn,Vn,eo,Jn,Yn,Fx,$n,Wn],Lv=[...X3],Nv=[Ln,io,ao],H3=[],z3=[],V3=[];be.handleByNamedList(G.WebGLSystem,H3),be.handleByNamedList(G.WebGLPipes,z3),be.handleByNamedList(G.WebGLPipesAdaptor,V3),be.add(...Uv,...Lv,...Nv);var il=class extends Do{constructor(){let e={name:"webgl",type:yt.WEBGL,systems:H3,renderPipes:z3,renderPipeAdaptors:V3};super(e)}},jv={__proto__:null,WebGLRenderer:il},uo=class{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,t,i){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,i)}_createBindGroup(e,t,i){var s;let r=this._gpu.device,o=t.layout[i],d=[],h=this._renderer;for(let p in o){let y=(s=e.resources[p])!=null?s:e.resources[o[p]],_;if(y._resourceType==="uniformGroup"){let v=y;h.ubo.updateUniformGroup(v);let T=v.buffer;_={buffer:h.buffer.getGPUBuffer(T),offset:0,size:T.descriptor.size}}else if(y._resourceType==="buffer"){let v=y;_={buffer:h.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(y._resourceType==="bufferResource"){let v=y;_={buffer:h.buffer.getGPUBuffer(v.buffer),offset:v.offset,size:v.size}}else if(y._resourceType==="textureSampler"){let v=y;_=h.texture.getGpuSampler(v)}else if(y._resourceType==="textureSource"){let v=y;_=h.texture.getGpuSource(v).createView({})}d.push({binding:o[p],resource:_})}let l=h.shader.getProgramData(t).bindGroups[i],u=r.createBindGroup({layout:l,entries:d});return this._hash[e._key]=u,u}destroy(){for(let e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}};uo.extension={type:[G.WebGPUSystem],name:"bindGroup"};var bo=class{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){let t=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),i=e.data;return e._updateID&&i&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,i.buffer,0,(e._updateSize||i.byteLength)+3&-4)),t}destroyAll(){for(let e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));let t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(Nd(e.data.buffer,t.getMappedRange()),t.unmap()),this._gpuBuffers[e.uid]=t,t}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}};bo.extension={type:[G.WebGPUSystem],name:"buffer"};var sl=class{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);let t=this.byteIndex,i=t+e*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,t}addGroup(e){let t=this.addEmptyGroup(e.length);for(let i=0;i<e.length;i++)this.data[t/4+i]=e[i];return t}destroy(){this.data=null}},po=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}};po.extension={type:[G.WebGPUSystem],name:"colorMask"};var Xs=class{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){let t=await xe.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(r=>t.features.has(r)),s=await t.requestDevice({requiredFeatures:i});return{adapter:t,device:s}}destroy(){this.gpu=null,this._renderer=null}};Xs.extension={type:[G.WebGPUSystem],name:"device"},Xs.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};var Xv=Object.defineProperty,U1=Object.getOwnPropertySymbols,Hv=Object.prototype.hasOwnProperty,zv=Object.prototype.propertyIsEnumerable,L1=(a,e,t)=>e in a?Xv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,N1=(a,e)=>{for(var t in e||(e={}))Hv.call(e,t)&&L1(a,t,e[t]);if(U1)for(var t of U1(e))zv.call(e,t)&&L1(a,t,e[t]);return a},go=class{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,i,s){let r=this._renderer.pipeline.getPipeline(e,t,i,s);this.setPipeline(r)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;let t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,i){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.textureGC.count);let s=this._renderer.bindGroup.getBindGroup(t,i,e);this.renderPassEncoder.setBindGroup(e,s)}setGeometry(e,t){let i=this._renderer.pipeline.getBufferNamesToBind(e,t);for(let s in i)this._setVertexBuffer(s,e.attributes[i[s]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(let i in e.groups){let s=e.groups[i];t||this._syncBindGroup(s),this.setBindGroup(i,s,e.gpuProgram)}}_syncBindGroup(e){for(let t in e.resources){let i=e.resources[t];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(e){let{geometry:t,shader:i,state:s,topology:r,size:o,start:d,instanceCount:h,skipSync:l}=e;this.setPipelineFromGeometryProgramAndState(t,i.gpuProgram,s,r),this.setGeometry(t,i.gpuProgram),this._setShaderBindGroups(i,l),t.indexBuffer?this.renderPassEncoder.drawIndexed(o||t.indexBuffer.data.length,h??t.instanceCount,d||0):this.renderPassEncoder.draw(o||t.getSize(),h??t.instanceCount,d||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);let t=this._boundPipeline,i=N1({},this._boundVertexBuffer),s=this._boundIndexBuffer,r=N1({},this._boundBindGroup);this._clearCache();let o=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(o.x,o.y,o.width,o.height,0,1),this.setPipeline(t);for(let d in i)this._setVertexBuffer(d,i[d]);for(let d in r)this.setBindGroup(d,r[d],null);this._setIndexBuffer(s)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}};go.extension={type:[G.WebGPUSystem],name:"encoder",priority:1};var mo=class{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Le.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=e,i.stencilReference=t;let s=this._renderer;s.pipeline.setStencilMode(e),s.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};mo.extension={type:[G.WebGPUSystem],name:"stencil"};var Lr={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Vv(a){let e=a.map(i=>({data:i,offset:0,size:0})),t=0;for(let i=0;i<e.length;i++){let s=e[i],r=Lr[s.data.type].size,o=Lr[s.data.type].align;if(!Lr[s.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${s.data.type}`);s.data.size>1&&(r=Math.max(r,o)*s.data.size),t=Math.ceil(t/o)*o,s.size=r,s.offset=t,t+=r}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function Wv(a,e){let{size:t,align:i}=Lr[a.data.type],s=(i-t)/4,r=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
${e!==0?`offset += ${e};`:""}

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*(t/4)}; i++)
{
for(var j = 0; j < ${t/4}; j++)
{
${r}[arrayOffset++] = v[t++];
}
${s!==0?`arrayOffset += ${s};`:""}
}
`}function Yv(a){return A3(a,"uboWgsl",Wv,rx)}var _o=class extends Kn{constructor(){super({createUboElements:Vv,generateUboSync:Yv})}};_o.extension={type:[G.WebGPUSystem],name:"ubo"};var Sa=128,yo=class{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new sl({minUniformOffsetAlignment:Sa});let t=256/Sa;for(let i=0;i<t;i++){let s=ve.UNIFORM|ve.COPY_DST;i===0&&(s|=ve.COPY_SRC),this._buffers.push(new rt({data:this._batchBuffer.data,usage:s}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);let i=e.buffer.data,s=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,s/4),this._bindGroupHash[e.uid]=this._getBindGroup(s/Sa),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);let t=e.buffer.data,i=this._batchBuffer.addGroup(t);return this._getBufferResource(i/Sa)}getArrayBindGroup(e){let t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Sa)}getArrayBufferResource(e){let t=this._batchBuffer.addGroup(e)/Sa;return this._getBufferResource(t)}_getBufferResource(e){if(!this._bufferResources[e]){let t=this._buffers[e%2];this._bufferResources[e]=new Ns({buffer:t,offset:(e/2|0)*256,size:Sa})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){let t=new Ht({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){let e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);let i=this._renderer.gpu.device.createCommandEncoder();for(let s=1;s<this._buffers.length;s++){let r=this._buffers[s];i.copyBufferToBuffer(e.getGPUBuffer(t),Sa,e.getGPUBuffer(r),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}};yo.extension={type:[G.WebGPUPipes],name:"uniformBatch"};var $v=Object.defineProperty,Kv=Object.defineProperties,qv=Object.getOwnPropertyDescriptors,j1=Object.getOwnPropertySymbols,Zv=Object.prototype.hasOwnProperty,Qv=Object.prototype.propertyIsEnumerable,X1=(a,e,t)=>e in a?$v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Jv=(a,e)=>{for(var t in e||(e={}))Zv.call(e,t)&&X1(a,t,e[t]);if(j1)for(var t of j1(e))Qv.call(e,t)&&X1(a,t,e[t]);return a},eT=(a,e)=>Kv(a,qv(e)),tT={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function aT(a,e,t,i,s){return a<<24|e<<16|t<<10|i<<5|s}function iT(a,e,t,i){return t<<6|a<<3|i<<1|e}var xo=class{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(Le.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=wa[e],this._updatePipeHash())}setPipeline(e,t,i,s){let r=this.getPipeline(e,t,i);s.setPipeline(r)}getPipeline(e,t,i,s){e._layoutKey||(v3(e,t.attributeData),this._generateBufferKey(e)),s||(s=e.topology);let r=aT(e._layoutKey,t._layoutKey,i.data,i._blendModeId,tT[s]);return this._pipeCache[r]?this._pipeCache[r]:(this._pipeCache[r]=this._createPipeline(e,t,i,s),this._pipeCache[r])}_createPipeline(e,t,i,s){let r=this._gpu.device,o=this._createVertexBufferLayouts(e,t),d=this._renderer.state.getColorTargets(i);d[0].writeMask=this._stencilMode===Le.RENDERING_MASK_ADD?0:this._colorMask;let h=this._renderer.shader.getProgramData(t).pipeline,l={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:o},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:d},primitive:{topology:s,cullMode:i.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil=eT(Jv({},this._stencilState),{format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"})),r.createRenderPipeline(l)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){let t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){let t=[],i=0,s=Object.keys(e.attributes).sort();for(let o=0;o<s.length;o++){let d=e.attributes[s[o]];t[i++]=d.offset,t[i++]=d.format,t[i++]=d.stride,t[i++]=d.instance}let r=t.join("|");return e._layoutKey=Os(r,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){let t=[],i=0,s=Object.keys(e.attributeData).sort();for(let o=0;o<s.length;o++){let d=e.attributeData[s[o]];t[i++]=d.location}let r=t.join("|");return e._attributeLocationsKey=Os(r,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let s=this._createVertexBufferLayouts(e,t),r=Object.create(null),o=t.attributeData;for(let d=0;d<s.length;d++){let h=Object.values(s[d].attributes)[0].shaderLocation;for(let l in o)if(o[l].location===h){r[d]=l;break}}return this._bindingNamesCache[i]=r,r}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let s=[];return e.buffers.forEach(r=>{var o;let d={arrayStride:0,stepMode:"vertex",attributes:[]},h=d.attributes;for(let l in t.attributeData){let u=e.attributes[l];((o=u.divisor)!=null?o:1)!==1&&Qt(`Attribute ${l} has an invalid divisor value of '${u.divisor}'. WebGPU only supports a divisor value of 1`),u.buffer===r&&(d.arrayStride=u.stride,d.stepMode=u.instance?"instance":"vertex",h.push({shaderLocation:t.attributeData[l].location,offset:u.offset,format:u.format}))}h.length&&s.push(d)}),this._bufferLayoutsCache[i]=s,s}_updatePipeHash(){let e=iT(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};xo.extension={type:[G.WebGPUSystem],name:"pipeline"};var rl=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}},nl=class{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,i,s,r){let o=this._renderer,d=this._getGpuColorTexture(e),h=o.texture.getGpuSource(t.source);return o.encoder.commandEncoder.copyTextureToTexture({texture:d,origin:i},{texture:h,origin:r},s),t}startRenderPass(e,t=!0,i,s){let r=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,t,i);r.descriptor=o,this._renderer.pipeline.setRenderTarget(r),this._renderer.encoder.beginRenderPass(r),this._renderer.encoder.setViewport(s)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,i){typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let s=this._renderTargetSystem,r=s.getGpuRenderTarget(e),o=e.colorTextures.map((h,l)=>{let u=r.contexts[l],p,y;u?p=u.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(h).createView({mipLevelCount:1}),r.msaaTextures[l]&&(y=p,p=this._renderer.texture.getTextureView(r.msaaTextures[l]));let _=t&mt.COLOR?"clear":"load";return i!=null||(i=s.defaultClearColor),{view:p,resolveTarget:y,clearValue:i,storeOp:"store",loadOp:_}}),d;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=r.msaa?4:1),e.depthStencilTexture){let h=t&mt.STENCIL?"clear":"load",l=t&mt.DEPTH?"clear":"load";d={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:h,depthClearValue:1,depthLoadOp:l,depthStoreOp:"store"}}return{colorAttachments:o,depthStencilAttachment:d}}clear(e,t=!0,i,s){if(!t)return;let{gpu:r,encoder:o}=this._renderer,d=r.device;if(o.commandEncoder===null){let h=d.createCommandEncoder(),l=this.getDescriptor(e,t,i),u=h.beginRenderPass(l);u.setViewport(s.x,s.y,s.width,s.height,0,1),u.end();let p=h.finish();d.queue.submit([p])}else this.startRenderPass(e,t,i,s)}initGpuRenderTarget(e){e.isRoot=!0;let t=new rl;return e.colorTextures.forEach((i,s)=>{if(Kt.test(i.resource)){let r=i.resource.getContext("webgpu"),o=i.transparent?"premultiplied":"opaque";try{r.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:o})}catch{}t.contexts[s]=r}if(t.msaa=i.source.antialias,i.source.antialias){let r=new Be({width:0,height:0,sampleCount:4});t.msaaTextures[s]=r}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((i,s)=>{let r=t.msaaTextures[s];r?.resize(i.source.width,i.source.height,i.source._resolution)})}},vo=class extends Zn{constructor(e){super(e),this.adaptor=new nl,this.adaptor.init(e,this)}};vo.extension={type:[G.WebGPUSystem],name:"renderTarget"};var To=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e,this.maxTextures=e.device.limits.maxSampledTexturesPerShaderStage}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){let t=this._gpu.device,i=e.gpuLayout.map(r=>t.createBindGroupLayout({entries:r})),s={bindGroupLayouts:i};return this._gpuProgramData[e._layoutKey]={bindGroups:i,pipeline:t.createPipelineLayout(s)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};To.extension={type:[G.WebGPUSystem],name:"shader"};var ct={};ct.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},ct.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},ct["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},ct["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},ct["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},ct.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},ct.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},ct.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};var So=class{constructor(){this.defaultState=new Pt,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:ct[e.blendMode]||ct.normal}]}destroy(){this.gpu=null}};So.extension={type:[G.WebGPUSystem],name:"state"};var sT={type:"image",upload(a,e,t){let i=a.resource,s=(a.pixelWidth|0)*(a.pixelHeight|0),r=i.byteLength/s;t.device.queue.writeTexture({texture:e},i,{offset:0,rowsPerImage:a.pixelHeight,bytesPerRow:a.pixelHeight*r},{width:a.pixelWidth,height:a.pixelHeight,depthOrArrayLayers:1})}},W3={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},rT={blockBytes:4,blockWidth:1,blockHeight:1},nT={type:"compressed",upload(a,e,t){let i=a.pixelWidth,s=a.pixelHeight,r=W3[a.format]||rT;for(let o=0;o<a.resource.length;o++){let d=a.resource[o],h=Math.ceil(i/r.blockWidth)*r.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:o},d,{offset:0,bytesPerRow:h},{width:Math.ceil(i/r.blockWidth)*r.blockWidth,height:Math.ceil(s/r.blockHeight)*r.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},Y3={type:"image",upload(a,e,t){let i=a.resource;if(!i)return;let s=Math.min(e.width,a.resourceWidth||a.pixelWidth),r=Math.min(e.height,a.resourceHeight||a.pixelHeight),o=a.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:i},{texture:e,premultipliedAlpha:o},{width:s,height:r})}},oT={type:"video",upload(a,e,t){Y3.upload(a,e,t)}},ol=class{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
    var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
    vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

    struct VertexOutput {
    @builtin(position) position : vec4<f32>,
    @location(0) texCoord : vec2<f32>,
    };

    @vertex
    fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
    var output : VertexOutput;
    output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
    output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
    return output;
    }

    @group(0) @binding(0) var imgSampler : sampler;
    @group(0) @binding(1) var img : texture_2d<f32>;

    @fragment
    fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
    return textureSample(img, imgSampler, texCoord);
    }
`})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){let t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=e,s=e.depthOrArrayLayers||1,r=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!r){let h={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};i=this.device.createTexture(h)}let o=this.device.createCommandEncoder({}),d=t.getBindGroupLayout(0);for(let h=0;h<s;++h){let l=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),u=r?1:0;for(let p=1;p<e.mipLevelCount;++p){let y=i.createView({baseMipLevel:u++,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),_=o.beginRenderPass({colorAttachments:[{view:y,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:d,entries:[{binding:0,resource:this.sampler},{binding:1,resource:l}]});_.setPipeline(t),_.setBindGroup(0,v),_.draw(3,1,0,0),_.end(),l=y}}if(!r){let h={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s};for(let l=1;l<e.mipLevelCount;++l)o.copyTextureToTexture({texture:i,mipLevel:l-1},{texture:e,mipLevel:l},h),h.width=Math.ceil(h.width/2),h.height=Math.ceil(h.height/2)}return this.device.queue.submit([o.finish()]),r||i.destroy(),e}},wo=class{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:Y3,buffer:sT,video:oT,compressed:nT},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){let h=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(h))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);let i=W3[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},s=Math.ceil(e.pixelWidth/i.blockWidth)*i.blockWidth,r=Math.ceil(e.pixelHeight/i.blockHeight)*i.blockHeight,o={label:e.label,size:{width:s,height:r},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},d=this._gpu.device.createTexture(o);return this._gpuSources[e.uid]=d,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),d}onSourceUpdate(e){let t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){let t=this._gpuSources[e.uid];t&&(this._gpuSources[e.uid]=null,t.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new ol(this._gpu.device));let t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){let t=this._gpuSources[e.uid];t?(t.width!==e.pixelWidth||t.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){var t;return(t=this._bindGroupHash[e.uid])!=null?t:this._createTextureBindGroup(e)}_createTextureBindGroup(e){let t=e.source;return this._bindGroupHash[e.uid]=new Ht({0:t,1:t.style,2:new et({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){var t;let i=e.source;return(t=this._textureViewHash[i.uid])!=null?t:this._createTextureView(i)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){let t=this._renderer,i=t.gpu.device.createCommandEncoder(),s=xe.get().createCanvas();s.width=e.source.pixelWidth,s.height=e.source.pixelHeight;let r=s.getContext("webgpu");return r.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:xe.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:r.getCurrentTexture()},{width:s.width,height:s.height}),t.gpu.device.queue.submit([i.finish()]),s}getPixels(e){let t=this.generateCanvas(e),i=ca.getOptimalCanvasAndContext(t.width,t.height),s=i.context;s.drawImage(t,0,0);let{width:r,height:o}=t,d=s.getImageData(0,0,r,o),h=new Uint8ClampedArray(d.data.buffer);return ca.returnCanvasAndContext(i),{pixels:h,width:r,height:o}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(let e of Object.keys(this._bindGroupHash)){let t=Number(e),i=this._bindGroupHash[t];i?.destroy(),this._bindGroupHash[t]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}};wo.extension={type:[G.WebGPUSystem],name:"texture"};var Ao=class{init(){let e=new et({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),t=Hs({name:"graphics",bits:[_l,xl(Ci()),cm,Vs]});this.shader=new ht({gpuProgram:t,resources:{localUniforms:e}})}execute(e,t){let i=t.context,s=i.customShader||this.shader,r=e.renderer,o=r.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i),l=r.encoder;l.setGeometry(d.geometry,s.gpuProgram);let u=r.globalUniforms.bindGroup;l.setBindGroup(0,u,s.gpuProgram);let p=r.renderPipes.uniformBatch.getUniformBindGroup(s.resources.localUniforms,!0);l.setBindGroup(2,p,s.gpuProgram);let y=h.instructions,_=null;for(let v=0;v<h.instructionSize;v++){let T=y[v];if(T.topology!==_&&(_=T.topology,l.setPipelineFromGeometryProgramAndState(d.geometry,s.gpuProgram,e.state,T.topology)),s.groups[1]=T.bindGroup,!T.gpuBindGroup){let A=T.textures;T.bindGroup=ml(A.textures,A.count),T.gpuBindGroup=r.bindGroup.getBindGroup(T.bindGroup,s.gpuProgram,1)}l.setBindGroup(1,T.bindGroup,s.gpuProgram),l.renderPassEncoder.drawIndexed(T.size,1,T.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};Ao.extension={type:[G.WebGPUPipesAdaptor],name:"graphics"};var Eo=class{init(){let e=Hs({name:"mesh",bits:[ws,Iy,Vs]});this._shader=new ht({gpuProgram:e,resources:{uTexture:K.EMPTY._source,uSampler:K.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,s=t._shader;if(!s)s=this._shader,s.groups[2]=i.texture.getTextureBindGroup(t.texture);else if(!s.gpuProgram)return;let r=s.gpuProgram;if(r.autoAssignGlobalUniforms&&(s.groups[0]=i.globalUniforms.bindGroup),r.autoAssignLocalUniforms){let o=e.localUniforms;s.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(o,!0)}i.encoder.draw({geometry:t._geometry,shader:s,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Eo.extension={type:[G.WebGPUPipesAdaptor],name:"mesh"};var cT=[...j3,_o,go,Xs,bo,wo,vo,To,So,xo,po,mo,uo],dT=[...X3,yo],hT=[Nn,Eo,Ao],$3=[],K3=[],q3=[];be.handleByNamedList(G.WebGPUSystem,$3),be.handleByNamedList(G.WebGPUPipes,K3),be.handleByNamedList(G.WebGPUPipesAdaptor,q3),be.add(...cT,...dT,...hT);var cl=class extends Do{constructor(){let e={name:"webgpu",type:yt.WEBGPU,systems:$3,renderPipes:K3,renderPipeAdaptors:q3};super(e)}},lT={__proto__:null,WebGPURenderer:cl},fT={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},uS=new Proxy(fT,{get(a,e){return a[e]}}),bS=new Ae(0,0,1,1);var uT=(a=>(a[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH",a))(uT||{}),Z3=(a=>(a.CLAMP="clamp-to-edge",a.REPEAT="repeat",a.MIRRORED_REPEAT="mirror-repeat",a))(Z3||{}),pS=new Proxy(Z3,{get(a,e){return a[e]}}),Q3=(a=>(a.NEAREST="nearest",a.LINEAR="linear",a))(Q3||{}),gS=new Proxy(Q3,{get(a,e){return a[e]}});var bT=Object.defineProperty,H1=Object.getOwnPropertySymbols,pT=Object.prototype.hasOwnProperty,gT=Object.prototype.propertyIsEnumerable,z1=(a,e,t)=>e in a?bT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,V1=(a,e)=>{for(var t in e||(e={}))pT.call(e,t)&&z1(a,t,e[t]);if(H1)for(var t of H1(e))gT.call(e,t)&&z1(a,t,e[t]);return a},mT=class J3 extends he{constructor(e={}){e=V1(V1({},J3.defaultOptions),e),super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let t=0;t<e.length;t++){let i=e[t];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detach(...e){for(let t=0;t<e.length;t++){let i=e[t],s=this.renderLayerChildren.indexOf(i);s!==-1&&this.renderLayerChildren.splice(s,1),i.parentRenderLayer=null;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let t=0;t<e.length;t++)e[t].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,t,i){let s=this.renderLayerChildren,r=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let o=0;o<r;o++)s[o].parent||Qt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[o]),s[o].collectRenderables(e,t,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,t,i){if(!e)return;let s=this.renderLayerChildren;for(let r=0;r<s.length;r++)s[r]._getGlobalBoundsRecursive(!0,t,this)}};mT.defaultOptions={sortableChildren:!1,sortFunction:(a,e)=>a.zIndex-e.zIndex};function _T(a,e,t,i){let s=t.buffers[0],r=s.data,{verticesX:o,verticesY:d}=t,h=a/(o-1),l=e/(d-1),u=0,p=i[0],y=i[1],_=i[2],v=i[3],T=i[4],A=i[5],P=i[6],C=i[7],F=i[8];for(let D=0;D<r.length;D+=2){let H=u%o*h,U=(u/o|0)*l,j=p*H+y*U+_,se=v*H+T*U+A,ce=P*H+C*U+F;r[D]=j/ce,r[D+1]=se/ce,u++}s.update()}function e5(a,e){let t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],d=e[5],h=e[6],l=e[7],u=e[8];return a[0]=o*u-d*l,a[1]=s*l-i*u,a[2]=i*d-s*o,a[3]=d*h-r*u,a[4]=t*u-s*h,a[5]=s*r-t*d,a[6]=r*l-o*h,a[7]=i*h-t*l,a[8]=t*o-i*r,a}function t5(a,e,t){let i=e[0],s=e[1],r=e[2],o=e[3],d=e[4],h=e[5],l=e[6],u=e[7],p=e[8],y=t[0],_=t[1],v=t[2],T=t[3],A=t[4],P=t[5],C=t[6],F=t[7],D=t[8];return a[0]=y*i+_*o+v*l,a[1]=y*s+_*d+v*u,a[2]=y*r+_*h+v*p,a[3]=T*i+A*o+P*l,a[4]=T*s+A*d+P*u,a[5]=T*r+A*h+P*p,a[6]=C*i+F*o+D*l,a[7]=C*s+F*d+D*u,a[8]=C*r+F*h+D*p,a}function yT(a,e,t){let i=t[0],s=t[1],r=t[2];return a[0]=e[0]*i+e[1]*s+e[2]*r,a[1]=e[3]*i+e[4]*s+e[5]*r,a[2]=e[6]*i+e[7]*s+e[8]*r,a}var xT=[0,0,0,0,0,0,0,0,0],vT=[0,0,0],Gr=[0,0,0];function W1(a,e,t,i,s,r,o,d,h){let l=xT;l[0]=e,l[1]=i,l[2]=r,l[3]=t,l[4]=s,l[5]=o,l[6]=1,l[7]=1,l[8]=1;let u=e5(a,l);Gr[0]=d,Gr[1]=h,Gr[2]=1;let p=yT(vT,u,Gr),y=a;return a[0]=p[0],a[1]=0,a[2]=0,a[3]=0,a[4]=p[1],a[5]=0,a[6]=0,a[7]=0,a[8]=p[2],t5(a,y,l)}var TT=[0,0,0,0,0,0,0,0,0],ST=[0,0,0,0,0,0,0,0,0];function wT(a,e,t,i,s,r,o,d,h,l,u,p,y,_,v,T,A){let P=W1(TT,e,t,r,o,l,u,_,v),C=W1(ST,i,s,d,h,p,y,T,A);return t5(a,e5(P,P),C)}var dl=class extends w2{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:t,height:i}=e;this.corners=[0,0,t,0,t,i,0,i]}setCorners(e,t,i,s,r,o,d,h){let l=this.corners;l[0]=e,l[1]=t,l[2]=i,l[3]=s,l[4]=r,l[5]=o,l[6]=d,l[7]=h,this.updateProjection()}updateProjection(){let{width:e,height:t}=this,i=this.corners,s=wT(this._projectionMatrix,0,0,i[0],i[1],e,0,i[2],i[3],e,t,i[4],i[5],0,t,i[6],i[7]);_T(e,t,this,s)}},AT=Object.defineProperty,ET=Object.defineProperties,PT=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,a5=Object.prototype.hasOwnProperty,i5=Object.prototype.propertyIsEnumerable,Y1=(a,e,t)=>e in a?AT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,vd=(a,e)=>{for(var t in e||(e={}))a5.call(e,t)&&Y1(a,t,e[t]);if(Po)for(var t of Po(e))i5.call(e,t)&&Y1(a,t,e[t]);return a},RT=(a,e)=>ET(a,PT(e)),MT=(a,e)=>{var t={};for(var i in a)a5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Po)for(var i of Po(a))e.indexOf(i)<0&&i5.call(a,i)&&(t[i]=a[i]);return t},CT=class s5 extends Ka{constructor(e){e=vd(vd({},s5.defaultOptions),e);let t=e,{texture:i,verticesX:s,verticesY:r}=t,o=MT(t,["texture","verticesX","verticesY"]),d=new dl(Ps({width:i.width,height:i.height,verticesX:s,verticesY:r}));super(Ps(RT(vd({},o),{geometry:d}))),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:t,height:i}=this.texture;(e.width!==t||e.height!==i)&&(e.width=t,e.height=i,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,t,i,s,r,o,d,h){this.geometry.setCorners(e,t,i,s,r,o,d,h)}};CT.defaultOptions={texture:K.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};var OT=Object.defineProperty,$1=Object.getOwnPropertySymbols,IT=Object.prototype.hasOwnProperty,GT=Object.prototype.propertyIsEnumerable,K1=(a,e,t)=>e in a?OT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q1=(a,e)=>{for(var t in e||(e={}))IT.call(e,t)&&K1(a,t,e[t]);if($1)for(var t of $1(e))GT.call(e,t)&&K1(a,t,e[t]);return a},r5=class n5 extends $s{constructor(e){let{width:t,points:i,textureScale:s}=q1(q1({},n5.defaultOptions),e);super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=t,this.textureScale=s,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let t=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),s=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));let r=i.data,o=s.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;let d=0,h=e[0],l=this._width*this.textureScale,u=e.length;for(let y=0;y<u;y++){let _=y*4;if(this.textureScale>0){let v=h.x-e[y].x,T=h.y-e[y].y,A=Math.sqrt(v*v+T*T);h=e[y],d+=A/l}else d=y/(u-1);r[_]=d,r[_+1]=0,r[_+2]=d,r[_+3]=1}let p=0;for(let y=0;y<u-1;y++){let _=y*2;o[p++]=_,o[p++]=_+1,o[p++]=_+2,o[p++]=_+2,o[p++]=_+1,o[p++]=_+3}i.update(),s.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let t=e[0],i,s=0,r=0,o=this.buffers[0].data,d=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<d;l++){let u=e[l],p=l*4;l<e.length-1?i=e[l+1]:i=u,r=-(i.x-t.x),s=i.y-t.y;let y=(1-l/(d-1))*10;y>1&&(y=1);let _=Math.sqrt(s*s+r*r);_<1e-6?(s=0,r=0):(s/=_,r/=_,s*=h,r*=h),o[p]=u.x+s,o[p+1]=u.y+r,o[p+2]=u.x-s,o[p+3]=u.y-r,t=u}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};r5.defaultOptions={width:200,points:[],textureScale:0};var BT=r5,FT=Object.defineProperty,DT=Object.defineProperties,kT=Object.getOwnPropertyDescriptors,Ro=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,Z1=(a,e,t)=>e in a?FT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Td=(a,e)=>{for(var t in e||(e={}))o5.call(e,t)&&Z1(a,t,e[t]);if(Ro)for(var t of Ro(e))c5.call(e,t)&&Z1(a,t,e[t]);return a},UT=(a,e)=>DT(a,kT(e)),LT=(a,e)=>{var t={};for(var i in a)o5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Ro)for(var i of Ro(a))e.indexOf(i)<0&&c5.call(a,i)&&(t[i]=a[i]);return t},NT=class d5 extends Ka{constructor(e){let t=Td(Td({},d5.defaultOptions),e),{texture:i,points:s,textureScale:r}=t,o=LT(t,["texture","points","textureScale"]),d=new BT(Ps({width:i.height,points:s,textureScale:r}));r>0&&(i.source.style.addressMode="repeat"),super(Ps(UT(Td({},o),{texture:i,geometry:d}))),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};NT.defaultOptions={textureScale:0};var jT=Object.defineProperty,Q1=Object.getOwnPropertySymbols,XT=Object.prototype.hasOwnProperty,HT=Object.prototype.propertyIsEnumerable,J1=(a,e,t)=>e in a?jT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ep=(a,e)=>{for(var t in e||(e={}))XT.call(e,t)&&J1(a,t,e[t]);if(Q1)for(var t of Q1(e))HT.call(e,t)&&J1(a,t,e[t]);return a},zT=class hl{constructor(e){if(e instanceof K)this.texture=e,Id(this,hl.defaultOptions,{});else{let t=ep(ep({},hl.defaultOptions),e);Id(this,t,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return _s(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=we.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};zT.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};var tp={vertex:{attributeName:"aVertex",format:"float32x2",code:`
const texture = p.texture;
const sx = p.scaleX;
const sy = p.scaleY;
const ax = p.anchorX;
const ay = p.anchorY;
const trim = texture.trim;
const orig = texture.orig;

if (trim)
{
w1 = trim.x - (ax * orig.width);
w0 = w1 + trim.width;

h1 = trim.y - (ay * orig.height);
h0 = h1 + trim.height;
}
else
{
w1 = -ax * (orig.width);
w0 = w1 + orig.width;

h1 = -ay * (orig.height);
h0 = h1 + orig.height;
}

f32v[offset] = w1 * sx;
f32v[offset + 1] = h1 * sy;

f32v[offset + stride] = w0 * sx;
f32v[offset + stride + 1] = h1 * sy;

f32v[offset + (stride * 2)] = w0 * sx;
f32v[offset + (stride * 2) + 1] = h0 * sy;

f32v[offset + (stride * 3)] = w1 * sx;
f32v[offset + (stride * 3) + 1] = h0 * sy;
`,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
var x = p.x;
var y = p.y;

f32v[offset] = x;
f32v[offset + 1] = y;

f32v[offset + stride] = x;
f32v[offset + stride + 1] = y;

f32v[offset + (stride * 2)] = x;
f32v[offset + (stride * 2) + 1] = y;

f32v[offset + (stride * 3)] = x;
f32v[offset + (stride * 3) + 1] = y;
`,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
var rotation = p.rotation;

f32v[offset] = rotation;
f32v[offset + stride] = rotation;
f32v[offset + (stride * 2)] = rotation;
f32v[offset + (stride * 3)] = rotation;
`,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
var uvs = p.texture.uvs;

f32v[offset] = uvs.x0;
f32v[offset + 1] = uvs.y0;

f32v[offset + stride] = uvs.x1;
f32v[offset + stride + 1] = uvs.y1;

f32v[offset + (stride * 2)] = uvs.x2;
f32v[offset + (stride * 2) + 1] = uvs.y2;

f32v[offset + (stride * 3)] = uvs.x3;
f32v[offset + (stride * 3) + 1] = uvs.y3;
`,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
const c = p.color;

u32v[offset] = c;
u32v[offset + stride] = c;
u32v[offset + (stride * 2)] = c;
u32v[offset + (stride * 3)] = c;
`,dynamic:!1}},VT=Object.defineProperty,WT=Object.defineProperties,YT=Object.getOwnPropertyDescriptors,Mo=Object.getOwnPropertySymbols,h5=Object.prototype.hasOwnProperty,l5=Object.prototype.propertyIsEnumerable,ap=(a,e,t)=>e in a?VT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,pi=(a,e)=>{for(var t in e||(e={}))h5.call(e,t)&&ap(a,t,e[t]);if(Mo)for(var t of Mo(e))l5.call(e,t)&&ap(a,t,e[t]);return a},ip=(a,e)=>WT(a,YT(e)),$T=(a,e)=>{var t={};for(var i in a)h5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Mo)for(var i of Mo(a))e.indexOf(i)<0&&l5.call(a,i)&&(t[i]=a[i]);return t},KT=new Ze(0,0,0,0),qT=class ll extends ha{constructor(e={}){e=ip(pi(pi({},ll.defaultOptions),e),{dynamicProperties:pi(pi({},ll.defaultOptions.dynamicProperties),e?.dynamicProperties)});let t=e,{dynamicProperties:i,shader:s,roundPixels:r,texture:o,particles:d}=t,h=$T(t,["dynamicProperties","shader","roundPixels","texture","particles"]);super(pi({label:"ParticleContainer"},h)),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=o||null,this.shader=s,this._properties={};for(let l in tp){let u=tp[l],p=i[l];this._properties[l]=ip(pi({},u),{dynamic:p})}this.allowChildren=!0,this.roundPixels=r??!1,this.particleChildren=d??[]}addParticle(...e){for(let t=0;t<e.length;t++)this.particleChildren.push(e[t]);return this.onViewUpdate(),e[0]}removeParticle(...e){let t=!1;for(let i=0;i<e.length;i++){let s=this.particleChildren.indexOf(e[i]);s>-1&&(this.particleChildren.splice(s,1),t=!0)}return t&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return KT}updateBounds(){}destroy(e=!1){var t,i,s;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let r=typeof e=="boolean"?e:e?.textureSource,o=(i=this.texture)!=null?i:(t=this.particleChildren[0])==null?void 0:t.texture;o&&o.destroy(r)}this.texture=null,(s=this.shader)==null||s.destroy()}removeParticles(e,t){let i=this.particleChildren.splice(e,t);return this.onViewUpdate(),i}removeParticleAt(e){let t=this.particleChildren.splice(e,1);return this.onViewUpdate(),t[0]}addParticleAt(e,t){return this.particleChildren.splice(t,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,t){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,t){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,t){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,t){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,t){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};qT.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};var ZT=Object.defineProperty,Co=Object.getOwnPropertySymbols,f5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,sp=(a,e,t)=>e in a?ZT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,QT=(a,e)=>{for(var t in e||(e={}))f5.call(e,t)&&sp(a,t,e[t]);if(Co)for(var t of Co(e))u5.call(e,t)&&sp(a,t,e[t]);return a},JT=(a,e)=>{var t={};for(var i in a)f5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Co)for(var i of Co(a))e.indexOf(i)<0&&u5.call(a,i)&&(t[i]=a[i]);return t},eS=class b5 extends ha{constructor(e){var t,i,s,r,o,d,h,l,u,p;e instanceof K&&(e={texture:e});let y=e,{width:_,height:v,leftWidth:T,rightWidth:A,topHeight:P,bottomHeight:C,texture:F,roundPixels:D}=y,H=JT(y,["width","height","leftWidth","rightWidth","topHeight","bottomHeight","texture","roundPixels"]);super(QT({label:"NineSliceSprite"},H)),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=(i=T??((t=F?.defaultBorders)==null?void 0:t.left))!=null?i:za.defaultOptions.leftWidth,this._topHeight=(r=P??((s=F?.defaultBorders)==null?void 0:s.top))!=null?r:za.defaultOptions.topHeight,this._rightWidth=(d=A??((o=F?.defaultBorders)==null?void 0:o.right))!=null?d:za.defaultOptions.rightWidth,this._bottomHeight=(l=C??((h=F?.defaultBorders)==null?void 0:h.bottom))!=null?l:za.defaultOptions.bottomHeight,this.bounds.maxX=this._width=(u=_??F.width)!=null?u:za.defaultOptions.width,this.bounds.maxY=this._height=(p=v??F.height)!=null?p:za.defaultOptions.height,this.allowChildren=!1,this.texture=F??b5.defaultOptions.texture,this.roundPixels=D??!1}updateBounds(){}get width(){return this._width}set width(e){this.bounds.maxX=this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this.bounds.maxY=this._height=e,this.onViewUpdate()}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this.bounds.maxX=this._width=e,this.bounds.maxY=this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};eS.defaultOptions={texture:K.EMPTY};function jo(a){return!((1080<a||a<400)&&a!=0)}function qs(a){a=encodeURIComponent(a);let e=Math.floor(256*Math.random()),t=e.toString(16).padStart(2,"0");for(let i=0;i<a.length;++i)e=3793+4513*e&255,t+=(a.charCodeAt(i)^e).toString(16).padStart(2,"0");return t}function n(a){let e="",t=parseInt(a.substring(0,2),16);for(let s=2;s<a.length;s+=2){var i=parseInt(a.substring(s,s+2),16);t=3793+4513*t&255,e+=String.fromCharCode(i^t)}return decodeURIComponent(e)}function p5(a){return a||""}function Ii(a){return new Function(n("0eedb5d56751ba002497").concat(a,n("3f5572f0")))()}function zo(a,e){return a&&typeof a=="object"&&e&&typeof e=="object"?(Object.keys(e).forEach(t=>{var i=a[t],s=e[t];Array.isArray(i)&&Array.isArray(s)?a[t]=i.concat(s):a[t]=i&&typeof i=="object"&&s&&typeof s=="object"?zo(Object.assign({},i),s):s}),a):e}function g5(a){var e=new Uint16Array(a.length);for(let t=0;t<a.length;++t)e[t]=a.charCodeAt(t);return e}function Ml(a){return 8<=a.length&&a[a.length-7]===65535?a.slice(-6):null}function Ee(){window.localStorage.setItem(n("109626114b0639897e803d"),JSON.stringify(L))}function ua(a){O.Jh&&(a=Math.max(L["1x"],Math.min(a,50)),O.dc=a,ti.mj((O.dc-.25)/4),O.Re.text=+a[n("7e7b2f57ebeb21f1")](2)+n("f27b"))}var m5,vt,Jt,Cl,_5,Ol,y5,Zs,Il,E,x5,R,b,I,v5,O,L,je,Oa,Ct,Xo,T5,Gl,S5,Qs,Qa,Bl,Ot,Ho,Gi,Bi,w5,Ja,ei,ti,Fi,V,A5,Di,ki,tt,ba,Ia,Qe,J;v5=class extends he{constructor(a){super(),this.kf=Object.assign({Yp:{x:1,y:1},Tp:{x:1,y:1}},a),this.initialize()}initialize(){this.ba=this.kf.ba,this.ga=this.kf.ga,"anchor"in this.ba&&this.ba.anchor.set(.5),"anchor"in this.ga&&this.ga.anchor.set(.5),this.addChild(this.ba),this.addChild(this.ga),this.On()}Af(){this.Po=this.width/2.5,this.zo=this.ga.width/2}On(){this.zk=function(){this.kf.Xp?.()},this.No=function(){this.ga.position.set(0,0),this.kf.Wp?.()},this.Oo=function(a){a=(t=this[n("981db5a7f38ebf03")](a)).x;var e=t.y,t=Math.min(Math.sqrt(a*a+e*e),this.Po+this.zo/2);a=Math.atan2(e,a),this.ga.position.set(t*Math.cos(a),t*Math.sin(a)),this.kf.Mo?.({angle:a,Rj:t})}}},O={k:n("a9725fa85d6d8ad3f00701a21014f189c95a09c24a41cd9da04626803044ac91b05f659f2253"),Im:n("f274c776d3b4f9acc84d993fb8eeb0e1303db37a74faa9ed6f6fb96f65f6a9c43c40bb4833959ec86a42f91f58d893941075c10660d6cd8a6e"),Ad:null,pk:0,hn:!1,Jh:!1,dc:1,bd:[],Nh:[],hk:[],dg:0,Th:0,ze:!1,Qe:!1,Re:0,He:0,fg:0,ek:!1,Sh:[],Xf:!1,rh:!0,bb:0,ag:!1,Gd:null,Ji:0,ic:{},Yk:0,Bj:0,Pd:{},Dh:()=>{}},L={"1a":0,"1b":0,"1c":0,"1d":10,"1e":0,"1f":0,"1g":0,"1h":!0,"1i":.25,"1j":0,"1k":!0,"1l":!0,"1m":!0,"1n":!1,"1o":0,"1p":1,"1q":1,"1r":238,"1s":!0,"1t":0,"1u":0,"1v":0,"1w":24,"1x":.25,"1y":0,"1z":1,"1aa":0,"1ab":0},je={},Oa={[n("4a1f693b2faa7c95")]:n("8cf8fc19f90cb384f196f355de0bbdc6ec8caa1bc5038cded49a91458538b8bee2bcc00fdee6"),[n("82c034f4e572")]:O.k+n("0f6523c4e331f7ea7e2b3cb8dd25f0e93a6267f0c40b94b857364e"),[n("e74b993b0879486cdf12")]:O.k+n("daceaeabae1ac21d8b9081c7a01ec51ecfc9ea9f892082af826dd3"),[n("170a75fffe")]:O.k+n("0ddbbd86e17771a87c65b2fadf6376ab383cd9b2c64d10fa5578c0"),[n("81a26ada6e")]:O.k+n("1682eaef6a5ebe4177ccc583645a89520385aedb4d64d8135ed197"),[n("e918077d0e35")]:O.k+n("69ffd9da9dab0dcc1881d696b38f1acf5cd8bddfc9b151c0ef95"),[n("8b7eca5b3d7020")]:O.k+n("475d7bfcbb09afd226e374f095edb8a172ba1fb984a2ada038"),[n("9f92e63711e417")]:O.k+n("8fe5a34463b1776afeabbc385da57069bae2e761128b0b66c9bf"),[n("a15044f1172694")]:O.k+n("1c486ca95084001f4d1643c56e90071c094f288c025e5cf35ae2"),[n("31e0f441879603")]:O.k+n("9ff5935453a1477acebb8c286db540798ad2f75100bb1b56d98f"),[n("8356c25335083c")]:O.k+n("a29656f3d6420a55c3d8498fe8561d2697f132b683185639d4ac"),[n("8376c25335083f")]:O.k+n("8b19bf387f3573eefa27b0b4512174edbe7edbfd290f0fe2cd33"),[n("3201b36004f7cf")]:O.k+n("ec181cf980b4502f9d2613f5bea0572cd97f78bc378e6c236a32"),[n("d74a9e6f693c65")]:O.k+n("398f892acddb5d1c28d1e64683df2a1f6c888d0ff5e161f03fa5"),[n("3d6cf8d5f3027a")]:O.k+n("97edab4c6bb97f62f6b3842065bd487182eaef691283036ec187"),[n("3ccf392a7221b3a1")]:O.k+n("8cf8fc19e014b08ffd86f355de00b78cb9df980dc71385de94c4c807c61e"),[n("dd8c18b553e2d2a7")]:O.k+n("144064a1689c3807750e7bdd66980f14014720954f9b0d561c4f408f5e66"),[n("170a5eafa97cacba")]:O.k+n("f5c345ee099f99c0948d5a82c79b6ed320c4c1daee986c913dcda1b0ff65"),[n("66b56fdc584b1d48")]:O.k+n("9361a7c0673d7be6f22fb8bc59394cf58666e3f4403a4eb79b6883ee4107"),[n("8ad90bb8bc2f6117")]:O.k+n("7aae0ecb0e7a227debf061a7c07e257eafa90affe97d370ca2967ad5f840"),[n("54e7d1026a19ab9c")]:O.k+n("9044e0a5e490b40bf10affd9da84b3088543a491c397815a984fc48bc29a"),[n("49f88c59ff8e7db3")]:O.k+n("d16761422533b564b0297e3e1b27b277c460257602348035d868456c0339"),[n("b28133e084774a7d")]:O.k+n("89df39fa7d8bedacf86136f6536ffaafbc385dae7a6cf8fd90210da44b71"),[n("d58410ad6bfae9b9")]:O.k+n("3d0b8db6b14721982c55e2ca8f53269b680c8962b62034296472f978b72d"),[n("3564f0cd8b1a09da")]:O.k+n("13e12740e7bdfb6672af383cd9b9cc7506e66374c0bace371ae9036ec187"),[n("33a6720385d88b1d")]:O.k+n("6c989c790034d0af1da693753e20d7ac59fff82de733a5feb5e3e827e63e"),[n("cdfc08a563f2e1bc")]:O.k+n("4276361336a26ab52338296f08b67d867751520731857fc46b5c321d3088"),[n("8b7eca5b3d7023bb")]:O.k+n("b2e64683c6321a25d3a859fff826ed36e7e1c2b7a135ef74fbe3a2ada038"),[n("31e0f44187960459")]:O.k+n("61f7d1d295a305f400b9ceaeabb702c754d0b5c6928410854bdad5dc9389"),[n("ef62b64741144655")]:O.k+n("96026a6feade3ec1f74c4503e4da09d283052e5bcdd90b909c0d5e31dca4"),[n("1544d0edab3a28f8")]:O.k+n("28dc583d5c080c93596257b172ec1b601d3b3ce95bef19227222ace32af2"),[n("c45741b2faa9392e")]:O.k+n("c351f7f0370d2bd6a21fe88c09e93ca5f6b693a430ea3ee7e9b8f3be31f7"),[n("c45741b2faa9392c")]:O.k+n("601490f514c0c45b015a8f892ad4c3585573f4a113a7d16a4a7f94bb12aa"),[n("3e8d47f47063376d")]:O.k+n("3d0b8db6b14721982c55e2ca8f53269b680c8962b62034296771f978b72d"),[n("1a699b082c9fd388")]:O.k+n("08fc781d7c282cb379827751520c3b803ddb1c1f7143349f47"),[n("c7ba8e1f79cc790e")]:O.k+n("dc082ce990c4405f8d560385aed0475cc90f68cb9df31c298422"),[n("b326f28305580d9a")]:O.k+n("be6ab217b2a6e6b9af34ad6b8cb2e1baeb6dd603b581f3dcef49ef0cb89b")},Ct={[n("c0d56775a5606ae3")]:n("cc383cd9a0d4704fbd4633959ec86f4fb5423b9da6d9511d894515"),[n("0a55a3717be6bfd37e42ba")]:n("de4a92379286c6998f148d4bac9ad999871095b3b46ddb6983fed7fb966ad22393fff3"),[n("62234d0010")]:n("5eca12b7120646190f940dcb2c1a59190790153334f35df00029557949"),[n("4a1a6b312fb271c460537c04328e3ddb6a0465033f")]:n("d2c6a6a3a612fa05b388b9df980ed5158b9c81c7a016cf158b96cdd0861ed4e8df6ccd6b97a9d5f9c9"),[n("3ba852499ac2f1412c812b52")]:n("ee5a82c78276d6699fe49dbbbc6ac96997e0e5a34478ab6563fce6f47a28"),[n("fedca5fd637e")]:n("e5f355de19af89f084bd4a92378386c09c89529a3f999ec09c8351ddf1c1"),[n("bc469fe9a1e22750f03044a691f8783e8f292bdde1cd7606971133e5e9")]:n("8cf8fc19e014b08ffd86f355de08af8ff582fb5de6108a92cf9387048d3adedeeecc971ec2a4b1379147c7ebdcacb93f994fcfa1ade131"),[n("7487d72c1d3adfa013aad23aee30")]:n("84f0f411f82ca8b7e5beeb6dd600a787fd8af355de0bbb80f99ead00c71d9796d790811286149ac8"),[n("7e4c2163f2f236b0c5236d5bbbf624fc")]:n("e41014f198cc4857855e0b8db6a047279d2a13f5beaa5b398c2c4cea43e5671135382eb626b43a68"),[n("dc6e7fdd94941003a0106583cdfb1b4289")]:n("cd9b7dc621b7b1e8bca572ba1fabaee8b4a17aa227b182e691b242db5dffa9ad94bb0ed954a1c781b7d705da5ca9cf89bfdf129eec8230"),[n("6355023a8661883b006f0c30ca12c12d0a451b0b965198061241")]:n("d96f694a2d3bbd7c883146262337927c80354e2e2b3f884c901b1247140d84499744144b1a"),[n("5068e1cf35c8f7026a19de8e1f9ebb6d565f")]:n("bc28ccc9b0e4607fad7623a58ef87f7fa5722bad96c8614fb54877c3b7c73446ac1e"),[n("f40e57a199a71f08c8687cfe6bf40167211777a52d9a7e7e4e6c37fa53d57721250832863ddb6a2c731f")]:n("feaaf2d77266a6796ff4edab4c7ab97967f0f5935448b54377c9fdea2e0e9e1c758aa3850771d54703f4dc9c680a95186d8bd583032eda2846f4"),[n("d2adf596f324ac4c98daf0c8ec5fe71481d6e7c1c335990b8edeefc9cb3d81ec")]:n("5d6bed56912701780c35c22aaf3b1e780431ca12b70c12575025c30dbb5b174b180dda733557c105f712227b3d5fc90de050623022"),[n("781adba3598e8a6ac260b2f6b6e58572cb6def99bdb6af33b522e6c6d6d4bb42aa59be8ef888a70a")]:n("d72deb0c2b793f22b673c460257510328e77cc682d6f0c36ca63c54731150505d26bcd4f391d160f93154246a676b41b635d6d1ff259a3137f73"),[n("781efb8739869b7db019839fcb")]:n("afc583644391574ade8b9c187d8d484ad69fe40005832469a694a85124922810a270e2"),[n("ae7d3912fbe646f5ef0833")]:n("0ebae2e76256b6497fc4fd9b5c4aa94977c0c58364518d464fce87d204569c0e"),[n("a315f0c3720d")]:n("8d5b3d0661f7f128fce5327a5febee28f4e13a6267f3d6218bfb576b"),[n("b8cbb35b993fcecd89c12721f4574fc7")]:n("10c460256410348b718a7f595a0c2b8b499e474162170f874a901a19450d40924032"),[n("009507154b1963e5389e030f")]:n("9ff5935453a1477acebb8c286dbd587ac68f941075825040d884de434fc2505e8c"),[n("473f1cfd9e3084f91a")]:n("f94f496a0d1b9d5c6811a606c317725c6015ae0ecb197a2764eefa23e0a87a382a"),[n("2f2b78ef965685e77b297be3f739e8")]:n("2692daff5a4e8e5147dcd5f3742281215fa8ddfb7c2095205fa361b32b3f6d2768ba78ea"),[n("c29ec190")]:n("984ce8adec98bc03c912c7c1e2949313c116cfc9ea908b1a9eec8230"),[n("06da81c04b4d9a")]:n("7ce88c09f024a0bfedb6e365ce38bfbfe5b2eb6dd60cbb9af593f80ae85a"),[n("c29ecb9a89")]:n("302440c544f0146b516a5fb97aec0b6b297ea7a102f8e9786674faa8"),[n("f3f7b0aa36e52ca4de9ecdaf3afcd8b956f9")]:n("6c989c790034d0af1da693753e28cfaf15a29b7dc622a7bfe5b8b336e43cb3b0f9b0e032e052"),[n("7804ef803980f30acc74f0e3c5818a16d11099")]:n("398f892acddb5d1c28d1e64683d7321c20d5ee4e8bd33aeb34afbee1b9e83af86a"),[n("1c2c1fa867b6")]:n("c351f7f0370d2bd6a21fe88c09e124a6baebf0f411e938adbca2b0be6c"),[n("e3d5ab972ad94ce8dbd9b9fb5d903ca7d696c5aa32e65cd8cb84bca826ffcfbe569d")]:n("039137b0f7cdeb9662df28ccc9a1e4667aab3034d1a9f76b76ad3363efe3"),[n("1e8aa488070bd510628ecd816b1ede0d0bfbc8e47070d1010ee2b9f11f0fc568068e25957b763c6163e538fc0e63291c79fa54d8775b204012de3dd16e4e58547bd717d4504301315fd210ca4f3f155856be15454ba60cb45335082c3eb319cc3a2a0429a7d273b0c22e6d21bebe08a4ab276304d69b719cd00e")]:n("879dbbbc7bc96f92e6a3b43055a56062fea7bc385da17920f2a092"),[n("9b1fd4c5561e75db866695cf6813")]:n("6c989c790034d0af1da693753e28cfaf15a29b7dc622e790b0f08466e37c89efa99fff31e44491d7b1a7e71ef702f486ecde"),[n("3ccf37550934b0a30fdccb327a29cbd70ddfc7531973")]:n("a6125a7fdace0ed1c75c5573f4a201a1df285d7bfca0598e8a6ac260afb2e8b4a472cb6def99bdb1eb1ca44490d2e6cbbb17ab"),[n("c5e502366c88fb3782f01ad31c83f6b6e59518c61c98")]:n("0157b172f50365546019ae0ecb1f7a2478edb676d3f57c2777ffe821fca0722012"),[n("4a1a44100b8b35d3622c522317c22ad9182a4f")]:n("6256163316824a950318094f289e45651bec11b7306650641fff12e00e3c"),[n("cb3488ff0bd3198d9ca1e7f604c4169d")]:n("bc28ccc9b0e4607fad7623a58ef87f7fa5722bad96c96111fa486694"),[n("95c35a0756c9be7eadc746196cdbf01deb")]:n("9a8e6eebee5a025dcbd04187e0561d5dc3d4498fe85a1d2ed1ed19b585")},Xo={[n("6072d7c117dad4125a099b")]:n("23bc5162d7ab8c296af91f588ad2f74656884147c1dc974d5298514fdddea85d66c60340f0ddfb7c2a8f3e5bbb73f47015672034a467ab397e3e1b2daa62923d114b5567c97b9c28"),[n("11c1e636e6e9656d2bbaa9")]:n("ebf499aa1fd354d1b281c7a0529a3f8e9ec0898f0984af956ac06997e596e0952e8e4b88b8e5a34472b76663e3bbbc385daf687cecbfd36106e66375d2aada7559831d268183c450")},T5=new Audio(O.k+n("69ffd9da9dab0dcc1881d696b38702cc1085de9ebb821ec5e69a2dd975c5")),Gl=[10653,10654,10655,10656,10657,10658,10659,10660,10661,10662,10663,10664,10665,10666,10667,10668,10669,10670,10671,10672,10673,10676,10677,10678,10679,10680],S5=[32,33,34,35,313,314,202],Qs={},L["1g"]=16711680,L["1v"]=16711680,(Bi=window.localStorage.getItem(n("41c5b7069ad528162fd3ac")))&&(Bi=JSON.parse(Bi))["1r"]===238&&Object.assign(L,Bi),L["1t"]&&(Oa[n("4cdefb6c244eff")]=L["1t"]),Ct[L["1c"]]||(L["1c"]=Object.keys(Ct)[0],Ee()),Oa[L["1b"]]||(L["1b"]=Object.keys(Ct)[0],Ee()),Ot=Qa=null,Ho=Bl=-1,Gi=class extends he{constructor(a){super(a),this[n("782cccae12b9f320e434")]="static",this.on("pointerdown",this.bm)}bm(a){(a.shiftKey||O.ag)&&(Bl=a.pointerId,Qa=this)}},Bi=class extends Gi{constructor(a){super(a),a=new Ye().rect(0,0,4,200).fill({color:16777215}),this.$=new Ye().circle(0,0,8).fill({color:16777215}),this.$[n("97adef6f75b85061fbb5")]="static",this.$[n("f0a24731872a44")]="pointer",this.$[n("d778b63932783421b1")][n("e28b")]=2,this.$.on("pointerdown",this.Vl),this.addChild(a),this.addChild(this.$),this[n("30691bf775f71366")]=new Ae(0,0,10,200)}Vl(a){Ot=this,Ho=a.pointerId}mj(a,e){e&&ua(.25+3.75*a),this.$.y=Math.max(this.$.height/2,Math.min((1-a)*this.height,this.height-this.$.height/2))}},(Ja=new(w5=class extends Gi{constructor(a){super(a),(a=new Ne({[n("d613fd11ae")]:a.cg,[n("1edc94c84e56")]:{[n("fd8810def5b462d96c9afe")]:n("9314c1d576266a"),[n("8e793f4fe6f03ddff3")]:12,[n("67fe00b687")]:16777215}})).position.y=5,a.position.x=100,a.anchor.x=.5,this.cg=a,this.addChild(a)}Af(a){for(;this.children[1];)this.removeChild(this.children[1]);let e=this.cg.height+15;for(var[t,i]of a.entries())(a=new Ne({[n("2c090b8744")]:(t+1).toString()+". "+i[n("a33accf54c")].substring(0,20),[n("56946c90360e")]:{[n("d8cf7545a86b7fc289dd5b")]:n("903186b0f58ba5"),[n("7cabd121f402aba9e1")]:12,[n("7cabd723ec")]:16777215}})).position.y=e,a.position.x=5,t=new Ne({[n("882dafa3f8")]:i[n("0f237ef7fd30")],[n("dbffa9b733f5")]:{[n("82f52bfbf2512974e3f735")]:n("e1023747043894"),[n("dc4b71c194e24b4981")]:12,[n("d3e2bcaa3b")]:16777215}}),t.position.x=195,t.position.y=e,t.anchor.x=1,e=e+a.height+5+5,this.addChild(a),this.addChild(t);this[n("8e773955d3d131c4")]=new Ae(0,0,this.width,this.height)}})({cg:n("8c959d")})).position.x=50,Ja.position.y=150,(ei=new w5({cg:n("3bbe786df0a285")})).position.x=50,ei.position.y=350,ti=new Bi,qa&&(Ja.scale.set(.8,.8),ei.scale.set(.8,.8)),Fi=Ii(n("b4729fe9dce68d")),V=Ii(n("b46199e4cde49f65c8")),A5=Ii(n("44fbe761217eebef23ef")),V[n("e282d190940efb1c869ecf89810d")](n("9ac328c0f2"))[n("23a74062e6acdd6842be586aca")](n("3b984f4fd183ad533791"),n("e619c7")),V.head.insertAdjacentHTML(n("2bbe4878c092d4475d80"),p5('<link rel="stylesheet" href="'+O.k+'/public/css/new.css" />')),Di=null,ki=[],V.getElementById("social-buttons").remove(),tt=new Ye,new Rt({fontFamily:n("adce7b3350ccc0"),fontSize:12,fill:16777215}),ba=new Gi,Ia=new Pe,Qe=new Pe,J=null,I={},(b={}).nc=Ii(n("cc6a67f1b4ce65")),b.d=b.nc[n("ac99811cc5ec976dc0")],I.e=function(){return(L["1n"]?1:b.nc[n("4b982848a663b4123a7c302a8569ad2334")])||1},b.nc.addEventListener(n("ee13dfe096"),async function(){var a,e,t,i,s,r,o,d,h,l,u,p,y,_,v,T,A,P,C,F,D,H,U,j,se,ce,Z,q,re,te,Oe,Tt,ne,de,Ui,Se,It,pa,ea,ga,Li,Vt,ma,_a,Ga,ya,xa,Ba,Gt,Bt,Ft,Dt,Ni,ai,ii,Vo,Wo,Yo,$o,Fl,Dl,Ko,qo,Xe;function ji(c){this.xd=c,this.ta=0}function Zo(c){this.xd=c,this.ta=0}function Fa(c,f,g,m,x,S,w,M,B,k){this.Ab=c,this.wj=f,this[n("d0f5775ba05064c2")]=null,this.yj=!1,this.mb=g,this.nb=m,this.fh=x,this.hh=S,this.hl=w||(B||x)/2,this.Dn=M||(k||S)/2,this.Gj=B||x,this.Kj=k||S,this.Tn=.5-(this.hl-.5*this.Gj)/this.fh,this.db=.5-(this.Dn-.5*this.Kj)/this.hh,this.co=this.fh/this.Gj,this.ko=this.hh/this.Kj}function ae(c,f,g,m,x,S,w,M,B,k,N,X,z,Y,W,pe,oe,Re){this.ng=c,this.Fh=f,this.sk=g,this.Ko=m,this.Ak=x,this.To=S,this.Fk=w,this.Zo=M,this.Mk=B,this.hp=k,this.Tk=N,this.rp=X,this.Zk=z,this.xp=Y,this.fl=W,this.nl=pe,this.pi=oe,this.Bl=Re}function ta(){}function si(c){this.vf=c}function Qo(){this.cd=[]}function kl(c,f){this.Zi=c,this.Ff=f,this.Vg=this.Tg=0}function va(){this.ma=new he,this.ma.sortableChildren=!0,this.P=new h,this.P.zIndex=1.6,this.X=0,this.o=Array(797),this.o[0]=this.Cj(0,new b.kc,new b.kc);for(var c=1;c<797;c++)this.o[c]=this.Cj(c,new b.kc,new b.kc);this.Hj=this.Fj=this.mi=0}function Xi(c,f){this.O=c,this.O.Qa(!1),this.id=f,this.id.Qa(!1)}function Js(c){this.ua=c,this.za=!1,this.Nf=1}function Jo(c,f){this.gb=c,this.En=f}function _e(c){++_e.Un,this.Pj=c,this.ck=this.ak=this.Zj=this.Xj=this.Vj=null,this.Pb=this.ik=this.pd=!1}function Ul(){}function St(){}function ec(){this.qd=b.Nc.bk,this.rb=0,this.Rc=500,this.og=4e3,this.Lh=7e3}function Ie(c){this.l=c,this.zg=[],this.gl=0}function Hi(c){this.wi=c}function ri(c,f){this.S=c,this.Li=80<=c.sa,this.Fd=this.Ed=this.Ig=this.Gg=0,this.le=this.Li?1:c.wd,this.Yh=1,this.ci=!1,this.Ng=this.Cf=0,this.Va=1,this.Tm=6.283185307179586*Math.random(),this.Ie=new b.Ym,this.Ie.Yd(E.l.K.qd,this.S.qi===b.ce.ef?null:E.B.V().Ef(this.S.qi),E.B.V().cn(this.S.sa)),f.jl(c.T,this.Ie)}function tc(){this.Wa=new y(new b.kc,new b.kc),this.Wa.id.L.Op="add",this.Wa.id.L.zIndex=100,this.Wa.O.L.zIndex=500}function ac(c,f){this.O=c,this.id=f}function wt(){this.Lb=this.ub=this.Jb=this.Gb=this.Ia=0,this.kh=[]}function ic(c,f){for(var g=0;g<c.length;g++)if(parseInt(c[g][n("d28af0")])===f)return g;return-1}function ni(){}function sc(){}function kt(){}function rc(){this.Ac=[],this.Ze=[]}function le(){this.di=[],this.gi=[],this.v=!1,this.Yc=_,this.M={}}function aa(){}function zi(c,f,g){for(this.Ec=g,this.za=!1,this.ma=new he,this.ma.visible=!1,this.Bd=Array(c),c=0;c<this.Bd.length;c++)(g=new b.Ei(new Float32Array(3*f))).Fi(f),this.Bd[c]=g,this.ma[n("e1330770263e8e748d")](g.jd());this.Gc=this.Fc=1,this.na()}function nt(){}function Vi(c,f,g,m,x,S,w){(w===1&&O.bd.includes(S)||w===2&&O.Nh.includes(S)||w===3&&O.hk.includes(S))&&(g=!1),this.$e=c,this.Fo=f,this.bf=g,this.vk=m}function er(){var c=new qt({[n("996b6fb86f67fda5d57750")]:{[n("7aea6ae80c7b2569d2fc37fcf27e2777")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],[n("6fc125878be79a8905cc")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]}}),f=new K;this.Md=ht.from({[n("9323f9")]:{[n("b15456964143cf")]:n("9e5f1254c1da17dcc9594d0b9ad305dac64f557382a518aad7335d7af8ee4c8cdf3bf423abb1f1a1a372ba69bcbeefefeb6da0008486e691b31fc806a982e884b1018542a0d694b48703dc0b8399d9898b5a82b18466d737d3b588e8ae6ec44e91e0b2f52720863036d6bdf7637da36f63bae2917f42a0163395e8dc4a59b3477bcc94d84d5da95452c581c10f08ae181efe85af5b259b375be2caf9572a887e1bfd30a4153c763922837ab824286a323cb25d8026117d1d73d45acc6a2a690337894f830f5616450b965cca4f491c083a8d516f01e55bf71b4a597d08e244a84d4d6521c3e525e7ff7e267eafa97cebeb7c6204a09322f1f35f1b46f5d93888ad6d4501e3c50bdcc2125a09c7da05d38616557382e643879377396c88fb59ff8e6ab261e7e1b4a39232f01aa5b4feb9eb6da044e1a7b1d7e606cc0ca2a8f382ac0b8542a0d696c5c345985cd8cb89cfde5a80c0d7318420c4b79dbbca2e8e3d88eaa3a22721f46363e5bcfc724ba36e67ebb9ce7c06e61533949c8c281baa487d9cc8d07456964143cfb8d65952985441d1d5f37166c67507e9c8e01f78be680e8e25e37276366563e538fc786b613c3aec35d3620e621573d528cc692f395f6e9a70830d194116129e4797271a580f0787153342a911b746726f6608e758d90c6e2e62e4fc36f8cb763c6be3e369afbe357513a2d600d7f7492b4ff5d931e0ff5b1258da9657f78307291c988b498f9e1a427197f144a2da182826c9a208a4d121a563f2f6b791e365b82fafb8b8f5e632e611f7d1a4cff355a81fbf99e888a63fcf028b87cd9a885e860193de9ebecb4d80b1dc339137b5a28ab9cb258c24dbbc82b43252e12242"),[n("4235763421ba6db73e")]:n("5051e0c637cce54e3747bf996cc5f7480841878154d3ca58094d8f882e989e7e5571f3b515b7cf2e162e9ff94cbbdb2cb274f0e3f281a32fcb36a5a9e8f8fd1db5519396fa8cb008ea04ffd9ac9bbb0c9454d0c3d1b6891bc70ba58dc98f821ec9a4c1419135b7f2d6e09c64ce60dbbdf0e2637eb47963e5fadd2f29fc685afaa8d56751b10025e5fd995b5eb24478c092dc0701d44343d4da9c180b99694bc784b44026a72657ab9dec0909d97d7fba6eb8243c763863e538af2f383e787cef65b5371b60102482578f3c1879197bdc62d452320145278147900e5e1e4d039e596f5aaa11b746220f4b5fbb7da84c3f6523b2b676a5a325786feff878b8bc2f2444ead721d7f3643745f5d9799fae0a5375878154c1c34f1c4cd8de5ef9864a2424cab701b7d3624a0a9ff94cbbea2af812adbcf6b1e365b873efe9bca89a3ae815a791f1b6b506f40cffd9acc8ec2d8543d286f0909e03dd0b8fb4ca9b9d1ac4a8d730f620c4b79dbbca2e8e3ddbbdf0b43252e12736b2faa92f29fc383cafa6c47117f11726c6bcc36f58a8487aec8fdd4d41c1071692dbfd0f09dc494bc784b44026b72a5aa88aec087bd6680cff30ff7176371763e538fc786b296f7efa22d17753554064d73ddb6a4e2e5d7bdd10870710105054c7478f0f09401c17bc5f6d1df111b746220b4d5fb90cfb1b6c7439f7d02bf9e965076fefe920fcf7312246f08666e6b3156819b49b7588ac1f4a14908311f6c95b074be5cd09cfc25e096fd3e647879375486c88fb59ff8e6ab261e7e3c5f0f467ad6bfafebeedeb6da006bebcd297b700db06b684eec8ec5f8542a6d696c58713c20c998fc999ad10dcee80268635d3b5faacc83bd37b9bfdacf07b50ab7969e5edaa483efc5c2ba894")},[n("091dfb49")]:{[n("b95c5e9e494bc7")]:{[n("980cb49fee948e00c91f96")]:"vertmain",[n("c2a0eba0b434ed")]:n("8022b6a1f1b6b272ba698db7e3bfaf33c50fbb85fb97bb14bd5beaceabaffb5fe154d0c381c7d6529a49cfc99c88be0ddfeb9760c06c99e9f5e88e79d575dbbc81fc6367f76d35b2fbda6c28fe383ddaf5935106e4643395e88c281bf91f2e8ad28157648b474ad3bccb4b559f5b41cd9d8c5337862c4ee2cb88572a887e46fc25e20135376763e44dfc7818296d0ffa22d17751244064d73ddb6a1e4b022c8344b20d1f4b07279b58910b5e1f3c4bcd007717e000a045445e3a48ae0fc85b3d0334b2d261a7b6327a29afa97cb8bc2f2573f7d03bc9e3533146f48e6fecbb1d5047c7d0569095740e0a989e5ff88b0d3364828251f2f26248089ffb3dbeca3df532b6f6b6e58a38eb38a68ee2b4a830e20ca1c6a6d5f350da4ceaaab9dfee4a9241c7c194d0d447dd2d989ac28e8810c2ecbf62c0779fff9dbabb66dd79cdf7f3b43150a22634b2fbdc2f298f383edef5932206e6153395e88c281ba96e71c38fc30700a54343d4dc9c19788a0e1c9ac3841771b7600686ddfb0a6ece7d1bfd30f47063710729a266bd6f684d3b7ded35d31146242473d05ccc6a2a395d1fca10b04747141214985d89424b05585ccf153542e15deb126e566e52bb15a84c3f3670f0b677d6f379217fe5e921b8bd5a7513a2c438caf446347cf4c23ac2ec42131490834186e7125a09edd703dfcf53252fdba51bb7db345d7af8ee4c8c9b7bb036b0bcf1a5ee66a17cf8eba9e9fe3df90fb68afa82fe57b14ce8dbea8cac4a9332979dcd938905c55cd9be89cfde13dfe2936fe16b9fe1d7fb9778993fceaaf3d02721f45969f4a9f55f75a57b61edbdd23710960026e6fd995b58a85f6bcc94941003b25054c38dc1654e984d5bcbd5f30266c30713f7b9ec087bd97f0eea32e16761347072e76aac2337783420f7608e210a600c398931cc685b6c022d8654980d1d014627d21ac91c1e4f494bcc736741b111b633220a4a5fbb7da84c3f6523b2b676a5a325783cbeab20f2ed7e2448fdcd7c95bf026a19ecff39d5dd400f43c69657f48305584fcfd85e989d7c167280e6478093753b6c8a8a59fafa6ab313e7e3c5f0f616ad698bfeb8edb83ae215b79bb1d59701f64ce8dbea88ac1bcd108b9d8cd0d6368d4bdade9ecdcb4d80a4c0339131c6ebd7ea9b7fd56290a7f0b82721f47450f2baed6f639c727df6a4c87d4df1172682ebe83f19ec5b7bccd294117082061492dbfc0f09af181efed5f30266c67513f5c8ec087bd9790ea36fb223276d3a28ff39f06f693c3c1aba68a23d0c660173d528cc692a395f6e9945925056173600c41adc593e094f2dda00405ba606b55b220b4c5fb90cdb1b7d3474fadc31e1f6623c3cb8ab69aacc3a6211b7916480a4177d1baa8e6e9dbb1f21149083418796125a098f895ccbcf4d557382ae02b59375486c898f59ff8e28ec3ea0b2e880a83eee36b8b6fff3bb0fe20eb886f791bf08f624bb9fee84a64a9241c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c27dbbdf0f66e7ca6746ac2a6f06c74be707db1a5f67d51b84142d5b9c7694db35f73e281c5505a9c101487cd896b1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37279216776bb67ba2b37593327b97f933f103a1002957987290d731f33a24185101a5c5055b50dc92b5e1e4d4bcd002440b311b7462208485fb90ca84c3f6523b2b676a5f0763a3cb8ab23e8fa6f2555b7901580a4170e4ce8df39d5d15a1441d7c74186e41258788f8b2d989c0f557382e646f593754826cfbf0cb8ca61f03eb1baf0bca939ad6bfafebf99eb6da017b780a0c0e524fe5ae8ceafa8f602d601c7c194dfc345980f8f989fd8dd3cd6b2c0268740dee6eeec887fd975aee0b3f8767aab7b23a58bbc382bfd333eb6f5935106e6152789e8803f189e082eeec5831216d6050385d89c180b83485acf85b51c35a0204e8497a6482fd97f0eea33956761343412b2709a25347e396bec52c46222315517c22ad97f592c486cdf05c352014101138546dc584b43081a8f457557b076a044371d393bae0bc95b3c0234b2d261a5c7643c6bfff838b8bc2f054ffbc53bd7fb547d1baa8e6befbb1f21149083418796125a098f895cc8ed501c2ec08c02a0c42b19309ff83de88c7ff634a1e7a1e68531bb6befe8c9f8fc1cb55193c6a6d5f355a84ce8dbb9dfee1af4149a87d1878324cb18869e89ceaf5a82b18466d737d3b4fbefc939993ebbaaf2d22723853034a7edab3a3efe2d2bade0d44646ac5163d5bde67c4daf486a8ad3f00701d44343d4da9c19788a0e1c9ac3841771b7600686ddfe7e6ecc0c1bff41f47663632729a278f17872296f7efa24d1300a7a013f897fc16a42395f6e994183474114003292508d1f0949585ccf153233a606b50262407d0ff959d24c6b6522c1f577a7a3240d3cb9d969adcf3a6411f5d13bd0e60f6a00bf996c88aa1f0258ccd70ddbc11f59108f895ccbcf4d557382b627a4db37142cc8ee4efd9b7cc174f0e3f7b4ab27e43cb8febf9feb6fd144e6d3f397b912e841e8c2b9dfee4a9441809aca918f19cf51d8d289cfde09d1f3d730f77098eedee68866993ebbaaf2a1777dad7369e5a5ea2f29fc383ddef5932276ba4c70c8aac4690eef6f3b9fa1941272c10116d19ad84d5689535a9ac080542dd17706a18aa85d269d2450e725e10376366563e538fc786b296f7efa24d13e0c7704228e7787725b35486cdf56a5070b671a09854cdc593a094f5e89556240a607c610340a2c49ce19bf3d2a7050abb676a5ab327b5cafa97cb8ba2f3c4ef1c220ccf9497019b38e6e9de84a0305878027d395054d0aef9e5e8d8b083264828251f786624a799ff94ce88c7fec34b6f6b6e5b232f02dbfa9e99ea133ff13f7d0d5c0e457ee0cb9dfb9de9d099343c7c0e1d0d4478d4aaede9ecd9a1ac8f58771d15697eac8e59f23c9599bf7b4e47076e12745b2faa97f48ad707ef3b5d3371197002497aefd7f539f4271dd84941003ce1014879dd7435d834f43ccdeb466268c3143b59d9a592a90281bfd30f47011216776a266b02c347e303df165b5371b60102482578f3c18791977ca13b34743655054c70dcb5a5e1e4d4bcd006d17f711b746665c630ff848e81a4c2f7dede161a6c7327a29fcfe2fa9ab2c1347a1917196d3026a19bf981888ac1f1454dac711c7c3740755c5c9498f9e15557382f35af693743a6c8a8a59ff8e6ab261e7e1b4f0f467e43cbefebeeda129f513be82eda6b90bf71bffd8ddc8ec5fd61481c781c6a5119b4bcfc8e9d8dc4f95b2b626863580e2dbbddf38ff6bcdbde5a2473bb17b6ff1a7eb6768e2684df0bcce606ca24064cbb9d03459bb4f3b9da3941003d41b169ecd8b1a11c90f1eca9ea8542c862845e98d8a5527933f71b965a32e327d7b27f23b9b6f6b4d787cef35d36246265573d5289b3f1f691f30ca12c103174e0015834d9d291440121cda023157b176a04437577f1ff950ec074c2f7dede161a6c4327858afac08b8bd5d")},[n("61b491f582bb02f61d")]:{[n("7aee52f90c76107eebfd30")]:"fragmain",[n("1250bb5064c4bd")]:n("8022b6a1f1b6b272ba698db7e3bfaf33c50fbb85fb97bb14bd5beaceabaffb5fe154d0c381c7d6529a49cfc99c88be0ddfeb9760c06c99e9f5e88e79d575dbbc81fc6367f76d35b2fbda6c28fe383ddaf5935106e4643395e88c281bf91f2e8ad28157648b474ad3bccb4b559f5b41cd9d8c5337862c4ee2cb88572a887e46fc25e20135376763e44dfc7818296d0ffa22d17751244064d73ddb6a1e4b022c8344b20d1f4b07279b58910b5e1f3c4bcd007717e000a045445e3a48ae0fc85b3d0334b2d261a7b6327a29afa97cb8bc2f2573f7d03bc9e3533146f48e6fecbb1d5047c7d0569095740e0a989e5ff88b0d3364828251f2f26248089ffb3dbeca3df532b6f6b6e58a38eb38a68ee2b4a830e20ca1c6a6d5f350da4ceaaab9dfee4a9241c7c194d0d447dd2d989ac28e8810c2ecbf62c0779fff9dbabb66dd79cdf7f3b43150a22634b2fbdc2f298f383edef5932206e6153395e88c281ba96e71c38fc30700a54343d4dc9c19788a0e1c9ac3841771b7600686ddfb0a6ece7d1bfd30f47063710729a266bd6f684d3b7ded35d31146242473d05ccc6a2a395d1fca10b04747141214985d89424b05585ccf153542e15deb126e566e52bb15a84c3f3670f0b677d6f379217fe5e921b8bd5a7513a2c438caf446347cf4c23ac2ec42131490834186e7125a09edd703dfcf53252fdba51bb7db345d7af8ee4c8c9b7bb036b0bcf1a5ee66a17cf8eba9e9fe3df90fb68afa82fe57b14ce8dbea8cac4a9332979dcd938905c55cd9be89cfde13dfe2936fe16b9fe1d7fb9778993fceaaf3d02721f45969f4a9f55f75a57b61edbdd23710960026e6fd995b58a85f6bcc94941003b25054c38dc1654e984d5bcbd5f30266c30713f7b9ec087bd97f0eea32e16761347072e76aac2337783420f7608e210a600c398931cc685b6c022d8654980d1d014627d21ac91c1e4f494bcc736741b111b633220a4a5fbb7da84c3f6523b2b676a5a325783cbeab20f2ed7e2448fdcd7c95bf026a19ecff39d5dd400f43c69657f48305584fcfd85e989d7c167280e6478093753b6c8a8a59fafa6ab313e7e3c5f0f616ad698bfeb8edb83ae215b79bb1d59701f64ce8dbea88ac1bcd108b9d8cd0d6368d4bdade9ecdcb4d80a4c0339131c6ebd7ea9b7fd56290a7f0b82721f47450f2baed6f639c727df6a4c87d4df1172682ebe83f19ec5b7bccd294117082061492dbfc0f09af181efed5f30266c67513f5c8ec087bd9790ea36fb223276d3a28ff39f06f693c3c1aba68a23d0c660173d528cc692a395f6e9945925056173600c41adc593e094f2dda00405ba606b55b220b4c5fb90cdb1b7d3474fadc31e1f6623c3cb8ab69aacc3a6211b7916480a4177d1baa8e6e9dbb1f21149083418796125a098f895ccbcf4d557382ae02b59375486c898f59ff8e28ec3ea0b2e880a83eee36b8b6fff3bb0fe20eb886f791bf08f624bb9fee84a64a9241c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c27dbbdf0f66e7ca6746ac2a6f06c74be707db1a5f67d51b84142d5b9c7694db35f73e281c5505a9c101487cd896b1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37279216776bb67ba2b37593327b97f933f103a1002957987290d731f33a24185101a5c5055b50dc92b5e1e4d4bcd002440b311b7462208485fb90ca84c3f6523b2b676a5f0763a3cb8ab23e8fa6f2555b7901580a4170e4ce8df39d5d15a1441d7c74186e41258788f8b2d989c0f557382e646f593754826cfbf0cb8ca61f03eb1baf0bca939ad6bfafebf99eb6da017b780a0c0e524fe5ae8ceafa8f602d601c7c194dfc345980f8f989fd8dd3cd6b2c0268740dee6eeec887fd975aee0b3f8767aab7b23a58bbc382bfd333eb6f5935106e6152789e8803f189e082eeec5831216d6050385d89c180b83485acf85b51c35a0204e8497a6482fd97f0eea33956761343412b2709a25347e396bec52c46222315517c22ad97f592c486cdf05c352014101138546dc584b43081a8f457557b076a044371d393bae0bc95b3c0234b2d261a5c7643c6bfff838b8bc2f054ffbc53bd7fb547d1baa8e6befbb1f21149083418796125a098f895cc8ed501c2ec08c02a0c42b19309ff83de88c7ff634a1e7a1e68531bb6befe8c9f8fc1cb55193c6a6d5f355a84ce8dbb9dfee1af4149a87d1878324cb18869e89ceaf5a82b18466d737d3b4fbefc939993ebbaaf2d22723853034a7edab3a3efe2d2bade0d44646ac5163d5bde67c4daf486a8ad3f00701d44343d4da9c19788a0e1c9ac3841771b7600686ddfe7e6ecc0c1bff41f47663632729a278f17872296f7efa24d1300a7a013f897fc16a42395f6e994183474114003292508d1f0949585ccf153233a606b50262407d0ff959d24c6b6522c1f577a7a3240d3cb9d969adcf3a6411f5d13bd0e60f6a00bf996c88aa1f0258ccd70ddbc11f59108f895ccbcf4d557382b627a4db37142cc8ee4efd9b7cc174f0e3f7b4ab27e43cb8febf9feb6fd144e6d3f397b912e841e8c2b9dfee4a9441809aca918f19cf51d8d289cfde09d1f3d730f77098eedee68866993ebbaaf2a1777dad7369e5a5ea2f29fc383ddef5932276ba4c70c8aac4690eef6f3b9fa1941272c10116d19ad84d5689535a9ac080542dd17706a18aa85d269d2450e725e10376366563e538fc786b296f7efa24d13e0c7704228e7787725b35486cdf56a5070b671a09854cdc593a094f5e89556240a607c610340a2c49ce19bf3d2a7050abb676a5ab327b5cafa97cb8ba2f3c4ef1c220ccf9497019b38e6e9de84a0305878027d395054d0aef9e5e8d8b083264828251f786624a799ff94ce88c7fec34b6f6b6e5b232f02dbfa9e99ea133ff13f7d0d5c0e457ee0cb9dfb9de9d099343c7c0e1d0d4478d4aaede9ecd9a1ac8f58771d15697eac8e59f23c9599bf7b4e47076e12745b2faa97f48ad707ef3b5d3371197002497aefd7f539f4271dd84941003ce1014879dd7435d834f43ccdeb466268c3143b59d9a592a90281bfd30f47011216776a266b02c347e303df165b5371b60102482578f3c18791977ca13b34743655054c70dcb5a5e1e4d4bcd006d17f711b746665c630ff848e81a4c2f7dede161a6c7327a29fcfe2fa9ab2c1347a1917196d3026a19bf981888ac1f1454dac711c7c3740755c5c9498f9e15557382f35af693743a6c8a8a59ff8e6ab261e7e1b4f0f467e43cbefebeeda129f513be82eda6b90bf71bffd8ddc8ec5fd61481c781c6a5119b4bcfc8e9d8dc4f95b2b626863580e2dbbddf38ff6bcdbde5a2473bb17b6ff1a7eb6768e2684df0bcce606ca24064cbb9d03459bb4f3b9da3941003d41b169ecd8b1a11c90f1eca9ea8542c862845e98d8a5527933f71b965a32e327d7b27f23b9b6f6b4d787cef35d36246265573d5289b3f1f691f30ca12c103174e0015834d9d291440121cda023157b176a04437577f1ff950ec074c2f7dede161a6c4327858afac08b8bd5d")}},[n("c46763e4a7ec7878a96e")]:{[n("4eaa44842a17611733")]:f.source,[n("125687447bd7b4cc68")]:f.source.style,[n("8ca8a036f60ea08ee7")]:{[n("b5d3740755c5c923cbcb4d1c20cb")]:{value:[1,.5,.25,.5],type:"vec4<f32>"},[n("d5b303ed21beaefeb89d3cf10db7")]:{value:[0,0],type:"vec2<f32>"},[n("2563f3bdd16e5eae4851c986c24747")]:{value:[0,0],type:"vec2<f32>"}}}}),this.Ud=new Ka({[n("3ea865be2f3670273f")]:c,[n("b4769ee6dcec88")]:this.Md})}function Wt(){this.L=new Pe,this.Qk=this.Ok=0}function Je(c){this.K=c,this.S=new b.Uf.Sf,this.qb=!1,this.md=!0,this.rf=!1,this.Zh=this.vb=0,this.Va=1,this.Qb=this.Fg=0,this.pa={},this.$a=0,this.Rb=new Float32Array(400),this.Ya=new Float32Array(400),this.ia=new Float32Array(400),this.Z=this.ka=this.Ga=this.dl=null,this.si()}function Ut(c,f,g,m,x){this.Ia=c,this.Gb=f,this.Jb=g,this.ub=m,this.Lb=x}function Lt(c){this.G=new b.Zg,this.G.ma[n("e616cc1da993c5918a")](this.G.P),this.Mg=this.dd=null,this.ed=c,this.X=0,this.$g=this.Xg=this.Wg=this.Ug=this.Rg=this.Pg=this.wd=1,this.ym(n("f14741171300914e9f0c"))}function He(c){this.ua=c}b.d[n("bdc95a0404dea619a0d8333a30f3af")](n("a2d405d8c31a1f4bcbcb"))[n("16d4acd0764e")][n("7025dbb004a9d73e")]=n("b78ad5455887"),R={A:function(c,f,g){c[n("a2c010dad6")](),c[n("9de87e3444dbcd")](f,g)},g:function(c,f,g){c[n("6d2d9b4f81")](),c[n("c0f76377a15a73e3")](f,g)}},I.Sa=function(c){var f=c.parent;f?.removeChild(c)},n("371a4cc4cf05d0cb771132da"),Jt=n("4fe825b6a3f7f0f516ad6b8cfebe9ba93ee404a582edcba108ea04bb9ff9c3b700"),Cl=n("6b74192a9f53d45132014720d21abf181e5f121b8d536401ad43ea046a597d1fa555e2"),_5=n("2bf91f58c68dd04556971014f184d0445e805249d0ddb2472e992044f5c8fb0e658c2359"),Ol=n("176d2bccf221fce97a2304a0e533d0f3542c04fbdd3dd9ff5d4d42d7de09d0d405580b9e951cd3c9"),n("05d3b5fee0976adb688daaf2d7617caa7363e3bcf02768b97063faa2932211e00b66c9bf"),y5=n("d96f694a3423be7784214626233480358c2c0e7219739f41851616561b4b845d94071e5e4f5ecd042f02ed53"),Zs=void 0,Q=b.nc[n("c61eb9618484c09c8018")],Zs=Q||=n("ef459f"),Il=(()=>{switch(Zs){case n("a2c60f"):var c=n("288c0124793c");break;case n("be2be5"):c=n("08bd2f044818");break;case n("916461"):c=n("386f08d47adf");break;case n("289c19"):c=n("dbe9ae911ac3");break;default:c=n("798f95f3a8bd")}return c})(),window.moment.locale(Il),E=null,a=b.nc[n("7d27ce084f2dce71d625467f4c29")],I.N=function(c){return a[c]},I.se=function(c){return c[Zs]||(c[n("62164a")]?c[n("51a7bd")]:c[n("6049")])},I.Jp=function(c){return encodeURIComponent(c)},I.ha=function(c,f){return setTimeout(c,f)},I.am=function(c){clearTimeout(c)},I.Ii=function(c){var f=(Math.floor(c)%60).toString(),g=(Math.floor(c/60)%60).toString(),m=(Math.floor(c/3600)%24).toString(),x=(c=Math.floor(c/86400).toString(),I.N(n("babe08a4d261f438afb6aab1a72efb"))),S=I.N(n("ee0ac4e89e2dc06c9be296e1957ece7e")),w=I.N(n("ae4a0428deed00acdb225624d3a5")),M=I.N(n("bc788ae6acbf767aa97028e4adfa"));return 0<c?c+n("5a4e2e5d")+x+n("bfd5f302")+m+n("a13711e4")+S+n("53216776")+g+n("a2965685")+w+n("5b296f7e")+f+n("10c46053")+M:0<m?m+n("60149083")+S+n("de4a9241")+g+n("6eda0231")+w+n("81d73184")+f+n("f381c7d6")+M:0<g?g+n("ab799fae")+w+n("05d3b588")+f+n("d88c281b")+M:f+n("6b395f6e")+M},I.sm=function(c){return c.includes(n("84bdb432ee"))?c.replaceAll(n("9009a086f2"),'target="_black" href'):c},I.Ti=function(c,f=null,g=null){var m=b.d[n("2bbf5f7bce94d4675f815843d99c")](n("ec4e4dcd99b146"));n("090fe558e818662e74e6")!==typeof f&&f!==null&&(n("6523897c8c3c0272083a")!==typeof f[n("a49c82")]&&(m[n("e45c42")]=f[n("7e6624")]),n("da9ef289bb09c91f8797")!==typeof f[n("c2b2f7aca834")]&&f[n("a8189982c29e")]&&(m[n("ac9c9d06dee2")]=n("2ede83b85c20")),n("62064a11039141970f1f")!==typeof f[n("c633ed3fafa9")]&&f[n("ea9fc99b8b0d")]&&(m[n("69be8efa88ac")]=n("3ce91b692563")),n("c5c3291c2cdca212a8da")!==typeof f[n("5a086e022d9c4f830b144d1b")])&&(m[n("043634b87baa2529653a27b1")]=f[n("baa80ea2cd3cef23abb4edbb")]),m[n("dc5967df85")]=n("82e721edf2327a5fe0fa3afcfd7c2248e2d7"),m[n("1250a646")]=c,g&&(m[n("57e737a6b4edb9")]=m[n("8678266beffa28e4fd6b3155f7c03cc4f8403d")]=function(){try{g()}catch{}m[n("370757c6d40dd9")]=m[n("803eaca1e1b4a22efb2dabafe9bea63efe06b7")]=null}),(b.d[n("835ce01763")]||b.d[n("0c3a2bab558d370e710b22945a900e0a7b233f8245")](n("de07c51086"))[0])[n("16c6a8d97f45b86e76c68cd5")](m)},I.fa=function(c,f){return f.prototype=Object.create(c.prototype),(f.prototype.constructor=f).parent=c,f},I.Dm=function(c){return(c%=6.283185307179586)<0?c+6.283185307179586:c},I.Mp=function(c,f,g){return I.Hd(g,c,f)},I.Hd=function(c,f,g){return g<c?g:c<f?f:Number.isFinite(c)?c:.5*(f+g)},I.Q=function(c,f,g,m){return c<f?Math.min(f,c+g*m):Math.max(f,c-g*m)},I.uj=function(c,f,g){return f+(c-f)*Math.pow(.5,g/33.333)},I.Mf=function(c,f,g){return c-(c-f)*g},I.ah=function(c,f){return Math.sqrt(c*c+f*f)},I.Nj=function(c,f,g,m){var x=f+m;if(c==null)throw new TypeError;for(m=c.length>>>0,g=(g>>=0)<0?Math.max(m+g,0):Math.min(g,m),f=(f>>=0)<0?Math.max(m+f,0):Math.min(f,m),x=x===void 0?m:x>>0,m=Math.min((x<0?Math.max(m+x,0):Math.min(x,m))-f,m-g),x=1,f<g&&g<f+m&&(x=-1,f+=m-1,g+=m-1);0<m;)f in c?c[g]=c[f]:delete c[g],f+=x,g+=x,m--},I.Pp=function(c,f,g,m){var x=6.283185307179586*Math.random();return[c+(g=Math.sqrt(g*g+Math.random()*(m-g)*(m+g)))*Math.cos(x),f+g*Math.sin(x)]},I.bo=function(){return 2147483647*Math.random()},I.jo=function(){var c=[32,33,34,35];return c[parseInt(Math.random()*c.length)]},I.Rp=(e=[n("06a7"),n("4eee"),n("3bde"),n("375b"),n("2522"),n("2e8a"),n("61e4"),n("b8be"),n("cb44"),n("a5af"),n("3709"),n("7023"),n("9c8e"),n("172c"),n("1d6b"),n("7d08"),n("2096"),n("9e47"),n("19e3"),n("7ae1"),n("4d55"),n("08b5"),n("cc70"),n("d28d"),n("16c8"),n("c142"),n("82e2"),n("a968"),n("ec4e"),n("8b48"),n("fc38"),n("57fe"),n("d135"),n("df68"),n("7038"),n("4a21")].map(function(c){return c.charCodeAt(0)}),function(c){n("684cc4df09dbc7511525")==typeof c&&(c=16);for(var f="",g=0;g<c;g++)f+=String.fromCharCode(e[Math.floor(Math.random()*e.length)]);return f}),I.Sp=function(c,f,g,m){f=g*(1-.5*f);var x=Math.min(f,1-f);return I.wh(c,x?(g-f)/x:0,f,m)},I.wh=function(c,f,g,m){var x=(f*=1-Math.abs(2*g-1))*(1-Math.abs(c/60%2-1));return g-=f/2,0<=c&&c<60?[g+f,g+x,g,m]:60<=c&&c<120?[g+x,g+f,g,m]:120<=c&&c<180?[g,g+f,g+x,m]:180<=c&&c<240?[g,g+x,g+f,m]:240<=c&&c<300?[g+x,g,g+f,m]:[g+f,g,g+x,m]},I.vc=function(c,f,g){$[n("7b4b181a")](c)[n("2d78ce89dd")](f)[n("ac998111d5")](g)},I.Up=function(c,f,g,m){var x={};x[n("73500c1692")]=n("8c9a8b0b"),x[n("1bb96f62")]=c,(c={})[n("e12006671539896b8c0e126c08")]=n("5d2fad62802b01610330826a"),c[n("f3cb9b9605c71e989edf8e")]=function(S){S[n("82ff21fbe163205ae5f63ce8fa7e324df7")]&&m(S[n("354ad889dd4f5f")]/S[n("bc7991fba1fd")]*100)},x[n("dc5576dda6d8475f8046")]=c,$[n("d3e5bfa72f")](x)[n("cc7b6ff6bc")](f)[n("883da5b5e9")](g)},I.Ob=function(){return Date.now()},I.xc=function(c,f){for(var g in c)c.hasOwnProperty(g)&&f(g,c[g])},I.Vp=function(c){for(var f=c.length-1;0<f;f--){var g=Math.floor(Math.random()*(f+1)),m=c[f];c[f]=c[g],c[g]=m}return c},b.Oh=Ii(n("a0309081c58ca402ce1f8f89")),b.rg=Ii(n("d74cb83e3a5a342ba8")),b.So=(t=n("f6e0ddfdb365c835"),ji.prototype.F=function(){var c=this.xd[t](this.ta);return this.ta+=1,c},i=n("1561f2bcd0646ffd2b"),ji.prototype.xa=function(){var c=this.xd[i](this.ta);return this.ta+=2,c},s=n("29fdce28e4f05b5303"),ji.prototype.wg=function(){var c=this.xd[s](this.ta);return this.ta+=4,c},r=n("b0e69777f26999e6ccbac8"),ji.prototype.Bc=function(){var c=this.xd[r](this.ta);return this.ta+=4,c},ji),b.bi=(o=n("b5d5521c70c4cf54"),Zo.prototype.ne=function(c){this.xd[o](this.ta,c),this.ta+=1},d=n("ff436406ca5af14731"),Zo.prototype.oe=function(c){this.xd[d](this.ta,c),this.ta+=2},Zo),b.Ip=function(){},b.$b=(Fa.qh=function(){return new Fa("",null,0,0,0,0,0,0,0,0)},Fa.so=function(c,f,g){return new Fa(c,f,g[n("a962")],g[n("1d77")],g[n("6fd7")],g[n("ae57")],g[n("72f34c")],g[n("ff4078")],g[n("54d5e1")],g[n("8fb0f9")])},Fa.prototype.ig=function(){return this.yj||(this.wj!=null&&(this.Texture=new K({source:this.wj,frame:new Ae(this.mb,this.nb,this.fh,this.hh)})),this.yj=!0),this.Texture},Fa.prototype.We=function(){this.Texture!=null&&this.Texture.Zn()},Fa),b.Bh=(ae.prototype.We=function(){for(var c=0;c<this.ng.length;c++)this.ng[c].Qp(),this.ng[c].Zn();for(this.ng=[],c=0;c<this.Fh.length;c++)this.Fh[c].We();this.Fh=[]},ae.qh=function(){var c=new ae.te(b.La.Oa,b.La.Oa),f=new ae.ue(n("0a3efe2e68f9b6c77445"),[b.La.Oa],[b.La.Oa]);return new ae([],[],{},c,{},new ae.uf(b.La.Oa),{},f,{},new ae.wf("",f,c),{},new ae.Ha([b.La.Oa]),{},new ae.Ha([b.La.Oa]),{},new ae.Ha([b.La.Oa]),{},new ae.Ha([b.La.Oa]))},ae.tm=function(c,f,g,m){var x=new ae.te(b.La.Oa,b.La.Oa);return c=new ae.ue(n("483cb8a82afbe8793647"),[c],[f]),new ae([],[],{},x,{},new ae.uf(b.La.Oa),{},c,{},new ae.wf("",c,x),{},new ae.Ha([g]),{},new ae.Ha([m]),{},new ae.Ha([b.La.Oa]),{},new ae.Ha([b.La.Oa]))},ae.wm=function(c,f,g,m){var x={};I.xc(c[n("798994c0929c3bd9e286")],function(ge,ue){x[ge]=n("4cb8bc2c")+ue});for(var S={},M=0;M<c[n("d614f300b4aaee9fbf16e4188187")].length;M++){var w=c[n("5b7f3627b1519320026d213f846c")][M];S[w[n("ac948a")]]=new ae.ue(x[w[n("5cddec460d54")]],w[n("386b1bf859")].map(function(ue){return f[ue]}),w[n("af87dd4d44")].map(function(ue){return f[ue]}))}M=c[n("3cfe15662e44ecf82afaf179")];var M=new ae.ue(x[M[n("19fae925f0eb")]],M[n("fc2f5fbc65")].map(function(ge){return f[ge]}),M[n("c5d12b173e")].map(function(ge){return f[ge]})),B={},k=(I.xc(c[n("2bb9547bdca4d84147")],function(ge,ue){B[parseInt(ge)]=new ae.Ha(ue[n("0c3f2fac75")].map(function(ke){return f[ke[n("b2b111a2df2816")]]}))}),w=new ae.Ha(c[n("b622012cc99e12a6d020f73f")][n("5201751633")].map(function(ge){return f[ge[n("d0d37744bd4a78")]]})),{}),N=(I.xc(c[n("916f7cb1616ed3a1fa7e")],function(ge,ue){k[parseInt(ge)]=new ae.Ha(ue[n("f261d57693")].map(function(ke){return f[ke[n("e3e680b10ef707")]]}))}),new ae.Ha(c[n("6e925f7406eb61eb1d69577e14")][n("ac9f8f0cd5")].map(function(ge){return f[ge[n("8fb2f4657aab7b")]]}))),X={},z=(I.xc(c[n("b2ab15b1f22e1b3d")],function(ge,ue){X[parseInt(ge)]=new ae.Ha(ue[n("03d66485e2")].map(function(ke){return f[ke[n("0c2f2bb8798e3c")]]}))}),new ae.Ha(c[n("ce37f115878dff8bb910f6")][n("2c1f0f8c55")].map(function(ge){return f[ge[n("a9684ebb4471c1")]]}))),Y={},W=(I.xc(c[n("fc2a52ae73a22720403c25a3")],function(ge,ue){Y[parseInt(ge)]=new ae.Ha(ue[n("cc7f6fecb5")].map(function(ke){return f[ke[n("a0038794cd9a88")]]}))}),new ae.Ha(c[n("de08cc109180c186b319c317858cc2")][n("289b0b0849")].map(function(ge){return f[ge[n("08ab2f3c653220")]]}))),pe={},oe=(I.xc(c[n("d293fb97a20ef7079e82ff99")],function(ge,ue){ge=parseInt(ge),pe[ge]=new ae.te(f[ue[n("49d8aa0fa8")]],f[ue[n("471f25d5bc")]])}),c[n("aacb03cfda561f2fe7ad1fabd93016")]),oe=new ae.te(f[oe[n("79889adf98")]],f[oe[n("0bdb6191f8")]]),Re={},At=(I.xc(c[n("3385574fdb81cd537f855e5a")],function(ge,ue){ge=parseInt(ge),Re[ge]=new ae.uf(f[ue[n("b8eb9b78d9")]])}),c[n("59abb9e5b1a72be934bc88fa8aa109")]),At=new ae.uf(f[At[n("b0e39370d1")]]),ze={};return I.xc(c[n("41c6a615a8f22e1b3d")],function(ge,ue){ge=parseInt(ge),ze[ge]=new ae.wf(ue[n("aacf05c9c25a")],new ae.ue(x[ue[n("f111184d1b")][n("f112014d1803")]],null,ue[n("4a28673420")][n("0f277dede4")].map(function(ke){return f[ke]})),new ae.te(null,f[ue[n("6fd01e9087cd9a88")][n("23b34979d0")]]))}),c=new ae.wf({},M,oe),new ae(g,m,pe,oe,Re,At,S,M,ze,c,B,w,k,N,X,z,Y,W)},ae.prototype.De=function(c){return this.Fk.hasOwnProperty(c)?this.Fk[c]:this.Zo},ae.prototype.Ef=function(c){return this.Mk.hasOwnProperty(c)?this.Mk[c]:this.hp},ae.prototype.lj=function(c){return this.Tk.hasOwnProperty(c)?this.Tk[c]:this.rp},ae.prototype.nj=function(c){return this.Zk.hasOwnProperty(c)?this.Zk[c]:this.xp},ae.prototype.sj=function(c){return this.pi.hasOwnProperty(c)?this.pi[c]:this.Bl},ae.prototype.Yg=function(c){return this.fl.hasOwnProperty(c)?this.fl[c]:this.nl},ae.prototype.cn=function(c){return this.sk.hasOwnProperty(c)?this.sk[c]:this.Ko},ae.prototype.bh=function(c){return this.Ak.hasOwnProperty(c)?this.Ak[c]:this.To},ae.wf=function(c,f,g){this.pn=c,this.dh=f,this.wn=g},ae.ue=function(c,f,g){this.ih=c,this.Na=f,this.Wd=g},ae.Ha=function(c){this.Na=c},ae.te=function(c,f){this.Na=c,this.Wd=f},ae.uf=function(c){this.Na=c},ae),b.La=(ta.prototype.ra=async function(){var c=(await me.load(n("84f0f411e134abbce9aeeb6dd616b782e6c8b705f105b39fe5c3ae01c7"))).source,m=(this.In=new b.$b(n("0755681de559f9216e2278eefa30ec"),c,158,86,67,124,148,63.5,128,128),this.Mn=new b.$b(n("2f1654cedc07dcd24e3758c8d200d4da46"),c,158,4,87,74,203,63.5,128,128),new b.$b(n("e5b00bfd11858afe84b206d408"),c,4,4,146,146,63.5,63.5,128,128),(await me.load(n("b7cd8b6c52815c49da83e40005902050ea94a65520d23d50a8"))).source),c=new b.$b(n("0bd86898d0a5e86760"),m,0,0,42,80,75,64,128,128),f=new b.$b(n("c79cac5c1491224bbb68"),m,46,0,20,48,109,63,128,128),g=new b.$b(n("7aef59eb217c2b78eccc23f9e960"),m,70,0,32,32,0,0,0,0),m=new b.$b(n("a17646b27a65ccb1c74549bd5e7b"),m,46,52,64,64,0,0,0,0);c=b.Bh.tm(m,g,c,f),this.Ma=new b.Uj({},c),this.gc=this.nh=-1e4,(c=b.nc.document.createElement(n("c151229a3357b4"))).width=80,c.height=80,this.sh={nd:c,fk:c.getContext(n("1bfe79"),{willReadFrequently:!0}),Ye:new K({source:Be.from(c)})},this.sb=null,this.Gh=[]},ta.Oa=b.$b.qh(),ta.prototype.C=function(){},ta.prototype.Kh=function(c,f,g){var m=this,x=this.Ma.wk();if(0<x&&I.Ob()-this.nh<12e5)c?.();else{if(this.sb!=null&&!this.sb.Pb){if(I.Ob()-this.nh<3e5)return void(c!=null&&c());this.sb.Uo(),this.sb=null}var S=new b.Xo(x);S.$o(function(w,M){S===m.sb&&g!=null&&g(w,M)}),S.cp(function(w){S===m.sb&&f!=null&&f(w)}),S.ip(function(){S===m.sb&&f!=null&&f(Error())}),S.np(function(){S===m.sb&&c!=null&&c()}),S.sp(function(w){if(S===m.sb)m.gc=I.Ob(),m.sb=null,m.Ma.V().We(),m.Ma=w,c?.(),m.Ep();else try{w.V().We()}catch{}}),S.ol(),this.nh=I.Ob(),this.sb=S}},ta.prototype.qe=function(){return 0<this.Ma.wk()},ta.prototype.Eg=function(c){this.Gh.push(c)},ta.prototype.Ep=function(){for(var c=0;c<this.Gh.length;c++)this.Gh[c]()},ta.prototype.V=function(){return this.Ma.V()},ta),b.Wl=(si.prototype.Wb=function(c){return this.vf[c]},si.nm=(Qo.prototype.Be=function(c,f){for(var g=0;g<this.cd.length;g++)if(this.cd[g].Zi===c)throw Error();return this.cd.push(new si.Em(c,f)),this},Qo.prototype.Jm=function(){for(var c=0,f=0;f<this.cd.length;f++)c+=this.cd[f].Ff;for(var f={},g=0,m=0;m<this.cd.length;m++){var x=this.cd[m];x.Ff/=c,x.Tg=g,x.Vg=g+x.Ff,g=x.Vg,f[x.Zi]=x}return new si(f)},Qo),si.Em=(kl.prototype.Hf=function(c){return this.Tg+(this.Vg-this.Tg)*c},kl),si),b.Zg=(va.Nn=797,va.prototype.Cj=function(c,f,g){var m=new l(f,g);return f.L.zIndex=.001*(2*(797-c)+4),g.L.zIndex=.001*(2*(797-c)-2+3),m},va.prototype.Yd=function(c,f,g,m,x,S,w,M){var B=g.Na;if(c=(c===b.Nc.$d?f.dh:g).Wd,0<B.length&&0<c.length)for(f=0;f<this.o.length;f++)this.o[f].O.uc(B[f%B.length]),this.o[f].id.uc(c[f%c.length]),this.o[f].O.Xe(M),this.o[f].id.Xe(M);this.P.Yd(m,x,S,w)},va.prototype.Dk=function(c){E.l.U.S.sa=c;var f=E.B.V().De(c);if(c=f.Na,f=f.Wd,c.length&&f.length)for(let g=0;g<this.o.length;++g)this.o[g].O.uc(c[g%c.length]),this.o[g].id.uc(f[g%f.length])},va.prototype.xl=function(c){E.l.U.S.ob=c,c=E.B.V().Yg(c),this.P.pf(.004,this.P.Sc,c.Na)},h=(()=>{class c extends he{constructor(){super(),this.sortableChildren=!0,this.rd=[],this.td=[],this.ud=[],this.Sc=[],this.df=new he,this.gf=[];for(var g=0;g<4;g++){var m=new b.kc;m.uc(E.B.In),this.df.addChild(m.L),this.gf.push(m)}this.df.zIndex=.0011,this.addChild(this.df),this.Gk(),this.Xc=new b.kc,this.Xc.uc(E.B.Mn),this.Xc.L.zIndex=.001,this.addChild(this.Xc.L),this.Nk()}}return c.prototype.Yd=function(f,g,m,x){this.pf(.002,this.rd,f.Na),this.pf(.003,this.td,g.Na),this.pf(.004,this.Sc,x.Na),this.pf(.005,this.ud,m.Na)},c.prototype.pf=function(f,g,m){for(;m.length>g.length;){var x=new b.kc;g.push(x),this.addChild(x.L)}for(;m.length<g.length;)g.pop().zd();for(x=0;x<m.length;x++){f+=1e-4;var S=g[x];S.uc(m[x]),S.L.zIndex=f}},c.prototype.ja=function(f,g,m,x){for(this.visible=!0,this.position.set(f,g),this.rotation=x,f=0;f<this.rd.length;f++)this.rd[f].Sb(m);for(f=0;f<this.td.length;f++)this.td[f].Sb(m);for(f=0;f<this.ud.length;f++)this.ud[f].Sb(m);for(f=0;f<this.Sc.length;f++)this.Sc[f].Sb(m)},c.prototype.ya=function(){this.visible=!1},c.prototype.pl=function(f,g){this.df.visible=!0,g/=1e3;for(var m=1/this.gf.length,x=0;x<this.gf.length;x++){var S=1-(g+m*x)%1;this.gf[x].L.alpha=1-S,this.gf[x].Sb(f*(.5+4.5*S))}},c.prototype.Gk=function(){this.df.visible=!1},c.prototype.yl=function(f,g,m){this.Xc.L.visible=!0,this.Xc.L.alpha=I.Q(this.Xc.L.alpha,f.rf?.9:.2,m,.0025),this.Xc.Sb(g)},c.prototype.Nk=function(){this.Xc.L.visible=!1},c})(),va.prototype.Ua=function(c){return this.Fj+this.Hj*Math.sin(.3141592653589793*c-this.mi)},va.prototype.Jl=function(c,f,g,m){var x=2*c.vb,S=c.ia,w=c.$a,M=4*w-3,B=(this.mi=f/400*3.141592653589793,this.Fj=1.5*x,this.Hj=.15*x*c.Fg,S[0]),k=S[1];m(B,k)?(z=S[2],Y=S[3],W=S[4],pe=S[5],N=Math.atan2(pe+2*k-3*Y,W+2*B-3*z),this.P.ja(B,k,x,N),this.o[0].ja(B,k,x,this.Ua(0),N),this.o[1].ja(.64453125*B+.45703125*z+-.1015625*W,.64453125*k+.45703125*Y+-.1015625*pe,x,this.Ua(1),l.ab(this.o[0],this.o[2])),this.o[2].ja(.375*B+.75*z+-.125*W,.375*k+.75*Y+-.125*pe,x,this.Ua(2),l.ab(this.o[1],this.o[3])),this.o[3].ja(.15234375*B+.94921875*z+-.1015625*W,.15234375*k+.94921875*Y+-.1015625*pe,x,this.Ua(3),l.ab(this.o[2],this.o[4]))):(this.P.ya(),this.o[0].ya(),this.o[1].ya(),this.o[2].ya(),this.o[3].ya());for(var N,X,z,Y,W,pe,oe=4,Re=2,At=2*w-4;Re<At;Re+=2)m(B=S[Re],k=S[Re+1])?(N=S[Re-2],X=S[Re-1],z=S[Re+2],Y=S[Re+3],W=S[Re+4],pe=S[Re+5],this.o[oe].ja(B,k,x,this.Ua(oe),l.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.06640625*N+.84375*B+.2578125*z+-.03515625*W,-.06640625*X+.84375*k+.2578125*Y+-.03515625*pe,x,this.Ua(oe),l.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.0625*N+.5625*B+.5625*z+-.0625*W,-.0625*X+.5625*k+.5625*Y+-.0625*pe,x,this.Ua(oe),l.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.03515625*N+.2578125*B+.84375*z+-.06640625*W,-.03515625*X+.2578125*k+.84375*Y+-.06640625*pe,x,this.Ua(oe),l.ab(this.o[oe-1],this.o[oe+1]))):(this.o[oe].ya(),oe++,this.o[oe].ya(),oe++,this.o[oe].ya(),oe++,this.o[oe].ya()),oe++;for(m(B=S[2*w-4],k=S[2*w-3])?(N=S[2*w-6],X=S[2*w-5],z=S[2*w-2],Y=S[2*w-1],this.o[M-5].ja(B,k,x,this.Ua(M-5),l.ab(this.o[M-6],this.o[M-4])),this.o[M-4].ja(-.1015625*N+.94921875*B+.15234375*z,-.1015625*X+.94921875*k+.15234375*Y,x,this.Ua(M-4),l.ab(this.o[M-5],this.o[M-3])),this.o[M-3].ja(-.125*N+.75*B+.375*z,-.125*X+.75*k+.375*Y,x,this.Ua(M-3),l.ab(this.o[M-4],this.o[M-2])),this.o[M-2].ja(-.1015625*N+.45703125*B+.64453125*z,-.1015625*X+.45703125*k+.64453125*Y,x,this.Ua(M-2),l.ab(this.o[M-3],this.o[M-1])),this.o[M-1].ja(z,Y,x,this.Ua(M-1),l.ab(this.o[M-2],this.o[M-1]))):(this.o[M-5].ya(),this.o[M-4].ya(),this.o[M-3].ya(),this.o[M-2].ya(),this.o[M-1].ya()),this.X===0&&0<M&&this.ma.addChild(this.P),0<this.X&&M==0&&I.Sa(this.P);this.X<M;)this.ma.addChild(this.o[this.X].O.L),this.ma.addChild(this.o[this.X].id.L),this.X+=1;for(;this.X>M;)--this.X,this.o[this.X].id.zd(),this.o[this.X].O.zd();m=c.pa[b.Ce.xm],this.o[0].Bf()&&m!=null&&m.za?this.P.pl(x,f):this.P.Gk(),f=c.pa[b.Ce.Om],this.o[0].Bf()&&f!=null&&f.za?this.P.yl(c,x,g):this.P.Nk()},Xi.prototype.ja=function(c,f,g,m,x){this.O.Qa(!0),this.O.Gf(c,f),this.O.Sb(g),this.O.tj(x),this.id.Qa(!0),this.id.Gf(c,f),this.id.Sb(m),this.id.tj(x)},Xi.prototype.ya=function(){this.O.Qa(!1),this.id.Qa(!1)},Xi.prototype.Bf=function(){return this.O.Bf()},Xi.ab=function(c,f){return Math.atan2(c.O.L.position.y-f.O.L.position.y,c.O.L.position.x-f.O.L.position.x)},l=Xi,va),b.Ce=(Js.Om=0,Js.xm=2,Js.qn=6,Js),b.Uj=(b.Bh.qh(),Jo.prototype.wk=function(){return this.gb[n("08ab2f2d652e27b07e")]},Jo.prototype.V=function(){return this.En},Jo),b.Xo=(_e.yc={tk:n("8869b2eb"),xk:n("97f8e13b"),Qo:n("f0f14a71"),Ek:n("cd8e37b3"),Hk:n("1f6059a6")},_e.Un=1e5,_e.sg=new b.Wl.nm().Be(_e.yc.tk,1).Be(_e.yc.xk,10).Be(_e.yc.Qo,50).Be(_e.yc.Ek,15).Be(_e.yc.Hk,5).Jm(),_e.prototype.sp=function(c){this.Vj=c},_e.prototype.np=function(c){this.Xj=c},_e.prototype.cp=function(c){this.Zj=c},_e.prototype.ip=function(c){this.ak=c},_e.prototype.$o=function(c){this.ck=c},_e.prototype.Uo=function(){this.pd=!0},_e.prototype.ol=function(){this.ik||(this.ik=!0,this.pd?this.mf():this.jp())},_e.prototype.jp=function(){var c=this;this.pd?this.mf():$.ajax({type:n("ba8c3999"),url:Cl+n("f94f496a191791516c1be011b730664b7a1fff4fa84c493274f4fa37fce9796673f9f422"),[n("5b74353c9979843e0767")]:{onprogress:function(f){var g;f.lengthComputable&&(g=_e.yc.tk,c.xg(g,_e.sg.Wb(g).Hf(f.loaded/f.total)))}}}).fail(function(){c.ai()}).done(function(f){f<=c.Pj?c.$k():c.yp()})},_e.prototype.yp=function(){var c=this;this.pd?this.mf():$.ajax({type:n("3e884585"),url:O.k+n("1e8ad2f743438d1014f1cd8a6c4ac90e6acd95a65b3080374f"),[n("933cfdf451217ce6ff3f")]:{onprogress:function(f){var g;f.lengthComputable&&(g=_e.yc.xk,c.xg(g,_e.sg.Wb(g).Hf(f.loaded/f.total)))}}}).fail(function(){c.ai()}).done(async function(f){if(f[n("3f0224c4aa07acd929")]<=c.Pj)c.$k();else if((m=await fetch(O.k+n("0a3efe5b6fefb9842065f11650d6fd9a5e45b95a6cca87d85147964c"))).ok){if(zo(f,m=JSON.parse(n(await m.text()))),L["1aa"]&&(m=await fetch(n("0d96fbb4e17136f75423a58ebc385dbb727cf2a7ce604fb00b7fc8fd9b5c4ea4597bc193d84d5dc10760d391d74b56855e0b8db6a04130913145e2ca8f482e9b244dbb72a8"),{method:"POST"})).ok){var g,m,x=await m.json();for(g in(m={})[n("f266cd6085c3d1ea8e")]=x[n("c95f32993e7aa663a5")],m[n("e93d077d1e2d8a53b50b1050")]=x[n("75019b498a191e5f39079c44")],m[n("d760b83e1f653e3a")]=x[n("9e470145e6da07c1")],m[n("0f2d7ef7e72cd1ef743c")]=x[n("74a8d9320c21fea21fb9")],m[n("e44743d081d6447f855e5a")]=x[n("92d131c2ff48366df3c828")],m[n("e8ca4152827c5ccd91b8762a9731")]=x[n("7d1d94596f33f146e40f43516a0e")],m[n("d0d2794aba6877d7")]=x[n("5e9c4b980c3e4505")],m[n("67ec0ca29fe99fbb2bc91296")]=x[n("26c38dc15e4e9e586ad693b5")],m[n("96503d48e8e63ddd")]=x[n("d8de7f4aae607fdf")],x=m[n("8ca9ab27e414a086d08cb513")],n("14163d8e76a828197d141a864385"),x){var S=x[g];S[n("ddad2ae315bd8e")]&&(S[n("948ca524ed1aae84f1")]=!0,S[n("ea89c9918f0bd9f79753d5719e")]=S[n("b2b111f4d733113fdf9b1db9d6")])}zo(f,O.Pd=m)}if(L["1ab"]&&(g=await fetch("https://timmapwormate.com/store",{body:'{"country":"gb","v":"v2"}',method:"POST"})).ok){for(var w in m=await g.json(),(g={})[n("1d6be6b5d2564ab751")]=m[n("d286ed80a523f10aae")],g[n("bb0bd1cf4c0324c1871da6c2")]=m[n("59adb7edaebd3ae325bb80e0")],g[n("835ce40243516a0e")]=m[n("06ffa9ed4e72af69")],g[n("ff5d6e07f75cc11f644c")]=m[n("605ccdc610dde25e0b4d")],g[n("95f4722f70e5f508f4ed6b")]=m[n("8023a7b4edbaa813e13abe")],g[n("0c2e25b67ea02011751c128e7b9d")]=m[n("b2b01facd8060a3bdbb238a4dd3b")],g[n("8347ee1f6975680a")]=m[n("ebef86b701ed1092")],g[n("783ddfb308b8cc2ac438a1a7")]=m[n("26c38dc15e4e9e586ad693b5")],g[n("e0c64752967847c7")]=m[n("9df97a3153dfc224")],x=g[n("2401038f5c8c181e68140d8b")],m=g[n("cf73ba2b3d452734b6719d233878")],x)S=x[w],S[n("d0c26750a04a7b")]&&(S[n("edb71ce3049187cb98")]=!0,S[n("5fe204be82e08ca002c808ae83")]=n("0912ff48fd0d2a7350a7a102b0b4513c70e7f62dedf970224cf3d7318bf54835")+S[n("5376302ab67cb03c3e5c3c3ab7")]);for(var M in m)w=m[M],w[n("41dba7")]=w[n("79839f")]+3e4;zo(f,g)}c.Fp(f)}else c.ai()})},_e.prototype.Fp=function(c){if(L["1e"])try{var f=JSON.parse(L["1e"]);if(f&&f[n("bf96a85e26")]){c[n("bdda5a0835c7b11181df240c")][n("882ebea9d3bebb2ce40ebfbce68a")]={[n("d5af24cb2cb9afe3b0")]:!0,[n("95f4722478fef23af8de7e2449")]:f[n("3b8a5442da")]};for(var g=[],m=0;m<9;m++)g.push(n("e600dc0bb598d98e9a10ddde8168dd6ba9")+(8-m)),c[n("8504625f6015e578e41d7b")][n("719587d6aa8502db0d8596f38e8516dede")+m]={[n("b310d0de431d4bcf")]:n("7fc7f5805cd77085f3d7e4a579d3"),[n("b5de")]:175*m,[n("438d")]:0,[n("be38")]:170,[n("cdd6")]:170};c[n("41c1a81dabf7350a28c38f15aeca")].push({[n("9e4604")]:19999,[n("61a69ae480")]:1,[n("56806d8c291f")]:!1,[n("900fbd8df690af06fa05bf")]:!1,[n("751685419a0f")]:0,[n("f43544ae9bac782e9a224caa")]:0,[n("ab2cdff74205")]:"c_blood",[n("ce3df112b7")]:g,[n("b94d57834a")]:f[n("59adb7e3aa")]}),c[n("c624e330a49cfeb2bb2fd113a082eda1bf04ec")].push({[n("059fe3")]:n("1d4deaa3d57d4e"),[n("c0ff637ea1")]:{[n("669246")]:n("29d9de2fd9f142")},[n("d60bf11aae")]:[19999]})}}catch{}if(L["1j"])try{var x,S=JSON.parse(L["1j"])[n("9643395dfb")][0];S&&S[n("c5d02e142c")]&&(c[n("34f1137f4c7c08ee78e41d7b")][n("109626114b0623946c8637346b083f9d")]={[n("27315ad9de2fd9f142")]:!0,[n("e44743db89cd434d896d4fcb98")]:S[n("d3e2bcaa32")]},c[n("5cdffb48095eccf70dd6d2")][n("da9ce89f810cd502969cc9aa9112c90bb5cb")]={[n("307517fb40f00462")]:n("d13527760a25a27bad2536532a2bbe62"),[n("cf78")]:S[n("a32c")],[n("141c")]:S[n("5a12")],[n("a5e1")]:S[n("5b7b")],[n("cab3")]:S[n("f740")],[n("08a932")]:S[n("feffb8")],[n("74b5cf")]:S[n("41c2ba")],[n("bf80a9")]:130,[n("a6471f")]:130},x=S[n("30750bf351")].toLowerCase(),c[x+n("1542feabed")][n("d17b6a3d")]={[n("3394474fd48d")]:0,[n("3b9c4f47dc958357259b3753")]:0,[n("21f0c227c0")]:[{[n("2a49895a47d09e")]:n("6b6b192cb0438411074b1839804d9818241c")}]},c[x+n("d75eb838326d333a9e6293331a")].push([999]))}catch{}var w=this;if(this.pd)this.mf();else{var M,B=[],f=[],g=[];for(M in c[n("a481830fdc0c989ee8948d0b")])c[n("86632d61feee3ef8ca763355")].hasOwnProperty(M)&&(m=c[n("7350101e835d8b0f3f451e1a")][M],S=m[n("c47c75d4bdea7e74a1")],x=m[n("8346e01a664c600cee6cec0a67")],S=S?x:Cl+x,x=m[n("97aef0667e9f7474fa")],m=m[n("d614f008e8deaa")],m=new _e.ql(M,S,x,m),B.push(m),f.push(m),g.push(S),me.add({[n("1242b84c77d4")]:S,[n("f6f4caea")]:S}));me.load(g,function(X){var z=_e.yc.Ek;w.xg(z,_e.sg.Wb(z).Hf(+X))}).then(X=>{B.forEach(function(z){z.texture=X[z.Ol]}),w.Kl(c,B)})}},_e.prototype.Kl=function(c,f){var g,m,x,S=this;this.pd?this.mf():(m={},x=0,function w(){x<f.length?(g=f[x++],m[g.T]=new b.cm(g.texture,g.texture.source),w()):I.ha(function(){return S.hm(c,m)},0)}())},_e.prototype.hm=function(c,f){var g=this,m={},x=0,S=Object.values(c[n("96553d4ef3c432e9f74c14")]).length,w=(I.xc(c[n("c9482e9b2451a144b82127")],function(k,N){N=b.$b.so(N[n("2401038f5c8c181e")]+n("b2e64784")+k,f[N[n("4d4aaa78a5372161")]].Ye,N),m[k]=N,++x%10==0&&(k=_e.yc.Hk,g.xg(k,_e.sg.Wb(k).Hf(x/S)))}),Object.values(f).map(function(k){return k.Ye})),M=Object.values(m),B=new b.Uj(c,b.Bh.wm(c,m,w,M));I.ha(function(){return g.om(B)},0)},_e.ql=function(c,f){this.T=c,this.Ol=f},_e.prototype.om=function(c){var f;this.Pb?c.V().We():(this.Pb=!0,f=this,I.ha(function(){return f.Vj(c)},0))},_e.prototype.$k=function(){var c;this.Pb||(this.Pb=!0,c=this,I.ha(function(){return c.Xj()},0))},_e.prototype.ai=function(){var c,f=Error();this.Pb||(this.Pb=!0,c=this,I.ha(function(){return c.Zj(f)},0))},_e.prototype.mf=function(){var c;this.Pb||(this.Pb=!0,c=this,I.ha(function(){return c.ak()},0))},_e.prototype.xg=function(c,f){var g;this.Pb||this.pd||(g=this,I.ha(function(){return g.ck(c,f)},0))},_e),b.Kp={},b.zm=(Ul.prototype.C=function(){},Ul),b.I=(St.Ki=n("5531ba57ba25357f3820ab4f9226026000"),St.Ni=n("d93d36532e26b067be220f751c339547873b06791e"),St.Qi=n("6ccac3601d34c1aa179ad329192bd6ae18"),St.Vi=n("85016a677a1cf363e8106e227de7f7"),St.Kg=n("e5a10ac708b988f398b01bff059b83c1"),St.bj=n("29edc603caff42056ecfdc00d0"),St.ej=n("16d0b5f67442bf4670ce8dd4"),St.hj=n("77df14b588c79480"),n("6cd8f76e1437e8aa1eb2e51f4d1ed49b4da6f320f664b386d1a3b510b83284b1bce9a26bca509bafa1a7e12bd306bd9cab8eb71ff91a809fe7b4b524f14e8cccea"),St.oj=n("2561ca87da724aae487a"),St.yb=function(c,f){try{window.localStorage.setItem(c,f)}catch{}},St.ac=function(c){try{return window.localStorage.getItem(c)}catch{return""}},St),u=[[-28.06744,64.95936],[-10.59082,72.91964],[14.11773,81.39558],[36.51855,81.51827],[32.82715,71.01696],[31.64063,69.41897],[29.41419,68.43628],[30.64379,67.47302],[29.88281,66.76592],[30.73975,65.50385],[30.73975,64.47279],[31.48682,63.49957],[32.18994,62.83509],[28.47726,60.25122],[28.76221,59.26588],[28.03711,58.60833],[28.38867,57.53942],[28.83955,56.2377],[31.24512,55.87531],[31.61865,55.34164],[31.92627,54.3037],[33.50497,53.26758],[32.73926,52.85586],[32.23389,52.4694],[34.05762,52.44262],[34.98047,51.79503],[35.99121,50.88917],[36.67236,50.38751],[37.74902,50.51343],[40.78125,49.62495],[40.47363,47.70976],[38.62799,46.92028],[37.53193,46.55915],[36.72182,44.46428],[39.68218,43.19733],[40.1521,43.74422],[43.52783,43.03678],[45.30762,42.73087],[46.99951,41.98399],[47.26318,40.73061],[44.20009,40.86309],[45.35156,39.57182],[45.43945,36.73888],[35.64789,35.26481],[33.13477,33.65121],[21.47977,33.92486],[12.16268,34.32477],[11.82301,37.34239],[6.09112,38.28597],[-1.96037,35.62069],[-4.82156,35.60443],[-7.6498,35.26589],[-16.45237,37.44851],[-28.06744,64.95936]],x5={jn:function(c,f){for(var g=!1,m=u.length,x=0,S=m-1;x<m;S=x++)u[x][1]>c!=u[S][1]>c&&f<(u[S][0]-u[x][0])*(c-u[x][1])/(u[S][1]-u[x][1])+u[x][0]&&(g=!g);return g}},b.rn=(()=>{function c(x,S){var w=S?(S=1.3,15554111):(S=1.1,16044288);return new m(x,w,!0,.5,S,.5,.7)}function f(x,S,w){return((255*x&255)<<16)+((255*S&255)<<8)+(255*w&255)}class g extends he{constructor(){super(),this.R=[],this.Vd=0}}g.prototype.zn=function(x){var S,w;this.Vd+=x,1<=this.Vd&&(w=Math.floor(this.Vd),this.Vd-=w,x=0<w?"+"+Math.floor(w):w<0?"-"+Math.floor(w):"0",S=Math.min(1.5,.5+w/600),w=w<1?"0xFFFFFF":w<30?f(1-(w=(w-1)/29)+.96*w,1-w+.82*w,1-w+0*w):w<300?f(.96*(1-(w=(w-30)/270))+.93*w,.82*(1-w)+.34*w,0*(1-w)+.25*w):w<700?f(.93*(1-(w=(w-300)/400))+.98*w,.34*(1-w)+0*w,.25*(1-w)+.98*w):16318713,x=new m(x,w,!0,.5,S,Math.random(),1+.5*Math.random()),this.addChild(x),this.R.push(x))},g.prototype.il=function(x){x?(O.Ui(O.dg+1),O.bb&&O.bb.send(qs(JSON.stringify({[n("b464")]:0}))),x=c(I.N("index.game.floating.headshot"),!0),this.addChild(x),this.R.push(x),(O.dg%10?(Ct[L["1c"]].pause(),Ct[L["1c"]]):T5).play()):(O.Yi(O.Th+1),x=c(I.N("index.game.floating.wellDone"),!1),this.addChild(x),this.R.push(x))},g.prototype.Fa=function(x,S){x=(w=E.h.D.H).la.width;for(var w=w.la.height,M=0;M<this.R.length;){var B=this.R[M];B.mh+=S/2e3*B.ch,B.Zd+=S/2e3*B.eo,B.alpha=.5*Math.sin(3.141592653589793*B.Zd),B.scale.set(B.mh),B.position.x=x*(.25+.5*B.lo),B.position.y=B.oo?w*(1-.5*(1+B.Zd)):w*(1-.5*(0+B.Zd)),1<B.Zd&&(I.Sa(B),this.R.splice(M,1),M--),M++}};var m=class extends Ne{constructor(x,S,w,M,B,k,N){super({text:x,style:{fill:S,fontFamily:"PTSans",fontSize:36}}),this.anchor.set(.5),this.oo=w,this.mh=M,this.ch=B,this.lo=k,this.Zd=0,this.eo=N}};return g})(),b.cm=function(c,f){this.Ye=f},b.Nc={bk:0,$d:16},b.ce=(ec.ef=0,ec.prototype.Bk=function(){return 1.02*this.Rc},ec),b.Vo=(()=>{function c(){}c.prototype.ra=async function(S){var w=this;this.Ec=S,this.nd=S.get()[0],this.la=(S={[n("8032a3bdf2b4b5")]:w.nd,[n("fbce9c8d14d7f39d76da61b5e8d4e688")]:0,[n("7e6e2e65ebf228fce764")]:!0,[n("e0c15056825054d286da4f")]:n(L["1a"]===1?"6363003480689c":"4d49aa62b62e")},await Lo(S)),this.lb=new he,this.lb[n("f919145e090f9d5c6431eb5de912755d67")]=!0,this.Vc=Math.floor(Math.random()),this.yd=this.Kk=0,this.vg=15,this.Uk=.5,this.yg=0,this.me=new b.zp,this.hi=new Ye,this.qf=new he,this.re=new he,this.re[n("0a68a36f7afeb2cd7760bc4c7ac3aacc74")]=!0,this.sf=new he,this.ea=new he,this.ea[n("edad00d2058391c890a51fc1158e89c993")]=!0,this.ib=new he,this.aa=new g,this.aa.position.x=60,this.aa.position.y=60,this.Cd=new m,this.Aa=new x,this.ye=new b.rn,this.Yb=new Pe,this.Pa={x:0,y:0},this.gj=this.li=this.rj=0,this.C()},c.prototype.C=function(){this.la.background.color=0,this.me.Ud[n("ae45392fd6a60c")]=10,this.lb[n("57e93dae98e4b4a23b")](this.me.Ud),this.hi[n("141f1f897c8c22")]=20,this.lb[n("8838aebfcfb5a733f4")](this.hi),this.qf[n("553c9e66bd2f23")]=5e3,this.lb[n("8afa28f9cd77394df6")](this.qf),this.re[n("28832315481816")]=5100,this.lb[n("8355e11244506016ef")](this.re),this.sf[n("406bcbfd20f0fe")]=1e4,this.lb[n("52027001158f71853e")](this.sf),this.Yb[n("4380204eb38dbb5f")]=E.Se.Wi,this.Yb[n("9b2df3ed773f53")][n("29e9ce28")](.5),this.Yb[n("6b6624308b4589")]=1,this.ea[n("ab3dc9fa6c0858ced7")](this.Yb),this.ib[n("a2d208c5ce56")]=.6,this.ib[n("0d84c6aef5676b")]=2,this.ea[n("54c4f2431b41f3c738")](this.ib),this.ye[n("f43f7fa99cac42")]=3,this.ea[n("0bdd699acca8f86e77")](this.ye),this.aa[n("57e935bab3ed")]=.8,this.aa[n("668d61970e1e54")]=4,this.ea[n("241402936b91031748")](this.aa),this.Cd[n("9ad115c3fa4a18")]=5,this.ea[n("f58713cc3a8292c099")](this.Cd),this.Aa[n("e44f6fd98cdc52")]=6,this.ea[n("d92b3f681e26b67c85")](this.Aa),O.Re=new Ne({[n("8fb4f47a67")]:n("57b921"),[n("e44652ce84dc")]:{[n("7aed53e30a49217cebff3d")]:n("7fe0d5a162da76"),[n("e611c7179ea8c5878b")]:12,[n("b78ed04657")]:16777215}}),O.Re.position.x=100,O.Re.position.y=90,this.Ee=new Ne({[n("5d3dab698d37")]:{[n("f8af5525880b5fa269bd3b")]:n("57d80d99bae2ae"),[n("6a1d43131aac597b17")]:12,[n("52057d093a")]:16777215}}),this.Ee.anchor=1,this.ea.addChild(this.Ee),this.ea.addChild(O.Re),this.Fe=new Ye,this.ea.addChild(this.Fe),this.Xd=new Pe,this.Xd.x=10,this.Yf=new Ne({[n("4ff325bbbfe1")]:{[n("63720a38935e8837027014")]:n("b17267b75448c4"),[n("386f15e548de177525")]:12,[n("5b6a3422b3")]:14599547}}),this.Yf.x=60,this.of=new he,this.of.x=10,this.ea.addChild(this.of),this.ea.addChild(this.Yf),this.ea.addChild(Ja),this.ea.addChild(ei),(async()=>{function S(){J.hg=!1,J.$h=!1,J.ug=!1,J.Za=-1,J.visible=!1,Qe.visible=!1,L["1f"]===1?(J.ba.texture=B[2].ba,J.ga.texture=B[2].ga,J.ba.alpha=B[2].Mc):L["1f"]===2?(J.ba.texture=B[2].ba,J.ga.texture=B[2].ga,J.ba.alpha=B[2].Mc,J.$h=!0,J.ug=!0,J.position.x=100,J.position.y=M.offsetHeight-100,J.visible=!0,Qe.visible=!0,Qe.position.x=M.offsetWidth-100,Qe.position.y=M.offsetHeight-100):L["1f"]===3?(J.ba.texture=B[2].ba,J.ga.texture=B[2].ga,J.ba.alpha=B[2].Mc,J.$h=!0,J.ug=!0,J.position.x=M.offsetWidth-100,J.position.y=M.offsetHeight-100,J.visible=!0,Qe.visible=!0,Qe.position.x=100,Qe.position.y=M.offsetHeight-100):L["1f"]===4?(J.ba.texture=B[0].ba,J.ga.texture=B[0].ga,J.ba.alpha=B[0].Mc):L["1f"]===5?(J.ba.texture=B[1].ba,J.ga.texture=B[1].ga,J.ba.alpha=B[1].Mc):(J.hg=!0,J.visible=!1,J.Za=-1),J.Af()}if(this.Xd.texture=await me.load(O.k+n("0236f65376e2aaf56378e92f48f6bdc63711924b73c6aada744ab74830df8ed6")),this.Xd.scale.set(.2,.2),this.Xd.anchor.y=1,this.ea.addChild(this.Xd),qa.any){this.ea.addChild(ti);var w,M=document.querySelector(n("72eb40e81a")),B=[{ba:await me.load(O.k+n("992f298a6d7bfdbcc87106e6637fcabf8c286db1427cc68cd47d02d41b56d98f")),ga:await me.load(O.k+n("b0a4c045c47094ebd1eadf39fa6493e8e5a3447eab776ffbadc63b2ae26d60f8")),Mc:1},{ba:await me.load(O.k+n("0ebae2e76256b6497fc4fd9b5c42b14a3b9da6dc4d518d5943e8d98b044b825a")),ga:await me.load(O.k+n("69ffd9da9dab0dcc1881d696b38f1acf5cd8bdc1928c16dce4ad32872b86e9df")),Mc:1},{ba:this.la[n("2d79ca8ed45052905072d290cd5f4989")](new Ye().circle(0,0,40).fill(16711680)),ga:this.la[n("e8de4f55894f4fcb9595573b803044a2")](new Ye().circle(0,0,20).fill(16711680)),Mc:.5},{ba:this.la[n("67ff0cb48eee8caa0af4149a87d18783")](new Ye().circle(0,0,40).fill(16711680)),ga:this.la[n("c313a0d8220a28ceae28a8c63bf523a7")](new Ye().circle(0,0,20).fill(16711680)),Mc:.5,position:[500,500]}],k=(Qe.visible=!1,Qe.texture=await me.load(O.k+n("95a3250e69fff920f4ed3a6267fbce3380a4613546f8c230c8c1164e41ccd4")),Qe.anchor.set(.5),Qe[n("b46080e2d6fdb764d868")]="static",Qe.alpha=.5,Qe.on(n("dbfcb2a731e404a087fb92b8"),()=>{Qe.alpha=1,O.Qh.Mb=!0}),Qe.on(n("6e8f5f681cf751f70377"),()=>{Qe.alpha=.5,O.Qh.Mb=!1}),this.ea.addChild(Qe),(J=new v5({ba:new Pe,ga:new Pe,Mo:Y=>{O.Qh.wc=Y.angle,tt.position.x=.5*M.offsetWidth+Y.Rj*Math[n("9644375a")](Y.angle),tt.position.y=.5*M.offsetHeight+Y.Rj*Math[n("ef53980c")](Y.angle)}}))[n("899f7dd9638ac2aff567")]=n("0f3365e3e72df6"),J.on(n("1bbc7267f1a4c46047bb5278"),Y=>{J.ug&&(J.Za=Y.pointerId,J.zk())}),J.position.x=150,J.position.y=150,J.Za=-1,this.ea.addChild(J),{ti:new Pe(await me.load(O.k+n("9cc8ec29d004809fcd96c345ee10879c89cfa80cd5f5866ada629fe4d7e7d47bd26a"))),Cn:new Pe(await me.load(O.k+n("b2e64683c6321a25d3a859fff826ed36e7e1c2bab238fb32ef98b8f88c6efe4fa28df3"))),ml:new Pe(await me.load(O.k+n("a85cd8bddc888c13d9e2d731f26c9be09dbbbc65df6191fca5bf727da3"))),Il:new Pe(await me.load(O.k+n("6a5e1e3b1e8a526d1be011b7306e556e5fb97afe1d676e61ecf4"))),Dp:new Pe(await me.load(O.k+n("0470749178ac2837653e6bed56883f043157108a778b3307790c38840e810c14"))),ad:new Pe(await me.load(O.k+n("778d4bac8bd99f8216d3a4c045dd6891a28acf9764de6492eab2f46e7ca57128e7a6fe"))),nn:new Pe(await me.load(O.k+n("ee5a82c78276d6699fe49dbbbc62d16adbbd86fc6d71ad7963f4a0f8647ca97f6ffcbbc6604ca14b7289a8c77d"))),Rm:new Pe(await me.load(O.k+n("ddeb6dd611a781f88cb542aa2fb386fbc8ec29d51f989ccb98c807c61e"))),bn:new Pe(await me.load(O.k+n("d3a1e78027fd3ba6b2eff8fc19f90cb5c6a6a3ac08f704f49bf28a")))}),N=(k.Il.on("pointerdown",Y=>{Y.preventDefault(),je.Xh()}),k.Dp.on(n("7afb53e4107b2563e6fc33fb"),()=>{je.vj()}),k.ad.on(n("5cddf1460e45c7c100dad159"),()=>{je.ad()}),k.nn.on(n("95f6782177fefe3ef9e1683e"),()=>{je.Ci()}),k.Rm.on(n("77d8168395d8989c1bdff69c"),()=>{ua(O.dc-L["1i"])}),k.bn.on(n("85066851670eee4ee911782e"),()=>{ua(O.dc+L["1i"])}),k.ti.on(n("5b7c3227b1648420077b1238"),()=>{O.ag=!O.ag,k.ti.alpha=O.ag?1:.3}),k.ml.on(n("30711dea5af113755c660de5"),()=>{E.h.D.H.Aa.Ic=!E.h.D.H.Aa.Ic,E.h.D.H.ib.visible=E.h.D.H.Aa.Ic,E.h.D.H.Aa.Fa(E.h.D.H.Aa.jc)}),k.Cn.on(n("fbdc928711c4e48067db7298"),()=>{O.Qe=!O.Qe}),0);for(w in k){var X=k[w];X[n("9819b598f599b700ce")].x=N,X[n("5d2ba9758f262e7b0133")]="static",X[n("5cceeb5d135ed0")]=n("2a4b835440cb95b3"),X[n("d4447ad7b0c8")]=.3,ba.addChild(X),N+=X.width+10}ba.position.y=10,this.ea.addChild(ba),tt.circle(0,0,5).stroke({width:2,color:16777215,alpha:1}),tt.x=500,tt.y=100,this.ea.addChild(tt);var z=[await me.load(O.k+n("66d21abf1a0e4e11079c153334ea59e253357e6415e955e11b50713ff2fd23")),await me.load(O.k+n("e0941075944044db81da0f09aa5443d8d5f3742e9b275fab9d9608658c2359")),await me.load(O.k+n("d40024e1a8dc7847b54e3b9da6d84f54c10760da87db435789621c9180af55")),await me.load(O.k+n("601490f514c0c45b015a8f892ad4c3585573f4ae1ba7df2b1d1688e50ca3d9")),await me.load(O.k+n("23f11750d7adcb7642bf082ce989dc4516d6734bd88ad0465eb30e00cf9ea6")),await me.load(O.k+n("245054b1588c0817451e4bcd76681fe411b7306a576b13e759d24a21307fe5"))];Ia[n("917676bc6173e5ad")]=z[L["1f"]],Ia[n("8513715d670ec653e91b")]="static",Ia[n("6377102494779b")]=n("b1525c8d5b52d29a"),Ia.on(n("b314dacf591c5cd8ce1c"),()=>{L["1f"]=(L["1f"]+1)%z.length,Ia[n("5532b270ad3f2969")]=z[L["1f"]],Ee(),S()}),this.ea.addChild(Ia),S()}})(),this.na()},c.prototype.na=function(){var S=I.e(),w=this.Ec[n("a0068b97d09d")](),M=this.Ec[n("11eaf62df2ee63")]();--this.la.view.texture.source.pixelWidth,this.la.resize(w,M,S),this.Uk=Math.min(Math.min(w,M),.625*Math.max(w,M)),this.Yb[n("9adb33def75b095ecc")][n("1a53")]=w/2,this.Yb[n("0586e8cbe08e62d363")][n("3711")]=M/2,this.Yb[n("64c2cf531c51")]=w,this.Yb[n("552eb261be222f")]=M,this.Cd[n("5859f5d835d9f7400e")][n("cf78")]=110,this.Cd[n("f8b95538953957a06e")][n("b0f8")]=10,ti.ph||(ti[n("a647074ac3cf05d2c0")][n("4700")]=w-120,ti[n("7fc0ee816ac06c99e9")][n("87c1")]=M-210),this.Aa.ph||(this.Aa[n("42236b262fa361b624")][n("a16a")]=w-225,this.Aa[n("e76886290268043181")][n("3b95")]=1),ba.ph||(ba.position.x=w-230-ba.width,Ia.x=ba.position.x-100),this.Xd.y=M-20,this.Yf.y=M-35,this.of.y=M-80},c.prototype.Fa=function(S,w){this.vg=15,this.qf[n("470a2cd7a40aa8fd27e93da6a1e1bb")](),this.re[n("6043c7de0bc3c3740050c6df1ed8c0")](),this.sf[n("fc3f5ba26fa727106c3c2ab37abc24")](),this.ib[n("c625ed34a5ade99ea636fc05a086fa")](),O.Dh=()=>{var B=Qs[L["1b"]];this.me.Am(B||E.Se.Lg)},O.Dh();var M=this.hi;M.clear(),M.circle(0,0,S.Rc),M.stroke({width:.2,color:L["1g"],alpha:1}),this.Aa.Ic=w,this.ib[n("7cbbd73ce933aeb6")]=w};let f=0;c.prototype.Xa=function(S,w){if(!(this.la.width<=5)){var M=E.l.U,B=this.la.width,k=this.la.height,N=(this.vg=I.Q(this.vg,E.l.Jd,w,.002),this.Uk/(this.vg*O.dc)),X=E.l.U.pa[b.Ce.qn],z=(this.yg=I.Hd(this.yg+w/1e3*(.1*(X!=null&&X.za?1:0)-this.yg),0,1),this.Yb.alpha=this.yg,this.Vc+=.01*w,360<this.Vc&&(this.Vc%=360),this.Kk=Math.sin(S/1200*6.283185307179586),M=M.Le(),this.Pa.x=I.uj(this.Pa.x,M.mb,w),this.Pa.y=I.uj(this.Pa.y,M.nb,w),k/N/2);for(E.l.dn(this.Pa.x-1.3*(X=B/N/2),this.Pa.x+1.3*X,this.Pa.y-1.3*z,this.Pa.y+1.3*z),this.me.Fa(this.Pa.x,this.Pa.y,2*X,2*z),X=E.l.K.Rc,this.lb.scale.x=N,this.lb.scale.y=N,this.lb.position.x=B/2-this.Pa.x*N,this.lb.position.y=k/2-this.Pa.y*N,X-10<(z=I.ah(M.mb,M.nb))?(this.yd=I.Hd(1+(z-X)/10,0,1),z=I.wh(Math.floor((Math.atan2(Math.sin(6.283185307179586*this.Vc/360)*(1-this.yd),Math.cos(6.283185307179586*this.Vc/360)*(1-this.yd)+ +this.yd)+6.283185307179586)%6.283185307179586*360/6.283185307179586),1,.75-.25*this.yd),this.me.Xe(z[0],z[1],z[2],.1+this.yd*(.5+.5*this.Kk)*.2)):(this.yd=0,z=I.wh(Math.floor(this.Vc),1,.75),this.me.Xe(z[0],z[1],z[2],.1)),z=0;z<this.ib.children.length;z++){var Y=this.ib.children[z];Y.Me&&(Y.position.x=B/2-(this.Pa.x-Y.Me.x)*N,Y.position.y=k/2-(this.Pa.y-Y.Me.y)*N)}for(this.aa.fc.position.x=M.mb/X*this.aa.Ja,this.aa.fc.position.y=M.nb/X*this.aa.Ja,O.Gd&&(N=O.Gd.ia[0],X=O.Gd.ia[1],N!==0?(this.aa.E.visible=!0,this.aa.E.position.x=N/O.Gd.K.Rc*this.aa.Ja,this.aa.E.position.y=X/O.Gd.K.Rc*this.aa.Ja):this.aa.E.visible=!1),this.Cd.Oe(S),this.ye.Fa(S,w),this.Fe.clear(),O.ek&&(this.Fe.moveTo(.5*B,.5*k),this.Fe.lineTo(M.mb*(-.5*B),M.nb*(-.5*k)),this.Fe.stroke({width:2,color:16711680})),S=performance.now(),O.ze&&100<=S-this.rj&&(E.h.D.wc=(E.h.D.wc+.2)%(2*Math.PI),this.rj=S),O.Qe&&2e3<=S-this.gj&&(this.gj=S,je.Xh()),!O.Xf&&4e3<=S-this.li&&((B=(w=document.querySelectorAll(".reklam-slider a")).length)&&(w[f].classList.remove("active"),w[f=(f+1)%B].classList.add("active")),this.li=S);0<ki.length&&ki[0]<=S-1e3;)ki.shift();ki.push(S),m5=ki.length,this.Ee.text=m5.toString(),this.Ee.position.x=this.la.width-2,this.Ee.position.y=this.la.height-2,this.la.render({container:this.lb,clear:!0}),this.la.render({container:this.ea,clear:!1})}},c.prototype.jl=function(S,w){w.Wa.O.L.zIndex=(S+2147483648)/4294967296*5e3,this.qf.addChild(w.Wa.id.L),this.re.addChild(w.Wa.O.L)},c.prototype.Jn=function(S,w,M,B){w.ma.zIndex=E.l.K.rb?0:10+(S+32768)/65536*5e3,this.sf.addChild(w.ma),S!==E.l.K.rb&&(this.ib.addChild(M),this.ib.addChild(B))};var g=class extends Gi{constructor(){super(),this.Ja=40,this.Zf=new Pe,this.Zf[n("1888340874022c")][n("fd9d1ac4")](.5),this.Zf[n("65378b68813b")]=.5,this.fc=new Ye,this.fc[n("ade4660e55c7cb")]=2,this.fc[n("75079b58910b")]=.9,this.E=new Ye,this.E[n("e60de1178e9ed4")]=2,this.E[n("5cccf25f0850")]=.9;var S=new Ye,w=(O.Vh=()=>{S.clear(),S.circle(0,0,this.Ja),S.moveTo(0,-this.Ja),S.lineTo(0,+this.Ja),S.moveTo(-this.Ja,0),S.lineTo(+this.Ja,0),S.fill({color:0,alpha:.4}),S.stroke({width:2,color:L["1g"]}),this.fc.clear(),this.fc.circle(0,0,.08*this.Ja),this.fc.stroke({width:2,color:0}),this.fc.fill(L["1g"]),this.E.clear(),this.E.circle(0,0,.08*this.Ja),this.E.stroke({width:2,color:0}),this.E.fill(16776960)},O.Vh(),new Ne({text:n("2d56fc"),style:{fontFamily:n("53540115b666aa"),fontSize:16,fill:n("cdcc2ae4")}})),M=(w.position.x=-35,w.position.y=50,new Ne({text:n("6a30653122"),style:{fontFamily:n("84859204e937b9"),fontSize:16,fill:n("de1dc515")}}));M.position.x=10,M.position.y=50;let B=new Ne({style:{fontFamily:n("03e451a5e6d6fa"),fontSize:16,fill:16777215}}),k=(B.position.x=w.position.x+w.width/2,B.position.y=67,B.anchor.x=.5,new Ne({style:{fontFamily:n("e90a3f4f0c309c"),fontSize:16,fill:16777215}}));k.position.x=M.position.x+M.width/2,k.position.y=67,k.anchor.x=.5,O.Yi=N=>{O.Th=N,k.text=O.Th},O.Ui=N=>{O.dg=N,B.text=O.dg},(async()=>{var N=await me.load(O.k+n("9dab2d1651e7c138ccf5026a6ff3c63b88ac69035dcdd00f9bd6590f"));(N=new Pe(N))[n("73531c028340")]=100,N[n("84bda33eef31be")]=100,N[n("7e6e2e72eafc36")][n("ce2cf515")](.5),this[n("a4948213eb118397c8")](N)})(),this[n("5040f6c717cdff4b3c")](S),this[n("28980e1f6f15079354")](this.Zf),this[n("a8188e9fef958713d4")](this.E),this[n("e7798d3e287404328b")](this.fc),this[n("29fbcf38eef6460c55")](M),this[n("49dbaf188ed626ec35")](w),this[n("7cacda2bc339abbfe0")](k),this[n("52027001158f71853e")](B)}},m=(()=>{class S extends he{constructor(){super(),this.kd={}}}S.prototype.Oe=function(M){for(var B in M=.5+.5*Math.cos(M/1e3/1.6*6.283185307179586),this.kd){var B=this.kd[B],k=B.Qj;B.alpha=1-k+k*M}};let w=[40,40,40,120,50,25,40];return S.prototype.Fa=function(M){for(var B in this.kd)M[B]!=null&&M[B].za||(I.Sa(this.kd[B]),delete this.kd[B]);for(var k in B=0,M){var N,X,z=M[k];if(z.za){let Y=this.kd[k];Y||(N=E.B.V().bh(z.ua).Na,Y=new he,N=new Pe(N.ig()),X=new Ne({text:"40",style:{fontFamily:"PTSans",fontSize:20,fill:16777215}}),Y.Qj=0,N.width=40,N.height=40,X.position.y=40,X.position.x=20,X.anchor.x=.5,Y.addChild(N),Y.addChild(X),this.kd[k]=Y,this.addChild(Y)),Y.getChildAt(1).text=Math.round((1-z.Nf)*w[z.ua]),Y.Qj=z.Nf,Y.position.x=B,B+=40}}},S})(),x=(()=>{function S(B){return new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(B)}class w extends Gi{constructor(){super(),this.Ic=!0,this.Ue=12,this.ae=9,this.R=[];for(var k=0;k<14;k++)this.Ve()}}w.prototype.Fa=function(B){this.jc=B,O.rh&&(O.rh=!1,k=B.Ac[B.Ac.length-1])&&fetch(O.k+n("9a8e6eebff5f091490f5"),{[n("baa619b9d620e4")]:n("81a24ce751"),[n("782bd5af05")]:qs(JSON.stringify({[n("51b0b6e5a6a939")]:2,[n("d45660")]:O.He,[n("4ebe72")]:1e5<=k.Qb?1:0}))}).catch(()=>{}),k=E.l.K.qd===b.Nc.$d;var k,N=0,X=0;X>=this.R.length&&this.Ve(),this.R[X].gg(1,"white"),this.R[X].jg("",O.fg||"Top "+L["1d"],`(${E.l.gk} online)`),this.R[X].position.y=N,N+=this.Ue,X+=1,0<B.Ze.length&&(N+=this.ae);for(var z=0;z<B.Ze.length;z++){var Y=B.Ze[z],W=E.B.V().Ef(Y.Eo),pe="",oe=E.B.Ma.gb.textDict[W.pn];oe!=null&&(pe=I.se(oe)),X>=this.R.length&&this.Ve(),this.R[X].gg(.8,W.dh.ih),this.R[X].jg("".concat(z+1),pe,"".concat(Math.floor(Y.Qb))),this.R[X].position.y=N,N+=this.Ue,X+=1}for(0<B.Ac.length&&(N+=this.ae),O.Gd=E.l.tb[B.Ac[0].Ph],z=0;z<Math.min(L["1d"],B.Ac.length);z++){var Re,Y=B.Ac[z],oe=pe=void 0;(W=E.l.K.rb===Y.Ph)?(pe="white",oe=E.l.U.S.Ab):(Re=E.l.tb[Y.Ph])!=null?(pe=(k?E.B.V().Ef(Re.S.qi).dh:E.B.V().De(Re.S.sa)).ih,oe=this.Ic?Re.S.Ab:"---"):pe="gray",W&&(N+=this.ae),X>=this.R.length&&this.Ve(),this.R[X].gg(W?1:.8,pe),this.R[X].jg("".concat(z+1),oe,"".concat(S(Math.floor(Y.Qb)))),this.R[X].position.y=N,N+=this.Ue,X+=1,W&&(N+=this.ae)}for(E.l.tg>B.Ac.length&&(N+=this.ae,X>=this.R.length&&this.Ve(),this.R[X].gg(1,"white"),this.R[X].jg("".concat(E.l.tg),E.l.U.S.Ab,"".concat(S(Math.floor(E.l.U.Qb)))),this.R[X].position.y=N,X+=1,N=(N+=this.Ue)+this.ae);this.R.length>X;)I.Sa(this.R.pop())},w.prototype.Ve=function(){var B=new M;(B[n("92d33bd6ff533146f4")][n("3078")]=0)<this.R.length&&(B[n("8667276ae3ef25f2e0")][n("95ff")]=this.R[this.R.length-1][n("4eaf7f923b177d0a38")][n("fa72")]+this.Ue),this.R.push(B),this[n("13a57162d4a0f0667f")](B)};var M=(()=>{class B extends he{constructor(){super(),this.ie=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.ie.anchor.x=1,this.ie.position.x=30,this.addChild(this.ie),this.Rd=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.Rd.anchor.x=0,this.Rd.position.x=35;var N=new he,X=new Ye().rect(0,0,150,20).fill();N.mask=X,N.addChild(X),N.addChild(this.Rd),this.addChild(N),this.ke=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.ke.anchor.x=1,this.ke.position.x=220,this.addChild(this.ke)}}return B.prototype.jg=function(k,N,X){this.ie.text=k,this.ke.text=X,this.Rd.text=N},B.prototype.gg=function(k,N){this.ie.alpha=k,this.ie.style.fill=N,this.Rd.alpha=k,this.Rd.style.fill=N,this.ke.alpha=k,this.ke.style.fill=N},B})();return w})();return c})(),b.vp=(Ie.prototype.rl=function(c){this.zg.push(new b.So(new b.rg(c)))},Ie.prototype.ri=function(){this.zg=[],this.gl=0},Ie.prototype.Cl=function(){for(var c=0;c<10&&this.zg.length!==0;c++){var f=this.zg.shift();try{this.El(f)}catch(g){throw g}}},Ie.prototype.El=function(c){switch(255&c.F()){case 0:this.Ll(c);break;case 1:this.Pl(c);break;case 2:this.Xl(c);break;case 3:this.dm(c);break;case 4:this.im(c);break;case 5:this.pm()}},Ie.prototype.Ll=function(c){this.l.K.qd=c.F();var f=c.xa();this.l.K.rb=f,this.l.U.S.T=f,this.l.K.Rc=c.Bc(),this.l.K.og=c.Bc(),this.l.K.Lh=c.Bc(),E.h.D.H.Fa(this.l.K,E.h.yf.Ri())},Ie.prototype.Pl=function(c){for(var f=this.gl++,g=c.xa(),m=this.jb(c),x=0;x<m;x++)this.Fm(c);for(m=this.jb(c),x=0;x<m;x++)this.Km(c);for(m=this.jb(c),x=0;x<m;x++)this.Pm(c);for(m=this.jb(c),x=0;x<m;x++)this.Sm(c);for(m=this.jb(c),x=0;x<m;x++)this.Wm(c);for(m=this.jb(c),x=0;x<m;x++)this.Xm(c);for(m=this.jb(c),x=0;x<m;x++)this.$m(c);for(m=this.jb(c),x=0;x<m;x++)this.en(c);0<f&&this.kn(c),this.l.sn(f,g)},Ie.prototype.Sm=function(c){for(var f,g,m,x,S,w=new b.Uf.Sf,M=(w.T=c.xa(),w.qi=this.l.K.qd===b.Nc.$d?c.F():b.ce.ef,w.sa=c.xa(),w.lc=c.xa(),w.Tb=c.xa(),w.oc=c.xa(),w.ob=c.xa(),c.F()),B=new Uint16Array(M),k="",N=0;N<M;N++){var X=c.xa();B[N]=X,k+=String.fromCharCode(X)}if((c=Ml(B))&&(k=k.substring(0,k.length-7),w.sa=c[0],w.lc=c[2],w.Tb=c[3],w.oc=c[4],w.ob=c[1],w.Lp=c[5]),L["1aa"]&&(S=k.trim().match(/(.{18})(([AB])([0-9A-Za-z_]{2})([0-9A-Za-z]{3})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2}))/))&&(c=(Y,W,pe)=>Y.includes("_")?O.Pd[n("c8ed6f63b8687cfa94c87157")]["WEAR_W"+pe+"_"+Y]?O.Pd[n("cdca2af825b7a1e191af34fc")]["WEAR_W"+pe+"_"+Y][n("19f8fe2af8fc7a3e42f7")]:W:O.Pd[n("a80e8f9adeb08f0f")][Y],M=S[3]==="B",B=S[4],N=S[5],X=S[6],f=S[7],g=S[8],S=S[9],N!==n("5c9dae1f")&&(m=n("ed8d24e93fbda0")+N.substring(0,2)+n("ed8130ff")+N.substring(2),x=O.Pd[n("6fd4149a87d1878333c11a9e")][m],w.sa=M?x?m:w.sa:parseInt(O.Pd[n("8347ee1f6975680a")][N])),X!=n("a60758")&&(w.lc=c(X,w.lc,B)),f!=n("43c475")&&(w.Tb=c(f,w.Tb,B)),g!=n("0142b3")&&(w.oc=c(g,w.oc,B)),S!=n("252697")&&(w.ob=c(S,w.ob,B)),k=(k=k.replace(/\uFDFD/g,"")).substring(0,18)),L["1ab"]&&(/^(.{25})(\w{5}\.\w{1})$/.test(k)||/^(.{25})(\w{4}\.\w{2})$/.test(k))&&(c=(Y=>{let W={a:0,b:0,c:0,d:0,e:0,f:"",A:0,g:"",Qc:""},pe=0;return W.g=Y.substr(-9),W.g.substr(0,1)!="."?W.Qc="0000":15<(pe=parseInt(W.g.substr(1,1),36))?(pe-=16,W.Qc=pe.toString(2).padStart(4,0)):(W.Qc=pe.toString(2).padStart(4,0),pe=0),W.f=Y.substr(-7),W.f.substr(0,2)!="00"&&(W.a=parseInt(W.f.substr(0,2),36),W.a=4*(W.a-1)+360-32),W.f.substr(5,1)=="."?W.f.substr(6,1)!="0"&&(W.e=parseInt(W.f.substr(6,1),36),W.e=W.Qc.substr(3,1)!="0"?0<pe?W.e+720+70:W.e+720:W.e-1+400):(W.e=parseInt(W.f.substr(6,1),36),W.e=W.Qc.substr(3,1)!="0"?0<pe?W.e+720+105:W.e+720+35:W.e+435),W.f=W.f.replace(".",""),W.f.substr(2,1)!="0"&&(W.b=parseInt(W.f.substr(2,1),36),W.b=W.Qc.substr(0,1)!="0"?W.b+720:W.b-1+400),W.f.substr(3,1)!="0"&&(W.c=parseInt(W.f.substr(3,1),36),W.c=W.Qc.substr(1,1)!="0"?W.c+720:W.c-1+400),W.f.substr(4,1)!="0"&&(W.d=parseInt(W.f.substr(4,1),36),W.d=W.Qc.substr(2,1)!="0"?W.d+720:W.d-1+400),W})(k),w.sa=3e4+w.sa+c.a,jo(w.lc)&&(w.lc=c.b),jo(w.Tb)&&(w.Tb=c.c),jo(w.oc)&&(w.oc=c.d),jo(w.ob))&&(w.ob=c.e),L["1k"]&&typeof O.Sh=="object"){c=k.match(/\b(\w+)\b/g);let Y=[];if(c)for(var z of c)Y.push(z.toLowerCase());O.Sh.some(W=>Y.includes(W))&&(k="Censored")}w.Ab=k=k===""?"No nickname":k,(this.l.K.rb===w.T?this.l.U:(w.sa===19999&&(w.sa=35),w.lc===999&&(w.lc=0),w.Tb===999&&(w.Tb=0),w.oc===999&&(w.oc=0),w.ob===999&&(w.ob=0),L["1h"]&&S5.includes(w.sa)&&(w.sa=Gl[Math.floor(Math.random()*Gl.length)]),(k=this.l.tb[w.T])!=null&&k.Te(),(k=new b.Uf(this.l.K)).Sj(E.h.D.H),this.l.tb[w.T]=k)).Lj(w)},Ie.prototype.Wm=function(c){var f,g=c.xa(),m=!!(1&(x=c.F())),x=!!(2&x),S=0;m&&(S=c.xa()),(c=this.eg(g))!==void 0&&(c.md=!1,c.qb)&&(f=this.eg(g),m&&f!==void 0&&f.qb&&S===this.l.K.rb?(g=this.l.U.Le(),c=c.th(g.mb,g.nb),Math.max(0,1-c.kg/(.5*this.l.Jd)),c.kg<.5*this.l.Jd&&E.h.D.H.ye.il(x)):g!==this.l.K.rb&&(x=this.l.U.Le(),Math.max(0,1-c.th(x.mb,x.nb).kg/(.5*this.l.Jd))))},Ie.prototype.en=function(c){var f=(f=c.xa())===this.l.K.rb?null:this.l.tb[f],g=!!(1&(w=c.F())),m=(2&w&&(w=c.Bc(),f)&&f.lg(w),w=this.de(c.F(),c.F(),c.F()),this.de(c.F(),c.F(),c.F()));if(f&&f.kk(w,m,g),g=this.jb(c),f)for(var x in f.pa)(w=f.pa[x])&&(w.za=!1);for(x=0;x<g;x++){var S,w=c.F(),m=c.F();f&&(S=f.pa[w],(S||=f.pa[w]=new b.Ce(w)).za=!0,S.Nf=Math.min(1,Math.max(0,m/100)))}},Ie.prototype.kn=function(c){var f,g=this.l.U,m=!!(1&(S=c.F())),x=!!(4&S);for(f in 2&S&&(S=g.Qb,g.lg(c.Bc()),0<(S=g.Qb-S))&&E.h.D.H.ye.zn(S),x&&(this.l.uk=c.Bc()),x=this.de(c.F(),c.F(),c.F()),S=this.de(c.F(),c.F(),c.F()),g.kk(x,S,m),m=this.jb(c),g.pa)(x=g.pa[f])&&(x.za=!1);for(f=0;f<m;f++){var x=c.F(),S=c.F(),w=g.pa[x];w||(w=new b.Ce(x),g.pa[x]=w),w.za=!0,w.Nf=Math.min(1,Math.max(0,S/100))}E.h.D.H.Cd.Fa(g.pa)},Ie.prototype.Xm=function(c){var f=this,x=c.xa(),g=this.eg(x),m=c.Bc(),x=this.jb(c);if(g){let M=0;for(;E.h.D.H.of.children[0];)E.h.D.H.of.removeChild(E.h.D.H.of.children[0]);for(var S in g.pa){var w=E.B.V().bh(g.pa[S].ua).Na;(w=new Pe(w.ig())).width=30,w.height=30,w.x=M,E.h.D.H.of.addChild(w),M+=35}E.h.D.H.Yf.text=": "+g.S.Ab,g.lg(m),g.Lo(function(){return f.de(c.F(),c.F(),c.F())},x),g.Qa(!0)}else for(S=0;S<6*x;S++)c.F()},Ie.prototype.$m=function(c){c=c.xa(),(c=this.l.tb[c])&&c.md&&c.Qa(!1)},Ie.prototype.Fm=function(c){var f=new b.Ck.Sf;f.T=c.wg(),f.qi=this.l.K.qd===b.Nc.$d?c.F():b.ce.ef,f.wd=this.de(c.F(),c.F(),c.F()),f.sa=c.F(),(c=this.l.Wc[f.T])!=null&&c.Te(),(c=new b.Ck(f,E.h.D.H)).Lk(this.ep(f.T),this.kp(f.T),!0),this.l.Wc[f.T]=c},Ie.prototype.Km=function(c){c=c.wg(),(c=this.l.Wc[c])&&(c.Yh=0,c.le*=1.5,c.ci=!0)},Ie.prototype.Pm=function(c){var f=c.wg();c=c.xa(),(f=this.l.Wc[f])&&(f.Yh=0,f.le*=.1,f.ci=!0,c=this.eg(c))&&c.qb&&(this.l.K.rb,c=c.Le(),f.Lk(c.mb,c.nb,!1))},p=[34,29,26,24,22,20,18,17,15,14,13,12,11,10,9,8,8,7,6,6,5,5,4,4,3,3,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,4,5,5,6,6,7,8,8,9,10,11,12,13,14,15,17,18,20,22,24,26,29,34],Ie.prototype.Xl=function(c){for(var f=E.B.sh.fk,g=f.getImageData(0,0,80,80),m=p[0],x=80-m,S=0,w=0;w<628;w++)for(var M=c.F(),B=0;B<8;B++){var k=4*(m+80*S);M>>B&1?(g.data[k]=255,g.data[1+k]=255,g.data[2+k]=255,g.data[3+k]=255):g.data[3+k]=0,++m>=x&&++S<80&&(x=80-(m=p[S]))}f.putImageData(g,0,0),(c=E.h.D.H.aa.Zf).texture=E.B.sh.Ye,c.texture.source.update()},Ie.prototype.im=function(c){c.wg()},Ie.prototype.pm=function(){this.l.Ap()},Ie.prototype.dm=function(c){this.l.gk=c.xa(),this.l.tg=c.xa();var f=new b.ii;f.Ac=[];for(var g=c.F(),m=0;m<g;m++){var x=c.xa(),S=c.Bc();f.Ac.push(b.ii.sl(x,S))}if(f.Ze=[],this.l.K.qd===b.Nc.$d)for(g=c.F(),m=0;m<g;m++)x=c.F(),S=c.Bc(),f.Ze.push(b.ii.zl(x,S));E.h.D.H.Aa.Fa(f)},Ie.prototype.eg=function(c){return c===this.l.K.rb?this.l.U:this.l.tb[c]},Ie.prototype.de=function(c,f,g){return 1e4*((16777215&(255&g|f<<8&65280|c<<16&16711680))/8388608-1)},Ie.prototype.ep=function(c){return((65535&c)/32768-1)*this.l.K.Bk()},Ie.prototype.kp=function(c){return((c>>16&65535)/32768-1)*this.l.K.Bk()},Ie.prototype.jb=function(c){var f,g,m=c.F();return 128&m?128&(f=c.F())?128&(g=c.F())?128&(c=c.F())?void 0:c|g<<7&16256|f<<14&2080768|m<<21&266338304:g|f<<7&16256|m<<14&2080768:f|m<<7&16256:m},Ie),b.Zc=(Hi.Cg=function(){return new b.Zc(null)},Hi.Di=function(c){return new b.Zc(c)},Hi.prototype.Wb=function(){return this.wi},Hi.prototype.tf=function(){return this.wi!=null},Hi),b.Ck=(ri.prototype.Te=function(){this.Ie.Wa.id.zd(),this.Ie.Wa.O.zd()},ri.prototype.Lk=function(c,f,g){this.Gg=c,this.Ig=f,g&&(this.Ed=c,this.Fd=f)},ri.prototype.Jf=function(c,f){c=Math.min(2.5,1.5*this.le),this.Cf=I.Q(this.Cf,Math.min(.5,+this.le),f,.0025),this.Ng=I.Q(this.Ng,c,f,.0025),this.Va=I.Q(this.Va,this.Yh,f,.0025)},ri.prototype.Of=function(c,f,g){this.Ed=I.Q(this.Ed,this.Gg,f,.0025),this.Fd=I.Q(this.Fd,this.Ig,f,.0025),this.Ie.Fa(this,c,f,g)},ri.Sf=function(){this.T=0,this.qi=b.ce.ef,this.sa=this.wd=0},ri),b.Ym=(tc.prototype.Yd=function(c,f,g){var m=g.Na;m!=null&&this.Wa.O.uc(m),(c=(c===b.Nc.$d&&f!=null?f.wn:g).Wd)!=null&&this.Wa.id.uc(c)},tc.prototype.Fa=function(c,f,g,m){m(c.Ed,c.Fd)?(f=c.Ng*(1+.3*Math.cos(c.Tm+f/200)),c.Li?this.Wa.ja(c.Ed,c.Fd,2*c.Cf*L["1q"],+c.Va,1.2*f*L["1q"],.8*c.Va):this.Wa.ja(c.Ed,c.Fd,2*c.Cf*L["1p"],+c.Va,2*f*L["1p"],.3*c.Va)):this.Wa.ya()},ac.prototype.ja=function(c,f,g,m,x,S){this.O.Qa(!0),this.O.Gf(c,f),this.O.Sb(g),this.O.Ra(m),this.id.Qa(!0),this.id.Gf(c,f),this.id.Sb(x),this.id.Ra(S)},ac.prototype.ya=function(){this.O.Qa(!1),this.id.Qa(!1)},y=ac,tc),b.tn=(wt.prototype.C=function(){},wt.prototype.qa=function(c){switch(c){case b.s.Y:return this.Ia;case b.s.va:return this.Gb;case b.s.Ca:return this.Jb;case b.s.Da:return this.ub;case b.s.Ea:return this.Lb}return 0},wt.prototype.xh=function(){return new b.aj(this.Ia,this.Gb,this.Jb,this.ub,this.Lb)},wt.prototype.yh=function(c){this.kh.push(c),this.Nb()},wt.prototype.lk=function(){if(!E.B.qe())return I.jo();for(var c=[],f=E.B.Ma.gb[n("a6440350c4fa1ecfcf463428d1b7")],g=0;g<f.length;g++){var m=f[g];this.zc(m[n("2ed694")],b.s.Y)&&c.push(m)}return c.length===0?0:c[parseInt(c.length*Math.random())][n("23bd41")]},wt.prototype.Io=function(){if(E.B.qe()){var c=E.B.Ma.gb[n("fc3e55a66e903021652c02be6bad")],f=ic(c,this.Ia);if(!(f<0)){for(var g=f+1;g<c.length;g++)if(this.zc(c[g][n("766e5c")],b.s.Y))return this.Ia=c[g][n("653f83")],void this.Nb();for(g=0;g<f;g++)if(this.zc(c[g][n("fc245a")],b.s.Y)){this.Ia=c[g][n("a9734f")],this.Nb();break}}}},wt.prototype.ok=function(){if(E.B.qe){var c=E.B.Ma.gb[n("a5e54c3147dbd92ecce76b0952d6")],f=ic(c,this.Ia);if(!(f<0)){for(var g=f-1;0<=g;g--)if(this.zc(c[g][n("57e13d")],b.s.Y))return this.Ia=c[g][n("b781dd")],void this.Nb();for(g=c.length-1;f<g;g--)if(this.zc(c[g][n("adf74b")],b.s.Y)){this.Ia=c[g][n("338d51")],this.Nb();break}}}},wt.prototype.ca=function(c,f){if(!E.B.qe()||this.zc(c,f))switch(f){case b.s.Y:this.Ia!==c&&(this.Ia=c,this.Nb());break;case b.s.va:this.Gb!==c&&(this.Gb=c,this.Nb());break;case b.s.Ca:this.Jb!==c&&(this.Jb=c,this.Nb());break;case b.s.Da:this.ub!==c&&(this.ub=c,this.Nb());break;case b.s.Ea:this.Lb!==c&&(this.Lb=c,this.Nb())}},wt.prototype.zc=function(c,f){var g=this.hf(c,f);return g!=null&&(E.m.v?g.$e===0&&!g.bf||E.m.op(c,f):g.Fo)},wt.prototype.hf=function(c,f){if(!E.B.qe())return null;var g=E.B.Ma.gb;if(f===b.s.Y)return(c=ic(g[n("6b6f063781618310125d310f945c")],c))<0?null:b.cl.wp(g[n("9337feef79096bf8fa35d9e77c24")][c]);var m=null;switch(f){case b.s.va:m=g[n("bdcb461532f6aa17b1")][c];break;case b.s.Ca:m=g[n("027eab6072ff8cf0696f")][c];break;case b.s.Da:m=g[n("f6efd9fdbe62df79")][c];break;case b.s.Ea:m=g[n("a0168e92d7868304ec10898f")][c]}return m!=null?b.cl.Gp(m):null},wt.prototype.Nb=function(){for(var c=0;c<this.kh.length;c++)this.kh[c]()},wt),b.s=(ni.Y=n("9e7c2b78ec"),ni.va=n("addb762562"),ni.Ca=n("d745961f0f44"),ni.Ea=n("3204b8046594bd9a"),ni.Da=n("736c3432"),ni),b.tl=(sc.prototype.ra=async function(){for(var c in Oa)me.add({[n("996b77a57c7d")]:c,[n("a2c016d6")]:Oa[c]});for(var f in Qs=await me.load(Object.keys(Oa)))Qs[f].source.style[n("33855142c58dca597683594b")]=n("3b9e585eda91b5"),Qs[f].source[n("9325e0f2780f7ce4fe3efcfa7a1d48e2ce35d5e5")]=!0;await me.load(n("ae1a4207dbae15a2d3345d7bfca91be0d12df325a3b0e8b0e827e63e")),this.Lg=await me.load(n("649094710154cbdc09ce8b0d3623d5ee04a4c2331d3bd4e60ca2c97dad109096ca94e827e63e")),this.fj=await me.load(n("82b676d3ef7a297eefe869afc87d370ce2c220d1f3553604eac42b9fb37b2570ef814ac5c850")),this.Wi=await me.load(n("f14741621c0b964f9c195e1e3b029a5e725cf35ae2")),await me.load(y5),this.Lg.source.style[n("4cfcea7b2244e1d019caf242")]=n("042723a76db83e"),this.Lg.source[n("da8ae999b128c51f8781c581833ac109879adc8e")]=!0,this.fj.source[n("c2b2f1a1a910ed37afa9eda9ab12f911bf82e496")]=!0,this.fj.source.style[n("6858cedf1ed8dd4c3d2ed6a6")]=n("470a2ccaae1db9"),this.Wi.source.style[n("bdcf5b1433d7b00788d9231d")]=n("86652d69effa38"),(c=b.d.createElement(n("a012839dd29495"))).width=80,c.height=80,this.sh={nd:c,fk:c[n("cdd92af412adbdf0b0be23")](n("1f6245"),{willReadFrequently:!0}),Ye:new K({source:Be.from(c)})}},sc.prototype.C=function(c){function f(){--g==0&&c()}var g=4;f(),f(),f(),f()},sc),b.Fl=(kt.prototype.ra=async function(){this.D=new b.Ql,await this.D.ra(),this.oa=new b.Yl,await this.oa.ra(),this.Gi=new b.jm,this.Oi=new b.um,this.zf=new b.Bm,this.cj=new b.Lm,this.ij=new b.Um,this.pj=new b.Zm,this.yf=new b.an,this.Pf=new b.ln,await this.Pf.ra(),this.zj=new b.un,this.gh=new b.An,await this.gh.ra(),this.Ag=new b.Fn,this.Lc=new b.Pn,this.Hc=new b.Vn,this.pb=new b.fo,this.Yj=new b.po,this.to=new b.xo,this.wa=[]},kt.prototype.C=function(){this.wa=[this.D,this.oa,this.Gi,this.Oi,this.zf,this.cj,this.ij,this.pj,this.yf,this.Pf,this.zj,this.gh,this.Ag,this.Lc,this.Hc,this.pb,this.Yj,this.to];for(var c=0;c<this.wa.length;c++)this.wa[c].C()},kt.prototype.Oe=function(c,f){for(var g=this.wa.length-1;0<=g;g--)this.wa[g].Xa(c,f)},kt.prototype.na=function(){for(var c=this.wa.length-1;0<=c;c--)this.wa[c].na()},kt.prototype.J=function(c){e:{for(var f=this.wa,g=0;g<f.length;g++)if(f[g]===c){c=g;break e}c=-1}c<0||(this.wa[0].ee(),f=this.wa,c!==0&&(g=f[c],I.Nj(f,0,1,c),f[0]=g),this.rk())},kt.prototype.ge=function(){this.wa[0].ee();do var c,f=this.wa;while(f.length+1!==0&&(c=f[0],I.Nj(f,1,0,+f.length-1),f[f.length-1]=c),this.wa[0].ua!==b.eb.ff);this.rk()},kt.prototype.rk=function(){var c=this.wa[0];c.fb(),c.da(),this.Uh()},kt.prototype.fp=function(){return this.wa.length!==0&&this.wa[0].ua===b.eb.ff&&this.Lc.lp()},kt.prototype.pp=function(){return this.wa.length===0?null:this.wa[0]},kt.prototype.Uh=function(){this.fp()&&this.J(this.Lc)},kt),b.ii=(rc.sl=function(c,f){return{Ph:c,Qb:f}},rc.zl=function(c,f){return{Eo:c,Qb:f}},rc),b.tp=(_=n("0591f2ddfa8e"),v=n("64d2d3521b4d"),n("a81f88"),T=n("ea9ccb"),le.xf=(aa.Jg=function(c){this.Ai=c},aa.prototype.Rl=function(){return n("d1373d603020be66bc2e")!=typeof vt},aa.prototype.em=function(c,f){n("babe12a9db29e93fa7b7")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void f(new aa.Jg(g,m))}vt.signIn().then(function(x){var S;n("8fb5ff6676a27c68f2ac")===typeof x.error&&x.isSignedIn()?(S=x.getAuthResponse().id_token,x=new Date().getTime()+1e3*x.getAuthResponse().expires_in,f(new aa.Jg(S,x))):c()})})},aa.prototype.km=function(c,f){n("57fd37aebeeab4a03af4")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void f(new aa.Jg(g,m))}c()})},aa.prototype.qm=function(){n("272d47fece3ac4f04a04")!=typeof vt&&vt.signOut()},new aa),le.prototype.C=function(){this.Gm()},le.prototype.Og=function(){return this.v?this.M[n("387c09ee4ec41a")]:""},le.prototype.jj=function(){return this.v?this.M[n("3d5bcc95b35c229920")]:""},le.prototype.Id=function(){return this.v?this.M[n("7fdee89168da649be2")]:""},le.prototype.qj=function(){return this.v?this.M[n("0c3c38be648020366609")]:Ol},le.prototype.Kf=function(){return this.v&&this.M[n("47113af9a412bedb21f416aba5e1bb")]},le.prototype.Nd=function(){return this.v?this.M[n("cb1fa2d721f3")]:0},le.prototype.Qf=function(){return this.v?this.M[n("3ce11b79257d")]:1},le.prototype.Rf=function(){return this.v?this.M[n("ab39d5ee600e7dc7c501d9")]:0},le.prototype.Tf=function(){return this.v?this.M[n("766240792ee472e8067b")]:50},le.prototype.xn=function(){return this.v?this.M[n("8022a9baea9ca2")]:0},le.prototype.Bn=function(){return this.v?this.M[n("f266cd6085cedc")]:0},le.prototype.kl=function(){return this.v?this.M[n("5ffd0ea797fcacb2")]:0},le.prototype.Gn=function(){return this.v?this.M[n("e5b10bf91aa98eefa4ba")]:0},le.prototype.Kn=function(){return this.v?this.M[n("4b942c4a8664")]:0},le.prototype.Qn=function(){return this.v?this.M[n("a2db0dd2ce640b56d8de")]:0},le.prototype.Wn=function(){return this.v?this.M[n("08bb2f28780e3bad6688240278313f8a7dba3f08")]:0},le.prototype.$n=function(){return this.v?this.M[n("df7b883e0f67")]:0},le.prototype.ho=function(){return this.v?this.M[n("8cb5ab3ef432ba8ce096")]:0},le.prototype.mo=function(){return this.v?this.M[n("4d4daa73a22b3c6a2616bb69a02f3f")]:0},le.prototype.qo=function(){return this.v?this.M[n("c78ca64e2a901d52ae79852b3e610623b4")]:0},le.prototype.uo=function(){return this.v?this.M[n("fbde98893bd1f597")]:{}},le.prototype.dk=function(c){this.di.push(c),c()},le.prototype.zh=function(c){this.gi.push(c),c()},le.prototype.op=function(c,f){var g=this.M[n("c94a39933d5bbd74a80e3a7721")];if(g!=null){c=c.toString();for(var m=0;m<g.length;m++){var x=g[m];if(x[n("f10b17")]===c&&x[n("c94e328c28")]===f)return!0}}return!1},le.prototype.Eh=function(c){var f=this,g=this.Og(),m=this.Nd(),x=this.Qf();this.Ho(function(){c?.()},function(S){f.M=S[n("7fc5f29771eb6197f3d9")],(w=Ml(g5(S=f.M[n("273640f9c032ccf34a")])))&&(f.M[n("0ef1b9c2794db54873")]=S.slice(0,-7),f.M[n("56947380342278")]=w[0],f.M[n("6851cbcf25d9")]=w[1],f.M[n("6cd8d75a0308d6")]=w[2],f.M[n("d5ab38fd2da292e8")]=w[3],f.M[n("2571cbb9da694eaf647a")]=w[4]),f.pg(),S=f.Og(),w=f.Nd();var w,M=f.Qf();g===S&&(1<M&&M!==x&&E.h.Lc.yk(new b.Ro(M)),20<=(S=w-m))&&E.h.Lc.yk(new b.Wo(S)),c?.()})},le.prototype.Ho=function(c,f){var g=Jt+n("aa9e5efbde4a1264808503b0df235d7bfc")+this.Yc+n("acd8dc39d7e48656c76084c3d9fd9b");I.vc(g,c,function(m){m[n("e290cb9183")]!==1200?c():f(m)})},le.prototype.Ik=function(c,f,g,m){c=Jt+n("d88c286dac587c8ad2f755468d510385ae")+this.Yc+n("1e8ad2f740469d6554d898dc584f95")+n("fb89cea816d4a4c147")+c+n("778d4bdc8fd58d8b5a83c5")+f,I.vc(c,function(){g()},function(x){(x[n("5042fdc731")]!==1200?g:m)()})},le.prototype.ap=function(c,f){var g=Jt+n("daceaeabae1ac254d0b5d3808f138d4bac")+this.Yc+n("ebb9df980bc51d8787c1b48514c70c848f");I.vc(g,c,function(m){(m[n("cf63be2636")]!==1200?c:f)()})},le.prototype.up=function(c){var f=this;this.v&&this.Wh(),le.xf.em(function(){c()},function(g){f.Vk(T,g.Ai,c)})},le.prototype.Vk=function(c,f,g){var m=this,x=c+n("6a24")+f,x=Jt+n("d5e365ce29bfb9a9ef8828e508b6c6a6a3")+x+n("5eca12b70e1c431c08");I.vc(x,function(){m.al()},async function(S){if(S[n("b2a01ba1d3")]!==1200)m.al();else{m.Bp(c,f,S[n("61a790f1978903f91dbb")]);try{var w=await fetch(O.k+n("7b094f289e406857b172"),{method:n("91525c9741"),body:qs(JSON.stringify({[n("54d7f3462b46f4")]:1,[n("7513844d8b231f")]:O.Ad}))}),M=JSON.parse(n(await w.text()));if(M[n("4b94245fba62")]){V[n("c789bc5f39851e5ba365b2363c76")](n("718a87c999"))[n("3b855340da8289660eb8")]="";for(var B=[];;)B.push(0)}if(M[n("be2af821aba1e1")]&&(O.Yk=new Date(M[n("00b43a236d2723")]),O.hn=!0),M[n("c940249320")]&&(O.Jh=!0),M[n("7e792961")]&&(O.ek=!0),M[n("df638a3b0d67")]&&(O.bd=M[n("d131386d3b35")]),M[n("d0c97357a7")]&&(O.Nh=M[n("44fde7633b")]),M[n("03d17c93")]&&(O.hk=M[n("f0a44b26")]),M[n("72f051f700624a7a")]){var k=M[n("8e6c3553e4c626d6")];V[n("3d5fca95b34b10912953a48ca648")](n("bfdea5573097375fb78ca05525d1395bb774")).innerHTML=n("4fa56281b7eda3e365b83aa6baffaeeb6cd444e0d1e08ca20bfd44ad84ee80f31bd503899add90c3459a5cd9be89cdaf5a82b1d7318420c4b79dbbca2e8f4e97e2a7b43023b76765b2fbdd2f29fe757aeba0d23710950024e1fd9b5c4aac5d2c8197de505e854143c39dcb4152955800dc9fac1771b23543a594a0596ece0b57a267f47015500768a766be6f693e787cef678836177c4065a33ddb68592c486cdd05c35212481c019905901e1e41585dbb153340e051eb02624a2c48b919bf4e6e2c65a7a000b0b4256d2bb8be7fd8ab2f1104a0937197a6026a19bf996cfad17d2d1cf6962786830e2b6be19e2f898b7d4018f7e644849375486c88fb59ff8e6ab261e7e0c7bcab30ad6bfaa8febeeb6cd444e0d1fc91a217eb4ce9aab9df984a92378383d4c7c800c70b879ad8989a0ac2ea9b7ad12b95e8d5acc84dcc789ce3a9f22721827c6bf0edab4c4f9e337ef1b7842011f11726d0b1cd6e43f91e5a8ad2831003c1071492da894b57855a409299b5572ed17672e2cafb592e92395bbd25e37076366527bb7cfc791f296f7cfa22d37750514066a63dda194e2e2b3a8656d45136014527d21bba0e125a585ccf536d13f047a045431d3b48f859ff086a323ceefa37e1ab742777fefa25f3eb6d7513a08667e0b317190ca89b799fae0a52018781549095740c50dc9e5e8dcd531132c1e6478193754a3adfb90aa8cc62e33eb7bdf0a7bf7ae430b9afa9effc7aa324f7d3d5c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cd9ec9526863595ebd9fa892e8f49dbbdf2f06167ad6363b2faab2f29fc796febb18c714ca14b62d5a18c296ff91f2cdb92941001c10716c49ada0f08a8181c8d98b5463387600586ddfb7c6ece0b5fbf70e36c246b272bb67cbc3e2e7e3627a675cf310c794064a1689c3807750e7bdd66980f14014720a37ad71a154b585ccd153237a604c45335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1348ffc47197a643395dfb863fc2eb411443db9657f183055a5bd89e5e8f8b0d4032c0a051f6f2624a7bd2bf08bdcd6ab310e7e1c2f0f411e929bae9a2aaa12dfd00a686e090a40cf110bfc5ff82b34a92379286c6998f148d4bac92c19acb4df6c3a02dc46b91a28abbdf38f928cecee5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9a5942b14a3b9dd0d54347851845d89dd75e4995181dfbd5f30036876004f5ddfb0a388e2e1bfc44f470616c2132a77bfc791a296f08fa22a7331364577890779b370a68082a9a529a0b0a415b059845dc583d5c080c93596257b172ec1b601d3b3cde6fa30e612734b0a161a6c3327858afa97cb8bc2f7513a2866695b315680ca89b799fae0a5201878027dccb504d0b9adf0dc9cf12132ec7ad00b7cf624b0d9ff94eaedf6ab263e7e1b4a6b434ad6a8efebeefa62be411a1c6a7a4f355de4ce8adfd9dae5d8e068d81c9949212dc0c9890c5848b51d3ee9f26864386f2dae59368993fb8e6adf62721825647b9b8f76d3efe2f2bac95842262f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90e6dd69da61771c42157b399e4592489234abd79f47117216774ba70fc7869296f7eac62827750504064d5709d2e1b6f486dae05c324561633078758cb440c430f039e446406f646ee1f7e5d2719e451a84c493064e0ff2df6a3250e70e7fc69afc852080fe2cd3380a4157d1adf8e6cecbb1d50149083418796125a098f895c989c0f557382e646f593743b20d7ac59ff8e2be125a3fee7bab339fc2bb3febf99eb6da207a0c6a6d7f355a81aa888b9de9a4a92438a87d08595529b38cfc9ead8dc39d1f182319a7299f5d5e88e6ec8788ce4a9e8673da77a6bb2fadf7a6eae7167fcf593544ab94233959eef4805ac43798ad2830700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e2013a693263e538bd2b2f6d702db0658f26116d4065a33ddb68187b486cdd05c35200561643c46cdc584944091a8f432441c211b730220a4f1bfb4cbf50782f63eff230f0f2623a72e3e229b3ed703d04a0e524d0f44b314abf991ac4f3484503e4e0239bd6590f1c9889498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe8cfb4a338b553e287f591b74afb06af85e89fa74a9335c7c1969f96529a4bcfc99c8e9c1c95b2b62686379ef3ccf9892e8f4cdbbd86b43055a56576a5e6ee6569a17c7afaa4d46048bd5c7389bbc6770eee6b6eda82dd4b50c10760de85de0f09aa777e9180af5566c67713f4bdec0a0ad97f0eea32e16761347074e72deb7a7e3e6d6bed20c460533156158e758e7f592c093f9b41dc011c511b128551dc593f094f5c9e452440b111b746744a6a5fb878a84c3d2865f6e337b0b5566d2bccbe7edbef6f2013bcd43bd7fb462c4ceede2ec6f756051fc1dc09909471184cc8d705de8b0d3628dfa451f7f0062d67caa51be88c7da56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5ce3188f9481c7d613c90d8bd6cf929b11c4f38b268741d3b58ae89f2e8e3fdbbdf0e27070e12642b2faab626fb86d7dbae3e03711920024e1b9d96a19f25a71dd8dd05656904054dc81c04f158f52439ac287423696295fa4ddfb7c22912a1bfd4690077d743b21f23aeb6f6849787e9e35d36246265573d528cc685b395e1dca12b7061a525055b20dc92b5e1e4d4bcd002440b311b746220b4a1ee24aa84c3f2470f6f269f6e962266df8e269aeca3a6213e6d17197a4026a19f9c73ddeed0a5375878156c6c3451e5cd89600d4dd4b557382a217b1df311d6c88f959fefb6ab010e7e3c5f0f467ad6bfafebeedeb6da044e1a0b1d79003f11fffd8d9c8ee2e8543d2d696c5c345985cd8cb89cead1bd9f7d731846197f3d9a49964c9638afdb9b43157e12734f5babc3829e92f3efcbcc06150f1165282ea9b694eae5b7bddcddd4b4090101485cd8a6f1edc7c0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e749fc786b296f7efa22d17751244065a43ddb1c0f751b7bdc65d45232014756d21ac94f491c585ccf153231e75df35335086d1bff5da01d60357ff6e13db0b5536d2bb8ee3fb8bc2d7513a2c038c4e5547d1ade8e6e9fed4a1247c7c149d9cf441c1c9889498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efebcdf8fc6fb553e2c6a6d5f355a84ce9a8b9df980bc907c7c0e1d0d6368d4bdade9ecdcb4d80a4c0339136b5e3d1ffdf398c699ffba1bc617cb17b72e5b1bc395fe92f3cfcb1842011f11726c4b4c86958f91e5a8ad2835156964343c5c5d5434898181c8dd5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bef51c46053315766c22ad97f592c486dac05c324174d0343c46ddc5a3a094f5eda023157b104a044371d3a39ef55fb5b3d7075e3e725b8e5783d77fee935b8bd5b7513a0ce2c80a4157d1baac830cced5c4502e6965687d5521a4fcfc941d1c74c046480f151f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d3d5c0e457bd5beaceaeddfb5d9054d1b081c7a013c10fcfc8e9d8de3e95b3c2268635d3b588acc83b993ebdeba9e72721f47167e3a9b46974b9737aeda9842167f11724c1aa8c2819f91f2ecc8cd05140c1066292da8b595e9e4b4bcdddad5b30806004f5ddfa7f6ecc0c1bfd30f47063216776f23ae96f693c787cef35d36246265573d759cc685b395f6eca12c14741145055b40dcb2c1f450b4bcc752442c211b746220a395fb90ca84c3f6522c1f72de3a325787debef2db0ed70254fe6d12d80a5637d1ba8d83b88ac1d450392d008d4d5444d0aee9e5e8fdd5a0237d7b159a9df340c6c88f959fefb6ab010e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffdbddc8ec5f8543d2d696c5c345985cd9b889cfa81bd9f7d730f120c6c69dbbca2e8e3ddbbdf0b43023e12645f3a1ef2f29fc796febb18c714ca14b62d5a18c296ff91f2cc590941001c10716d484d85948c90e6a9ac2f34126863353b5d5a5533888680cfd25e20776341463e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdf61d45043014756d21ac94f491c585dbc153334e75df353347d2c4aca19bf4e2a7221a7a174b0b4276d2ac9ff25ebab2d6045f3d73588f5482d47eed92588ad6b450390d2119094054d0b9ad800dcdd4c5572f6e646f7c5220a3fdfb951a1d73cf474f0e1a1e68372b818efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c3e5d0d4478d4bdade9ecdcb4d80a4c1409137b0e3d1ffdf38f928cecee5a33236f62523a5f8bc382be92e4dfbb9d73711e44177d3b9847944a9436add99941177c10714d68d9c1809c90f1edc9ca04130d17672e2cafb492e8e3b5bbd2dbd2b20707074e52dea0f7e3c1c6bed20c46053315766c22ad97f592c486cdf05c35256164543c769dc584b094f5eda023157b104a045441d3b3cef55fb5b3c0534b2d261a6c5327a5feef23ab8bd5a7511d38667e6f24e2e0ca89b35c9bb1c2414908113c1d41a0d41dad21ed8835b1135d7e646f79375482ad6aa0fbe9b7cc474f0e1e1adb63efa3ce7ace3afa372e414a088fd9cb342aa5bffd8d9c8ed2c8543a497cd83c344ed");let ze=V[n("69ab9ef99fa73cc51d8790d09a9436c415")](n("fdc00cd5f38466c6289aeecbfd")),ge=V[n("de1ed514908af7908a12cb0d8589ed9182")](n("221d975054c18dcb0758834840cb82b81f2f9d3642e2caf953269b"));for(var N of k=k.sort((ue,ke)=>ue[n("6d319d449410")]-ke[n("aad41ed9cb4d")])){k=V[n("a337d7f3462c4cdfc739c0fb4114")]("div");var X,z=V[n("6210561007834dbc061e4118008b")]("div");k.classList.add(n("bddd5a0237d7b159acc22215")),z.dataset[n("b5d1441b")]=N[n("e9290e6e1b3b9d7f84101f")],z.dataset[n("2c09078b5c64")]=N[n("10953b177800")],z.textContent=N[n("5532be7cb52f")],k.appendChild(z),N[n("a81099a4ca888213")]&&((z=V[n("00b230366521239264bc273e6229")]("div")).classList.add(n("99797ebe6b6bedfdc7674fb8")),k.appendChild(z)),N[n("6b750039")]&&(z=V[n("3f1333d7a200a0f32b1d24dfa508")]("a"),(X=V[n("a2d016d0c7430d7cc6de01d8c04b")]("img")).src=O.k+n("0470749165bc2e326d787c99")+N[n("9de77237")],N[n("46a27ab5")]&&(z.href=N[n("00a4303f")],z.target=n("903eb08ff58bbd")),z.appendChild(X),k.appendChild(z)),V[n("77d90c8f89d5ae8b13d5e2866cc6")]('.server-list[data-country="'+N[n("3eac6fa42c27762c")]+'"]').appendChild(k)}V[n("ae4e0524c0ba27a0da221b3dd5b9")](n("3508c48dcb5c5e9e104dd085af46318d685aae8bbd"))[n("a5f7433c6cecce32d9d2461345c7dd01c7")](n("af83dd4b508f"),ue=>{if(ue=(ue=ue.target)&&ue.dataset[n("8032ada6eaa1b42e")]){for(var ke of ge)ke.dataset[n("0c3e21aa7e95201a")]!==ue?ke.classList.remove("active"):ke.classList.add("active");for(var Tc of ze)Tc.dataset[n("2d7dc095df56419d")]!==ue?Tc.classList.remove("active"):Tc.classList.add("active")}}),V[n("66865d9c18027f18029a53751df1")](".server-list-container")[n("e616cc1daf8dc9939a33d9f28666da6084")](n("06f4a4f06970"),ue=>{var ke=ue.target;ke&&(ue=ke.dataset[n("ee08c3f2")])&&(ke=ke.dataset[n("14113f93748c")],Di)&&Di(ue,ke)})}else V[n("ddbf2af513abb0f189b304ec06a8")](n("dc037aca93d2505a94414fd886945e5e9449")).innerHTML=n("4fa56281b7eda3e365b83aa6baffaeeb6cd444e0d1e08ca20bfd44ad84ee80f31bd503899add90c3459a5cd9be89cdaa5a80c0d7318420c4b79dbbca2e8e3ddbbc83f86f74e12736e4bafa2f2888383cadb8d56653a70025e6fd9b5c0eee6b7fdf90830c448b474bd69cdc5e4e9e5647c695ef512c9960048188bc5827952e1bfd46b82f34216700835af73a356b787ced35d362147d01228f3dda1e4e2e5f6cdf05c350561645079b419e045645090b92153236a606b71562567d1ff919bf4c2a7221e3ff30b0b5536d2bb8be7eafab2c1504a2e77195d7026a19bf996c88ac1f450392e42be7eb1a3c1ce9884984ed6d3b64f1f75187861e3d6c8a8f59fdff6ab261e7e1b4f0f467ad6bfafebf9ea732f744e0d3e797b542ab2dffd9ae85aa1bd002c7c0e5d0d4318d4bac9adc8ddc51c7ee806ed57193f3cdfb9162c568d0ecaffc2721826573f5a4f0693efe5b67f2b7842065807738d7b6ce3f19ee082c9f97d846478c1015f3cd8b1809dc181c8dd5f30222982c51a9d5a04e2e91680d8b25e37030613b32b27afc7869296f7ebe7c957750504064d53ddb684e2f287bdf64d45232014625d21abf0e125a585dba153136a604c453347b6d13fd19bf4e6c2c70f1e061a6c2327a2bf9fe3eebeb6d7d4dfbd02088f548365dfbc232c8ec0a5203878154c6d24e045c8f8828989c0d1428c1b318a4cf624b089ff94cabd22af874f191a1e7f472bb1cefebc8f8fe1eb553e2c6a6d5f355a84ce8dbb9de9d0dd505969ccad0d447c11dcfc8e8d8dc4dd1ea866ac26485fed7e7df398e28ccbfb3e57b7fa13035d3edab3876ad6f69f6be842162f11726c6addd750eef6f3b9dd2941176a55e52de8e9c180b89490b8cb3e40005963042b397a71f78b9680cff25e37276366563e538fc7a1f296d0ffa23a2775152013f913dda1f"),V[n("ddbf2af513abb0f189b304ec06a8")](n("34a0443459620ee24aec0d762f7f"))[n("d0ce7c40b84c75cc")]=()=>{Fi[n("322c842058")](p5("https://wormateturkiye.com/?a="+O.Ad),n("e8e648578d5345"))[n("cf66be212677")]()};M[n("f8ac423b953f5b")]&&(V[n("a6500d4defd709d0cb510403cb8a10")](n("e5a113ea44bf93ec84ac0a8d158387c1"))[n("bb18d8d64b332edcb711abc2")]=M[n("d5a32ff830b8be")]),M[n("4557")]&&(O.Sh=M[n("cddf")].map(ze=>ze.toLowerCase()));var Y=M[n("2a598d5340da82b2")];if(Y){let ze='<div class="mm-merchant-cont-wrapper">';for(var W of Y)ze+='<a href="'+W[n("8facf86c78")]+'" target="_blank"><img src="'+W[n("d5af3ae93eaf")]+'"></a>';ze+=n("33c1066592daff4e529a181dfa"),V[n("7517824d8b132849110b9c446e00")](n("992476a13063faa2c27a42ba513bc4b7c76e")).innerHTML=ze}if(B=M[n("44e7e4762677efe93f")],S=!0,B){var pe,oe=V[n("8af83ef8ef6b3564fec639c0f853")]("div");oe.classList.add(n("49c8ae17a1df22ad22aebae0b0b4"));for(pe of B){var Re=V[n("13a76763f6bcfc4f77a9706bf1a4")]("a"),At=V[n("c2b0f6b0a723ed1ca6bee1b8a02b")]("img");S&&(Re.classList.add(n("b8e8997fd57b9b")),S=!1),At.src=pe[n("c15b2e952253")],Re.href=pe[n("851a6e5662")],Re.appendChild(At),oe.appendChild(Re)}V[n("0eeea5c4605a87407ac2bbdd7559")](n("d649fb06b69ef183f31dc9168a87")).innerHTML=oe.outerHTML}}catch{}g?.()}})},le.prototype.Wh=function(){try{this.ul()}catch{}this.Al()},le.prototype.Dl=function(){this.v&&this.ap(function(){},function(){})},le.prototype.al=function(){E.h.J(E.h.pb)},le.prototype.Bp=function(c,f,g){if(O.Ad=g[n("34f005624a401e")],!V[n("fee8a5e5477fa17863f9bcdb7352a8")](n("c8ee7e69e16e6beba4c87c44a70864c2b6cd7f59b95f"))){V[n("471f2cce8e10a8d32aee2580aacdb1")](n("e77e80340a70402d874183075e4217")).outerHTML='<div id="final-playagain">Play Again</div>',V[n("370f5cdefe00d8c35a1e35f0ba3da1")](n("cdd826ee30aefef4b9a72ee93eabb2e2"))[n("e3fb8bb50bf10ab1")]=()=>{je.ad()},V[n("3d5fca95b34b10912953a48ca648")](n("bd8b0d432cdfee15a1c02e1b2c97a813a3ca")).innerHTML=n("a6125b7ac3d51cc8da1a4271c6ba04a093743c6c88f91eb8ca3bef3fe7e1b6f0f467fe38a6aee9f8fd1bb553e0a5c1a99a42aa5989a8cea89b218543d0d696c58f138d4aaede9ecf880adced8160c66093e99dbbc82e8f48dbbf81b43150ad7b76e2bcbc382bb8647efaf5925606e61774d2acdd7545f91f2c8ad281545288404392dbfd0f09de6f4bcf9ca04b66c67713f5c8a05e6ecf091bfd32a63621743927ae69be2b3262787ced35d21746242473d45b8d331d395f6e8c4c901100014622d21acb1d1e4e500c90487957b106a045421d393bae0ebd5b3d7034b0a361a7b6327b5aebbe7eade66d3547b7901080a415305deedb2f88ad6e4503e49656f3d55e1c5c84cc03cfc35e0424c6b606aedf3e1d67d9a411e88c09a563f0f6b6e5a53be92ab9febf99eb6da216b781b996bf13fd4ce8d9b9de9b2eeb25aba5e5a6bf38e65cd8cb89cfa85a82b1a148fd4bd3b4fbacc84ddd28cdcae5a14336f62523a5f8bc382be92f3ebae3e27056a05179c9fd9b2a48b04c6ddcc5826616d60755df87cb5e5899495d9ac2f31770b1165ea88abd593e883e1bfc43f47015662032a367b76f6849787e9e35d211462623328e6ecc692e"),V[n("86663d7cf8e21ff8e27a3355fdd1")](n("e177512703238b749a3919790830"))[n("5529b96bb5233867")]=()=>{V[n("0ef9a5cd7e50b75773c2b6ec764eb14870db")]?V[n("04303ebe7c9f3f37602e2dad75843c")]():V[n("c79aa65e32")][n("c0e36762b17075e38eec6677bf7e7cfab5cf")]()},V[n("00a03736762c15b264bc292f632f")](n("d88c2818ab596cdf8cd05b5283544fd9"))[n("c797a75927952e55")]=()=>{je.ad()},V[n("a5f1422c6cf6ce31c8f05b2248ebd7")](n("ce32fd4cb08ce091b90ab50baf9fe882b01c")).insertAdjacentHTML(n("c316a0d0280a2cdfa518"),n("f1474067110f810dcb5a18401c1d8c153236a443f1042a4b6c0eff55e3197c6734b1d617f0f2632177ede869aecd3a6267f6ca2280a562")),V[n("c95d2e880852aa6db42c27462c0fb3")](n("5cdeea5d0545c1db49d7c94f")).insertAdjacentHTML(n("6053c7d50bc7c352065d"),n("91272087716fe1edab3a72a8383ddbf5932054a0573bd4bddd6e42b24a6d8ad2830701d4564ad69bca0f08a8181c8d87b5406e872042b391a75d38d13b57aa77f47063772134b27cba22767a342ba835d36046272073d759cc685b395f6eca12c14741145055b44c901c5e1e4d0d93517201a607c153350a7a0ef959f91d676d72edfd30f4ef792d6bafa97eb8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5ffeca56066480f317a9d7340b6c898f59ff8c38f423efa0e1a1b23ee63eb9f6fab4ab28bd09b782f0c0e455bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12720877773e3bcf6643efe2d6df3b1d26106e7613395eade6e59f15e7bdb94d84c5497184bd286cc07598d5e459ac2f31770b1600584ddfb7c2989394aa06ef47116216507f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1f3e1d8f516f57b104e61a664b7a5fb878a84c3d3765f0be37f0f2632177ede861f0eb71250cfec236c0fa026a1bbf9819faf15d0d14908330c0d45c0140cf9e5e8dfd5a0435dbad13b693743b6c888d0fbddf21a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5ce354d0b5c09c90529b3ccfcbedd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43035d4acf07c3efe2d6df3b1d26106e7613395eade6e59f15e7bdb94d84c54971850de8dce0757854e5a9ac2f31770b1600686ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395e1d8b4987474114160a965b8a4f4868585ccd526001e619f613734c6014ec4fa008662566a7a174e2f265657bebe829b0fd7a2455fbcd33d6bb51314ced8e6e9fbb1c251492f2418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69503f11fffd9ac8eb20ed302c7c0e0d0d445df0d98d6df989a0bd9ef957099699fe9ddacc839993ebbaaf0d02721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfc43a232326a7074e761bd6f6848787ced6795204e6700229371873d1831043aca12c3474114160a965b8a4f4868585ccd477500ae47e0027351671df811e11f6d257da7a176b0b5526d2ac9be7edbfd6f314fb7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69505ed1dae84f2c8ec5fc915c7c0e0d0d445cb169a82c599cb4d82a4c033d76997f4cbacc94f993fccf8b4e32f60a16172fea6fe7936ae687aebbfcf3711e60025e29bc66a52f91e5d8ad2f74046904149d9cd8a6f1edc7c0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdc63d45035401c10d21bbc4f4b6d585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ad6c0458d4965685c55b094ad99e5ff98b0d4236c6b159b6d3330c20d4ac0fe0d226ee34e7e1b6f0f512ad698bfebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2fbda796bad732bade0c27e42a75633949c8c2819ab596c8293d456478d5b41c4c5d54b5989510b8dc2e40106b62455ac9fbb553e92291bfc43f47015772527b92dea0f7e3c1c6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa80feeeb733542e6866695ff437d1ade8e6e9fe95b121cc3c308d4c8125a0b8f8829989e7e557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cead5a82c78166d86095f39dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3e40005902c40e2cb8c1f7bbd680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc546804a606b5156b597a09ae0fc95b3d7266f6e169e6e3633c70e4fc3fb0e2763e44b7916680a5627d19db8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642ab2aa99bfd83fb5d90128e92d786c344ec5cd8c9db899c52c3e48677dd6b91f495e59b69d961dbbdf2b431568c7067f3bbf1656fe92f3eecbfd47c47f1165582eaef695bbd433b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c22100411903945cdc584b45194bcc742440b143f1042a507a09e449e31a2a7223a7a001b0b6566d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e68572ba1fb9bee0b8ad2bb55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a48bbc385da87478bae3e4371395002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347075946cb03c7e3e6d2db371922146272173d52a9e2e19311e3b9b54980c1457580a9e469c4f491e585dba153133a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a4302c1b315ab9375482ad6aa0fbe9b7cc474f0e1f3a1b47afb3cbeafe5b3a92cbd0db381f189f355aa4ce9aedf98ac1ccf03c7c0e7d0d431db098b9589ceab5a80c0d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3b2572f912642e2caf9532fd97e7aea32e33527767825a27aaa2529296f7cfa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ad6c0f41d6da0bdb8305584fcbd719d88b0c346480f144e084755d7aff8f19abdf3aec25e7e0c7f0f411e729beb2e3b3eb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5925106e66365c2b4cc795ff91e5b8ad0f00701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17750574064a17c802c4e2f287bdf61d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a1e030cce0026a19f9c73ddeed0a5375878156c2d245454acfcf18d4c058036cdeaa1aa093754a6c898e59fdff6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4e8dffa1ff2721f4766af6bbea2f2888383cada7d5600ea74062d3b1c77d58f1417fcd85dd0701d61015f2bcd65a1edf7e0b8db6b242229a600582ddf97b6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220b4a09ee50e81d7b6523b2fa20b0b5536d2bb8ec38efa3733540f6c626d1f9577d1ba88e6fe8bb1f21149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b8c38d9a16dfefd731847397ebcdecdf38f828ccbdf1b43021e12643a6edaa493efe5b61efa4c87d4df1165382e8e83f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14740671a16834196045e1e4d189e5c7417a607c153350a3b5fb90ea84d4a7234b1d061a7c078386de3f422b8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaeb11fd4188d9d81c7d601c9159f9e89ceaa5a82b3c1268637d3b4fdbadf38ff28ccc9afe1767aab7b23a48dbc3a5ae92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c4605331561588689d330472486cdf56900e06415055b30dcb584f094f5cda034446a607c653357e660aff55e2102a7354a7a305b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fd1cff11a68afb8bf355a81fbb87e988fb5ce454d0c191d0d4458d4aafce89cead5a82c79d73c06c99e99dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bb63a2f653220fa22d12402781033c22bad7f592e5b7bdd12d45136125055b40dcb2c145c0907905e2441c611b537220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab312ada3f0bca939ad6bfaadedb1bb3ab55296c6a6d7e142aa5bffd8d9dafb5ce354d0b5cb85921ec717cfc8e9d8de3e95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfa79248c3957a06ef4706372342aa26dfc791f296f7ce735d3604627206ec22baa7f595a022e9b499e0c56173043c769dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406481801bb5c22e17279ff94cbbdf23f534e7e0c0f0f465b17cf8e9a9ee8b66b55291c6a6a3b917ec00b585b9de9b4a9030c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af525ecb99ae5c66c67540a694bc5f6ecf091bfd32e07276366763e44de87a7e3f1e6bed568e22177d0a38c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e8799fd85c055dc7d0109095724d09eb9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaefb5de6158b8581c6a3529838cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f189f4977d9c5831250885455c4cd8a6e1ede0f59cb82ec412680315fa99fba172795235bea32e36760417076962deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a6c5643878e4be7eaded733152e18667e1b3156a5eeed971defb5b1458ccd41798ca560a5cc69e5e8f8b0c3512d9aa1ae085045d7bfcb80cacd06ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150ad7b76e2bcbc382bb8647efaf5925606e61770ceb4cc3f19ee082c9f81d2415694410384ac9c1809c2575dd09ee40071d17706ae9cec090fd97f0cbc6bb82c156d3923f23aeb6f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6522c1b676d3e27e3e3cb9de69adcf3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab312a6baf2f0f467eb35aba8fff8fd1bb553e094e097fb14fd1dae82f28aad42cc188c9681c7d4529b3ccfcbedd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c19789f4d4fd1d5f30220982445b4ddfa7e6ece7f49bb72fc313670212fb96faa67376d3f2bb335d3604627200182799b7f585f486ca95381031d014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b50c4cb19c98b0d4035cbb311e085035d7b88ad15a1db6ab263e7e1b4b4a534ed29befebf99eb6da24fb890fb8bf355aa4ce8dbf589fb5ce454d0c1d3908705ee10869e89cfdc5a83c4d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f4cd8b6c5f854b0b8cb5e40202d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d4504301462593418f4f491c1e029e437257b070a044354f7d08a64fe80a7b297fe5e069f9ef792d3cb8a969aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd312a282fac0e457fb05bb98efc8ed2b8543d084d087cb04cd0d9e92c29a9d52dce09066d820c4b59dbabf43d96c9afca8fe7636f62575f8bdf76e3eff5e2bad96d26242ba0025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa33056c182aca12c1160a541043c46cdc58494a14029a153340a606b517645b6c0aff19be3a2a7223acfe34a6a3257a3cb8ab25f9ab2c1404a09127cae3493c6ff3c73988ac1d4502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f354db4ce8adf884a84a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40025e4bcc06c0eee1d7dc381c25116d7710385dace5e49c14e4bcb84a85c2487685aae96ac1f79ce680d8a25e10376366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7352f1e325fba325787ae6fa3feeab2c1404a09123d1e40a2b4ceedf35c3f95c4d5dc3d101d983055a1c99fe2edccd541733ddb61aa193743b6c888d0fbddf21a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12720877c68e7bded2f29fc6977efb5842167f11724c1b1c57f0eee1f3b9dd0d0415081455292dbfd0f09de1344cf97e40000da3558a0ddfb79658b285cbf25e3707636652fb32dea0e7e3e6f2cb856883e06315764c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bd5c7513d4c73dd3b3141d0caaea799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9ee8d3bf917f7d1a486ba06eb1affd8d8c8ec5dd70590ded7909203c1178d8881918711d5a4c0319136b3a288c8df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f4bbba4a2a92680cff63bd2320777075932deb782c782f63ac7595260a7a0225ca7488380e70486cdd05c2273e450543c5189a0517430f4bcc732440c547f517691d3a3fae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff83fa4d03ff525e7e1b4bca272bb1defe9beaaba2dbd0cb393f78aba08ea4ce8d9b9dfee19c11d979681c6a2529a4bcfc99f9b884f80b1c2268637d3b588fd837bd928cdcbe5a33070ab7969e5edab383eff582baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47110216700b361af6f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6522c1f72de3a325787ae6fa3feeab2c1404a09123d1e40a2b4ceedf35c3f95c4d5dcbdd019094054d0aef9e5cfc8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc8ef8e9e1edea4c033d76997f4cbacc94f993fccf8b4e32f60a16172fea6fe7936a07c6cfabc842011f11653e9b1ca710eee1d78c08ec50701d45649db87cb0f08af181cf983b1532dd17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b553347b6014fb49f95b3d7078e6b677d1a3257a6efee961f3e77c3b42fdcf3bd7b3156a0ca89b2accf25a051491f7418794125a0accdd5c8d9e0f557380e646f5c23e082c9ff838e88c7de33eaebcf6f0f465ad6a8ffebc9ceb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbc83b43055a07c70b2fbdc2f2b8d383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680d8c64b83476366525bb69aa397e3f196bed22962611391633936c80340c6f4032864e944741165055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ad9cb0dd38b0d4022dea207b693743c6c88f90bb9cc62f334b6a7edbba124a535abb9e9b1eb6da244e1a6da8cb50cbd5bea8df383aa4a9241919ade90c344eb5cd8bddf8d8f1195b2b7268444d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11770b72c58b78dbd1f79cc245aea33956761362232a525aa2f2f783420b863cc3c0a770e258e628c7f592e486cdf54881216014622d21acb181a421a0bda023357b104e81f691d3a3eae0ebf4b2a7223a7a174e6f272383cb9df69afbc2e7513a0866695fb46200ca9ef799fac1b50149081418796410955dfde498eea1a427380f751f784624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc948d3788affb5e52721f4766af6bbea2f2888383cada3cd7b47b1573bd1b9c56f4ef91f2c8ad3f41007c1066592daff454e984d5bcbd5f27766c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc5a3a094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799edd0a5277c6da129095724d09eb9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaeba06d654d0c3c7998704db5cd9bf89cfdc08c4f3df70d17182eed6ee8926d06490eae5a33036f75023a789bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347075947ba92b35296f7ebc7c802110315612c22adb2d1f6e402d8a54850b1d43064b9b499b0f17094f5cda034420e25ae1196a51731fae0ebd1a6a2670f7ff30b0b4273b72e3f53fb8bd5c7513d4d024c4f8026b6cbf9b1d88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce9a8f08cbc0acc54d0c3c7998704db5cd9bf89cfdc0cc7e88660dc20c4b59dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bb0242b79296bed20952b13714065a33ddb680874083d84429e1a56164743c518900e5e1f394bcd027606f119f717695c6617f857e4107c6523b0b677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e1a0e795b709bd5bea88f08cad1c8542a6d696c7951bc11d8f8989cfde0ddff49c679137c4a28bccdf38ff28ccc9b3e1637de12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d603c2cba7cc46126315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b317190ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf998a9ef883bf917f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa497fa56b2bade0c27e42a75633949c8c2819ab596c8293d456478d5b41c4c5d5435589181c8dd5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b077f60666562c48bb5fe11f7c3334b1d761a7b4603c6ba7e829e9fa763e46e18e38c4f442340ca899799edb610952c9dd05d8c3125a09dac903dbcf511935cbe646f5d02e143ddfb959fefd6ab217b1a3e5bbe364cd7cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa4977ad7f6bf3f5932240b84465d4fd9a5e0eee1f6dd889c5415bc1071492dbfc0f0bad181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a0454451670afe48a84c3f3468f2f661a6c2327a2be9f329fee57d3f59b7916680a417314dbf981888ac1d1745d09e14c7c9510957c3cf15dbc7530424c0e646f793743d6c8a8a59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12645e4b8f8643efe2d6df3b1d26106e7613395eada7642b8486c8ad281505c915b4292da8b0f08a9181dfcd5f37430842458e2cb8c1f7bbd680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c49c819bf38632173e7ff61a6c3327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993ebdaaf2d7667ab23035d2eda94b3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ecf0e5aa676f47063673927a47bfc791f296f7ca864937f107111228e768e29467004308a05c35056173043c769dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549095741b49cbd5498f9e5c1c20c1b051f6f2624a7bcdbf0ee0cd2af425abbde3a6eb3be93bafb7a9effc7aa3249a86f581a50ff71dffd9ac81b71cd454d1b081c7a004d81884de9fb8cb4ff1a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181dfc9ca05026986004f79ba55b388f680d8b25e37020733c32b460fc7869296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981fc4f05f1545878154c1df470d1c99ff498f9c5c1824d1a816aace624a7b9ff94ca4da6ab315e7e1b6a2b225a531b9b7e5aeba7aa253f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc582614094544892da8949578d4e5d9ac3851771c6365aae9cac486ece7d4ca075bf2676366763e44dfc7918296f08ac60803c46272073d759cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a5647d1bdcc73dcffb434502e79656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9a590eee6b7ac696941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa3e026a486cdf439d0300575055b30dcb580c580f438c557506ea5ae2052a546014ee19bf4c2a7354a7a305b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f190f7a5a739ad6bfab8e0bcbd2cb55296c6a6d7a113ea44a98ee899b701c702cf9fc597831b8d4bd8de9fb8bd17dff6d731846494eed4e08e62d97edbbc83b43055b76567f9edaa4f3efc5c2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f684f312fbd758d775124063a866b9a7f5858486cdd53860b07471d43c51adc593e094d2fda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624b0ad3a50cb8ca6ab261b6aaf4b0e364cc7cf8e9efb5ab3cfb03bd9bb1d7e442aa59b38fb9de9a4a92439587d6d8951fc70e8b99c591870bd9e481268637d3b4fdacca4a993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216605a478b8247e3e6d2db371922146272173d52a9a360278082cca12c1101c511b02d21acb4f4869585dbc153334f044e418220b4c5fbb7da84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c898859fff823e133a7bfa1e68372ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc3a5ae92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dea3297263a727075922de90b7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0fce1a663634b0a327f9e7643b3cb9df69afbc682453bfd031d1e24e364ee98630c4f04a4503909657f08307291c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d534db098b9589cfde1cdce081709136b2a28abb8d7fce208deab4e56b7da3662bfba9fb6f77e92f3cbae3e45a46b54165cfb7dd3f19ec5f7bcc8fc34616d6054ade9bcd0f08af181cf983b1532dd17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b553347b651be959e15b3d7072eef237e6a3240c3cb8a93feae76b3349b7916680a5627d19db8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d697b68f19d80c9ede9ecd9a06c0e4d730f020c4b5dbe19f68d76f91f7e5a33036f6256ff3edaa4e3efe2f79eba28c7a50a64075c8aacd7642af593b9dd2941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda034201f355eb5335086a16ea4ffe5b3c0434b0a137f9ef732d6bafa97cefe16a3e45b7916680a5627d1ad98e6eebed5f015f8780219096764d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c6a5529a3f869ace98825a83c4d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21bba4f496a190789153237a604c45335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b5dc3cd498f9e5c1c20c1b051f6f2624a7bcdbf0ee0cd2af425abbde3a6eb3be137affebeefeb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5925150a4447882ea997947bd5e6d8ad3f50701d64252c5c5ca4f4f985440d883ec5e2296205ae2cafb1f78b90051ad69bd2776366525be7aba263e296e0dfa22a72113750b73d45dcc6a2a395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1ad9c73dcffb43450392d008d4d5444d0aee9e5e8fdd481935d1ab51f784624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43035d4a1f77a6eb8383cafa4d86246f1165282ea9b7943b94e75cd8fc90701d610148781dd0f08a8181c8d87b5406e992755ae8aaa562ed97f0cea33946763457074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bd5c2351f3cd7197a6443448e9d8799eda0a5203d1df0dd1c3454d0b9ac903c8c05b557380e6478093743b6c888d0fbddf21a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12720873034d1a4f8687ea0383ddaf5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5546d2bccff25ebab2c1504a2e27197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e68533e12fefe9bcbea23ee312f7d0d0c0e455ef1da8c6ef88aa1bc91f858089998f19cd5cd8c989ceab5a80c0d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3b242229a6004f79ba55b388f680d8b25e3702470276ba46dad3e32623a3df27c803006784064d53dda1f3c731f33984f830e170147568443900408094e2dda024701f355eb53347d2c4aca19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7af9a71dafdb23a563f2b0e8b4b524ad6a8efebeefbd28f915b18bb1d7e442ab2cffdbddc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f481d75a4e98181c8f84b84226d17672e2cafb5923992e55ad6fa96761367074e761bd6f6848787ced6795204e63123995748d290075032dca12c34740615056b60dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1b004a4d8624a79d9a71dbecd6ab315e7e1b6a6aa3eec3cb8febeedbc30e50fb6c6a6d7f354dd4ce9a8b9df981cd0108cd697b0c347e95cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f4cd8b6c578d5f4bd3d5f27766c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a046461d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae99e5efbca560664818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529b3a8e92dad8dc4fd3ed9370c720c5c39dbbc87cc87fd3fca5e5767aaa7275baa4f0647ee92f3cbae3e4371395002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46120671537893ddb6a08700c2d9c05c22656164711835ad4191e5809079157725fef55e7136b1d3b48ae0fc82a662d34b0a329f4f6327a29f9f025f3fd3a6362b79112d6e646360ca9ee799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaeb20ec2148ed696c5851bc90a99de9fb9cb4d82f2856ac0669ea28abbdf38f928cecee5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72dea0932622d3bab35d362176d1533c22bad7f592e0e368a439a001c5c5054c50dcb5a1248585dbb153340f440f75b7355680af857e4107c6523b0b677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e1a0e795b709bd5bea88f08cad1c8542a6d696c7951bc11d8f8989cfde0ddff49c679137c4a28bccdf38ff28ccc9b3e1637de12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d603c2cba7cc46126315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b317190ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf998a9ef883bf917f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa497fa56b2bade0c27e42a75633949c8c2819ab596c8293d456478d5b41c4c5d5435589181c8dd5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b077f60666562c48bb5fe11f7c3334b1d761a7b4603c6ba7e829e9fa763e46e18e38c4f442340ca899799edb630f46878154c7c3440755dfcf05d2c01a430297f132b6c626166c898e59fdff6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4e92eea2f46e36f62565fba9ea793eff592bade2d2654aa0467e82ea9b3f1899082eeec5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dca2912420d1b8b153342f74df513220b4d5fb90eee166a237ae0fc3cb0b4256d2bbaf228b8bd5b7513a0d420d7bb4b375ee8ce2f88ac1d4502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4cf3f28262da20c4b7dbe59b78cf28cdcbe5a33060a87c62f2babc382bbe727bf1b4842011f1165382ebea3f199a5e6ece8e941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256173643c56e950b1949114bcc752440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e644849375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c344eb5cd8bdc894985a83c4d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f48cd05c1ede0d4dd391b24166c70113f5cabe4e39d13e5bbb74b82c3477782abe66bc6f693e787d9a35d11346265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6362e1d335cbb315684af6ca2fdebb1c2414908113c1d41a1b5cdecf05d3c94c5d2dd3a111a993754a6c898e28a8df22a563f2b0ebb1a372bb1aefe9caaebe3efe44e1a6b1d59742aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e7667fc9a8dc6e0eee1d77cbc5826616d60751c39a94595e984947d197b21f3791245ba497ad5f6ece7f1bfd30a53b23617075932deb782f69253afa22d37751240c38976d9d370478087bdc64d450414a000b925a90095e1e4f4bcd007113f740e004691d3a3eae0ebf5b3a0375a8b676a7a325786febf739f8ab2c1404a0916480a4157d1adf8e6cecbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd344e0a5f08ca042ab2cffdbddc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383ddcb4c86406e61575cbb9da690eef693b9dd2c65641c94643c39cd0445c9f1042d69ea41771c6600582ddf97b6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220b4a09fb5de35b3d7072eef237e6a3240c3cb8a93be9fc322344e6d73dcbf1547545fbc939c1bb1d521491f63edac95a4d0b9ad619d1da56002ddba606e085045d7bfcb80cacd06ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150ad7b76e2bcbc382ba5792bac94842011a351648aabcc6e5fb54379dccdcb4d5c89450385da9c180b98445edad5f27666c67744a696ae5f6ece7f1bfd30bc2b3d216602f23aeb7a753e686bed22c46053671133973dda1e4e2e5f6ec112c44741165054c74598125e1f394bcd023457b106a044374e6816fe59a84d4b6523b0a36aa7b3327a2bafa809b8be5e7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9ee8d30e515a296e0c0e457fb05bb98efc8ed2b8543d080c89c8212da549c9ac0888b5a82b3d730f135d8b58dacc948993fb8e0b5e57266b03035d2edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bff41f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002441c011b73063517f5fb879a84e4e6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1a71db39375482ad6aa0fbe9b7cc474f0e1f3a1b47afb3cbeafe5b3a92cbd0dbb8df1c0e455bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f189f5e6ece8e941003875947c49b9c197fc90f1cc884b31f30913142ae96ae4966902c5caa6cf470612166038d67b6277e3e6d23b67e883f16794065a43ddb1c186c0c30ca13b44743655054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501491f00ddbd6421c1c988b05d98b0c346480f103b1c46a0b2ccebf15a3d93cad3cabbdfebaa93aad6bf8febeedba26e004f7d0d0c0e455ea08b48cf9c8ec5d8543d29ecd9bc344ec5cd8c99cd3dc4a95b3c026863585f3ddf9df38f828ccbdf0bf3026e12734b2faa9677ab4383ddbf5932012e4002495fd9b2a5dbd416bcac5826616d6071699da8c0f09de181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda03421df640f503731d3b4ae850ec0d7c6522c6b676a7f57b217defe961ebef732544b7916680a5626807a89e799edd0a5277cdc610c5d3434d0aef9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1165582eaef7e42aa082deac5816316d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d362462726328e6ecc685b7f013f9c53d45137014754805c8b470849091a965e6601ae58ec18621d3b48ae0fc85b3f0134b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88d0cf321a3bda1e7f634e438b9a8a9ee8a7aa253a597e6c8a502ec1db385fb9ef303c113879f81c7d4529b3cac94c399cb4d80f29b79d120c5c49dbbbc78cc6c90aaf3d42723853034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f471106d3b36a27cfc786b65396bec54c46051631124ca6b8c2e1f7503399c0d970d1c40060f8d4ddc5849094f5e8b497117a607c153350a7b1be55be85b3d7234b0a329fce8327b5dafa97eada02d6504a0917197a6542c4cea8e6fe9bb1d52018c81519094054d0b9ad60dc58b0c346480f146e084755d7b8abd1da1cb2aa56286f6b6e7f772ba6befe8c9f8fe1eb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92e4df0a5d56256a0002497bbc57b58af082debc5831040885c42d29a945c5a80484b9ac2f31770b17413f4bbec080d93384abf75a56760417074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3364808510acc0624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cd4e88426863595ebd9fa892e8f49dbbdf2e67661e96663e3bcf0647cbf3062f6bec43711e60025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa291b7d037bdd10920e12570643c46cdc58495b091cd2436406f75deb117415651be959e15b3d7234b1d60de1e37a6d2bbae825e7eb3a6362b79112d6e646360ca9ee799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaeb701d00496d696c58f138d4aaede9ecf990bc2ac8166c0719fe9dffad762c86893fca9eb6736f62723a5f8ed736ba9383ddbf5932051b54b71c2fd9b280eee1d73c68e941177c1071487c68b1f1ede0f0b8dc0b2462684600583ddfb087bd27f0bea32e36761343827af2dea0e7e3e6f7fef35d3604626552086749c3f4e2f297bdd12c04741165055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ac5ce18cddb4b557382a018a4c5345d7afeee4effcd23e935a7a1a9a3a73bfd3cefe9bef8fd1aa144e1a0b1d79008ed1daa9ee8c8ed2a8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153397998c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc7918296f08bb79977750514066a63ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2ac9ff25ebab2d6042fec227d6b3141c0ca8992bd9ec021354d6c70ddbc1444555c3d509989c0d5572f7e644849375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d730f77686e6d6acc83bdf619ffcb3b43157e12734e0bceb2768a9697af6bec6610eb84474c2b48c2819f91e5be090c54b5e8d4f47c381d6441edf7e0b8db6b242229a600582ddf97b6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220b4a09ee50e81d7b6523b2fa20b0b5536d2bb8ec38efa36c3555e6ca3ac2e50a2a4cf4cf39dffb5d450390965685cf534d0aee9e5e8fde5a046cc1a618a0d5335d7b88ee4f889b7fc174f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc3958a36d7af6bfcf3711e45377cbadcc3f1898082c9dd0941001c1066386cd8a691ede7b41cf84a85d2dd17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a007faf6632176e4be7eadf87e3c54f78667e1b3156a18bf996e88ad6a521491f04187e058184dc3d402989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a83c2d731f27693ebddea8e2e8f48dbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2a6af91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296e0dfa22a7360a624065a23dd91b4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7fdeea762604a09337c9f7542b0ca9ef799fac5814438fc001c1d25e065ed99600d4c05a557380e647809377396c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c5c4cbf99b65993fcee6a4b43157e12734e0bceb2768a9697af6bec6610eb6507fcbbc8c2819f91f2ecc8cd05140c1066292da8b5d4f9e105dda84b55b2d93361bab99ab5f27d97f0cea33946760477074917ba92b35296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a007b0b4512c70fcbe7fd8ab2f1104a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e085045d7bfcaf15bb9b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9de9d4a9237869ad2d0d5328d49abde9ecdcb4d80a4c0339137c6a28bcadf39fa6997f9e5a24736f45423a48bbc385da87478bae3e4")),V[n("ea9cc989ab13d5ec976dc0478fcedc")](n("9dfd6b2244e6c03c88f44820")).insertAdjacentHTML(n("64d7c351074bcfde02d9"),n("3266c70652ae8eec087b95291bfc44f47061732134fa7bb12529783e3bab63c460513157668474882918395e1aca12c31507565815925c8d03154b0e4389596405a606b505734a6c0ee854a008662566a7a176b0b5526d29cbbe7eadab2d6004a0937197a6026b6afec22a88ac1f035dc3c0179095734d0b98c818cfcb4b13299fa01babc2261127dfb959ff8c6ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2cc41894d696c5851bc90a99de9fb9cb4d82f68671997693f3cce0946ccf2088e6a5e62f7ba17462b2faab2f2889383edef5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17675a58dbd4e2492680cff63bd2320777075932deb782c782f63ac7595260a7a0225ca758c341e310f3f8c4bd45041014623d21bba4f496a1f1b8b446e1ca607c05337792c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ad6c1341c3dd418796540458d9c8498eea1a4273c5b706e8c5220c3dd3a51bbe9322e53fb7fee8b4a432e47cf8e9a9ee8b0cf80ea097f790a214bd5a99ceaeabad1fc11fc7c0e1d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a24136f65362febebc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692dbfa4e529a181c8f93ad533087600583ddfb083c883f13bc65a5363a6a3235fa7eb02f2c213127ac64c46051315613c228a87f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0375ebe561a7b6742478f9e869aeca3a6213f0c227c0bb543d5deec232caed021658c7c4418796401c4b87d90dcecb120324c6b71dabd134553fd3ae0be88c7da56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b4fbed937d993fceecacf07160e12642b2faab7d6fbe307dfaa4d57b4db3563bcbb1c77f0eee1f3b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c22100541408d21ac909174d0e1dda034557b106f20275157a1fff48e41068333ceef226f0ea327a2bafa809ccab2c1304a0e527d5f7497d1adf8e6cecbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd8df9eae0ece54d0c3c7998704db5cd9bf89cfdc08c4f3df70d17182eed6ee8926d06c9ceaacb43021e12643d68ed22f288f383cd9a3d1734df1165382e8e83f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f684f787c9974882446272073d759cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb9d828f4f83a6211f1cf35d6e5026b6dbf996edaea5d4d42c7c710dcc8501b14c6d202d88b0d4264818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c226874685f7d9e7df398c6e92eeb3e22720803034a5bfed7836bf787aebb9cf7550f94977c5bdc53f19ee082deab3d2505c88590385d89c187dc90f1ef185ac4222906004f7ddfb786ece0e1bfd30fc6760477074917ba92b35296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1352e2c23a80a4173b45fbd82f88ad6b450390c410c78b440d4dded202dadd121c20d0a618e084755d7aff9113a2d36ab312e7e1c2a6b636e67cf99ea9ed8f7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf3d2272182716fe1edaa4f3efc5c2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfc43b52b25216776b464b83928296e0afa22d32517664825826c9d33057b1e7383499f0756164743c46ddc5a3a094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae9c81cdcc01a4271d1af15b6c5624b0d9ff94ebaca3dad22a7a7f0bca830fb74a6baeeb8a27aa253f7d0d1a3f354db4ce8adef9dbf018542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a74656d6869c180b8f514fcc83e40107d17704b08cbb173899394aa66eb6317e683424b264fc7869296e0b91759926462655258c71877f592c4513864e980f06495054c71adc584b5f160791192441c011b73074486814ae0fc85b3f0134b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d4064818051f7f023113f9ff839e88e0ea563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b2b167dd73d3b588ea966acf7edbbc84b43021b36174babbfc7e6fa57369ecfdcd7b4db1002495fd9a5f0eec6c3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f585f1e2e8e4ed45043471907845bdc593f094f5c8844735ff051f1026e566e09a650ec1c6a2c34b0a161a6c3506d2ac9be7edbfd6f314fb7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69514e808b4ceaeddbd03c10291d697b1c3459a0e9e89818e8b0bc4e89c64c7289ae6daec962e8e3fdbbc85df676bb03034a7a0f87e3efe2d26d2b9cf7b4ea1483395e89b3f19ec657fdbc9941170c10760c498d8441edf780b8fb1e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d4513001472093418f4f4869585ebe153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4502e1d70dc38305585ac6da1fce8b0c346480f103b1c46a0b2ccebf15a3d93cad3dabbde1f0f465ad6a8ffebc9ceb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f288f6e7efebe842013b74977d4ab8c296ff91f2cd894c30f40814152de86de5916805c4cda9ce40071d1767395ddfa796ece0b4dbf61bf6760417076962deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a6c5643878e4be7eaded733152e18667e1b3156a5eeed971defb5b1458ccd41798ca560a5cc69e5e8f8b0c3511dea20de08477192edba212e88d0ca56384a0f4b4a872bb1cefebcdf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28cdcce5a34477ad6323a48dbc3a5ae92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dab69a7676134362ab67baa6f6848787ced6795204e6700229371873d183101378145d45041014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b4adada02989c0f132dd3b007e085035d7b88bc08bf933ce525b6baeab2b57ae438a8bee0f8fc6db55297b9b1d69542aa2fa99bfd83fb5ce554d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc582614094544892da8949578d4e5d9ac3851771c63242b5d5ba5f3f882450a873fc2e3266302af23aeb6f68490f2bac75957751241f398875cc6928395f189c50900c56173043c769dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e8799fd84b09478780219096764d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5a998ff59bfb5d90128e92d786c344ec5cd8c9db899c52c3e48677dd6b91f495e59365d928ccbde5a24736f45423a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16760472636b666fc786b6f312fac63c46127315764906c9b771879192a864e96115e4814049244dc5849094e2bbc153231a606c3057759675fb879a84e4e6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59fefd3cf030acf6b6e5a53be92ab9febf99eb6da216a691b996b313ec00b48cefc0b20ec2148ed696c7c344ed378f83d8d8dc4fd2e09168d37799f2d6eddf38ff28ccc9b3e1637de12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f78bf680c8964b83476371063e749fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c49c858e4082a7221e1ff25e6f5327b5dafa97eeafa6d7d52f7d720ccf8402b04f6c232c8bb1d521491f64185e7125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d697b69507c917cfc99c9e821ec3f2d730f020c4b5cffd8826cf688afba9ff6560e97967f5adf52f29fe383dda9a842160f11750d4a8c8740eef683b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486dac5381031d0147569444981908094e2ada023305f746a805624c7d13e55bfe53632173e7ff61a7b4327b5ccbee38f2ab2d6052f9ca3a80a4173b41fbc53bc8bb1c231490f517c5c7594d0aef9e5cfc8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5ce354d0b5c09c90529b3ccfcbedd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082dec84d85416d60545db89ca591edf790b8dc2b64631d93653b38ca0542c8f6052a66eb46761367075922de90b7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327b5af9eb2df3ab2d6042fec227d6b3141c0ca8992bd9ec021354d6c70ddbc1444555cbd909d18b0d426481863ae085045d7bfcb80cacd06ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150b76567f9edab3a78a07c7decf5925606e61761d3aa84694ea85977c187c20f5f855743dbcd8b181edf787ad097a65e26d17706a991aa51259d205bbc25e20176361335a769b76f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6522c1b676d3e27e3e3cb9de69adcf3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab010e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d730f7619ff19dbbca68d06c8dfce5a24636f62771e3bab4797eb86967f1b7d23f4fbd4b7382ea9b3f1899082eeec5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395e1d9c50900c561645059b498a195e1f394bcd027606f119f613734c6014ec4fa0126e2274eeb676a7a3240d4ae2f22ae9ab2d6004a0e17197a66a375ce9ce799edd0a5277d1c305db83042d1c9afa498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4aa988dc9c805a82b1916fd57685a28bcddf398e7a8afdede26767b07c68f0bbb4667aae7862bae293371091705f82ea995e59bd4a3b9dd0941005c10716f39ad65a1edf7e0b8db6b242229a600582ddf97b6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1f3e4bcd76651bf511b6332208485fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c231490f500dcd0125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f514ad6b8cbfe5abeb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8542a1d696b3821ede5cd9be89cdaf5a83c2d731f2619ff19dbabf")),V[n("56966d8c28124f08328a43850d01")](n("26999fcd58169f585acb99af5530")).addEventListener(n("1c0e3286439a"),()=>{V[n("4eb87595170f710833896cab232278")](n("e61ac91084d6c198800a9df79b66c3")).style.display=n("4eb17f8f37"),V[n("c1433691374f949da55f2888224c")](n("56c22ada2d1f6e402d8a54850b1d4306")).style.display=n("0f227dedf02f")}),V[n("dbfda8ab2de932b78ff186a208ea")](n("6f8e028a9cd6818502dc0a")).addEventListener(n("2d7dc389d249"),()=>{V[n("718596d0b08a12c51c848fee84a71b")](n("257bc6b1c73746b9436b8296d84744")).style.display=n("669947970f"),V[n("f43443a28ab0692e90285dbb6fa3")](n("277d1ba9dc28dfb35c085ed0c707c0d244")).style.display=n("2a5980524dd4")}),$(n("6b321a2a9d0d820707501c08905bd4071e4208439d516219")).click(()=>{V[n("9006b797d189b30afd07aea9e5a4ba")](n("900cb38afac8bb02f61cf79df588a9")).style.display=n("e4574ad88bd2"),$(n("e5f810ec1bf798f999aa06ce1691ded29c8300")).css(n("edba06d3018e92dd"),n("3f1e2edca6"))}),V[n("16c0bddd5f47b9407bc194f35b7a80")](n("e5b508e810b38f")).addEventListener(n("a337c9ff4433"),()=>{A5[n("92c038cce6453748e8cf")][n("5e985298161670101e83")](O.Ad)});var m,x,S,w=V[n("df7784262678003b82769d18125509")](n("7e783463afe021e1f27e267ef9b63ef8e07b3553f7d1")),M=(w.value=L["1a"],w.addEventListener(n("fa68d46c90e8a5"),function(){L["1a"]=parseInt(this.value),Ee(),Fi.location.reload()}),(w=V[n("a17546a0607ac2b5cc745f9e5457cb")](n("2ec884b31f30913142ae96ae4966862251a270"))).value=L["1i"],w.nextElementSibling.value=w.value,w.addEventListener(n("d4467ec6b6ce7f"),function(){this.nextElementSibling.value=this.value,L["1i"]=parseFloat(this.value),Ee()}),w.addEventListener(n("e45c48c79dcd"),function(){this.nextElementSibling.value=this.value}),(w=V[n("091dee48c8126a2d74ece706eccf73")](n("0c2a3aad3d923717600c38806bc43702721731804d"))).value=L["1x"],w.nextElementSibling.value=w.value,w.addEventListener(n("1ecc88d04c5481"),function(){this.nextElementSibling.value=this.value,L["1x"]=parseFloat(this.value),Ee()}),w.addEventListener(n("4870e4eb39e9"),function(){this.nextElementSibling.value=this.value}),(w=V[n("a6500d4defd709d0cb510403cb8a10")](n("5e9854834f004101129e469e19564a12019b436808e6"))).value=L["1p"],w.nextElementSibling.value=w.value,w.addEventListener(n("f909134d13099a"),function(){this.nextElementSibling.value=this.value,L["1p"]=parseFloat(this.value),Ee()}),w.addEventListener(n("536d3b36a27c"),function(){this.nextElementSibling.value=this.value}),(w=V[n("883eafafc9b1ab32f50fa6a1edacb2")](n("c46272e5e5ea6f6fb87460f8a38c7b57b14865cea2cc"))).value=L["1q"],w.nextElementSibling.value=w.value,w.addEventListener(n("1a48b44c70c885"),function(){this.nextElementSibling.value=this.value,L["1q"]=parseFloat(this.value),Ee()}),w.addEventListener(n("21fbcd24d0e2"),function(){this.nextElementSibling.value=this.value}),V[n("a5f1422c6cf6ce31c8f05b2248ebd7")](n("8fb7e5703eb77072e3a1f76d68e1696bfebdc27d47b1")));M.value=L["1y"],M.addEventListener(n("ff596f02f640"),function(){var X;M.value!==""&&(M.validity.valid?(X=parseInt(M.value),isNaN(X)?(M.value=0,L["1y"]=0,Ee()):X<0||65535<X?M.value=L["1y"]:(L["1y"]=X,Ee())):M.value=L["1y"])}),(w=V[n("c313a0c202142cd7ae12b9fc36c935")](n("5b7b293cf2638426177d0b319435873308771e379545"))).value=L["1w"],w.nextElementSibling.value=w.value,w.addEventListener(n("cab8e4bca038f5"),function(){this.nextElementSibling.value=this.value,L["1w"]=parseFloat(this.value),Ee()}),w.addEventListener(n("10883c136111"),function(){this.nextElementSibling.value=this.value}),w=V[n("819566c0409ae2d5ec947ffe74b7eb")](n("2ec884b31f22842957a9"));for(m of Object.keys(Oa)){var B=V[n("77cb0b8f9ad898ab13d5ec976dc0")](n("b5c9471c50c5d5"));B[n("e92c0a70183b")]=m,B[n("5d3aba6895110c7a1133896c")]=m,w.appendChild(B)}w.value=L["1b"],w.addEventListener(n("b4669ee6d6ee9f"),function(){L["1b"]=this.value,Ee()}),m=V[n("d8ce7f5f99417bc285df56719d7c42")](n("bb1bc9dc121832c1ac01abd2"));for(x of Object.keys(Ct))w=V[n("b307c7c3561c5cefd709d0cb5104")](n("209e12074d1a08")),w[n("b312d4ca420d")]=x,w[n("a320c0ee531b46f4df39c3ea")]=x,m.appendChild(w),Ct[x]=new Audio(O.k+Ct[x]);L["1u"]&&((x=V[n("7022c0a615b1d302142cd7ae12b9")](n("536b2532be67b7")))[n("13b2746ae2ad")]=n("c45673e4bcf667"),x[n("c78cac423fbf2250bb65bf36")]=n("86543d6afef421"),m.appendChild(x),Ct[n("0131f647f1196a")]=new Audio(L["1u"])),m.value=L["1c"],m.addEventListener(n("8af824fce07835"),function(){var X=Ct[L["1c"]];X&&X.pause(),L["1c"]=this.value,(X=Ct[L["1c"]])&&X.play(),Ee()}),(x=V[n("8036a7a7c1b9a33aed37be99f594aa")](n("b2b400b79b2b1d28deae0eb9d13f"))).value=L["1d"],x.addEventListener(n("b1415b855b41d2"),function(){L["1d"]=parseInt(this.value),Ee()}),x=V[n("c47263e38df56f76a9737adda9e876")](n("9333e1f43a2b6cf8e823ef"));for(S of Object.keys(Xo))m=V[n("af83c34752905063db8dd44f5598")](n("1f3f51e6ca3bcb")),m[n("e8cf4b579958")]=S,m[n("5055f7db20e6f9492c4cf4df")]=S,x.appendChild(m);x.value=L["1o"],L["1o"].toString()!=n("e728")&&(V[n("8fb1e46761bd4663fbadfa7e74be")](n("ec5f41db89"))[n("f9190f55110b")][n("9c8eab1dd31e90")]=n("ff45731eab13")+Xo[L["1o"]]+n("be68a974f090a1e7f636fd2da5")),x.addEventListener(n("798993cd93891a"),function(){L["1o"]=this.value,this.value!=n("b435")?V[n("4ff124a7a1fd86a33bed3abeb4fe")](n("9fb2ce765a"))[n("387a0ef250e8")][n("6052d7c117dad4")]=n("371d4bc6934b")+Xo[this.value]+n("e2d48dd0d4348d4bda9ad98981"):V[n("87c9fc9f79c55e9be3a5f2767cb6")](n("d0c37d47ad"))[n("1edc94c84e56")][n("de0cd503919cd6")]="",Ee()}),V[n("c313a0c202142cd7ae12b9fc36c935")](n("c624e330a49de5b1ab")).addEventListener(n("8fa3f9637da370"),function(){var X,z=this.files[0];z&&((X=new FileReader).onload=Y=>{L["1e"]=Y.target.result,Ee(),location.reload()},X.readAsText(z))}),V[n("2d79ca94f44e56895048c3aac0635f")](n("9492b306ea2fb387f9")).addEventListener(n("c634e038a4bce9"),function(){var X,z=this.files[0];z&&((X=new FileReader).onload=Y=>{L["1j"]=Y.target.result,Ee(),location.reload()},X.readAsText(z))}),V[n("82f421e1c37b2d74eff538dff75634")](n("d605ff2fb387f9")).addEventListener(n("04362eb666be2f"),function(){var X,z=this.files[0];z&&((X=new FileReader).onload=Y=>{L["1t"]=Y.target.result,Ee(),location.reload()},X.readAsDataURL(z))}),V[n("075f6c0ece50e8136a2e65c0ea0df1")](n("d0d27d56ba4150ceb4cc")).addEventListener(n("65358f79873d0e"),function(){var X,z=this.files[0];z&&((X=new FileReader).onload=Y=>{L["1u"]=Y.target.result,Ee(),location.reload()},X.readAsDataURL(z))}),V[n("5ccafb5b255dc7de01dbd2751170ce")](n("caacf8afe332f111b18cf88aa4")).value=n("912721f7")+L["1g"].toString(16),V[n("b1455690704ad285dc444fae4467db")](n("042232a525b42b2b6f3222b062")).addEventListener(n("b1415b855b41d2"),function(){L["1g"]=parseInt(this.value.substring(1),16),O.Vh(),Ee()}),V[n("7026d7b731a9d32a1d27ce890584da")](n("51b5a7f6f8a83eeb32a9b4e0b2bc")).value=n("302440b0")+L["1v"].toString(16),V[n("6531826cac360e7108309b62882b17")](n("73530114da469009104f12029042")).addEventListener(n("73471d07994f9c"),function(){L["1v"]=parseInt(this.value.substring(1),16),O.Vh(),Ee()}),V[n("e294c181a31bcd148f95d8bf9736d4")](n("2ec884b31f31952b52a895ba5122923e")).checked=L["1h"],V[n("6a1c49092b93556c17ed40c70f4e5c")](n("be38f423efa1e5bba238e52aa1b2e2ae")).addEventListener(n("14063e86768e3f"),function(){L["1h"]=this.checked,Ee()}),V[n("1561f2bcdc667ea17860eb92d85b47")](n("d8de6e59f1407ccc89c3415f81")).checked=L["1z"],tt.visible=L["1z"],V[n("3f1724c68618a0db22163df8b235a9")](n("af97c5501e895745de9ada465e")).addEventListener(n("6052cad20ad2c3"),function(){L["1z"]=this.checked,tt.visible=L["1z"],Ee()}),V[n("33835052f284dc475e82496cc6b9a5")](n("af97c5501e934249c584dd595085535d")).checked=L["1aa"],V[n("d600fd1d9f87f980bb01d4339bbac0")](n("29eddf2e80e9580f43ced717decf591b")).addEventListener(n("996973ad7369fa"),function(){L["1aa"]=this.checked,Ee(),Fi.location.reload()}),V[n("4551a28c8c562e912850bb42a80b37")](n("4ea864937f177904269473803418")).checked=L["1ab"],V[n("5a0c79191b83459c071d50371fbe4c")](n("d8de6e59f15973ce90c2495a8a46")).addEventListener(n("5e8c48900c1441"),function(){L["1ab"]=this.checked,Ee(),Fi.location.reload()}),V[n("7fd7e48646d8609be2d6fdb872f569")](n("ab2bd9ec021043cdd505dbcf43115fc3d718d8dc")).checked=L["1k"],V[n("3cea1b7b057de7fe21fbf2553150ee")](n("d294e097fb17ea06bc8af284aa16c6188e87c187")).addEventListener(n("56847088340c79"),function(){L["1k"]=this.checked,Ee()}),V[n("043223a34db52f3669333a9d69a836")](n("b79fcd5816805259cd95b2")).checked=L["1n"],V[n("5ccafb5b255dc7de01dbd2751170ce")](n("1254a0573bcbb7de684eaf")).addEventListener(n("e4564ed686de4f"),function(){L["1n"]=this.checked,Ee(),Fi.location.reload()}),V[n("f58112dc3c869ec198800bf2f8bb67")](n("7fc7f5802edc769aeecbfd")).checked=L["1l"],Ja.visible=L["1l"],V[n("11e5f630d0ea72257ce4ef0ee4c77b")](n("0a6cb86f23f7a3cd7b50a0")).addEventListener(n("a1714bb54b71c2"),function(){L["1l"]=this.checked,Ja.visible=L["1l"],Ee()}),V[n("b1455690704ad285dc444fae4467db")](n("16d0acdb3758b44269ce82d84e5a905c43c4")).checked=L["1s"],V[n("ee18d5f5b76fd16893e9cccb8342d8")](n("b6300c3b97b814a2c92ee238aebaf0bca324")).addEventListener(n("df7389330d7300"),function(){L["1s"]=this.checked,Ee()}),V[n("cabce9a98b33f50cb78de0a7af2efc")](n("4066f6e169fdf5652d7ae5e928f1e76c24")).checked=L["1m"],ei.visible=L["1m"],V[n("06f0aded4f77a9706bf1a4e36b6ab0")](n("0f3765f0be2ce6f4722b76f8ff20f4fd6b")).addEventListener(n("e8da425a825a4b"),function(){L["1m"]=this.checked,ei.visible=L["1m"],Ee()}),V[n("b1455690704ad285dc444fae4467db")](n("585eeed971defb5b1458ccd41798cf53")).textContent=n("99435fe92e4fbae291")+O.Ad,V[n("f58112dc3c869ec198800bf2f8bb67")](n("46a07cab672869293ab67e86214e76103f8b7c")).textContent=n("77ea0c8397c8d8dd3e95b3c2")+n("d9786b3e6863ef23cc6257315766d62ecc692a285f7bdc61c25a")}var k,N=g[n("209f0b104f1b079a4d")];(k=Ml(g5(N)))&&(g[n("0c3327bc7b8f330e71")]=N.slice(0,-7),g[n("46a463b0241268")]=k[0],g[n("19e2fa38d4ea")]=k[1],g[n("26d291dc597288")]=k[2],g[n("d765b63f2f64142a")]=k[3],g[n("26d084d85948894e67db")]=k[4]),N=this.v?this.M[n("8ca8bd3ae228b6")]:v,this.v=!0,this.Yc=c+n("2707")+f,this.M=g,b.I.yb(b.I.Kg,c),N!==this.M[n("9dfb6c3553dbc7")]?this.xi():this.pg()},le.prototype.Al=function(){var c=this.v?this.M[n("d77daa2f294539")]:v;this.v=!1,this.Yc=_,this.M={},b.I.yb(b.I.Kg,""),c!==this.M[n("f8bc492e8e045a")]?this.xi():this.pg()},le.prototype.Gm=function(){b.I.ac(b.I.Kg);var c=this,f=1;(function g(){!le.xf.Rl()&&f++<5?I.ha(g,1e3):le.xf.km(function(){},function(m){c.Vk(T,m.Ai)})})()},le.prototype.xi=function(){for(var c=0;c<this.di.length;c++)this.di[c]();this.pg()},le.prototype.pg=function(){for(var c=0;c<this.gi.length;c++)this.gi[c]()},le.prototype.ul=function(){le.xf.qm()},le),b.Np=(zi.prototype.jd=function(){return this.ma},zi.prototype.sd=function(c){this.za=c,this.ma.visible=c},zi.prototype.na=function(){this.Fc=this.Ec[n("c1452a90315e")](),this.Gc=this.Ec[n("f58e12c11e828f")]();for(var c=this.Gc/30,f=0;f<this.Bd.length;f++)this.Bd[f].Hi(c)},zi.prototype.Fa=function(){if(this.za)for(var c=0;c<this.Bd.length;c++)this.Bd[c].Fa(this.la)},zi),b.Qg=(nt.prototype.ra=async function(c){var f=this;this.Ec=c,this.nd=c.get()[0],this.la=(c={[n("41d1a21ab3d734")]:f.nd,[n("108333007f0224886d873e2a701d368e")]:0,[n("3f0033d7a511b7d3291b2c")]:n(L["1a"]===1?"c78fac582c8c38":"0ee8b5c3754f")},await Lo(c)),this.za=!1,this.kb=new b.Ei(new Float32Array(3*A)),this.Gc=this.Fc=1,this.Sd=this.Qd=this.Od=this.Kd=this.gd=P.W,this.na(),E.B.Eg(function(){f.kb.eh()})},A=Math.min(100,b.Zg.Nn),P={W:n("9fe0cd6613"),Jc:n("e647c40ddb"),Kc:n("8304e90235")},nt.prototype.sd=function(c){this.za=c},nt.prototype.na=function(){var c=I.e();this.Fc=this.Ec[n("bb1bd4ca4b18")](),this.Gc=this.Ec[n("5cc5fb460759d6")](),this.la.resize(this.Fc,this.Gc,c),this.nd.width=c*this.Fc,this.nd.height=c*this.Gc,c=this.Gc/4,this.kb.Hi(c),c=I.Hd(2*Math.floor(this.Fc/c)-5,1,A),this.kb.Fi(c)},nt.prototype.Xa=function(){if(this.za){var c=I.Ob()/200,f=Math.sin(c);this.kb.ll(this.Hn(this.gd,f),this.Ln(this.gd,f)),this.kb.Rn(this.bg(this.Kd,f),this.bg(this.Od,f),this.bg(this.Qd,f),this.bg(this.Sd,f));for(var f=this.kb.wd,g=this.kb.X,m=this.kb.ed,x=this.Fc-.5*(this.Fc-.5*f*(g-1)),S=.5*this.Gc,w=0,M=0,B=-1;B<g;B++){var k=B,N=Math.cos(+k/12*3.141592653589793-c)*(1-Math.pow(16,-1*k/12));0<=B&&(m[3*B]=x-.5*f*k,m[3*B+1]=S+.5*f*N,m[3*B+2]=Math.atan2(M-N,k-w)),w=k,M=N}this.kb.Fa(),this.kb.ao(this.la)}},nt.prototype.Dc=function(c){this.kb.Dc(c)},nt.prototype.io=function(c){this.gd=c?P.Kc:P.Jc,this.Sd=this.Qd=this.Od=this.Kd=P.W},nt.prototype.ro=function(c){this.gd=P.W,this.Kd=c?P.Kc:P.Jc,this.Sd=this.Qd=this.Od=P.W},nt.prototype.vo=function(c){this.Kd=this.gd=P.W,this.Od=c?P.Kc:P.Jc,this.Sd=this.Qd=P.W},nt.prototype.yo=function(c){this.Od=this.Kd=this.gd=P.W,this.Qd=c?P.Kc:P.Jc,this.Sd=P.W},nt.prototype.Co=function(c){this.Qd=this.Od=this.Kd=this.gd=P.W,this.Sd=c?P.Kc:P.Jc},nt.prototype.Hn=function(c,f){switch(c){case P.Jc:return .9+.1*f;case P.Kc:return .4+.3*f}return 1},nt.prototype.Ln=function(c,f){switch(c){case P.Jc:return .6+.5*f;case P.Kc:return .3+.3*f}return 1},nt.prototype.bg=function(c,f){switch(c){case P.Jc:return .9+.1*f;case P.Kc:return .6+.4*f}return 1},nt),b.cl=(Vi.wp=function(c){return new Vi(c[n("6b6c1f378c45")],c[n("74a2c3220b3d")],c[n("504ffdcd36d0ef463a45ff")],c[n("b14c5c8a5753ce89db465eaf5c5bcc95")],n("9481b314fb1bb39be884b101"),c[n("d60efc")],c[n("4ce9f76f35")])},Vi.Gp=function(c){return new Vi(c[n("3233862c55a2")],c[n("0591f2ddfa8e")],c[n("536a3a28b57da02b396038")],c[n("fa65d3639cfab9f0607fa15667e2bbfc")],n("8b58e80d6c3278f2e72dfae8"),c[n("2f0955")],c[n("a2c71dc5c3")])},Vi),b.zp=(er.prototype.Xe=function(c,f,g,m){var x=this.Md.resources.uniforms.uniforms.uColorOverlay;x[0]=c,x[1]=f,x[2]=g,x[3]=m},er.prototype.Am=function(c){this.Md.resources.uTexture=c.source,this.Md.resources.uSampler=c.source.style},er.prototype.Fa=function(c,f,g,m){this.Ud.position.x=c,this.Ud.position.y=f,this.Ud.scale.x=g,this.Ud.scale.y=m;var x=this.Md.resources.uniforms.uniforms.uTextureScale;x[0]=.2520615384615385*g,x[1]=.4357063736263738*m,(g=this.Md.resources.uniforms.uniforms.uTextureOffset)[0]=.2520615384615385*c,g[1]=.4357063736263738*f},er),b.kc=(Wt.prototype.uc=function(c){this.L.texture=c.ig(),this.L.anchor.set(c.Tn,c.db),this.Ok=c.co,this.Qk=c.ko},Wt.prototype.Xe=function(c){this.L.tint=parseInt(c.substring(1),16)},Wt.prototype.Sb=function(c){this.L.width=c*this.Ok,this.L.height=c*this.Qk},Wt.prototype.tj=function(c){this.L.rotation=c},Wt.prototype.Gf=function(c,f){this.L.position.set(c,f)},Wt.prototype.Qa=function(c){this.L.visible=c},Wt.prototype.Bf=function(){return this.L.visible},Wt.prototype.Ra=function(c){this.L.alpha=c},Wt.prototype.zd=function(){I.Sa(this.L)},Wt),b.Uf=(Je.prototype.Te=function(){this.Ga!=null&&I.Sa(this.Ga.ma),this.ka!=null&&I.Sa(this.ka),this.Z!=null&&I.Sa(this.Z)},Je.prototype.si=function(){this.lg(.25),this.S.Ab="",this.md=!0,this.pa={},this.Qa(!1)},Je.prototype.Lj=function(c){this.S=c,this.ui(this.qb)},Je.prototype.Qa=function(c){var f=this.qb;this.qb=c,this.ui(f)},Je.prototype.lg=function(c){this.Qb=50*c;var f=c,g=(c>this.K.og&&(f=Math.atan((c-this.K.og)/this.K.Lh)*this.K.Lh+this.K.og),f=Math.sqrt(4*Math.pow(5*f,.707106781186548)+25),Math.min(200,Math.max(3,5*(f-5)+1)));if(c=this.$a,this.vb=.025*(5+.9*f),this.$a=Math.floor(g),this.Zh=g-this.$a,0<c&&c<this.$a)for(var f=this.Rb[2*c-2],g=this.Rb[2*c-1],m=this.Ya[2*c-2],x=this.Ya[2*c-1],S=this.ia[2*c-2],w=this.ia[2*c-1];c<this.$a;c++)this.Rb[2*c]=f,this.Rb[2*c+1]=g,this.Ya[2*c]=m,this.Ya[2*c+1]=x,this.ia[2*c]=S,this.ia[2*c+1]=w},Je.prototype.Lo=function(c,f){for(this.$a=f,f=0;f<this.$a;f++)this.Rb[2*f]=this.Ya[2*f]=this.ia[2*f]=c(),this.Rb[2*f+1]=this.Ya[2*f+1]=this.ia[2*f+1]=c()},Je.prototype.kk=function(c,f,g){for(this.rf=g,g=0;g<this.$a;g++)this.Rb[2*g]=this.Ya[2*g],this.Rb[2*g+1]=this.Ya[2*g+1];this.Gl(c-this.Ya[0],f-this.Ya[1],this.$a,this.Ya)},Je.prototype.Gl=function(c,f,g,m){var x=I.ah(c,f);if(!(x<=0)){var S=m[0];m[0]+=c,c=m[1],m[1]+=f;for(var w=1-2*(f=this.vb/(this.vb+x)),M=1,B=g-1;M<B;M++){var k=m[2*M];m[2*M]=m[2*M-2]*w+(k+S)*f,S=k,m[2*M+1]=m[2*M-1]*w+((k=m[2*M+1])+c)*f,c=k}f=this.Zh*this.vb/(this.Zh*this.vb+x),m[2*g-2]=m[2*g-4]*(w=1-2*f)+(m[2*g-2]+S)*f,m[2*g-1]=m[2*g-3]*w+(m[2*g-1]+c)*f}},Je.prototype.Le=function(){return{mb:this.ia[0],nb:this.ia[1]}},Je.prototype.th=function(c,f){for(var g=1e6,m=c,x=f,S=0;S<this.$a;S++){var w=this.ia[2*S],M=this.ia[2*S+1],B=I.ah(c-w,f-M);B<g&&(g=B,m=w,x=M)}return{mb:m,nb:x,kg:g}},Je.prototype.Sj=function(c){this.dl=c},Je.prototype.Jf=function(c,f){this.Va=I.Q(this.Va,this.md?this.rf?.9+.1*Math.cos(c/400*3.141592653589793):1:0,f,.00125),this.Fg=I.Q(this.Fg,!this.md||this.rf?1:0,f,.0025),this.Ga!=null&&(this.Ga.ma.alpha=this.Va),this.ka!=null&&(this.ka.alpha=this.Va)},Je.prototype.Of=function(c,f,g,m){if(this.qb&&this.md)for(var x=Math.pow(.11112,f/95),S=0;S<this.$a;S++){var w=I.Mf(this.Rb[2*S+1],this.Ya[2*S+1],g);this.ia[2*S]=I.Mf(I.Mf(this.Rb[2*S],this.Ya[2*S],g),this.ia[2*S],x),this.ia[2*S+1]=I.Mf(w,this.ia[2*S+1],x)}if(this.Ga!=null&&this.qb&&this.Ga.Jl(this,c,f,m),this.ka!=null&&(this.ka.Me.x=this.ia[0],this.ka.Me.y=this.ia[1]-3*this.vb),this.Z!=null&&L["1s"]){for(var M in this.Z.x=this.ka.position.x,this.Z.y=this.ka.position.y+1,this.Z.jc)this.pa[M]!=null&&this.pa[M].za||(this.Z.removeChild(this.Z.jc[M]),delete this.Z.jc[M]);for(var B in c=0,this.pa)(f=this.pa[B])&&f.za&&(g=this.Z.jc[B],g||(f=E.B.V().bh(f.ua).Na,this.Z.jc[B]=new Pe(f.ig()),g=this.Z.jc[B],g.width=30,g.height=30,this.Z.addChild(g)),g.x=c,c+=35);this.Z[n("7b5c14189044")].x=.5*this.Z.width,this.Z[n("b8f9937dd379")].y=this.Z.height}},Je.prototype.ui=function(c){this.qb?c||this.Ml():(this.Ga!=null&&I.Sa(this.Ga.ma),this.ka!=null&&I.Sa(this.ka),this.Z!=null&&I.Sa(this.Z))},Je.prototype.Ml=function(){this.Ga==null?this.Ga=new b.Zg:I.Sa(this.Ga.ma),this.Ga.Yd(E.l.K.qd,E.B.V().Ef(this.S.qi),E.B.V().De(this.S.sa),E.B.V().lj(this.S.lc),E.B.V().nj(this.S.Tb),E.B.V().sj(this.S.oc),E.B.V().Yg(this.S.ob),"#ffffff"),this.ka==null?(this.ka=new Ne({text:"",style:{fontFamily:"PTSans"}}),this.ka.Me={x:0,y:0},this.ka.anchor.set(.5,0)):I.Sa(this.ka),this.Z==null?(this.Z=new he,this.Z.jc={}):I.Sa(this.Z),this.ka.style.fontSize=L["1w"],E.B.V().De(this.S.sa),this.ka.style.fill=L["1v"],this.ka.text=this.S.Ab,this.dl.Jn(this.S.T,this.Ga,this.ka,this.Z)},Je.Sf=function(){this.T=0,this.qi=b.ce.ef,this.ob=this.oc=this.Tb=this.lc=this.sa=0,this.Ab=""},Je),b.aj=(Ut.prototype.Zl=function(c){return new Ut(c,this.Gb,this.Jb,this.ub,this.Lb)},Ut.prototype.fm=function(c){return new Ut(this.Ia,c,this.Jb,this.ub,this.Lb)},Ut.prototype.lm=function(c){return new Ut(this.Ia,this.Gb,c,this.ub,this.Lb)},Ut.prototype.rm=function(c){return new Ut(this.Ia,this.Gb,this.Jb,c,this.Lb)},Ut.prototype.vm=function(c){return new Ut(this.Ia,this.Gb,this.Jb,this.ub,c)},Ut),b.Ei=(C=new b.aj(0,0,0,0,0),Lt.prototype.jd=function(){return this.G.ma},Lt.prototype.Fi=function(c){if(this.X=c,this.G.X!==c){for(var f=c;f<this.G.o.length;f++)this.G.o[f].ya();for(;this.G.X>c;)--this.G.X,(f=this.G.o[this.G.X]).id.zd(),f.O.zd();for(;this.G.X<c;)f=this.G.o[this.G.X],this.G.X+=1,this.G.ma[n("26d68cdd695385514a")](f.O.L),this.G.ma[n("1d6ffbb4e27a4ab841")](f.id.L),f.O.Ra(this.Pg),f.id.Ra(this.Rg);for(c=0;c<this.G.P.rd.length;c++)this.G.P.rd[c].Ra(this.Ug);for(c=0;c<this.G.P.td.length;c++)this.G.P.td[c].Ra(this.Wg);for(c=0;c<this.G.P.Sc.length;c++)this.G.P.Sc[c].Ra(this.Xg);for(c=0;c<this.G.P.ud.length;c++)this.G.P.ud[c].Ra(this.$g)}},Lt.prototype.Dc=function(c){this.dd=c,this.Mg=n("0157b107e310615e6f1c"),this.eh()},Lt.prototype.ym=function(c){this.dd=C,this.Mg=c,this.eh()},Lt.prototype.eh=function(){this.G.Yd(b.Nc.bk,null,E.B.V().De(this.dd.Ia),E.B.V().lj(this.dd.Gb),E.B.V().nj(this.dd.Jb),E.B.V().sj(this.dd.Lb),E.B.V().Yg(this.dd.ub),this.Mg)},Lt.prototype.Hi=function(c){this.wd=c},Lt.prototype.ll=function(c,f){for(this.Pg=c,this.Rg=f,c=0;c<this.X;c++)(f=this.G.o[c]).O.Ra(this.Pg),f.id.Ra(this.Rg)},Lt.prototype.Rn=function(c,f,g,m){for(this.Ug=c,this.Wg=f,this.Xg=g,this.$g=m,c=0;c<this.G.P.rd.length;c++)this.G.P.rd[c].Ra(this.Ug);for(c=0;c<this.G.P.td.length;c++)this.G.P.td[c].Ra(this.Wg);for(c=0;c<this.G.P.Sc.length;c++)this.G.P.Sc[c].Ra(this.Xg);for(c=0;c<this.G.P.ud.length;c++)this.G.P.ud[c].Ra(this.$g)},Lt.prototype.Fa=function(){var c,f,g,m=2*this.wd,x=3*this.wd;for(0<this.X&&(c=this.ed[0],f=this.ed[1],g=this.ed[2],this.G.o[0].ja(c,f,m,x,g),this.G.P.ja(c,f,m,g)),c=1;c<this.X;c++)this.G.o[c].ja(this.ed[3*c],this.ed[3*c+1],m,x,this.ed[3*c+2])},Lt.prototype.ao=function(c){c.render({container:this.G.ma})},Lt),b.i=(He.Zb=$(n("cc383cacb2c07148b35779d2b6cd3748bd4368ce93")),He.bc=$(n("86327a2af9ef3ef8fa7c380cf0cc2c")),He.cc=$(n("ddeb6da312bd80fd84ba4afa1cae9ff383ad")),He.ec=$(n("fc680cfc6db0303871256ba07ab83a")),He.hc=$(n("82b676a6e176257ca7ed25f8f9")),He.Hb=$(n("6eda023200e647f01a734b240ce259fa")),He.mc=$(n("f0e4007099245fa9d5a45f25896048a665a6")),He.Ub=$(n("fdcb4d83f19d73c175dbf1d1ec8d")),He.pc=$(n("a6125a0aded40dceda5a026cc4aa11b2")),He.qc=$(n("5fb553e18ffb84b20ef60ef79df588a9")),He.rc=$(n("44b0b4243a7cf9ef3ef4ed6b3545bfd53dc0e1")),He.sc=$(n("1e8ad2824741965a549a8fd85e5e9b5c579293ae5c2d912642ae97a7173d952849")),He.tc=$(n("e6529a4a8f89de929c52d7e09f66996699e9d6ec997fd56290a2b6f86764")),He.prototype.C=function(){},He.prototype.fb=function(){},He.prototype.da=function(){},He.prototype.ee=function(){},He.prototype.na=function(){},He.prototype.Xa=function(){},He),b.Ql=(F=$(n("633157658171873b07310e3f9f54980d1d")),D=$(n("dba9effd39f90fb38fb986b909ec00b49ef9")),H=$(n("cafebeeead30fe06a082e096fb05ff")),U=$(n("253395ebdc7447ea5a749b83cb465fdc01498e8a")),j=$(n("f6a28aba9c62d26c92a2adf47160a57263")),se=$(n("fb89cfdd19d9ef936f997695e8caec")),ce=$(n("778d4bd99dc5938f139df19e62d760")),Z=$(n("d1676137332fb969b56739633c3cbb")),q=$(n("a054d0c0c3948b12851a8b95da9c9d")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld);var c=this,f=q.get()[0];F.text(I.N(n("552fb96cbc32756b3c23ba3e933710610922c96c802e0779"))),D.text(I.N(n("fc2450ab65a96c34653823f97abc392e602960bc7f8f260a7a1033"))),D.click(function(){E.h.J(E.h.oa)}),je.vj=()=>{O.ze=!O.ze},je.Xh=()=>{var m,x=E.l.U,S=O.bd;S.length&&x.Ga&&(m=S.indexOf(x.S.sa),x.Ga.Dk(m===-1?S[0]:S[(m+1)%S.length]))},je.vn=()=>{var m,x=E.l.U,S=O.Nh;S.length&&(m=S.indexOf(x.S.ob),x.Ga.xl(m===-1?S[0]:S[(m+1)%S.length]))},je.ad=()=>{O.He&&Di&&Di(O.He,O.fg)},je.yn=()=>{ua(1)},je.Ci=()=>{var m,x=Object.keys(Oa);x.length&&(m=x.indexOf(L["1b"]),L["1b"]=m===-1?x[0]:x[(m+1)%x.length],O.Dh())};let g=[ba,ti];$(n("18812e0670")).keydown(function(m){m.keyCode===32&&(c.Mb=!0)}).keyup(function(m){var x;m.target.type!==n("5532b270ad")&&((x=m.code)===n("a31fc0ef76")?je.vj():x===n("b32fd0df71")?je.Xh():x===n("df5b842b24")?je.vn():x===n("142e339e4a")?je.ad():x===n("506af7da0e")?je.yn():x===n("154df2b1da")?je.Ci():x===n("bb27d8d775")?O.Qe=!O.Qe:x===n("b44e93fef6")?(E.h.D.H.Aa.Ic=!E.h.D.H.Aa.Ic,E.h.D.H.ib.visible=E.h.D.H.Aa.Ic,E.h.D.H.Aa.Fa(E.h.D.H.Aa.jc)):x===n("c0df777eb47462d6acfd")?ua(O.dc+L["1i"]):x===n("ec735bd280a05610812742b599aa4e")&&ua(O.dc-L["1i"]),m.keyCode===32)&&(c.Mb=!1)}),f.addEventListener(n("0105eb51e01a"),m=>{O.Jh&&(m.deltaY<0?ua(O.dc+L["1i"]):ua(O.dc-L["1i"]))},{capture:!0,passive:!0}),f.addEventListener(n("95f2783d7ae2f623ebeb"),function(m){var x,S;m&&L["1f"]===0&&!O.ze&&(m=m.touches[0],x=.5*f.offsetWidth,S=.5*f.offsetHeight,n("0107ed50e0106e566c1e")!=typeof m.clientX?c.wc=Math.atan2(m.clientY-S,m.clientX-x):c.wc=Math.atan2(m.pageY-S,m.pageX-x),m=Math.min(Math.sqrt((x-m.pageX)*(x-m.pageX)+(S-m.pageY)*(S-m.pageY)),110),tt.position.x=x+m*Math.cos(c.wc),tt.position.y=S+m*Math.sin(c.wc))},{capture:!0,passive:!0}),f.addEventListener(n("272c46efc834deea4e1245"),function(m){m.preventDefault(),L["1f"]!==2&&L["1f"]!==3&&m&&(c.Mb=2<=m.touches.length)},!0),f.addEventListener(n("fefbafe4617ba17b62"),function(m){L["1f"]!==2&&L["1f"]!==3&&m&&(c.Mb=2<=m.touches.length)},{capture:!0,passive:!0}),f.addEventListener(n("e93704691e3b824f8707"),function(m){!m||O.ze||m.shiftKey||(c.wc=Math.atan2(m.clientY-.5*f.offsetHeight,m.clientX-.5*f.offsetWidth))},!0),f.addEventListener(n("1f3d4ee7d031c1f95036"),function(){c.Mb=!0},!0),f.addEventListener(n("ae521f34c1a601b5"),function(){c.Mb=!1},!0),f.addEventListener(n("7e7f2f78ece721e7eb783e7c"),function(m){var x,S;Qa&&m.pointerId===Bl?(Qa.ph=!0,Qa.parent[n("3f042efeac17a4da")]({x:m.clientX,y:m.clientY},null,Qa.position)):qa.any&&(Ot&&m.pointerId===Ho&&(x=Ot.height/2,S=Math.max(x,Math.min(Ot.parent[n("77dc16a694cf9c82")]({x:m.clientX,y:m.clientY}).y,Ot.parent.height-x)),Ot.parent.mj((Ot.parent.height-Ot.height-(S-x))/(Ot.parent.height-Ot.height),1)),J.hg||m.pointerId!==J.Za||J.Oo(m))},{capture:!0,passive:!0}),f.addEventListener(n("41c2ac1dabc2220a3cca"),function(m){Qa=null,qa.any&&(Ot=null,Ho=-1,tt.Za===m.pointerId&&(tt.Za=-1,tt.alpha=.25),J.hg||m.pointerId!==J.Za||(J.visible=J.$h,J.No(),J.Za=-1))},{capture:!0,passive:!0}),qa.any&&(O.Qh=c,f.addEventListener(n("fbdc928711c4e48067db7298"),function(m){if(tt.Za===-1&&(tt.Za=m.pointerId,tt.alpha=1),!J.hg){for(var x of g)if(m.clientX>=x.x&&m.clientX<=x.x+x.width&&m.clientY>=x.y&&m.clientY<=x.y+x.height)return;J.ug||J.Za!==-1||(J.Za=m.pointerId,J.x=m.clientX,J.y=m.clientY,J.visible=!0,J.zk())}},{capture:!0,passive:!0}))})).prototype.C=function(){},Q.prototype.fb=function(){R.g(b.i.Zb,50),R.g(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.A(b.i.hc,500),this.Ka===re.af?R.g(b.i.Hb,1):R.A(b.i.Hb,500),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.af=function(){return this.Ka=re.af,this},Q.prototype.Hh=function(){return R.g(H,1),I.ha(function(){R.A(H,500)},3e3),R.g(U,1),I.ha(function(){R.A(U,500)},500),this.Ka=re.Hh,this},Q.prototype.da=function(){this.Mb=!1,this.H.na()},Q.prototype.na=function(){this.H.na()},Q.prototype.Xa=function(c,f){this.H.Xa(c,f)},Q.prototype.Jo=function(c,f,g){var m;1<=f&&f<=10?(f=I.N(n("3d47d194a44a6d93245ba2d6bb5f3889214ae170bd2330617b2f")+f),m=I.N(n("439d2b52a280e75d2a912810bd65a2373f707b36bb69ba2f12621f21be6285")),I.N(n("f42c58a39db1142c9d205be173be213a653968a460b8383e5e383daa7c957c0e711625a077863e")).replace(n("c11774b67513f0bc"),g).replace(n("3d0b88b2f01774b0"),c).replace(n("67bd5e98d9b9da9a"),f)):(f="",m=I.N(n("4d57a164b43a7d63342bb226ab2f2879313af164932b2b7d11")),I.N(n("46be66bd2f23223a2fb275cf210c770c378b369a320a6e080c8a53840e070a1803845bb7050941")).replace(n("9361a2c4276d2ece"),g).replace(n("f14744664443c06c"),c)),j.html(I.N(n("ac94801bd5f9dc64d56893a9caec897ed079d0f6afe470"))),se.html(c),ce.html(f),Z.html(m)},Q.prototype.ra=async function(){this.H=new b.Vo,await this.H.ra(q),this.Ka=re.af,this.wc=0,this.Mb=!1},re={af:0,Hh:1},Q),b.Vn=(te=$(n("89df398f6191eea4f86c74e96574f8afeb6f68bf306df0bed5")),Oe=$(n("6eda02321eec55e11f695f240af953ea0c6a3362aff125e7")),Tt=$(n("5eca12c20e1c45110f994fd41a09431a1c9a43725ff751fd02")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld),this.Rh=-1,this.jf=""})).prototype.C=function(){},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.A(b.i.qc,500),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q.prototype.ee=function(){},Q.prototype.bp=function(){this.nf("",0),R.A(te,100)},Q.prototype.Rk=function(){R.g(te,100)},Q.prototype.nf=function(c,f){this.jf!==c&&(this.jf=c),c=I.Hd(Math.floor(100*f),0,100),this.Rh!==c&&(Oe.css(n("a80e839fd895"),c+n("9b69afbb")),Tt.html(c+n("10c46053315763")))},Q),b.Yl=(ne=$(n("ee5a82b29f6e99699fe9dda48e64cc")),$(n("4d1bfd33bc2f7e683c28b225ba2f3578383c")),$(n("382c48b851e05363297fe7be26faf2632774")),de=$(n("fc680cfc6dbc6f316b2132b865f4282e782921b163")),Ui=$(n("f1474117180bda459c040e011e019144")),Se=$(n("f46004f495a41727932c5aa66eb6")),It=$(n("21b79167c8fb0a3446fbcf35c3f9021043cdd416d0d544455bcbc9")),pa=$(n("adbb1d535ccf9e08dac7530157cd961ccfc1580224c1b059b1d33f0c")),$(n("34a04434556457ee4ae8107b6d65e7eb30")),ea=$(n("a054d0c0c998cb04c31084d6cf9c8009")),ga=$(n("a2965686cb5a454ac1d20290de4d1537")),Li=$(n("fc680cfc6dbc6f206f3c28fa66bc322f")),Vt=$(n("4cb8bc2c3d4cbfd03fccf80a375fffd9")),ma=$(n("a7fd9b2946b1006dc489df0f5c9250549a8acc5e4f835303d399b246")),_a=$(n("c7ddfb092691604eae72b02f20293b2fb463b72b3669")),Ga=$(n("633157658a75c42a0a6e0c339c0d96031e41580b984c9c")),ya=$(n("d1676137382bfa69ba3e32633363af7c802b")),xa=$(n("0ddbbdf3fc6f3ea57672fea7f7277cb9787deb")),Ba=$(n("36e2cafa5726d12c5dbb69be2c7e683a21be66")),Gt=$(n("b34187955a0514dad70dc4cb4d5d28dca51b")),Bt=$(n("a6125a0ac7d641ceda500224")),Ft=$(n("9361a7b57a2534e6fe2df9eb6d23")),Dt=$(n("6b395f6d824ddc111650010f994f8a")),Ni=$(n("5480a4143544b7c833c4f05c4d53cdcb")),ai=$(n("d4002494b5c4375bb04c67ca929c4345854147c5")),ii=$(n("66d21aca0716010d029e496400ae41f61375566817ee")),Vo=$(n("06b2faaa6776e17e61f6bed23f55b549")),Wo=$(n("5c88ac1c0d5c8fc308d4df521a14cfc31c90cc5e02")),Yo=$(n("08fc7868613063af7c802b066648339f68c42c0a70")),$o=$(n("e094100089580bc784d8535e9e1042da86a45e")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ff)})).prototype.ra=async function(){this.Rh=-1,this.jf="",this.je=new b.Qg,await this.je.ra(ea),Ga.click(function(){}),ea.click(function(){E.m.v&&E.h.J(E.h.Pf)}),ga.click(function(){E.u.ok()}),Li.click(function(){E.u.Io()}),_a.keypress(function(f){f.keyCode===13&&E.ei()}),ya.click(function(){E.ei()}),xa.click(function(){E.ei()}),Ba.click(function(){E.h.J(E.h.pj)}),Dt.click(function(){E.h.J(E.h.yf)}),Gt.click(function(){E.m.v&&E.h.J(E.h.ij)}),Ft.click(function(){E.m.v&&E.h.J(E.h.cj)}),Bt.click(function(){E.m.v&&E.h.J(E.h.zj)}),Ni.click(function(){E.m.v&&E.h.J(E.h.zf)}),this.Hp();var c=b.I.ac(b.I.bj);c!==n("07795b3fc57d")&&c!==n("6d0aaa61bc50")&&(c=n("b5e7652d77eb")),Ga.val(c)},Q.prototype.C=function(){var c=this;E.m.zh(function(){E.m.v?(E.u.ca(E.m.xn(),b.s.Y),E.u.ca(E.m.Bn(),b.s.va),E.u.ca(E.m.kl(),b.s.Ca),E.u.ca(E.m.Gn(),b.s.Ea),E.u.ca(E.m.Kn(),b.s.Da)):(E.u.ca(E.vl(),b.s.Y),E.u.ca(0,b.s.va),E.u.ca(0,b.s.Ca),E.u.ca(0,b.s.Ea),E.u.ca(0,b.s.Da))}),E.m.zh(function(){ya.toggle(E.m.v),Ba.toggle(!E.m.v),xa.toggle(!E.m.v),Ft.toggle(E.m.v),Bt.toggle(E.m.v),Ni.toggle(E.m.v),Gt.toggle(!0),Dt.toggle(!0),E.m.v?(Vt.hide(),ii.html(E.m.jj()),ai.attr(n("19f9e92f"),E.m.qj()),Vo.html(E.m.Nd()),Wo.width(100*E.m.Rf()/E.m.Tf()+n("36e2cafc")),Yo.html(E.m.Rf()+n("9dab2d6004a0e57197a6")+E.m.Tf()),$o.html(E.m.Qf()),_a.val(E.m.Id())):(Vt.toggle(!E.Bg()),ii.html(ii.data(n("edb91ac50296"))),ai.attr(n("0260b676"),Ol),Vo.html(n("8789b9")),Wo.width(n("9a9b")),Yo.html(""),$o.html(1),_a.val(b.I.ac(b.I.ej)))}),E.u.yh(function(){c.je.Dc(E.u.xh())})},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.A(b.i.cc,500),R.A(b.i.ec,500),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.A(b.i.mc,500),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.vi=function(){R.A(ne,500),R.A(de,500),R.A(Ui,500),R.g(Se,100)},Q.prototype.Hl=function(){R.g(ne,100),R.g(de,100),R.g(Ui,100),R.A(Se,500)},Q.prototype.nf=function(c,f){this.jf!==c&&(this.jf=c),c=I.Hd(Math.floor(100*f),0,100),this.Rh!==c&&(It.css(n("3b9b544acb98"),c+n("b583055d")),pa.html(c+n("a85cd8cb89cfdb")))},Q.prototype.da=function(){this.je.sd(!0)},Q.prototype.ee=function(){this.je.sd(!1)},Q.prototype.na=function(){this.je.na()},Q.prototype.Xa=function(){this.je.Xa()},Q.prototype.Id=function(){return _a.val()},Q.prototype.Bi=function(){return Ga.val()},Q.prototype.Hp=function(){var c,f;E.Bg()||(Vt.show(),c=I.N(n("cab2e2b9ab27be06b38ef1cbbb06f107f486f983ab41d51f8e9cc79eb51cc11799d5df958f0dd5")),f=encodeURIComponent(I.N(n("7028dca711bd98201924dfe511acd721ae3ca7bdf1fbb339e436a9b0dfb6a731e34fb18cf9809709fc39b68ae5"))),ma.append($('<a class="mm-skin-over-button" id="mm-skin-over-fb" target="_blank" href="https://www.facebook.com/dialog/share?app_id=861926850619051&display=popup&href=https%3A%2F%2Fwormate.io&redirect_uri=https%3A%2F%2Fwormate.io&hashtag=%23wormateio&quote='+f+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0yNDQuMyA0NTZWMjc5LjdoLTU5LjN2LTcxLjloNTkuM3YtNjAuNGMwLTQzLjkgMzUuNi03OS41IDc5LjUtNzkuNWg2MnY2NC42aC00NC40Yy0xMy45IDAtMjUuMyAxMS4zLTI1LjMgMjUuM3Y1MGg2OC41bC05LjUgNzEuOWgtNTkuMVY0NTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"/>'+n("095fb87ffe0e6e2e34b1d6")+c+n("b7cd8a691ede7b5dcf91af1770b1600584ddfb7c2ad97e7b")).click(function(){E.Sl(),I.ha(function(){Vt.hide()},3e3)})))},Q),b.xo=((Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld)})).prototype.C=function(){},Q.prototype.fb=function(){R.g(b.i.Zb,50),R.g(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q),b.Fn=((Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld)})).prototype.C=function(){},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.A(b.i.rc,500),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.Pn=(Fl=$(n("8cf8fc6ce40eb390e080a44aeb1dbb88f7")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld),this.ve=[],this.xe=null})).prototype.C=function(){},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.g(b.i.cc,50),R.A(b.i.ec,500),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.A(b.i.pc,500),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){this.Mi()},Q.prototype.lp=function(){return this.xe!=null||0<this.ve.length},Q.prototype.Hg=function(c){this.ve.unshift(c),I.ha(function(){E.h.Uh()},0)},Q.prototype.yk=function(c){this.ve.push(c),I.ha(function(){E.h.Uh()},0)},Q.prototype.Mi=function(){var c,f,g=this;this.xe==null&&(this.ve.length===0?E.h.ge():(c=this.ve.shift(),f=(this.xe=c).jd(),R.A(f,300),Fl.append(f),c.Ae=function(){f.fadeOut(300),I.ha(function(){f.remove()},300),g.xe===c&&(g.xe=null),g.Mi()},c.da()))},Q),b.eb={ld:0,ff:1},b.j=(Dl=$(n("ee5a82b2826cc47086aad5ec947e91619feda5fd")),Ko=$(n("5004a09024cae6522804f7ce32d8b34c0f58ccc049d7c94f")),qo=$(n("ff153341f35bf5037715641fe549a01d60297ff1be32f4ea")),$(n("0ebae292624ca450668ab5cc745ef14f7fcc8b")).click(function(){E.h.ge()}),Ko.click(function(){E.m.v&&E.h.J(E.h.zf)}),(Xe=I.fa(b.i,function(c,f){b.i.call(this,b.eb.ff),this.Ab=c,this.Cm=f,this.Df=[]})).prototype.C=function(){Xe.parent.prototype.C.call(this),Xe.Mm||(Xe.Mm=!0,E.m.zh(function(){E.m.v?qo.html(E.m.Nd()):qo.html(n("61e2"))})),R.g(b.j.Sg,100)},Xe.wb=$(n("66d21aca091445131dd2466817f4")),Xe.xb=$(n("b10701d75943d68cdc5848c14b47da87")),Xe.zb=$(n("dba9effd2fe20eb48af880fb11f10cad")),Xe.Bb=$(n("0f6523b1ff2bf2ef79656fe3fe3b")),Xe.Cb=$(n("4d1bfd33a22727703c28b07bf43c32692a")),Xe.Db=$(n("d0842010a74e7fc9ab846c42b95a")),Xe.Eb=$(n("d16761372632b87abc672d653839")),Xe.Fb=$(n("8553350b7e1fea4ea008662566")),Xe.Ib=$(n("d3a1e7f520e12da2bffebcb972f30ebc90f18ba24aee00bf9c")),Xe.Kb=$(n("5b296f7dbb758d3717714837847b862f05684028864586")),Xe.Sg=$(n("9cc8ec5cd01d8792d790cb00c9109ed6da948b08")),Xe.prototype.fb=function(){R.A(b.i.Zb,1),R.A(b.i.bc,500),R.A(b.i.cc,200),R.A(b.i.ec,200),R.g(b.i.hc,200),R.g(b.i.Hb,200),R.g(b.i.mc,200),R.A(b.i.Ub,200),R.g(b.i.pc,200),R.g(b.i.qc,200),R.g(b.i.rc,200),R.g(b.i.sc,200),R.g(b.i.tc,200),Dl.html(this.Ab),Ko.toggle(this.Cm),this.hb()},Xe.prototype.hb=function(){},Xe.prototype.Pe=function(c){var f=this,g=2147483647&I.bo();return this.Df.push(g),R.A(b.j.Sg,100),I.ha(function(){f.Ij(g)},c),new E5(this,g)},Xe.prototype.Ij=function(c){(c=this.Df.indexOf(c))<0||(this.Df.splice(c,1),this.Df.length===0&&R.g(b.j.Sg,100))},Xe),Cf.prototype.dp=function(){this.Sn.Ij(this.Xn)};var Ll,Nl,jl,Xl,Hl,zl,Wi,nc,oc,cc,dc,hc,lc,fc,oi,Vl,Yi,Wl,Yl,$l,Kl,ql,Zl,Ql,Jl,ef,tf,af,sf,$i,tr,ar,ir,rf,nf,of,cf,sr,ci,df,hf,uc,rr,bc,Ki,lf,nr,ff,uf,it,bf,pf,gf,mf,qi,_f,yf,or,pc,Zi,xf,gc,mc,_c,yc,Qi,vf,Tf,ot,Ji,Sf,wf,es,lt,cr,Af,Da,Ef,Pf,Q,xc,Ta,Rf,Mf,E5=Cf;function Cf(c,f){this.Sn=c,this.Xn=f}function ts(c,f){this.we=c,this.$c=0,this.Vb=f}function ia(c,f,g){this.we=c,this.ua=f,this.od=g,this.vf={},this.cb=[[]],this.Vf=this.Td=-10}function vc(){this.Ae=function(){}}function Of(){var S=xc[n("41c5aa10b1de")](),c=xc[n("0d96eaa9f66a67")](),f=Ta[n("8cb2bb2bf513858af091be")](),g=Ta[n("916d66b07074dfadf06d73b8")](),m=Rf[n("bf9fb44626860d53ae9fa14e")](),x=Mf[n("fbc3889a1ac2c9976ad36d82")](),S=Math.min(1,Math.min((c-x-m)/g,S/f));S=n("9330e7e7793b75ebef29b5a32a6004a0967197d5026a19b79e6c88ac1a4914908317d6c75b0d11").concat(S,n("fc64")),Ta[n("73470615")](n("11afe421f7ed7e3c34fee92df3fd793f53ff"),S),Ta[n("54c6e554")](n("e5fb0af713f79fee8cb01cc61e909e"),S),Ta[n("d3e7a6b5")](n("9e020d428fc716d4c8440e56d8d6"),S),Ta[n("4072f1e0")](n("d5eb38a52db8bae2aea830e20c"),S),Ta[n("819170c7")](n("8340f717694b6f15f951"),S),E.na(),b.nc[n("6ccecd4d1f2dde971b")](0,1)}b.Bm=(Ll=$(n("f8ec08788f3951bd65fc20267d7825b861b739043d6f7bef20d1")),Nl=$(n("f381c7d504dc16989e819f9b069de29d6ada76a9b288b9ca3b")),jl=$(n("d5e365bb2abeb4feb8e33de518ff80fb8cb814c758ecdbacdd")),Xl=$(n("0a3efe2e7debbfd3770eb6506f8abbc67345af72299fd081")),Hl=$(n("7b094f5d8c446e00e619e7037e156a15e252fe213c7224b2")),zl=$(n("84f0f464fb2da5a9e9f0ac2ae94cb18cfd8ba538a95befdb")),(Wi=I.fa(b.j,function(){b.j.call(this,I.N(n("835deb126240271dea51e8507f2f61f7e36af8e3793d37e9f425f3fd312440f0")),!1),Ll.click(function(){n("73471a0f995ba65b49194d5ecf")}),Nl.click(function(){n("0270ab7c68e497ac3a2bfc2d")}),jl.click(function(){n("e614c7108488f3ccd84f80b1")}),Xl.click(function(){n("71819ccd9b95289f49dacb")}),Hl.click(function(){n("c8fa6572a26e51ace29422")}),zl.click(function(){n("b6241720d4b823fc8c7ab0")})})).prototype.C=function(){Wi.parent.prototype.C.call(this)},Wi.prototype.hb=function(){R.A(b.j.wb,200),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},Wi.prototype.da=function(){},Wi),b.Lm=(nc=$(n("5fb553e18bfd82be14fb06a88eb199bf0dcc14")),oc=$(n("d5e365bb35afbae8b8bc2cbd03a797e08ab84af40cac8ef0")),cc=$(n("ff153341ef51e412624a7a57e949f90a602e3ceafa23fdf574276bef")),dc=$(n("8b19bf4d632570e6f636e6ab753d6dfef422b0e5763c4de1")),hc=n("62115d3903814d95"),lc=n("273a50d2c23bc5cd4c0f43c7"),fc=n("59a8a2c7b4a233e320bc87dc80b703cb01b59fef"),(oi=I.fa(b.j,function(){b.j.call(this,I.N(n("41dbad10a0ce691f28d7ae52bdd13ff521ecbee1bbb379e43cabbfe9afbd71e400b0")),!0);var c=this;this.oh={},this.Oc={uh:{od:oc,Ah:hc},Do:{od:cc,Ah:lc},Go:{od:dc,Ah:fc}},oc.click(function(){c.cf(c.Oc.uh)}),cc.click(function(){c.cf(c.Oc.Do)}),dc.click(function(){c.cf(c.Oc.Go)})})).prototype.C=function(){oi.parent.prototype.C.call(this)},oi.prototype.hb=function(){R.g(b.j.wb,50),R.A(b.j.xb,200),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},oi.prototype.da=function(){var c=this,f=this.Pe(5e3),g=Jt+n("d2c6a6a3a612fa4ce8adf088bf0bc50391");I.vc(g,function(){c.oh={[hc]:[],[lc]:[],[fc]:[]},c.cf(c.qg??c.Oc.uh),f.dp()},function(m){c.oh=m,c.cf(c.qg??c.Oc.uh),f.dp()})},oi.prototype.cf=function(c){for(var f in this.qg=c,this.Oc)this.Oc.hasOwnProperty(f)&&this.Oc[f].od.removeClass(n("240514925b8a0f1f"));this.qg.od.addClass(n("36b78aac49389929")),c=this.oh[this.qg.Ah];for(var f="",g=0;g<c.length;g++){var m=c[g];f+='<div class="table-row"><span>'.concat(g+1,'</span><span><img src="').concat(m[n("9000a482e084a432ea05")],'"/></span><span>').concat(m[n("be3af334b0bde5b8a3")],n("3bc90e6d9ac2874133952b13f4bdec09088f3d5fa125e207")).concat(m[n("9ac739dbfb43")],n("a054d1b081c7a004d81884de9fb8cb4cf3f28262da20c5c2")).concat(m[n("dda636f7098180fb97b3")],n("f2268746d3b5fefa8a6ad228cdcae5a24160b47468b2fbdc")).concat(m[n("df78843307470d39936b")],n("f14741145054b10dcb5a")).concat(m[n("aad005d1c24c")],n("36e2cb8a1f79ba3e4eae6ef47116216605f23a9f2e327a787d9a"))}nc.empty(),nc.append(f)},oi),b.Zm=(Vl=$(n("7f95b3c173db7583f795e5956cd563d3e8a7")),$(n("89df398f7d91ffb5e12f7fab726ff9e5ff68")).remove(),(Yi=I.fa(b.j,function(){var c=this;b.j.call(this,I.N(n("1ba5736afaa88f7542b94038d7b7d96f5bf2407bc1959f4e5c835c48999cd848")),!1),Vl.click(function(){var f=c.Pe(1e4);I.ha(function(){E.m.up(function(){f.dp()})},500)})})).prototype.C=function(){Yi.parent.prototype.C.call(this)},Yi.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.A(b.j.Bb,200),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},Yi.prototype.da=function(){},Yi),b.Um=(Wl=$(n("57ad6bf9abfeb2a836fc04ff82e284a206ea")),Yl=$(n("29bf996fddec400658ced649c0d5521a57cbd609")),$l=$(n("dc082c9c90c34d558d59439a8dc15a5e9e544bd193a41f219537")),Kl=$(n("912721f76574f8aef0667ee17876efb5d37b46ba46738aaec876")),ql=$(n("64909404184bc5dd05d1cb121c24c4a618")),Zl=$(n("f70dcb590b5e1208965c645ff040e4022a50601de36fee117d25")),Ql=$(n("8074f0e0f4a7a931e135aff6ffa9af2bbd03b790e0b6a315ee00ac8af0b9b702c5")),Jl=$(n("cd9b7db321b0bce2bcaa32a52abebaf8f0a536fc0da1")),ef=$(n("047074e478ab253d65312bf263953317390d33867c9a3204681e")),tf=$(n("b420c4b4c8fb956dd5619ba2b3e56367e97267faadea5a77ad646bfb")),af=$(n("4034b0a034e7e9712175efb63fe9ef6b7d55fdd735c9c24e354cc9db39c3ea")),sf=$(n("3eea32e232216b332fbb6df4392f6d2963ad75863b10601737937186342f7d193b")),($i=I.fa(b.j,function(){b.j.call(this,I.N(n("0751671eee44a3196e2d74ace32be5f3676674eff539b3fe6d3f47fbcf318be2463a")),!0)})).prototype.C=function(){$i.parent.prototype.C.call(this)},$i.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.A(b.j.zb,200),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},$i.prototype.da=function(){var c=E.m.uo(),c=window.moment([c.year,c.month-1,c.day]).format(n("550a9b"));Yl.html(E.m.jj()),Wl.attr(n("8caebc3c"),E.m.qj()),$l.width(100*E.m.Rf()/E.m.Tf()+n("afc58317")),Kl.html(E.m.Rf()+n("0ebae291371192002497")+E.m.Tf()),ql.html(E.m.Qf()),Zl.html(E.m.Qn()),Ql.html(I.Ii(E.m.Wn())),Jl.html(E.m.$n()),ef.html(E.m.ho()),tf.html(E.m.mo()),af.html(I.Ii(E.m.qo())),sf.html(c)},$i),b.an=(tr=$(n("8074f0e0f7b0b223e137ada8a1b0bb2cf902ff86fa84b40bfd0df798eb84aa0cc8")),ar=$(n("9a8e6e9eed4a1445cbdd03c68b440e4187de02dccc5315259fb003acc22410")),ir=$(n("d4002494abcc6e5fb54379dccdc24a5c931848d685dc59169f4a47cb93a9")),rf=$(n("a6125a0adad41cc8de121c2ed5ac01b1")),nf=$(n("f6a28aba8a64cc788ea2acfe657cb1612bf4a7f77e7aa5736bed")),of=$(n("56c22ada2a046c182ec244940e1650104b964b9a050e4209")),cf=$(n("8074f0e0f4bab622f874aebee0b8ba3abd00b180fb90b813b50ab585e88cb701c503")),sr=$(n("e89c18089c525eca80ec452a802d52b599be172893234daa6ea5")),(ci=I.fa(b.j,function(){b.j.call(this,I.N(n("4eb67e85371b3a02378a7dc72a046c182ec14d940c060a0603835c90041c5f531a9e52")),!1);var c=this;tr.click(function(){var f=!!tr.prop(n("5d2db77582390670"));b.I.yb(b.I.Qi,f)}),ar.click(function(){var f=!!ar.prop(n("fa68d4689de4a5f5"));b.I.yb(b.I.Vi,f)}),ir.click(function(){}),rf.click(function(){c.Pe(500),E.m.Wh()}),of.click(function(){E.m.v&&E.h.J(E.h.Oi)}),sr.click(function(){E.vd()&&E.h.J(E.h.Gi)})})).prototype.C=function(){var c;ci.parent.prototype.C.call(this),c=b.I.ac(b.I.Qi)!==n("bf96a05e3091"),tr.prop(n("adfd470552c9d600"),c),c=b.I.ac(b.I.Vi)!==n("6a1d4d111d9a"),ar.prop(n("34e61e625b621fef"),c),c=b.I.ac(b.I.Ni)!==n("9fb6c07e50b1"),ir.prop(n("46b460bc29306939"),c),E.m.dk(function(){nf.toggle(E.m.v),cf.toggle(E.m.v)})},ci.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.A(b.j.Cb,200),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},ci.prototype.da=function(){E.vd()?sr.show():sr.hide()},ci.prototype.Ri=function(){return ir.prop(n("8cbea63af30ab787"))},ci),b.ln=(df=$(n("2a1ede0e5dcb9fb3576e822c53b0d5aa5b258a")),hf=$(n("1682ea9a6940b54333cb85c241418d4552de87d7074f89455a")),uc=$(n("81d73187769deed6a49d79d3788ea2a4f47170b67c76e3a1f66436b87876eb")),rr=$(n("cc383caca3d57d51b1087ac8bbc27f4ff14f7fdd")),bc=$(n("8abe7eaefd6b3f53f78e38caf54c3d4db7c93ddfb35b0549d6")),Ki=$(n("fdcb4d83f2866cc660dbe5cdf0d769c9798ae0ae")),lf=$(n("0f6523b1e030faf4726570fefe21b0fe6d3942f7")),nr=$(n("f6a28aba897fd37f9ba2a7e36d66b466")),ff=$(n("b420c4b4cbfd9579d92088e6a5e62f63b67070")),uf=$(n("d2c6a6d6a513f71bbfc6ea84bb188d1f878bd0")),(it=I.fa(b.j,function(){b.j.call(this,I.N(n("e13b0d70002ec97f88370e321d319f55814c1e411b13d95b9203155f531a9e52")),!0)})).prototype.ra=async function(){var c=this;this.Tc=null,this.Uc=[],this.Jk={},this.Ta=new b.Qg,await this.Ta.ra(df),Ki.click(function(){c.gp()}),ff.click(function(){c.Tc.mp()}),uf.click(function(){c.Tc.qp()})},it.prototype.C=function(){it.parent.prototype.C.call(this);var c=this;E.B.Eg(function(){var f=E.B.Ma.gb;c.Uc=[];for(var g=0;g<f[n("23a74e7fc99fdb755eac6c6cdd81c8665a8741")].length;g++)c.Uc.push(new bf(c,f[n("1092390a7a2224886d991b196e0c27ab499216")][g]));for(c.Jk={},g=0;g<f[n("0f337aebfd05e7f476315de3f838")].length;g++){var m=f[n("57fb32a3b5cdafbc3ee925bb80e0")][g];c.Jk[m[n("6850ce")]]=m}c.Xk()}),this.Cc(!1),E.u.yh(function(){c.Cc(!1)})},it.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.A(b.j.Db,200),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},it.prototype.da=function(){this.Xk(),this.Ta.sd(!0)},it.prototype.ee=function(){this.Ta.sd(!1)},it.prototype.na=function(){this.Ta.na()},it.prototype.Xa=function(){this.Ta.Xa()},it.prototype.Xk=function(){var c=this,f=this;nr.empty();for(var g=0;g<this.Uc.length;g++)(M=>{var B=c.Uc[M],k=(M=b.d.createElement(n("ebf084")),nr.append(M),M=$(M),B.Vb.img);k?M.html('<img src="'+k+'" height="40">'):M.html(B.Cp()),M.click(function(){f.ji(B)}),B.oi=M})(g);if(0<this.Uc.length){for(var g=E.u.qa(b.s.Y),m=0;m<this.Uc.length;m++)for(var x=this.Uc[m],S=x.Vb.list,w=0;w<S.length;w++)if(S[w]===g)return x.$c=w,void this.ji(x);this.ji(this.Uc[0])}},it.prototype.ji=function(c){this.Tc!==c&&(this.Tc=c,nr.children().removeClass(n("9011a086e796b303")),this.Tc.oi&&this.Tc.oi.addClass(n("8cadbc3ae312b787")),uc.html(""),c.Vb!=null&&(c=E.B.Ma.gb[n("67ec0ca29fd884bd1b")][c.Vb[n("87dcec8968ce648efba9fe6c")]])!=null&&uc.html(I.sm(I.se(c))),this.Cc(!0))},it.prototype.yi=function(){return this.Tc==null?b.Zc.Cg():this.Tc.Dg()},it.prototype.gp=function(){var c=this.yi();c.tf()&&this.Tl(c.Wb())},it.prototype.Tl=function(c){var f,g,m,x,S,w,M=E.u.hf(c,b.s.Y);M==null||(M=M.$e,E.m.Nd()<M)||(f=E.u.qa(b.s.Y),g=E.u.qa(b.s.va),m=E.u.qa(b.s.Ca),x=E.u.qa(b.s.Ea),S=E.u.qa(b.s.Da),w=this.Pe(5e3),E.m.Ik(c,b.s.Y,function(){w.dp(),E.h.J(E.h.pb)},function(){E.m.Eh(function(){E.u.ca(f,b.s.Y),E.u.ca(g,b.s.va),E.u.ca(m,b.s.Ca),E.u.ca(x,b.s.Ea),E.u.ca(S,b.s.Da),E.u.ca(c,b.s.Y),w.dp()})}))},it.prototype.Cc=function(c){var f,g,m=E.u.xh(),x=this.yi();x.tf()&&(x=x.Wb(),f=E.u.hf(x,b.s.Y),g=!1,E.u.zc(x,b.s.Y)?(rr.hide(),Ki.hide()):f==null||f.bf?(g=!0,rr.show(),Ki.hide(),bc.text(I.N(n("c0f86c77a16d28f0a9f46f35bc727eeaa08f7f46ba5038d4acc6684ef24171cc8bd446"))),f!=null&&f.bf&&(f=E.B.Ma.gb[n("b2b711bdc203112ace")][f.vk])!=null&&bc.text(I.se(f))):(rr.hide(),Ki.show(),lf.html(f.$e)),hf.html(n("1a6298082deec58312")+x),this.Ta.Dc(m.Zl(x)),this.Ta.io(g),c)&&E.u.ca(x,b.s.Y)},ts.prototype.mp=function(){--this.$c<0&&(this.$c=this.Vb.list.length-1),this.we.Cc(!0)},ts.prototype.qp=function(){++this.$c>=this.Vb.list.length&&(this.$c=0),this.we.Cc(!0)},ts.prototype.Cp=function(){return I.se(this.Vb.name)},ts.prototype.Dg=function(){return this.$c>=this.Vb.list.length?b.Zc.Cg():b.Zc.Di(this.Vb.list[this.$c])},bf=ts,it),b.un=(pf=$(n("e0941000974149c58d944d54c15e41d69eb21f21813142a896")),gf=$(n("71c7c197869218da1cc79cc3d09d14d9ef812ed67082f3d7e7")),mf=$(n("a37197a5542c46e8ce71caf1021754c3c149d7d3431c56c4")),(qi=I.fa(b.j,function(){b.j.call(this,I.N(n("f90315481816d157601fe61af519774d7954e659e30b213365ede121bbf2762a")),!0),pf.click(function(){E.h.J(E.h.zf)}),gf.click(function(){E.h.J(E.h.Pf)}),mf.click(function(){E.h.J(E.h.gh)})})).prototype.C=function(){qi.parent.prototype.C.call(this)},qi.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.A(b.j.Eb,200),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},qi.prototype.da=function(){},qi),b.An=(_f=$(n("8fe5a33164a17474babef06f6ce17e6ff1a6")),yf=$(n("2a1ede0e59da91b31f27913655b591b94e22932313bb65a936")),or=$(n("cafebeeeb93af113ff8ffb86bd02fc44b88aee")),pc=$(n("c2f6b6e6b132e92be7b7e3bea53af44cb082e6c8a202e01d")),Zi=$(n("acd8dc4cc7e49371996783fe95eb8f7fc86290")),xf=$(n("ddeb6da316b782e6c8bf13fd04f79bee84bd0a")),gc=$(n("be6ab262b5b6e5a7eb32f13cb9f6eea8ba2bff0f")),mc=$(n("a5b3156b5effca2e80f3401545cac049d7d3431c56c4")),_c=$(n("095fb90ffa1b6e323ce5ff25e6f5723b34e8ee38e9e171")),yc=$(n("778d4bd98cc99c9c52d8e08670996783f3cce694")),Qi=$(n("bb498f9d481520c0ee00acd833552ad2a413bedb3d")),vf=$(n("43d17705b09da848668a245bb82da1303672")),Tf=$(n("4fa563f1a4e1b4b47afe30afaca1b3ab27e4")),(ot=I.fa(b.j,function(){b.j.call(this,I.N(n("a33dcbf2422007fdca31c8b05f0f41d7c34ad8c3591d17ddde0dcf804b1123")),!0)})).prototype.ra=async function(){var c=this,f=this;this.Dd=[],this.va=new Ji(this,b.s.va,gc),this.Ca=new Ji(this,b.s.Ca,mc),this.Ea=new Ji(this,b.s.Ea,_c),this.Da=new Ji(this,b.s.Da,yc),this.dj=this.$i=this.Xi=this.Si=this.Pi=this.Xb=null,this.Ta=new b.Qg,await this.Ta.ra(_f),Zi.click(function(){f.Nm()}),vf.click(function(){f.Xb.Qm()}),Tf.click(function(){f.Xb.Vm()}),gc.click(function(){f.Je(c.va)}),mc.click(function(){f.Je(c.Ca)}),_c.click(function(){f.Je(c.Ea)}),yc.click(function(){f.Je(c.Da)}),this.Dd.push(this.va),this.Dd.push(this.Ca),this.Dd.push(this.Ea),this.Dd.push(this.Da)},ot.prototype.C=function(){ot.parent.prototype.C.call(this);var c=this;E.B.Eg(function(){var f=E.B.Ma.gb;c.Pi=f[n("b94f42894e6ad693b5")],c.Si=f[n("de02cf04969be09c8503")],c.Xi=f[n("1a4cb04c6ddc85c2665a8741")],c.$i=f[n("a0198387e09c8503")],c.dj=f[n("43972a5aa88a8d532888")],c.va.If(f[n("d92f22692e18be6288330d602424957990")]),c.va.Lf(c.Pi),c.Ca.If(f[n("a339cae353307ffbd935ccf05b2143d0d21d")]),c.Ca.Lf(c.Si),c.Ea.If(f[n("0a7ca07c7decb5d24442a64c77c9ace86859bd54")]),c.Ea.Lf(c.Xi),c.Da.If(f[n("4cf5ef6b0640e0ca35cbe2662a5bfbd2")]),c.Da.Lf(c.$i)}),this.Cc(!1),E.u.yh(function(){c.Cc(!1)})},ot.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.A(b.j.Fb,200),R.g(b.j.Ib,50),R.g(b.j.Kb,50)},ot.prototype.da=function(){this.Je(this.Xb??this.va),this.Ta.sd(!0)},ot.prototype.ee=function(){this.Ta.sd(!1)},ot.prototype.na=function(){this.Ta.na()},ot.prototype.Xa=function(){this.Ta.Xa()},ot.prototype.Je=function(c){for(this.Xb=c,c=0;c<this.Dd.length;c++)this.Dd[c].od.removeClass(n("6526957d9a290e78"));this.Xb.od.addClass(n("4ff023a7a0f7b0a2")),this.Xb.fb()},ot.prototype.xj=function(){return this.Xb==null?b.Zc.Cg():b.Zc.Di({T:this.Xb.Dg(),ua:this.Xb.ua})},ot.prototype.Nm=function(){var c=this.xj();c.tf()&&(c=c.Wb(),this.mn(c.T,c.ua))},ot.prototype.mn=function(c,f){var g,m,x,S,w,M,B=E.u.hf(c,f);B==null||(B=B.$e,E.m.Nd()<B)||(g=E.u.qa(b.s.Y),m=E.u.qa(b.s.va),x=E.u.qa(b.s.Ca),S=E.u.qa(b.s.Ea),w=E.u.qa(b.s.Da),M=this.Pe(5e3),E.m.Ik(c,f,function(){M.dp(),E.h.J(E.h.pb)},function(){E.m.Eh(function(){E.u.ca(g,b.s.Y),E.u.ca(m,b.s.va),E.u.ca(x,b.s.Ca),E.u.ca(S,b.s.Ea),E.u.ca(w,b.s.Da),E.u.ca(c,f),M.dp()})}))},ot.prototype.Cc=function(c){var f=E.u.xh();if((g=this.xj()).tf()){var g=g.Wb(),m=E.u.hf(g.T,g.ua),x=!1;switch(E.u.zc(g.T,g.ua)?(or.hide(),Zi.hide()):m==null||m.bf?(x=!0,or.show(),Zi.hide(),pc.text(I.N(n("8cb4a03bf519fc84f588b349e806aa9eecc3b30ace04cc80d09a941286158598c7988a"))),m!=null&&m.bf&&(m=E.B.Ma.gb[n("72f751fd0243516a0e")][m.vk])!=null&&pc.text(I.se(m))):(or.hide(),Zi.show(),xf.html(m.$e)),yf.html("ID: "+g.T+" TYPE: "+g.ua),m=this.Ta,g.ua){case b.s.va:m.Dc(f.fm(g.T)),m.ro(x);break;case b.s.Ca:m.Dc(f.lm(g.T)),m.vo(x);break;case b.s.Ea:m.Dc(f.vm(g.T)),m.Co(x);break;case b.s.Da:m.Dc(f.rm(g.T)),m.yo(x)}c&&E.u.ca(g.T,g.ua)}},ia.prototype.If=function(c){this.cb=c},ia.prototype.Lf=function(c){this.vf=c},ia.prototype.fb=function(){for(var c=E.u.qa(this.ua),f=0;f<this.cb.length;f++)for(var g=0;g<this.cb[f].length;g++)if(this.cb[f][g]===c)return this.Wf(f),void this.pe(g);this.Wf(0),this.pe(0)},ia.prototype.Qm=function(){var c=this.Td-1;c<0&&(c=this.cb.length-1),this.Wf(c),this.pe(this.Vf%this.cb[c].length)},ia.prototype.Vm=function(){var c=this.Td+1;c>=this.cb.length&&(c=0),this.Wf(c),this.pe(this.Vf%this.cb[c].length)},ia.prototype.Wf=function(c){var f=this;if(!(c<0||c>=this.cb.length)){this.Td=c,Qi.empty();var g=this.cb[this.Td];if(1<g.length)for(c=0;c<g.length;c++)(m=>{var x=f.vf[g[m]],x=n("c11771c7")+f.we.dj[x[n("56976a80370e")]];(x=$('<div style="border-color:'+x+'"></div>')).click(function(){f.pe(m)}),Qi.append(x)})(c)}},ia.prototype.pe=function(c){c<0||c>=this.cb[this.Td].length||(this.Vf=c,Qi.children().css(n("b46797e4d3ee8864c9639aa2a3fe6e7cb6"),n("0f3463e3fd37e5e7652d77fe")),(c=Qi.children(n("6d7bdc619f161b09160e9e449d42")+(1+c)+n("318b"))).css(n("9ac93dcef548125ed7dd0098c5580456d8"),c.css(n("d0c37d51b040648abbc67644ae"))),this.we.Cc(!0))},ia.prototype.Dg=function(){return this.cb[this.Td][this.Vf]},Ji=ia,ot),b.jm=(Sf=$(n("2a1ede0e59d684a9563195321ba497a7492e923913b665a2")),wf=$(n("706480f003acc22f1c3bdbbc51aed121f334aca7a9bba9")),(es=I.fa(b.j,function(){b.j.call(this,I.N(n("5ff90fb686eccbb106f50cf49bf39dab1f8e1c879dd1db8518c60a8f95d8d39a1ed2")),!1),Sf.click(function(){E.vd()?(E.h.J(E.h.oa),E.jh(!1,!0),E.h.Lc.Hg(new b.lh)):E.h.ge()}),wf.click(function(){E.h.ge()})})).prototype.C=function(){es.parent.prototype.C.call(this)},es.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.A(b.j.Ib,200),R.g(b.j.Kb,50)},es.prototype.da=function(){},es),b.um=(lt=$(n("302440b050e01a624c6c57ea5fee117a2e65afe72df8e365")),cr=$(n("f70dcb591f49110b8b552c13e057ea03694c2403ee4f")),Af=$(n("6a5e1e4e0a9a5c6406e619e41564577c14ff11e311")),(Da=I.fa(b.j,function(){b.j.call(this,I.N(n("4fe93fa6b6fcfba136e53ce4abe3adbb2fbe0cb78de1cbb202f40cae8eb299bf0d")),!1),cr.click(function(){E.m.v?(E.m.Dl(),E.m.Wh()):E.h.ge()}),Af.click(function(){E.h.ge()}),this.$f=[]})).prototype.C=function(){Da.parent.prototype.C.call(this)},Da.prototype.hb=function(){R.g(b.j.wb,50),R.g(b.j.xb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Ib,50),R.A(b.j.Kb,200)},Da.prototype.da=function(){R.g(cr,1),R.A(lt,1),lt.text(n("5b22736bed20d06246265578c9")),this.Yn(),this.dq(function(){lt.text(n("807fecf6b6e5ff72ba69e4f5"))},1e3),this.dq(function(){lt.text(n("cd9061a563f2eba1e7f679a6"))},2e3),this.dq(function(){lt.text(n("f46b18e2caf90d6ece7d10e1"))},3e3),this.dq(function(){lt.text(n("c679a67cf8ebbaf8fc6fbe4f"))},4e3),this.dq(function(){lt.text(n("1c4370ca12c15756164548d9"))},5e3),this.dq(function(){lt.text(n("8ab562b8bc2f6404a0937a8b"))},6e3),this.dq(function(){lt.text(n("398495498f9e0c557382ed5a"))},7e3),this.dq(function(){lt.text(n("d16c7d216776e52deb7a7522"))},8e3),this.dq(function(){lt.text(n("fc6310ea32e17376366568f9"))},9e3),this.dq(function(){R.A(cr,300),R.g(lt,1)},1e4)},Da.prototype.dq=function(c,f){c=I.ha(c,f),this.$f.push(c)},Da.prototype.Yn=function(){for(var c=0;c<this.$f.length;c++)I.am(this.$f[c]);this.$f=[]},Da),b.be=(vc.prototype.jd=function(){},vc.prototype.da=function(){},vc),b.Wo=((Q=I.fa(b.be,function(c){b.be.call(this);var f=I.Ob()+n("915d")+Math.floor(1e3+8999*Math.random()),g=(this.Pc=$('<div id="'.concat(f,'" class="toaster toaster-coins"><img class="toaster-coins-img" alt="Wormate Coin" src="/images/coin_320.png" /><div class="toaster-coins-val">').concat(c,'</div><div class="toaster-coins-close">').concat(I.N(n("899365d86886a1a7f06f76ea6169f6bbed6f69e27e61f1a4c87c56b1")),n("277d1ad98e6eebfa46161491f64186e5125a7fced21a989d7a"))),this);this.Pc.find(n("1d20ebbfc06157b1573bc4b7c07458f14e72c093d4")).click(function(){g.Ae()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){},Q),b.Ro=((Q=I.fa(b.be,function(c){b.be.call(this);var f=I.Ob()+n("afbf")+Math.floor(1e3+8999*Math.random()),g=(this.Pc=$('<div id="'.concat(f,'" class="toaster toaster-levelup"><img class="toaster-levelup-img" alt="Wormate Level Up Star" src="/images/level-star.svg" /><div class="toaster-levelup-val">').concat(c,'</div><div class="toaster-levelup-text">').concat(I.N(n("b14b5d80505e998fd8475ec24941de83b55731da2953b19da54f3b")),'</div><div class="toaster-levelup-close">').concat(I.N(n("bdc7511424caed13a4db22563dd5aa0fb9db3dae32adbdf0bca822ed")),n("0c787d9c35d314077d1373d45dcc6928395f188b4987474061"))),this);this.Pc.find(n("5d60ab7f80211771177b8b7d9f3f07691d738c4c9e1116")).click(function(){g.Ae()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){},Q),b.lh=((Q=I.fa(b.be,function(){b.be.call(this);var c=this,f=I.Ob()+n("ce00")+Math.floor(1e3+8999*Math.random());this.Pc=$('<div id="'+f+'" class="toaster toaster-consent-accepted">    <img class="toaster-consent-accepted-logo" src="'+_5+'" alt="Wormate.io logo"/>    <div class="toaster-consent-accepted-container">        <span class="toaster-consent-accepted-text">'+I.N(n("637d0b328260c73d0a7108709b4f901107410748944797191e4209408b557906")).replaceAll(n("4197f144"),n("5b296f78b1729222462727")).replaceAll("",n("f0e40100963713f5beec090e"))+n("9cc8ed2c8543a480d49488529b3c")+'        <a class="toaster-consent-accepted-link" href="/privacy-policy">'+I.N(n("54ccf8433d51b4cc3dc0fb01145ec3c010d0d4190b56c4c809d3da111c28dca8"))+n("e97f585f486ca941d45136")+n("855335082c48bb19bf4e2a7221a7a007b0b4512c70fcbe7fd8")+'    <div class="toaster-consent-close">'+I.N(n("2a5282594bc7dea6532e916b42a899ba4e2e8e635da06ea2273d707b2f966bba2f2b78"))+n("8553347b2c48cd58e4082a7354")+n("d16760477074916cb03c7e3f18")),this.vh=this.Pc.find(n("d40b62c8b9da6e4eae007dc08ec2475d901845db87ca4f")),this.vh.hide(),this.vh.click(function(){E.vd()&&E.jh(!0,!0),c.Ae()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){var c=this;E.vd()&&!E.Kf()?I.ha(function(){c.vh.fadeIn(300)},2e3):I.ha(function(){c.Ae()},0)},Q),b.fo=(Ef=$(n("fb89cfdd1ac2f39d71996297f3ddfe9b72916e91e1aef46167ad7a68babafc7e69b5")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld),Ef.click(function(){E.h.Hc.Rk(),E.h.J(E.h.Hc),I.ha(function(){var c=Jt+n("277d1bdcdb29cfbb1d2659c7d208c1ce74005cc9d0498fe84f192fd5");I.vc(c,function(){E.h.J(E.h.pb)},function(){E.h.Hc.bp(),E.B.Kh(function(){E.h.J(E.h.oa)},function(){E.h.J(E.h.pb)},function(f,g){E.h.Hc.nf(f,g)})})},2e3)})})).prototype.C=function(){},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.A(b.i.sc,500),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.po=(Pf=$(n("4197f147a0c435173b97ac1da0db62e33eacbde1b6b23ee737e7a9e9a9bc26")),(Q=I.fa(b.i,function(){b.i.call(this,b.eb.ld),Pf.click(function(){E.h.J(E.h.oa)})})).prototype.C=function(){},Q.prototype.fb=function(){R.A(b.i.Zb,500),R.A(b.i.bc,1),R.g(b.i.cc,50),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.Hb,50),R.g(b.i.mc,50),R.g(b.i.Ub,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.A(b.i.tc,500)},Q.prototype.da=function(){},Q),I.Ao=function(){return(c={jk:!1}).mk=I.Ob(),c.fe=0,c.Mh=0,c.he=null,c.Zp=Il,c.$p=Zs,c.l=null,c.B=null,c.Se=null,c.qk=null,c.h=null,c.u=null,c.m=null,c.C=async function(){c.l=new b.Yo,c.l.lf=new b.vp(c.l),c.B=new b.La,await c.B.ra(),c.Se=new b.tl,await c.Se.ra(),c.qk=new b.zm,c.h=new b.Fl,await c.h.ra(),c.u=new b.tn,c.m=new b.tp,c.l.Pk=function(){c.h.J(c.h.Yj)},c.l.Sk=function(){c.h.oa.Bi(),c.h.J(c.h.D.af())},c.l.Wk=function(){var f,g;$(n("1241bb416f"))[n("37005cc3dc04c9")](),c.B.Kh(null,null,null),f=Math.floor(c.l.U.Qb),g=c.l.tg,c.m.v?c.m.Eh(function(){c.bl(f,g)}):c.bl(f,g)},c.l.el=function(f){f(c.h.D.wc,c.h.D.Mb)},c.m.dk(function(){var f=c.h.pp();f!=null&&f.ua===b.eb.ff&&c.h.J(c.h.oa),c.m.v&&c.m.Og(),c.vd()&&c.m.v&&!c.m.Kf()?(c.jh(!1,!1),c.h.Lc.Hg(new b.lh)):c.ki(!0)}),c.l.C(),c.h.C(),c.u.C(),c.B.C(),c.h.oa.Hl(),c.h.J(c.h.oa),c.Se.C(function(){c.qk.C(),c.m.C(),c.B.Kh(function(){c.h.oa.vi(),c.h.J(c.h.oa)},function(){c.h.oa.vi(),c.h.J(c.h.pb)},function(f,g){c.h.Hc.nf(f,g),c.h.oa.nf(f,g)}),c.vd()&&!c.Kf()?c.h.Lc.Hg(new b.lh):c.ki(!0)})},c.wl=function(f){var g;c.m.v&&(g=c.m.Yc,f=Jt+n("302440c544f014220a4f0dfe55e95b3d06")+g+n("a29656f3c558064acfd518989c791329d3ad13a0")+n("0a3eff5b78febcd47706e761")+encodeURIComponent(f),I.vc(f,function(){},function(){}))},c.ei=function(){c.zi()},c.zi=function(f,g){var m,x,S;ua(1),c.l.Nl()&&(c.h.Hc.Rk(),c.h.J(c.h.Hc),m=c.h.oa.Bi(),b.I.yb(b.I.bj,m),x=c.h.yf.Ri(),b.I.yb(b.I.Ni,x),x=0,c.he!=null&&(x=c.he[n("29f9c433dffa5c")][n("29f6ca28c4ea5a0454")],S=c.he[n("b0e29d6cc66185")][n("e8d545558b545aca94a4")],x=Math.max(0,Math.min(32767,(x+90)/180*32768))<<1|1|Math.max(0,Math.min(65535,(S+180)/360*65536))<<16),c.m.v?(O.fg=g,c.Ul(m,x,f)):(f=c.h.oa.Id(),b.I.yb(b.I.ej,f),b.I.yb(b.I.hj,c.u.qa(b.s.Y)),c.$l(m,x)))},Di=function(f,g){c.zi(f,g)},c.Ul=function(f,g,m=null){var x=c.m.Yc,N=c.h.oa.Id(),S=(O.pk=N,c.u.qa(b.s.Y)),w=c.u.qa(b.s.va),M=c.u.qa(b.s.Ca),B=c.u.qa(b.s.Ea),k=c.u.qa(b.s.Da),N=N.substring(0,24);N=(N=(N=(N=(N=(N=(N+="\uFFFF")+String.fromCharCode(S))+String.fromCharCode(k))+String.fromCharCode(w))+String.fromCharCode(M))+String.fromCharCode(B))+String.fromCharCode(L["1y"]),O.Yi(0),O.Ui(0),f=Jt+n("61f7d1d295a305bd5b9c9ce984ba4a9237")+x+n("9e0a5277d1c705c7d2")+n("b2e64783d126152cf7a418a89b7cc4")+encodeURIComponent(f)+n("b2e646f3d12f5d7afe")+g+n("bc28ccb9aef86178aa746bf2edaa4e")+encodeURIComponent(N)+n("2692da8f5950855367dbd5f276")+encodeURIComponent(S)+n("46f23aef2f22692e07bb35d216")+encodeURIComponent(w)+n("4034b0a529faf3632050eebe7fd9")+encodeURIComponent(M)+n("8abe7eabe9733152e1c627ecf2026b6d")+encodeURIComponent(B)+n("8fe5a3347ba5614ff3edaa4e")+encodeURIComponent(k),I.vc(f,function(){c.h.J(c.h.pb)},function(X){X[n("cab8e3b9ab")]===1460?c.h.J(c.h.Ag):X[n("64d6c9530d")]!==1200?c.h.J(c.h.pb):(O.rh=!0,O.He=m||X[n("4b8f284cb965a31d267639")],c.l.gm(O.He,x))})},c.$l=function(f,g){var m=c.h.oa.Id(),x=c.u.qa(b.s.Y);f=Jt+n("071d3b3cfb49ef5b3d0666f7fa20b0b451")+n("fbcb888b0cc4")+n("8fe5a34460b07474e3")+n("4fa56284b4e5b8a31ae73daffebf99")+encodeURIComponent(f)+n("277d1baccc3488ad6b")+g+n("e97f592a03378c4b9f031e415055b3")+encodeURIComponent(m)+n("6c989c09032adbad3da193743c")+encodeURIComponent(x),I.vc(f,function(){c.h.J(c.h.pb)},function(S){S[n("f1011c4010")]===1460?c.h.J(c.h.Ag):S[n("97abf66e7e")]!==1200?c.h.J(c.h.pb):(S=S[n("e76b8c281d791f019a529d")],c.l.mm(S,m,x))})},c.bl=function(f,g){var m=c.h.oa.Id();c.h.D.Jo(f,g,m),c.h.J(c.h.D.Hh())},c.vl=function(){var f;return c.Bg()&&(f=parseInt(b.I.ac(b.I.hj)))!=null&&c.u.zc(f,b.s.Y)?f:c.u.lk()},c.Sl=function(){b.I.yb(b.I.oj,n("ee0bc2f497"))},c.Bg=function(){return b.I.ac(b.I.oj)===n("a2c716c0c3")},c.ki=function(f){f!==c.jk&&(c.jk=f,n("e93904721e3b81549406"),n("172f7dfae90ff2e06c354fe6"))},c.jh=function(f,g){b.I.yb(b.I.Ki,n(f?"0eeba2d477":"2ed991ad4126")),g&&c.wl(f),c.ki(f)},c.Kf=function(){return b.I.ac(b.I.Ki)===n("d0d56056b1")},c.vd=function(){try{return!!b.nc[n("9de76c1971dbcd11e0d7")]||c.he!=null&&!!x5.jn(c.he[n("9c8eb100d21591")][n("4fec30b6baf0a0a232")],c.he[n("03d76a99f5dcfa")][n("0bd06290e8a9e57777a1")])}catch{return!0}},c.Xa=function(){c.fe=I.Ob(),c.Mh=c.fe-c.mk,c.l.Oe(c.fe,c.Mh),c.h.Oe(c.fe,c.Mh),c.mk=c.fe},c.na=function(){c.h.na()},c;var c},b.Yo=function(){n("97bdea6f3efe2d7deba2c87157");var c={Hm:30,fd:new Float32Array(100),kj:0,Ge:0,Ke:0,hd:0,Ld:0,gn:0,Ka:0,Ba:null,Aj:300,Sk:function(){},Wk:function(){},el:function(){},Pk:function(){},K:new b.ce,lf:null,U:null,Wc:{},tb:{},uk:12.5,Jd:40,Ne:1,Dj:-1,Ej:1,ni:1,Jj:-1,Mj:-1,Oj:1,Tj:1,Wj:-1,tg:500,gk:500};return c.K.Rc=500,c.U=new b.Uf(c.K),c.C=function(){c.U.Sj(E.h.D.H),setInterval(function(){var f;L["1y"]!=0&&O.bb&&O.bb.readyState===WebSocket.OPEN&&1e3<(f=performance.now())-O.Bj&&(O.Bj=f,O.bb.send(qs(JSON.stringify({[n("8517")]:1,[n("7caf")]:c.U.ia[0],[n("23b7")]:c.U.ia[1],[n("fa6f")]:c.U.K.Rc})))),c.el(function(g,m){c.no(g,m)})},10)},c.dn=function(f,g,m,x){c.Dj=f,c.Ej=g,c.ni=m,c.Jj=x,c.$j()},c.wo=function(f){c.Ne=f,c.$j()},c.$j=function(){c.Mj=c.Dj-c.Ne,c.Oj=c.Ej+c.Ne,c.Tj=c.ni-c.Ne,c.Wj=c.Jj+c.Ne},c.Oe=function(f,g){c.Ke+=g,c.Ge-=.2*c.kj*g,c.lf.Cl(),c.Ba==null||c.Ka!==2&&c.Ka!==3||(c.Bo(f,g),c.Jd=4+c.uk*c.U.vb),f=1e3/Math.max(1,g);for(var m=g=0;m<c.fd.length-1;m++)g+=c.fd[m],c.fd[m]=c.fd[m+1];c.fd[c.fd.length-1]=f,c.Hm=(g+f)/c.fd.length},c.mg=function(f,g){return c.Mj<f&&f<c.Oj&&c.Tj<g&&g<c.Wj},c.Bo=function(f,g){var m,x,S=(c.Ke+c.Ge-c.hd)/(c.Ld-c.hd),w=(c.U.Jf(f,g),c.U.Of(f,g,S,c.mg),0);for(m in c.tb){var M=c.tb[m];M.Jf(f,g),M.Of(f,g,S,c.mg),M.qb&&M.vb>w&&(w=M.vb),M.md||!(M.Va<.005)&&M.qb||(M.Te(),delete c.tb[M.S.T])}for(x in c.wo(3*w),c.Wc)S=c.Wc[x],S.Jf(f,g),S.Of(f,g,c.mg),S.ci&&(S.Va<.005||!c.mg(S.Gg,S.Ig))&&(S.Te(),delete c.Wc[S.S.T])},c.sn=function(f,g){c.Ka===1&&(c.Ka=2,c.Sk());var m=E.fe;(c.gn=f)===0?(c.hd=m-95,c.Ld=m,c.Ke=c.hd,c.Ge=0):(c.hd=c.Ld,c.Ld+=g),c.kj=(c.Ke+c.Ge-c.hd)/(c.Ld-c.hd)},c.Ap=function(){var f;c.Ka!==1&&c.Ka!==2||(c.Ka=3,f=c.Ba,I.ha(function(){c.Ka===3&&(c.Ka=0),f!=null&&f===c.Ba&&(c.Ba[n("c1512f9b3653")](),c.Ba=null)},5e3),c.Wk())},c.Nl=function(){return c.Ka=1,c.lf.ri(),c.Wc={},c.tb={},c.U.si(),c.Ba!=null&&(c.Ba[n("3cee12603374")](),c.Ba=null),!0},c.Ch=function(){c.Ba=null,c.lf.ri(),c.Ka!==3&&c.Pk(),c.Ka=0},c.gm=function(f,g){c.nk(f,function(){var m=Math.min(2048,g.length),x=new b.Oh(6+2*m),S=new b.bi(new b.rg(x));S.ne(129),S.oe(2800),S.ne(1),S.oe(m);for(var w=0;w<m;w++)S.oe(g.charCodeAt(w));c.Ih(x)})},c.mm=function(f,g,m){c.nk(f,function(){var x=Math.min(32,g.length),S=new b.Oh(7+2*x),w=new b.bi(new b.rg(S));w.ne(129),w.oe(2800),w.ne(0),w.oe(m),w.ne(x);for(var M=0;M<x;M++)w.oe(g.charCodeAt(M));c.Ih(S)})},c.Ih=function(f){try{c.Ba!=null&&c.Ba.readyState===WebSocket.OPEN&&c.Ba.send(f)}catch{c.Ch()}},c.no=function(f,g){f=255&((g?128:0)|I.Dm(f)/6.283185307179586*128&127),c.Aj!==f&&(g=new b.Oh(1),new b.bi(new b.rg(g)).ne(f),c.Ih(g),c.Aj=f)},c.nk=function(f,g){O.bb=new WebSocket(O.Im+qs(JSON.stringify({[n("d769")]:f,[n("b948")]:O.Ad,[n("9ded")]:O.pk,[n("d603")]:L["1y"],[n("54c0")]:1}))),O.bb[n("a17d4dbb5573c9")]=function(){this.fi=setInterval(()=>{this.send(n("1f60"))},1e4)},O.bb[n("59a5b5efb1a12cf5")]=function(){this.fi&&(clearInterval(this.fi),this.fi=0),this===O.bb&&(O.bb=null)},O.bb[n("e9350571082d9c419607")]=function(S){try{var w=JSON.parse(n(S.data));if(w[n("b0e0")]===0&&(Ja.Af(w[n("2c1f")]),ei.Af(w[n("c317")])),w[n("996b")]===1){let ue=w.b;ue==3333&&0<O.bd.length&&(ue=O.bd[Math.floor(Math.random()*O.bd.length)]),O.bd.includes(ue)&&E.l.U.Ga.Dk(ue)}if(w[n("9fb1")]===2&&je.ad(),w[n("ef41")]===3){var M=w[n("0c3e")];if(M){O.Ji=M;var B=w[n("6cdf")];if(B){try{delete B[O.Ji]}catch{}for(var k in O.ic){var N,X,z,Y=B[k],W=O.ic[k];Y?(N=Y[n("1242")],X=Y[n("075a")],z=Y[n("d446")],W.position.x=N/z*E.h.D.H.aa.Ja,W.position.y=X/z*E.h.D.H.aa.Ja):(E.h.D.H.aa.removeChild(W),delete O.ic[k])}for(var pe in B){var oe,Re,At,ze,ge=B[pe];O.ic[pe]||(oe=ge[n("091b")],Re=ge[n("0594")],At=ge[n("46b4")],O.ic[pe]=new Ye,(ze=O.ic[pe])[n("3cf737612474fa")]=1,ze[n("5b6d313eb771")]=.9,ze.clear(),ze.circle(0,0,.08*E.h.D.H.aa.Ja),ze.stroke({width:2,color:0}),ze.fill(65280),ze.position.x=oe/At*E.h.D.H.aa.Ja,ze.position.y=Re/At*E.h.D.H.aa.Ja,E.h.D.H.aa.addChild(ze))}}}}}catch{}};var m=c.Ba=new WebSocket(f);let x=O.bb;m[n("bc6f97e1a1e37b47bd6563")]=n("6537956a882309690b388a52"),m[n("e13d0d7b153389")]=function(){for(var S in O.Xf=!0,O.ic)E.h.D.H.aa.removeChild(O.ic[S]),delete O.ic[S];c.Ba===m&&g()},m[n("41ddad17a9d9341d")]=function(){new Date>O.Yk&&location.reload(),O.Xf=!1,x&&x.close(),c.Ba===m&&c.Ch()},m[n("9b23f3eb6d224ee0")]=function(){O.Xf=!1,c.Ba===m&&c.Ch()},m[n("28960416490e1d9e5764")]=function(S){c.Ba===m&&c.lf.rl(S.data)}},c},window.addEventListener(n("20920d1d50101e83459c040e"),function(c){return c.preventDefault(),c.stopPropagation(),!1}),I.Ti(n("2bf91f588ad2f743438d4608d087d64d5789134dd09de400059e3613f5bea84a22d97e7fac6cb8273d707b2ca4"),null,function(){window.gapi[n("354ad889dd")](n("9808af9ff4df"),function(){var c=window.gapi[n("44f4f363202b")],f=c[n("0f297febe7")],g={};g[n("685ac6d209d3da601925")]=n("763e0d304eb909bc473d7122babe35fff7257b75b3fe7cf2e6273c46f6913dc6f845345bf8cd3ec1ff5d545090d54ad4d6471b17cdd403dac25a0532d7b117aad8331d27cee51fa2d3"),vt=f.call(c,g)})}),I.Ti(n("edfb5de654d0b5c5858f04861e8594cb918b51d3ee9f2686439cf49dbbbc7bd06c8ae9afe36f3dae66")),await(E=I.Ao()).C(),function c(){requestAnimationFrame(c),E.Xa()}(),xc=$(n("b1405c804c")),Ta=$(n("11a7a177e6f2652d6de9f361ffe167")),Rf=$(n("f6a28aba976ace668bffedf96772a07074")),Mf=$(n("095fb90fe01f7d2b64f2be22fae9632d6b")),Of(),$(b.nc)[n("13b67075feb2fc")](Of)});})();
